mtgedh> [Resolution] Priority management handler initialized
Restarting 'src/index.ts'
[Server] Initializing database...
[Server] Database initialized successfully.
[SCRYFALL] No planeswalker cache clearing needed (0 planeswalkers in cache, all have loyalty field)
[Socket] GameManager configured with IO server for rules engine integration
[Resolution] AI handler initialized
[Server] Running at http://127.0.0.1:3001
[CLI] Detected Windows PowerShell. If CLI commands are not working correctly,
[CLI] try using cmd.exe, Windows Terminal, or Git Bash instead.

ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ
  MTGEDH Server CLI - Type "help" for available commands
ΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉ

mtgedh> [Resolution] Priority management handler initialized
Socket connected: JFvvrrECtLz4iG1nAAAB
[GameManager] Ensured game game_mjwlj872 using full rules engine (createInitialGameState)
[importDeckResolved] Importing 100 cards for player p_29g0kuja
[importDeckResolved] Mapped 100 cards. First card: Iroas, God of Victory (card_b4036bb7-835d-4690-aca1-1ab566776e9a_1e940b6eba16a4f2)
[importDeckResolved] Library set for player p_29g0kuja. Final library size: 100
[importDeckResolved] Importing 100 cards for player p_v2fmqdar
[importDeckResolved] Mapped 100 cards. First card: Omnath, Locus of Mana (card_acf0cab3-da50-4561-8797-cd179af39216_013d171def2a2954)
[importDeckResolved] Library set for player p_v2fmqdar. Final library size: 100
[setCommander] Initialized inCommandZone for p_29g0kuja: [ 'card_b4036bb7-835d-4690-aca1-1ab566776e9a_1e940b6eba16a4f2' ]
[setCommander] Library size before commander removal: 100, Commander IDs to remove: [ 'card_b4036bb7-835d-4690-aca1-1ab566776e9a_1e940b6eba16a4f2' ]
[setCommander] Found commander "Iroas, God of Victory" (card_b4036bb7-835d-4690-aca1-1ab566776e9a_1e940b6eba16a4f2) in library at index 0
[setCommander] Removing 1 commander(s) from library at indices: [ 0 ] library size before: 100
[setCommander] Removed card at index 0: Iroas, God of Victory (card_b4036bb7-835d-4690-aca1-1ab566776e9a_1e940b6eba16a4f2)
[setCommander] Library size after removal: 99
[setCommander] Updated zones[p_29g0kuja].libraryCount to 99
[setCommander] Initialized inCommandZone for p_v2fmqdar: [ 'card_acf0cab3-da50-4561-8797-cd179af39216_013d171def2a2954' ]
[setCommander] Library size before commander removal: 100, Commander IDs to remove: [ 'card_acf0cab3-da50-4561-8797-cd179af39216_013d171def2a2954' ]
[setCommander] Found commander "Omnath, Locus of Mana" (card_acf0cab3-da50-4561-8797-cd179af39216_013d171def2a2954) in library at index 0
[setCommander] Removing 1 commander(s) from library at indices: [ 0 ] library size before: 100
[setCommander] Removed card at index 0: Omnath, Locus of Mana (card_acf0cab3-da50-4561-8797-cd179af39216_013d171def2a2954)
[setCommander] Library size after removal: 99
[setCommander] Updated zones[p_v2fmqdar].libraryCount to 99
[importDeckResolved] Importing 30 cards for player p_12xlk2pp
[importDeckResolved] Mapped 30 cards. First card: Brimaz, King of Oreskos (f54eb705-6326-4bac-bf0e-68d42db7a270_mjwljjhf_1_2715c332)
[importDeckResolved] Library set for player p_12xlk2pp. Final library size: 30
[setCommander] Initialized inCommandZone for p_12xlk2pp: [ 'f54eb705-6326-4bac-bf0e-68d42db7a270_mjwljjhf_1_2715c332' ]
[setCommander] Library size before commander removal: 30, Commander IDs to remove: [ 'f54eb705-6326-4bac-bf0e-68d42db7a270_mjwljjhf_1_2715c332' ]
[setCommander] Found commander "Brimaz, King of Oreskos" (f54eb705-6326-4bac-bf0e-68d42db7a270_mjwljjhf_1_2715c332) in library at index 0
[setCommander] Removing 1 commander(s) from library at indices: [ 0 ] library size before: 30
[setCommander] Removed card at index 0: Brimaz, King of Oreskos (f54eb705-6326-4bac-bf0e-68d42db7a270_mjwljjhf_1_2715c332)
[setCommander] Library size after removal: 29
[setCommander] Updated zones[p_12xlk2pp].libraryCount to 29
2026-01-02T08:17:22.575Z [nextTurn] Advanced to player p_29g0kuja, phase=beginning, step=UPKEEP
2026-01-02T08:17:22.575Z [nextTurn] Checking if auto-pass should apply at upkeep
[priority] autoPassLoop starting - active players: p_12xlk2pp, p_29g0kuja, p_v2fmqdar, autoPassEnabled: , currentPriority: p_29g0kuja, turnPlayer: p_29g0kuja
[priority] autoPassLoop - stopping at p_29g0kuja: auto-pass not enabled
2026-01-02T08:17:22.575Z [nextTurn] Auto-pass stopped at upkeep, player p_29g0kuja has priority
[calculateMaxLandsPerTurn] Calculating for player p_12xlk2pp, battlefield has 0 permanents
[calculateMaxLandsPerTurn] Final result for p_12xlk2pp: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_29g0kuja, battlefield has 0 permanents
[calculateMaxLandsPerTurn] Final result for p_29g0kuja: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_v2fmqdar, battlefield has 0 permanents
[calculateMaxLandsPerTurn] Final result for p_v2fmqdar: 1 lands per turn
[recalculateHandVisibility] Players with hand reveal effects: none
[calculateMaxLandsPerTurn] Calculating for player p_12xlk2pp, battlefield has 1 permanents
[calculateMaxLandsPerTurn] Final result for p_12xlk2pp: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_29g0kuja, battlefield has 1 permanents
[calculateMaxLandsPerTurn] Final result for p_29g0kuja: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_v2fmqdar, battlefield has 1 permanents
[calculateMaxLandsPerTurn] Final result for p_v2fmqdar: 1 lands per turn
[recalculateHandVisibility] Players with hand reveal effects: none
2026-01-02T08:17:22.590Z [nextStep] ========== CALLED ==========
2026-01-02T08:17:22.590Z [nextStep] Game: game_mjwlj872
2026-01-02T08:17:22.590Z [nextStep] Current: beginning/UPKEEP
2026-01-02T08:17:22.590Z [nextStep] Priority: p_v2fmqdar, Turn: p_29g0kuja
2026-01-02T08:17:22.590Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T08:17:22.590Z [nextStep] Advanced to phase=beginning, step=DRAW
playLand: card card_a0e2098f-1d94-491a-a7e9-a45a9f69e3a8_0af98b36f800be39 not found in hand for player p_v2fmqdar (may be replay)
2026-01-02T08:17:22.590Z [nextStep] ========== CALLED ==========
2026-01-02T08:17:22.590Z [nextStep] Game: game_mjwlj872
2026-01-02T08:17:22.590Z [nextStep] Current: beginning/DRAW
2026-01-02T08:17:22.590Z [nextStep] Priority: p_12xlk2pp, Turn: p_29g0kuja
2026-01-02T08:17:22.590Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T08:17:22.590Z [clearManaPool] Processed mana pools for all players
2026-01-02T08:17:22.591Z [nextStep] Advanced to phase=precombatMain, step=MAIN1
playLand: card card_65e4de2e-47d2-4967-be31-9df0057a9c74_52123bcd8d024662 not found in hand for player p_29g0kuja (may be replay)
2026-01-02T08:17:22.591Z [nextStep] ========== CALLED ==========
2026-01-02T08:17:22.591Z [nextStep] Game: game_mjwlj872
2026-01-02T08:17:22.591Z [nextStep] Current: precombatMain/MAIN1
2026-01-02T08:17:22.591Z [nextStep] Priority: p_12xlk2pp, Turn: p_29g0kuja
2026-01-02T08:17:22.591Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T08:17:22.591Z [clearManaPool] Processed mana pools for all players
2026-01-02T08:17:22.591Z [nextStep] Advanced to phase=combat, step=BEGIN_COMBAT
[calculateMaxLandsPerTurn] Calculating for player p_12xlk2pp, battlefield has 2 permanents
[calculateMaxLandsPerTurn] Final result for p_12xlk2pp: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_29g0kuja, battlefield has 2 permanents
[calculateMaxLandsPerTurn] Final result for p_29g0kuja: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_v2fmqdar, battlefield has 2 permanents
[calculateMaxLandsPerTurn] Final result for p_v2fmqdar: 1 lands per turn
[recalculateHandVisibility] Players with hand reveal effects: none
2026-01-02T08:17:22.593Z [nextStep] ========== CALLED ==========
2026-01-02T08:17:22.593Z [nextStep] Game: game_mjwlj872
2026-01-02T08:17:22.593Z [nextStep] Current: combat/BEGIN_COMBAT
2026-01-02T08:17:22.593Z [nextStep] Priority: p_v2fmqdar, Turn: p_29g0kuja
2026-01-02T08:17:22.593Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T08:17:22.593Z [nextStep] Advanced to phase=combat, step=DECLARE_ATTACKERS
playLand: card card_7f1d8a22-e730-4344-bba9-7c495500f065_64c04cf73e8fca7a not found in hand for player p_v2fmqdar (may be replay)
2026-01-02T08:17:22.595Z [nextStep] ========== CALLED ==========
2026-01-02T08:17:22.595Z [nextStep] Game: game_mjwlj872
2026-01-02T08:17:22.595Z [nextStep] Current: combat/DECLARE_ATTACKERS
2026-01-02T08:17:22.595Z [nextStep] Priority: p_29g0kuja, Turn: p_29g0kuja
2026-01-02T08:17:22.595Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T08:17:22.595Z [nextStep] Entering DECLARE_BLOCKERS, initialized blockersDeclaredBy array
2026-01-02T08:17:22.595Z [nextStep] Advanced to phase=combat, step=DECLARE_BLOCKERS
playLand: card card_5d954542-6e10-42ab-a91f-be911b2f71d6_f1b12e9314aa9b42 not found in hand for player p_29g0kuja (may be replay)
2026-01-02T08:17:22.596Z [nextStep] ========== CALLED ==========
2026-01-02T08:17:22.596Z [nextStep] Game: game_mjwlj872
2026-01-02T08:17:22.596Z [nextStep] Current: combat/DECLARE_BLOCKERS
2026-01-02T08:17:22.596Z [nextStep] Priority: p_v2fmqdar, Turn: p_29g0kuja
2026-01-02T08:17:22.596Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T08:17:22.596Z [COMBAT_STEP] ========== TRANSITIONING FROM DECLARE_BLOCKERS TO DAMAGE (no first strike) ==========
2026-01-02T08:17:22.596Z [COMBAT_STEP] ========== END DAMAGE STEP PROCESSING ==========
2026-01-02T08:17:22.596Z [nextStep] Advanced to phase=combat, step=DAMAGE
[calculateMaxLandsPerTurn] Calculating for player p_12xlk2pp, battlefield has 3 permanents
[calculateMaxLandsPerTurn] Final result for p_12xlk2pp: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_29g0kuja, battlefield has 3 permanents
[calculateMaxLandsPerTurn] Final result for p_29g0kuja: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_v2fmqdar, battlefield has 3 permanents
[calculateMaxLandsPerTurn] Final result for p_v2fmqdar: 1 lands per turn
[recalculateHandVisibility] Players with hand reveal effects: none
2026-01-02T08:17:22.596Z [nextStep] ========== CALLED ==========
2026-01-02T08:17:22.596Z [nextStep] Game: game_mjwlj872
2026-01-02T08:17:22.596Z [nextStep] Current: combat/DAMAGE
2026-01-02T08:17:22.596Z [nextStep] Priority: p_v2fmqdar, Turn: p_29g0kuja
2026-01-02T08:17:22.596Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T08:17:22.596Z [nextStep] Advanced to phase=combat, step=END_COMBAT
2026-01-02T08:17:22.596Z [nextStep] ========== CALLED ==========
2026-01-02T08:17:22.596Z [nextStep] Game: game_mjwlj872
2026-01-02T08:17:22.596Z [nextStep] Current: combat/END_COMBAT
2026-01-02T08:17:22.596Z [nextStep] Priority: p_12xlk2pp, Turn: p_29g0kuja
2026-01-02T08:17:22.596Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T08:17:22.597Z [clearManaPool] Processed mana pools for all players
2026-01-02T08:17:22.597Z [nextStep] Advanced to phase=postcombatMain, step=MAIN2
2026-01-02T08:17:22.597Z [nextStep] ========== CALLED ==========
2026-01-02T08:17:22.597Z [nextStep] Game: game_mjwlj872
2026-01-02T08:17:22.597Z [nextStep] Current: postcombatMain/MAIN2
2026-01-02T08:17:22.597Z [nextStep] Priority: p_v2fmqdar, Turn: p_29g0kuja
2026-01-02T08:17:22.597Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T08:17:22.597Z [clearManaPool] Processed mana pools for all players
2026-01-02T08:17:22.597Z [nextStep] Advanced to phase=ending, step=END
[calculateMaxLandsPerTurn] Calculating for player p_12xlk2pp, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_12xlk2pp: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_29g0kuja, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_29g0kuja: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_v2fmqdar, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_v2fmqdar: 1 lands per turn
[recalculateHandVisibility] Players with hand reveal effects: none
2026-01-02T08:17:22.597Z [nextStep] ========== CALLED ==========
2026-01-02T08:17:22.598Z [nextStep] Game: game_mjwlj872
2026-01-02T08:17:22.598Z [nextStep] Current: ending/END
2026-01-02T08:17:22.598Z [nextStep] Priority: p_29g0kuja, Turn: p_29g0kuja
2026-01-02T08:17:22.598Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T08:17:22.598Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T08:17:22.598Z [nextStep] Cleanup complete, advancing to next turn
2026-01-02T08:17:22.598Z [nextTurn] Advanced to player p_v2fmqdar, phase=beginning, step=UPKEEP
2026-01-02T08:17:22.598Z [nextTurn] Checking if auto-pass should apply at upkeep
[priority] autoPassLoop starting - active players: p_12xlk2pp, p_29g0kuja, p_v2fmqdar, autoPassEnabled: , currentPriority: p_v2fmqdar, turnPlayer: p_v2fmqdar
[priority] autoPassLoop - stopping at p_v2fmqdar: auto-pass not enabled
2026-01-02T08:17:22.598Z [nextTurn] Auto-pass stopped at upkeep, player p_v2fmqdar has priority
[calculateMaxLandsPerTurn] Calculating for player p_12xlk2pp, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_12xlk2pp: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_29g0kuja, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_29g0kuja: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_v2fmqdar, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_v2fmqdar: 1 lands per turn
[recalculateHandVisibility] Players with hand reveal effects: none
playLand: card card_c375a022-5b57-496d-a802-e4ea8376e9e4_c4ad766c59231431 not found in hand for player p_29g0kuja (may be replay)
2026-01-02T08:17:22.600Z [nextStep] ========== CALLED ==========
2026-01-02T08:17:22.600Z [nextStep] Game: game_mjwlj872
2026-01-02T08:17:22.600Z [nextStep] Current: beginning/UPKEEP
2026-01-02T08:17:22.600Z [nextStep] Priority: p_v2fmqdar, Turn: p_v2fmqdar
2026-01-02T08:17:22.600Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T08:17:22.600Z [nextStep] Advanced to phase=beginning, step=DRAW
[calculateMaxLandsPerTurn] Calculating for player p_12xlk2pp, battlefield has 5 permanents
[calculateMaxLandsPerTurn] Final result for p_12xlk2pp: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_29g0kuja, battlefield has 5 permanents
[calculateMaxLandsPerTurn] Final result for p_29g0kuja: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_v2fmqdar, battlefield has 5 permanents
[calculateMaxLandsPerTurn] Final result for p_v2fmqdar: 1 lands per turn
[recalculateHandVisibility] Players with hand reveal effects: none
[resolveTopOfStack] Permanent Sol Ring entered battlefield under p_12xlk2pp
[calculateMaxLandsPerTurn] Calculating for player p_12xlk2pp, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_12xlk2pp: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_29g0kuja, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_29g0kuja: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_v2fmqdar, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_v2fmqdar: 1 lands per turn
[recalculateHandVisibility] Players with hand reveal effects: none
[resolveTopOfStack] Reset priorityPassedBy after spell resolution
[PLANESWALKER DEBUG] Elspeth Resplendent entering battlefield: {
  loyalty: undefined,
  baseLoyalty: 0,
  counters: undefined,
  hasOracleText: true,
  oracleTextLength: 427
}
[resolveTopOfStack] Permanent Elspeth Resplendent entered battlefield under p_12xlk2pp
[calculateMaxLandsPerTurn] Calculating for player p_12xlk2pp, battlefield has 7 permanents
[calculateMaxLandsPerTurn] Final result for p_12xlk2pp: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_29g0kuja, battlefield has 7 permanents
[calculateMaxLandsPerTurn] Final result for p_29g0kuja: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_v2fmqdar, battlefield has 7 permanents
[calculateMaxLandsPerTurn] Final result for p_v2fmqdar: 1 lands per turn
[recalculateHandVisibility] Players with hand reveal effects: none
[resolveTopOfStack] Reset priorityPassedBy after spell resolution
2026-01-02T08:17:22.607Z [nextStep] ========== CALLED ==========
2026-01-02T08:17:22.607Z [nextStep] Game: game_mjwlj872
2026-01-02T08:17:22.607Z [nextStep] Current: beginning/DRAW
2026-01-02T08:17:22.607Z [nextStep] Priority: p_12xlk2pp, Turn: p_v2fmqdar
2026-01-02T08:17:22.607Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T08:17:22.607Z [clearManaPool] Processed mana pools for all players
2026-01-02T08:17:22.607Z [nextStep] Advanced to phase=precombatMain, step=MAIN1
2026-01-02T08:17:22.607Z [nextStep] ========== CALLED ==========
2026-01-02T08:17:22.607Z [nextStep] Game: game_mjwlj872
2026-01-02T08:17:22.607Z [nextStep] Current: precombatMain/MAIN1
2026-01-02T08:17:22.607Z [nextStep] Priority: p_v2fmqdar, Turn: p_v2fmqdar
2026-01-02T08:17:22.607Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T08:17:22.607Z [clearManaPool] Processed mana pools for all players
2026-01-02T08:17:22.607Z [nextStep] Advanced to phase=combat, step=BEGIN_COMBAT
playLand: card card_a305e44f-4253-4754-b83f-1e34103d77b0_200db484cf500c14 not found in hand for player p_v2fmqdar (may be replay)
2026-01-02T08:17:22.607Z [nextStep] ========== CALLED ==========
2026-01-02T08:17:22.607Z [nextStep] Game: game_mjwlj872
2026-01-02T08:17:22.607Z [nextStep] Current: combat/BEGIN_COMBAT
2026-01-02T08:17:22.607Z [nextStep] Priority: p_29g0kuja, Turn: p_v2fmqdar
2026-01-02T08:17:22.607Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T08:17:22.607Z [nextStep] Advanced to phase=combat, step=DECLARE_ATTACKERS
[calculateMaxLandsPerTurn] Calculating for player p_12xlk2pp, battlefield has 8 permanents
[calculateMaxLandsPerTurn] Final result for p_12xlk2pp: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_29g0kuja, battlefield has 8 permanents
[calculateMaxLandsPerTurn] Final result for p_29g0kuja: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_v2fmqdar, battlefield has 8 permanents
[calculateMaxLandsPerTurn] Final result for p_v2fmqdar: 1 lands per turn
[recalculateHandVisibility] Players with hand reveal effects: none
2026-01-02T08:17:22.608Z [nextStep] ========== CALLED ==========
2026-01-02T08:17:22.608Z [nextStep] Game: game_mjwlj872
2026-01-02T08:17:22.608Z [nextStep] Current: combat/DECLARE_ATTACKERS
2026-01-02T08:17:22.608Z [nextStep] Priority: p_12xlk2pp, Turn: p_v2fmqdar
2026-01-02T08:17:22.608Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T08:17:22.608Z [nextStep] Entering DECLARE_BLOCKERS, initialized blockersDeclaredBy array
2026-01-02T08:17:22.608Z [nextStep] Advanced to phase=combat, step=DECLARE_BLOCKERS
[PLANESWALKER DEBUG] Elspeth Resplendent entering battlefield: {
  loyalty: undefined,
  baseLoyalty: 0,
  counters: undefined,
  hasOracleText: true,
  oracleTextLength: 427
}
[resolveTopOfStack] Permanent Elspeth Resplendent entered battlefield under p_12xlk2pp
[calculateMaxLandsPerTurn] Calculating for player p_12xlk2pp, battlefield has 9 permanents
[calculateMaxLandsPerTurn] Final result for p_12xlk2pp: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_29g0kuja, battlefield has 9 permanents
[calculateMaxLandsPerTurn] Final result for p_29g0kuja: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_v2fmqdar, battlefield has 9 permanents
[calculateMaxLandsPerTurn] Final result for p_v2fmqdar: 1 lands per turn
[recalculateHandVisibility] Players with hand reveal effects: none
[resolveTopOfStack] Reset priorityPassedBy after spell resolution
[GameManager] ensureGame: replayed persisted events { gameId: 'game_mjwlj872', count: 143 }
[GameManager] RulesBridge initialized for game game_mjwlj872
[VIEW_FOR_DEBUG] {
  viewer: 'p_12xlk2pp',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_12xlk2pp: { handCount: 4, firstKnown: [Array] },
    p_29g0kuja: { handCount: 6, firstKnown: [Array] },
    p_v2fmqdar: { handCount: 6, firstKnown: [Array] }
  }
}
[Automation] Auto-pass for turn disabled for p_12xlk2pp in game game_mjwlj872
[Automation] Auto-pass for turn state in game game_mjwlj872: {}
[VIEW_FOR_DEBUG] {
  viewer: 'p_29g0kuja',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_29g0kuja: { handCount: 6, firstKnown: [Array] },
    p_v2fmqdar: { handCount: 6, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking elspeth resplendent: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'elspeth resplendent'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking mountain: { hasKarametra: false, hasAcolyte: false, fullCardName: 'mountain' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking elspeth resplendent: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'elspeth resplendent'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_v2fmqdar, viewerId=p_29g0kuja, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
2026-01-02T08:21:44.522Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767342104522_yu92w) ==========
2026-01-02T08:21:44.522Z [checkAndTriggerAutoPass] Priority: p_v2fmqdar, Phase: combat, Step: DECLARE_BLOCKERS
2026-01-02T08:21:44.522Z [checkAndTriggerAutoPass] Auto-pass not enabled for p_v2fmqdar, returning (ID: autopass_1767342104522_yu92w)
[socket] deleteGame requested {
  gameId: 'game_mjwlj872',
  bySocket: 'JFvvrrECtLz4iG1nAAAB',
  socketPlayerId: 'p_12xlk2pp',
  claimedPlayerId: undefined,
  resolvedPlayerId: 'p_12xlk2pp',
  isCreator: true,
  activePlayerCount: 0,
  noActivePlayers: true
}
[socket] GameManager.deleteGame { gameId: 'game_mjwlj872', removed: true }
[socket] legacy games Map delete { gameId: 'game_mjwlj872' }
[socket] deleteGameFromDb { gameId: 'game_mjwlj872', dbOk: true }
[Game] Creating game without AI: { gameId: 'game_mjwlv4zk', format: 'commander', startingLife: 40 }
[GameManager] Created game game_mjwlv4zk using full rules engine (createInitialGameState)
[DB] Running insert: INSERT OR IGNORE INTO games (game_id, format, starting_life, created_at, created_by_socket_id, created_by_player_id) VALUES (?, ?, ?, ?, ?, ?)
[DB] Params: {
  gameId: 'game_mjwlv4zk',
  format: 'commander',
  startingLife: 40,
  now: 1767342123961,
  createdBySocketId: undefined,
  createdByPlayerId: undefined
}
[DB] Running update: UPDATE games SET format = ?, starting_life = ? WHERE game_id = ?
[DB] Params: { format: 'commander', startingLife: 40, gameId: 'game_mjwlv4zk' }
[Game] Created new game via GameManager: game_mjwlv4zk
[Game] Game created successfully: { gameId: 'game_mjwlv4zk', format: 'commander', startingLife: 40 }
[DB] Running insert: INSERT OR IGNORE INTO games (game_id, format, starting_life, created_at, created_by_socket_id, created_by_player_id) VALUES (?, ?, ?, ?, ?, ?)
[DB] Params: {
  gameId: 'game_mjwlv4zk',
  format: 'commander',
  startingLife: 40,
  now: 1767342123965,
  createdBySocketId: undefined,
  createdByPlayerId: undefined
}
[DB] Running update: UPDATE games SET format = ?, starting_life = ? WHERE game_id = ?
[DB] Params: { format: 'commander', startingLife: 40, gameId: 'game_mjwlv4zk' }
[VIEW_FOR_DEBUG] {
  viewer: 'p_gbma14be',
  stackLength: 0,
  stackItems: [],
  zones: { p_gbma14be: { handCount: 0, firstKnown: [] } }
}
[join] Set game creator for game_mjwlv4zk to player p_gbma14be
[Automation] Auto-pass for turn disabled for p_gbma14be in game game_mjwlv4zk
[Automation] Auto-pass for turn state in game game_mjwlv4zk: {}
[Automation] Auto-pass enabled for p_gbma14be in game game_mjwlv4zk
[Automation] Auto-pass players in game game_mjwlv4zk: [ 'p_gbma14be' ]
[Automation] Player p_gbma14be has priority - triggering auto-pass check
[VIEW_FOR_DEBUG] {
  viewer: 'p_gbma14be',
  stackLength: 0,
  stackItems: [],
  zones: { p_gbma14be: { handCount: 0, firstKnown: [] } }
}
[normalizeViewForEmit] Checking playable cards: priority=p_gbma14be, viewerId=p_gbma14be, match=true
[getPlayableCardIds] Player p_gbma14be: step=undefined, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 0 cards in hand
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_gbma14be: step=, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-01-02T08:22:04.074Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767342124074_5uvv8) ==========
2026-01-02T08:22:04.074Z [checkAndTriggerAutoPass] Priority: p_gbma14be, Phase: pre_game, Step: undefined
2026-01-02T08:22:04.074Z [checkAndTriggerAutoPass] In pre_game phase, auto-pass disabled (ID: autopass_1767342124074_5uvv8)
[deck] listSavedDecks called { gameId: 'game_mjwlv4zk', folder: undefined, playerId: 'p_gbma14be' }
[deck] canImportWithoutWipe {
  gameId: 'game_mjwlv4zk',
  phaseStr: 'PRE_GAME',
  seqVal: 3,
  isPreGame: true
}
[deck] importDeck called { gameId: 'game_mjwlv4zk', playerId: 'p_gbma14be' }
[SCRYFALL DEBUG] Caching planeswalker: {
  name: 'Archangel Elspeth',
  type_line: 'Legendary Planeswalker ΓÇö Elspeth',
  'data.loyalty': '4',
  'data keys': [ 'loyalty' ]
}
[SCRYFALL DEBUG] Cached planeswalker result: { name: 'Archangel Elspeth', 'card.loyalty': '4', 'cached value': '4' }
[deck] importDeck resolved cards {
  gameId: 'game_mjwlv4zk',
  playerId: 'p_gbma14be',
  resolvedCount: 10,
  missingCount: 0,
  firstCard: {
    name: 'Archangel Elspeth',
    id: '35ed6263-bdd7-4013-ac8c-9b652d71a0db_mjwlwqz4_1_6df322f4',
    type_line: 'Legendary Planeswalker ΓÇö Elspeth'
  },
  lastCard: {
    name: 'Plains',
    id: '4069fb4a-8ee1-41ef-ab93-39a8cc58e0e5_mjwlwqz5_a_a98782b0',
    type_line: 'Basic Land ΓÇö Plains'
  }
}
[deck] Validation result {
  gameId: 'game_mjwlv4zk',
  format: 'commander',
  illegalCount: 1,
  warningCount: 0
}
[deck] importDeck pregame-check {
  gameId: 'game_mjwlv4zk',
  playerId: 'p_gbma14be',
  phaseStr: 'PRE_GAME',
  seqVal: 3,
  isPreGame: true
}
[deck] clearPlayerTransientZonesForImport { gameId: 'game_mjwlv4zk', playerId: 'p_gbma14be' }
[deck] addPendingInitialDrawFlag {
  gameId: 'game_mjwlv4zk',
  playerId: 'p_gbma14be',
  pendingInitialDrawSize: 1
}
[VIEW_FOR_DEBUG] {
  viewer: 'p_gbma14be',
  stackLength: 0,
  stackItems: [],
  zones: { p_gbma14be: { handCount: 0, firstKnown: [] } }
}
[normalizeViewForEmit] Checking playable cards: priority=p_gbma14be, viewerId=p_gbma14be, match=true
[getPlayableCardIds] Player p_gbma14be: step=undefined, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 0 cards in hand
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_gbma14be: step=, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-01-02T08:23:12.019Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767342192019_6lq8m) ==========
2026-01-02T08:23:12.019Z [checkAndTriggerAutoPass] Priority: p_gbma14be, Phase: pre_game, Step: undefined
2026-01-02T08:23:12.019Z [checkAndTriggerAutoPass] In pre_game phase, auto-pass disabled (ID: autopass_1767342192019_6lq8m)
[deck] importDeck (pre-game) emitting suggestCommanders {
  gameId: 'game_mjwlv4zk',
  playerId: 'p_gbma14be',
  names: [ 'Archangel Elspeth' ]
}
[deck] getImportedDeckCandidates {
  gameId: 'game_mjwlv4zk',
  playerId: 'p_gbma14be',
  candidatesCount: 10
}
[import] applyConfirmedImport start {
  gameId: 'game_mjwlv4zk',
  initiator: 'p_gbma14be',
  cards: 10,
  importerOnly: true,
  confirmId: 'imp_1767342192017_m7t2wm'
}
[import] importer-only apply: skipping full reset { gameId: 'game_mjwlv4zk' }
[importDeckResolved] Importing 10 cards for player p_gbma14be
[importDeckResolved] Mapped 10 cards. First card: Archangel Elspeth (35ed6263-bdd7-4013-ac8c-9b652d71a0db_mjwlwqz4_1_6df322f4)
[importDeckResolved] Library set for player p_gbma14be. Final library size: 10
[import] importDeckResolved attempted { gameId: 'game_mjwlv4zk', playerId: 'p_gbma14be' }
[import] state.zones libraryCount update (no library array duplication) { gameId: 'game_mjwlv4zk', playerId: 'p_gbma14be', libraryCount: 10 }
[deck] addPendingInitialDrawFlag {
  gameId: 'game_mjwlv4zk',
  playerId: 'p_gbma14be',
  pendingInitialDrawSize: 1
}
[VIEW_FOR_DEBUG] {
  viewer: 'p_gbma14be',
  stackLength: 0,
  stackItems: [],
  zones: { p_gbma14be: { handCount: 0, firstKnown: [] } }
}
[normalizeViewForEmit] Checking playable cards: priority=p_gbma14be, viewerId=p_gbma14be, match=true
[getPlayableCardIds] Player p_gbma14be: step=undefined, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 0 cards in hand
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_gbma14be: step=, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-01-02T08:23:12.226Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767342192226_acmeo) ==========
2026-01-02T08:23:12.226Z [checkAndTriggerAutoPass] Priority: p_gbma14be, Phase: pre_game, Step: undefined
2026-01-02T08:23:12.226Z [checkAndTriggerAutoPass] In pre_game phase, auto-pass disabled (ID: autopass_1767342192226_acmeo)
[commander] emitImportedDeckCandidatesToPlayer {
  gameId: 'game_mjwlv4zk',
  playerId: 'p_gbma14be',
  candidatesCount: 10
}
[commander] emitSuggestCommandersToPlayer {
  gameId: 'game_mjwlv4zk',
  playerId: 'p_gbma14be',
  names: [ 'Archangel Elspeth' ]
}
[import] suggestCommanders emitted (importerSocket) {
  gameId: 'game_mjwlv4zk',
  playerId: 'p_gbma14be',
  names: [ 'Archangel Elspeth' ]
}
[import] importApplied sent to player sockets { gameId: 'game_mjwlv4zk', playerId: 'p_gbma14be' }
[VIEW_FOR_DEBUG] {
  viewer: 'p_gbma14be',
  stackLength: 0,
  stackItems: [],
  zones: { p_gbma14be: { handCount: 0, firstKnown: [] } }
}
[normalizeViewForEmit] Checking playable cards: priority=p_gbma14be, viewerId=p_gbma14be, match=true
[getPlayableCardIds] Player p_gbma14be: step=undefined, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 0 cards in hand
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_gbma14be: step=, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-01-02T08:23:12.227Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767342192227_0aq8k) ==========
2026-01-02T08:23:12.227Z [checkAndTriggerAutoPass] Priority: p_gbma14be, Phase: pre_game, Step: undefined
2026-01-02T08:23:12.227Z [checkAndTriggerAutoPass] In pre_game phase, auto-pass disabled (ID: autopass_1767342192227_0aq8k)
[VIEW_FOR_DEBUG] {
  viewer: 'p_gbma14be',
  stackLength: 0,
  stackItems: [],
  zones: { p_gbma14be: { handCount: 0, firstKnown: [] } }
}
[normalizeViewForEmit] Checking playable cards: priority=p_gbma14be, viewerId=p_gbma14be, match=true
[getPlayableCardIds] Player p_gbma14be: step=undefined, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 0 cards in hand
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_gbma14be: step=, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-01-02T08:23:12.228Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767342192228_ebicr) ==========
2026-01-02T08:23:12.228Z [checkAndTriggerAutoPass] Priority: p_gbma14be, Phase: pre_game, Step: undefined
2026-01-02T08:23:12.228Z [checkAndTriggerAutoPass] In pre_game phase, auto-pass disabled (ID: autopass_1767342192228_ebicr)
[import] applyConfirmedImport complete {
  gameId: 'game_mjwlv4zk',
  initiator: 'p_gbma14be',
  confirmId: 'imp_1767342192017_m7t2wm'
}
[deck] getImportedDeckCandidates {
  gameId: 'game_mjwlv4zk',
  playerId: 'p_gbma14be',
  candidatesCount: 10
}
[commander] setCommander incoming {
  gameId: 'game_mjwlv4zk',
  from: 'p_gbma14be',
  commanderNames: [ 'Archangel Elspeth' ],
  commanderIds: [ '35ed6263-bdd7-4013-ac8c-9b652d71a0db_mjwlwqz4_1_6df322f4' ]
}
[commander] setCommander idsToApply {
  gameId: 'game_mjwlv4zk',
  playerId: 'p_gbma14be',
  names: [ 'Archangel Elspeth' ],
  idsToApply: [ '35ed6263-bdd7-4013-ac8c-9b652d71a0db_mjwlwqz4_1_6df322f4' ]
}
[commander-socket] Calling game.setCommander for player p_gbma14be with names: [ 'Archangel Elspeth' ] ids: [ '35ed6263-bdd7-4013-ac8c-9b652d71a0db_mjwlwqz4_1_6df322f4' ]
[setCommander] Initialized inCommandZone for p_gbma14be: [ '35ed6263-bdd7-4013-ac8c-9b652d71a0db_mjwlwqz4_1_6df322f4' ]
[setCommander] Library size before commander removal: 10, Commander IDs to remove: [ '35ed6263-bdd7-4013-ac8c-9b652d71a0db_mjwlwqz4_1_6df322f4' ]
[setCommander] Found commander "Archangel Elspeth" (35ed6263-bdd7-4013-ac8c-9b652d71a0db_mjwlwqz4_1_6df322f4) in library at index 0
[setCommander] Removing 1 commander(s) from library at indices: [ 0 ] library size before: 10
[setCommander] Removed card at index 0: Archangel Elspeth (35ed6263-bdd7-4013-ac8c-9b652d71a0db_mjwlwqz4_1_6df322f4)
[setCommander] Library size after removal: 9
[setCommander] Updated zones[p_gbma14be].libraryCount to 9
[commander] Persisted opening draw events (shuffle + draw 7) for player p_gbma14be
[DEBUG_CMD] after setCommander {
  gameId: 'game_mjwlv4zk',
  playerId: 'p_gbma14be',
  commanderIds: [ '35ed6263-bdd7-4013-ac8c-9b652d71a0db_mjwlwqz4_1_6df322f4' ],
  commanderNames: [ 'Archangel Elspeth' ],
  libraryCount: 2,
  libraryTop: null
}
[VIEW_FOR_DEBUG] {
  viewer: 'p_gbma14be',
  stackLength: 0,
  stackItems: [],
  zones: { p_gbma14be: { handCount: 7, firstKnown: [Array] } }
}
[normalizeViewForEmit] Checking playable cards: priority=p_gbma14be, viewerId=p_gbma14be, match=true
[getPlayableCardIds] Player p_gbma14be: step=undefined, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Archangel Elspeth not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_gbma14be: step=, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-01-02T08:23:13.677Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767342193677_3ilvy) ==========
2026-01-02T08:23:13.677Z [checkAndTriggerAutoPass] Priority: p_gbma14be, Phase: pre_game, Step: undefined
2026-01-02T08:23:13.677Z [checkAndTriggerAutoPass] In pre_game phase, auto-pass disabled (ID: autopass_1767342193677_3ilvy)
[VIEW_FOR_DEBUG] {
  viewer: 'p_gbma14be',
  stackLength: 0,
  stackItems: [],
  zones: { p_gbma14be: { handCount: 7, firstKnown: [Array] } }
}
[normalizeViewForEmit] Checking playable cards: priority=p_gbma14be, viewerId=p_gbma14be, match=true
[getPlayableCardIds] Player p_gbma14be: step=undefined, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Archangel Elspeth not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_gbma14be: step=, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
[VIEW_FOR_DEBUG] {
  viewer: 'p_gbma14be',
  stackLength: 0,
  stackItems: [],
  zones: { p_gbma14be: { handCount: 7, firstKnown: [Array] } }
}
[normalizeViewForEmit] Checking playable cards: priority=p_gbma14be, viewerId=p_gbma14be, match=true
[getPlayableCardIds] Player p_gbma14be: step=undefined, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Archangel Elspeth not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_gbma14be: step=, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-01-02T08:23:17.799Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767342197799_rfwo7) ==========
2026-01-02T08:23:17.799Z [checkAndTriggerAutoPass] Priority: p_gbma14be, Phase: pre_game, Step: undefined
2026-01-02T08:23:17.799Z [checkAndTriggerAutoPass] In pre_game phase, auto-pass disabled (ID: autopass_1767342197799_rfwo7)
[skipToPhase] request from player=p_gbma14be game=game_mjwlv4zk turnPlayer=p_gbma14be currentPhase=pre_game currentStep= targetPhase=precombatMain targetStep=MAIN1
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 0 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[recalculateHandVisibility] Players with hand reveal effects: none
[skipToPhase] Drew 1 card(s) for p_gbma14be (skipped from  to MAIN1, additional: 0)
[skipToPhase] Reset priority tracking, priority set to p_gbma14be
[skipToPhase] Skipped to phase=precombatMain, step=MAIN1 for game game_mjwlv4zk
[VIEW_FOR_DEBUG] {
  viewer: 'p_gbma14be',
  stackLength: 0,
  stackItems: [],
  zones: { p_gbma14be: { handCount: 8, firstKnown: [Array] } }
}
[normalizeViewForEmit] Checking playable cards: priority=p_gbma14be, viewerId=p_gbma14be, match=true
[getPlayableCardIds] Player p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 8 cards in hand
[getPlayableCardIds] Card Sol Ring not playable - cannot pay cost {1} (after reduction: {"generic":1,"colors":{"W":0,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Sol Ring not playable - cannot pay cost {1} (after reduction: {"generic":1,"colors":{"W":0,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Sol Ring not playable - cannot pay cost {1} (after reduction: {"generic":1,"colors":{"W":0,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 0 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[getPlayableCardIds] Checking lands: landsPlayed=0, max=1
[getPlayableCardIds] Land Plains (4069fb4a-8ee1-41ef-ab93-39a8cc58e0e5_mjwlwqz5_5_f2d8a582) is playable
[getPlayableCardIds] Land Plains (4069fb4a-8ee1-41ef-ab93-39a8cc58e0e5_mjwlwqz5_9_0fa97370) is playable
[getPlayableCardIds] Land Plains (4069fb4a-8ee1-41ef-ab93-39a8cc58e0e5_mjwlwqz5_6_9c4c1c5e) is playable
[getPlayableCardIds] Land Plains (4069fb4a-8ee1-41ef-ab93-39a8cc58e0e5_mjwlwqz5_7_6ff1a17c) is playable
[getPlayableCardIds] Land Plains (4069fb4a-8ee1-41ef-ab93-39a8cc58e0e5_mjwlwqz5_a_a98782b0) is playable
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Archangel Elspeth not playable - canCastNow=true, canPay=false
[getPlayableCardIds] Returning 5 playable card(s): [
  '4069fb4a-8ee1-41ef-ab93-39a8cc58e0e5_mjwlwqz5_5_f2d8a582',
  '4069fb4a-8ee1-41ef-ab93-39a8cc58e0e5_mjwlwqz5_9_0fa97370',
  '4069fb4a-8ee1-41ef-ab93-39a8cc58e0e5_mjwlwqz5_6_9c4c1c5e',
  '4069fb4a-8ee1-41ef-ab93-39a8cc58e0e5_mjwlwqz5_7_6ff1a17c',
  '4069fb4a-8ee1-41ef-ab93-39a8cc58e0e5_mjwlwqz5_a_a98782b0'
]
[normalizeViewForEmit] getPlayableCardIds returned 5 cards
[normalizeViewForEmit] Set view.playableCards with 5 cards
[canAct] p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 0 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Checking hand with 8 cards
[canPlayLand] p_gbma14be: Sample cards in hand: [Sol Ring(Artifact), Sol Ring(Artifact), Sol Ring(Artifact)]
[canPlayLand] p_gbma14be: Found land in hand: Plains (Basic Land ΓÇö Plains) - returning TRUE
[canAct] p_gbma14be: Turn player in main phase can play land - returning TRUE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=true, canRespond=false
2026-01-02T08:23:20.896Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767342200896_8gnea) ==========
2026-01-02T08:23:20.896Z [checkAndTriggerAutoPass] Priority: p_gbma14be, Phase: precombatMain, Step: MAIN1
[canAct] p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 0 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Checking hand with 8 cards
[canPlayLand] p_gbma14be: Sample cards in hand: [Sol Ring(Artifact), Sol Ring(Artifact), Sol Ring(Artifact)]
[canPlayLand] p_gbma14be: Found land in hand: Plains (Basic Land ΓÇö Plains) - returning TRUE
[canAct] p_gbma14be: Turn player in main phase can play land - returning TRUE
2026-01-02T08:23:20.897Z [checkAndTriggerAutoPass] canAct check: p_gbma14be isActive=true canAct=true (ID: autopass_1767342200896_8gnea)
2026-01-02T08:23:20.897Z [checkAndTriggerAutoPass] p_gbma14be CAN ACT - returning early, NO auto-pass (ID: autopass_1767342200896_8gnea)
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 0 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[playLand] Player p_gbma14be has played 0 lands this turn, max is 1
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 1 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[recalculateHandVisibility] Players with hand reveal effects: none
[VIEW_FOR_DEBUG] {
  viewer: 'p_gbma14be',
  stackLength: 0,
  stackItems: [],
  zones: { p_gbma14be: { handCount: 7, firstKnown: [Array] } }
}
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_gbma14be, viewerId=p_gbma14be, match=true
[getPlayableCardIds] Player p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 1, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 1
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Sol Ring (ee6e5a35-fe21-4dee-b0ef-a8f2841511ad_mjwlwqz5_2_3c7514c4) is playable
[getPlayableCardIds] Card Sol Ring (ee6e5a35-fe21-4dee-b0ef-a8f2841511ad_mjwlwqz5_4_105fe5eb) is playable
[getPlayableCardIds] Card Sol Ring (ee6e5a35-fe21-4dee-b0ef-a8f2841511ad_mjwlwqz5_3_be010306) is playable
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 1 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[getPlayableCardIds] Checking lands: landsPlayed=1, max=1
[getPlayableCardIds] Already played max lands this turn (1/1)
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Archangel Elspeth not playable - canCastNow=true, canPay=false
[getPlayableCardIds] Returning 3 playable card(s): [
  'ee6e5a35-fe21-4dee-b0ef-a8f2841511ad_mjwlwqz5_2_3c7514c4',
  'ee6e5a35-fe21-4dee-b0ef-a8f2841511ad_mjwlwqz5_4_105fe5eb',
  'ee6e5a35-fe21-4dee-b0ef-a8f2841511ad_mjwlwqz5_3_be010306'
]
[normalizeViewForEmit] getPlayableCardIds returned 3 cards
[normalizeViewForEmit] Set view.playableCards with 3 cards
[canAct] p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 1 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canAct] p_gbma14be: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 1 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canAct] p_gbma14be: Can cast sorcery-speed spell - returning TRUE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=true, canRespond=false
2026-01-02T08:23:22.903Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767342202903_r9oxr) ==========
2026-01-02T08:23:22.903Z [checkAndTriggerAutoPass] Priority: p_gbma14be, Phase: precombatMain, Step: MAIN1
[canAct] p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 1 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canAct] p_gbma14be: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 1 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canAct] p_gbma14be: Can cast sorcery-speed spell - returning TRUE
2026-01-02T08:23:22.903Z [checkAndTriggerAutoPass] canAct check: p_gbma14be isActive=true canAct=true (ID: autopass_1767342202903_r9oxr)
2026-01-02T08:23:22.903Z [checkAndTriggerAutoPass] p_gbma14be CAN ACT - returning early, NO auto-pass (ID: autopass_1767342202903_r9oxr)
[VIEW_FOR_DEBUG] {
  viewer: 'p_gbma14be',
  stackLength: 0,
  stackItems: [],
  zones: { p_gbma14be: { handCount: 7, firstKnown: [Array] } }
}
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_gbma14be, viewerId=p_gbma14be, match=true
[getPlayableCardIds] Player p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 1, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 1
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Sol Ring (ee6e5a35-fe21-4dee-b0ef-a8f2841511ad_mjwlwqz5_2_3c7514c4) is playable
[getPlayableCardIds] Card Sol Ring (ee6e5a35-fe21-4dee-b0ef-a8f2841511ad_mjwlwqz5_4_105fe5eb) is playable
[getPlayableCardIds] Card Sol Ring (ee6e5a35-fe21-4dee-b0ef-a8f2841511ad_mjwlwqz5_3_be010306) is playable
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 1 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[getPlayableCardIds] Checking lands: landsPlayed=1, max=1
[getPlayableCardIds] Already played max lands this turn (1/1)
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Archangel Elspeth not playable - canCastNow=true, canPay=false
[getPlayableCardIds] Returning 3 playable card(s): [
  'ee6e5a35-fe21-4dee-b0ef-a8f2841511ad_mjwlwqz5_2_3c7514c4',
  'ee6e5a35-fe21-4dee-b0ef-a8f2841511ad_mjwlwqz5_4_105fe5eb',
  'ee6e5a35-fe21-4dee-b0ef-a8f2841511ad_mjwlwqz5_3_be010306'
]
[normalizeViewForEmit] getPlayableCardIds returned 3 cards
[normalizeViewForEmit] Set view.playableCards with 3 cards
[canAct] p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 1 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canAct] p_gbma14be: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 1 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canAct] p_gbma14be: Can cast sorcery-speed spell - returning TRUE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=true, canRespond=false
2026-01-02T08:23:22.905Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767342202905_pi9vc) ==========
2026-01-02T08:23:22.905Z [checkAndTriggerAutoPass] Priority: p_gbma14be, Phase: precombatMain, Step: MAIN1
[canAct] p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 1 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canAct] p_gbma14be: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 1 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canAct] p_gbma14be: Can cast sorcery-speed spell - returning TRUE
2026-01-02T08:23:22.905Z [checkAndTriggerAutoPass] canAct check: p_gbma14be isActive=true canAct=true (ID: autopass_1767342202905_pi9vc)
2026-01-02T08:23:22.905Z [checkAndTriggerAutoPass] p_gbma14be CAN ACT - returning early, NO auto-pass (ID: autopass_1767342202905_pi9vc)
[requestCastSpell] ======== REQUEST START ========
[requestCastSpell] gameId: game_mjwlv4zk, cardId: ee6e5a35-fe21-4dee-b0ef-a8f2841511ad_mjwlwqz5_2_3c7514c4, faceIndex: undefined
[requestCastSpell] playerId: p_gbma14be, priority: p_gbma14be
[requestCastSpell] No targets needed, emitted paymentRequired for Sol Ring
[requestCastSpell] ======== REQUEST END (waiting for payment) ========
[completeCastSpell] DEBUG START ========================================
[completeCastSpell] cardId: ee6e5a35-fe21-4dee-b0ef-a8f2841511ad_mjwlwqz5_2_3c7514c4, effectId: cast_ee6e5a35-fe21-4dee-b0ef-a8f2841511ad_mjwlwqz5_2_3c7514c4_1767342203893
[completeCastSpell] targets from client: undefined
[completeCastSpell] payment from client: [{"permanentId":"perm_36rxr53d","mana":"W","count":1}]
[completeCastSpell] No pendingCast found for effectId: cast_ee6e5a35-fe21-4dee-b0ef-a8f2841511ad_mjwlwqz5_2_3c7514c4_1767342203893
[completeCastSpell] Final targets to use: none
[completeCastSpell] Calling handleCastSpellFromHand with skipInteractivePrompts=true
[completeCastSpell] DEBUG END ==========================================
[handleCastSpellFromHand] ======== DEBUG START ========
[handleCastSpellFromHand] cardId: ee6e5a35-fe21-4dee-b0ef-a8f2841511ad_mjwlwqz5_2_3c7514c4
[handleCastSpellFromHand] targets: undefined
[handleCastSpellFromHand] payment: [{"permanentId":"perm_36rxr53d","mana":"W","count":1}]
[handleCastSpellFromHand] skipInteractivePrompts: true
[handleCastSpellFromHand] playerId: p_gbma14be
[handleCastSpellFromHand] priority: p_gbma14be
[handleCastSpellFromHand] Sol Ring: spellSpec=false, targetReqs=false, needsTargetSelection=null, hasTargets=false
[handleCastSpellFromHand] ======== DEBUG END ========
[castSpellFromHand] Processing payment for Sol Ring: [ { permanentId: 'perm_36rxr53d', mana: 'W', count: 1 } ]
[castSpellFromHand] Added 1 W mana to p_gbma14be's pool from Plains
[castSpellFromHand] Consumed 1 W mana for generic cost
[castSpellFromHand] Converge: 1 different color(s) spent for Sol Ring
[castSpellFromHand] Added converge data to stack item: 1 colors (white)
[castSpellFromHand] Player p_gbma14be cast Sol Ring (ee6e5a35-fe21-4dee-b0ef-a8f2841511ad_mjwlwqz5_2_3c7514c4) via applyEvent
[VIEW_FOR_DEBUG] {
  viewer: 'p_gbma14be',
  stackLength: 1,
  stackItems: [ 'Sol Ring' ],
  zones: { p_gbma14be: { handCount: 6, firstKnown: [Array] } }
}
[normalizeViewForEmit] Checking playable cards: priority=p_gbma14be, viewerId=p_gbma14be, match=true
[getPlayableCardIds] Player p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 6 cards in hand
[getPlayableCardIds] Not checking lands: isMainPhase=true, stackIsEmpty=false, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Archangel Elspeth not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-01-02T08:23:24.938Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767342204938_epp9m) ==========
2026-01-02T08:23:24.938Z [checkAndTriggerAutoPass] Priority: p_gbma14be, Phase: precombatMain, Step: MAIN1
[canAct] p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
2026-01-02T08:23:24.938Z [checkAndTriggerAutoPass] canAct check: p_gbma14be isActive=true canAct=false (ID: autopass_1767342204938_epp9m)
2026-01-02T08:23:24.938Z [checkAndTriggerAutoPass] p_gbma14be CANNOT ACT - proceeding with auto-pass (ID: autopass_1767342204938_epp9m)
2026-01-02T08:23:24.938Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_gbma14be with 150ms delay (ID: autopass_1767342204938_epp9m)
2026-01-02T08:23:25.092Z [executeAutoPass] ========== EXECUTING for p_gbma14be (ID: autopass_1767342204938_epp9m) ==========
2026-01-02T08:23:25.092Z [executeAutoPass] Phase: precombatMain, Step: MAIN1
[canAct] p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
2026-01-02T08:23:25.092Z [executeAutoPass] Re-check: p_gbma14be canAct=false (ID: autopass_1767342204938_epp9m)
2026-01-02T08:23:25.092Z [executeAutoPass] Proceeding with auto-pass for p_gbma14be (ID: autopass_1767342204938_epp9m)
2026-01-02T08:23:25.092Z [executeAutoPass] Set _autoPassInProgress flag for p_gbma14be (ID: autopass_1767342204938_epp9m)
[priority] autoPassLoop starting - active players: p_gbma14be, autoPassEnabled: p_gbma14be, currentPriority: p_gbma14be, turnPlayer: p_gbma14be
[canAct] p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[priority] autoPassLoop - checking p_gbma14be (ACTIVE): canAct=false, stack.length=1, step=MAIN1
[priority] autoPassLoop - stopping at p_gbma14be: reached phase navigator target at MAIN1
2026-01-02T08:23:25.092Z [executeAutoPass] passPriority result: changed=true, advanceStep=false, resolvedNow=true (ID: autopass_1767342204938_epp9m)
[checkAndTriggerAutoPass] Stack resolved after auto-pass for p_gbma14be
[resolveTopOfStack] Permanent Sol Ring entered battlefield under p_gbma14be
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 2 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[recalculateHandVisibility] Players with hand reveal effects: none
[resolveTopOfStack] Reset priorityPassedBy after spell resolution
2026-01-02T08:23:25.095Z [executeAutoPass] Cleared _autoPassInProgress flag for p_gbma14be (ID: autopass_1767342204938_epp9m)
2026-01-02T08:23:25.095Z [executeAutoPass] Broadcasting state after auto-pass (ID: autopass_1767342204938_epp9m)
[VIEW_FOR_DEBUG] {
  viewer: 'p_gbma14be',
  stackLength: 0,
  stackItems: [],
  zones: { p_gbma14be: { handCount: 6, firstKnown: [Array] } }
}
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_gbma14be, viewerId=p_gbma14be, match=true
[getPlayableCardIds] Player p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 2 }
[getPlayableCardIds] Total available mana: 2
[getPlayableCardIds] Checking 6 cards in hand
[getPlayableCardIds] Card Sol Ring (ee6e5a35-fe21-4dee-b0ef-a8f2841511ad_mjwlwqz5_4_105fe5eb) is playable
[getPlayableCardIds] Card Sol Ring (ee6e5a35-fe21-4dee-b0ef-a8f2841511ad_mjwlwqz5_3_be010306) is playable
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 2 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[getPlayableCardIds] Checking lands: landsPlayed=1, max=1
[getPlayableCardIds] Already played max lands this turn (1/1)
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Archangel Elspeth not playable - canCastNow=true, canPay=false
[getPlayableCardIds] Returning 2 playable card(s): [
  'ee6e5a35-fe21-4dee-b0ef-a8f2841511ad_mjwlwqz5_4_105fe5eb',
  'ee6e5a35-fe21-4dee-b0ef-a8f2841511ad_mjwlwqz5_3_be010306'
]
[normalizeViewForEmit] getPlayableCardIds returned 2 cards
[normalizeViewForEmit] Set view.playableCards with 2 cards
[canAct] p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 2 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canAct] p_gbma14be: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 2 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canAct] p_gbma14be: Can cast sorcery-speed spell - returning TRUE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=true, canRespond=false
2026-01-02T08:23:25.097Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767342205097_8e0e6) ==========
2026-01-02T08:23:25.097Z [checkAndTriggerAutoPass] Priority: p_gbma14be, Phase: precombatMain, Step: MAIN1
[canAct] p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 2 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canAct] p_gbma14be: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 2 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canAct] p_gbma14be: Can cast sorcery-speed spell - returning TRUE
2026-01-02T08:23:25.097Z [checkAndTriggerAutoPass] canAct check: p_gbma14be isActive=true canAct=true (ID: autopass_1767342205097_8e0e6)
2026-01-02T08:23:25.097Z [checkAndTriggerAutoPass] p_gbma14be CAN ACT - returning early, NO auto-pass (ID: autopass_1767342205097_8e0e6)
2026-01-02T08:23:25.097Z [executeAutoPass] Broadcast complete (ID: autopass_1767342204938_epp9m)
[requestCastSpell] ======== REQUEST START ========
[requestCastSpell] gameId: game_mjwlv4zk, cardId: ee6e5a35-fe21-4dee-b0ef-a8f2841511ad_mjwlwqz5_4_105fe5eb, faceIndex: undefined
[requestCastSpell] playerId: p_gbma14be, priority: p_gbma14be
[requestCastSpell] No targets needed, emitted paymentRequired for Sol Ring
[requestCastSpell] ======== REQUEST END (waiting for payment) ========
[completeCastSpell] DEBUG START ========================================
[completeCastSpell] cardId: ee6e5a35-fe21-4dee-b0ef-a8f2841511ad_mjwlwqz5_4_105fe5eb, effectId: cast_ee6e5a35-fe21-4dee-b0ef-a8f2841511ad_mjwlwqz5_4_105fe5eb_1767342206241
[completeCastSpell] targets from client: undefined
[completeCastSpell] payment from client: [{"permanentId":"perm_sw7gus93","mana":"C","count":2}]
[completeCastSpell] No pendingCast found for effectId: cast_ee6e5a35-fe21-4dee-b0ef-a8f2841511ad_mjwlwqz5_4_105fe5eb_1767342206241
[completeCastSpell] Final targets to use: none
[completeCastSpell] Calling handleCastSpellFromHand with skipInteractivePrompts=true
[completeCastSpell] DEBUG END ==========================================
[handleCastSpellFromHand] ======== DEBUG START ========
[handleCastSpellFromHand] cardId: ee6e5a35-fe21-4dee-b0ef-a8f2841511ad_mjwlwqz5_4_105fe5eb
[handleCastSpellFromHand] targets: undefined
[handleCastSpellFromHand] payment: [{"permanentId":"perm_sw7gus93","mana":"C","count":2}]
[handleCastSpellFromHand] skipInteractivePrompts: true
[handleCastSpellFromHand] playerId: p_gbma14be
[handleCastSpellFromHand] priority: p_gbma14be
[handleCastSpellFromHand] Sol Ring: spellSpec=false, targetReqs=false, needsTargetSelection=null, hasTargets=false
[handleCastSpellFromHand] ======== DEBUG END ========
[castSpellFromHand] Processing payment for Sol Ring: [ { permanentId: 'perm_sw7gus93', mana: 'C', count: 2 } ]
[castSpellFromHand] Added 2 C mana to p_gbma14be's pool from Sol Ring
[castSpellFromHand] Consumed 1 colorless mana for generic cost
[castSpellFromHand] Unspent mana remaining in pool: 1 colorless
[castSpellFromHand] Player p_gbma14be cast Sol Ring (ee6e5a35-fe21-4dee-b0ef-a8f2841511ad_mjwlwqz5_4_105fe5eb) via applyEvent
[VIEW_FOR_DEBUG] {
  viewer: 'p_gbma14be',
  stackLength: 1,
  stackItems: [ 'Sol Ring' ],
  zones: { p_gbma14be: { handCount: 5, firstKnown: [Array] } }
}
[normalizeViewForEmit] Checking playable cards: priority=p_gbma14be, viewerId=p_gbma14be, match=true
[getPlayableCardIds] Player p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 1 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 1 }
[getPlayableCardIds] Total available mana: 1
[getPlayableCardIds] Checking 5 cards in hand
[getPlayableCardIds] Not checking lands: isMainPhase=true, stackIsEmpty=false, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Archangel Elspeth not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-01-02T08:23:27.322Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767342207322_0u972) ==========
2026-01-02T08:23:27.322Z [checkAndTriggerAutoPass] Priority: p_gbma14be, Phase: precombatMain, Step: MAIN1
[canAct] p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
2026-01-02T08:23:27.322Z [checkAndTriggerAutoPass] canAct check: p_gbma14be isActive=true canAct=false (ID: autopass_1767342207322_0u972)
2026-01-02T08:23:27.322Z [checkAndTriggerAutoPass] p_gbma14be CANNOT ACT - proceeding with auto-pass (ID: autopass_1767342207322_0u972)
2026-01-02T08:23:27.322Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_gbma14be with 150ms delay (ID: autopass_1767342207322_0u972)
2026-01-02T08:23:27.478Z [executeAutoPass] ========== EXECUTING for p_gbma14be (ID: autopass_1767342207322_0u972) ==========
2026-01-02T08:23:27.478Z [executeAutoPass] Phase: precombatMain, Step: MAIN1
[canAct] p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
2026-01-02T08:23:27.478Z [executeAutoPass] Re-check: p_gbma14be canAct=false (ID: autopass_1767342207322_0u972)
2026-01-02T08:23:27.478Z [executeAutoPass] Proceeding with auto-pass for p_gbma14be (ID: autopass_1767342207322_0u972)
2026-01-02T08:23:27.478Z [executeAutoPass] Set _autoPassInProgress flag for p_gbma14be (ID: autopass_1767342207322_0u972)
[priority] autoPassLoop starting - active players: p_gbma14be, autoPassEnabled: p_gbma14be, currentPriority: p_gbma14be, turnPlayer: p_gbma14be
[canAct] p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[priority] autoPassLoop - checking p_gbma14be (ACTIVE): canAct=false, stack.length=1, step=MAIN1
[priority] Auto-passing for p_gbma14be - no available actions
2026-01-02T08:23:27.478Z [executeAutoPass] passPriority result: changed=true, advanceStep=false, resolvedNow=true (ID: autopass_1767342207322_0u972)
[checkAndTriggerAutoPass] Stack resolved after auto-pass for p_gbma14be
[resolveTopOfStack] Permanent Sol Ring entered battlefield under p_gbma14be
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 3 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[recalculateHandVisibility] Players with hand reveal effects: none
[resolveTopOfStack] Reset priorityPassedBy after spell resolution
2026-01-02T08:23:27.480Z [executeAutoPass] Cleared _autoPassInProgress flag for p_gbma14be (ID: autopass_1767342207322_0u972)
2026-01-02T08:23:27.480Z [executeAutoPass] Broadcasting state after auto-pass (ID: autopass_1767342207322_0u972)
[VIEW_FOR_DEBUG] {
  viewer: 'p_gbma14be',
  stackLength: 0,
  stackItems: [],
  zones: { p_gbma14be: { handCount: 5, firstKnown: [Array] } }
}
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_gbma14be, viewerId=p_gbma14be, match=true
[getPlayableCardIds] Player p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 1 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 3 }
[getPlayableCardIds] Total available mana: 3
[getPlayableCardIds] Checking 5 cards in hand
[getPlayableCardIds] Card Sol Ring (ee6e5a35-fe21-4dee-b0ef-a8f2841511ad_mjwlwqz5_3_be010306) is playable
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 3 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[getPlayableCardIds] Checking lands: landsPlayed=1, max=1
[getPlayableCardIds] Already played max lands this turn (1/1)
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Archangel Elspeth not playable - canCastNow=true, canPay=false
[getPlayableCardIds] Returning 1 playable card(s): [ 'ee6e5a35-fe21-4dee-b0ef-a8f2841511ad_mjwlwqz5_3_be010306' ]
[normalizeViewForEmit] getPlayableCardIds returned 1 cards
[normalizeViewForEmit] Set view.playableCards with 1 cards
[canAct] p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 3 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canAct] p_gbma14be: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 3 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canAct] p_gbma14be: Can cast sorcery-speed spell - returning TRUE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=true, canRespond=false
2026-01-02T08:23:27.481Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767342207481_64krz) ==========
2026-01-02T08:23:27.481Z [checkAndTriggerAutoPass] Priority: p_gbma14be, Phase: precombatMain, Step: MAIN1
[canAct] p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 3 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canAct] p_gbma14be: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 3 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canAct] p_gbma14be: Can cast sorcery-speed spell - returning TRUE
2026-01-02T08:23:27.481Z [checkAndTriggerAutoPass] canAct check: p_gbma14be isActive=true canAct=true (ID: autopass_1767342207481_64krz)
2026-01-02T08:23:27.481Z [checkAndTriggerAutoPass] p_gbma14be CAN ACT - returning early, NO auto-pass (ID: autopass_1767342207481_64krz)
2026-01-02T08:23:27.481Z [executeAutoPass] Broadcast complete (ID: autopass_1767342207322_0u972)
[requestCastSpell] ======== REQUEST START ========
[requestCastSpell] gameId: game_mjwlv4zk, cardId: ee6e5a35-fe21-4dee-b0ef-a8f2841511ad_mjwlwqz5_3_be010306, faceIndex: undefined
[requestCastSpell] playerId: p_gbma14be, priority: p_gbma14be
[requestCastSpell] No targets needed, emitted paymentRequired for Sol Ring
[requestCastSpell] ======== REQUEST END (waiting for payment) ========
[completeCastSpell] DEBUG START ========================================
[completeCastSpell] cardId: ee6e5a35-fe21-4dee-b0ef-a8f2841511ad_mjwlwqz5_3_be010306, effectId: cast_ee6e5a35-fe21-4dee-b0ef-a8f2841511ad_mjwlwqz5_3_be010306_1767342208640
[completeCastSpell] targets from client: undefined
[completeCastSpell] payment from client: undefined
[completeCastSpell] No pendingCast found for effectId: cast_ee6e5a35-fe21-4dee-b0ef-a8f2841511ad_mjwlwqz5_3_be010306_1767342208640
[completeCastSpell] Final targets to use: none
[completeCastSpell] Calling handleCastSpellFromHand with skipInteractivePrompts=true
[completeCastSpell] DEBUG END ==========================================
[handleCastSpellFromHand] ======== DEBUG START ========
[handleCastSpellFromHand] cardId: ee6e5a35-fe21-4dee-b0ef-a8f2841511ad_mjwlwqz5_3_be010306
[handleCastSpellFromHand] targets: undefined
[handleCastSpellFromHand] payment: undefined
[handleCastSpellFromHand] skipInteractivePrompts: true
[handleCastSpellFromHand] playerId: p_gbma14be
[handleCastSpellFromHand] priority: p_gbma14be
[handleCastSpellFromHand] Sol Ring: spellSpec=false, targetReqs=false, needsTargetSelection=null, hasTargets=false
[handleCastSpellFromHand] ======== DEBUG END ========
[castSpellFromHand] Floating mana available in pool: 1 colorless
[castSpellFromHand] Consumed 1 colorless mana for generic cost
[castSpellFromHand] Player p_gbma14be cast Sol Ring (ee6e5a35-fe21-4dee-b0ef-a8f2841511ad_mjwlwqz5_3_be010306) via applyEvent
[VIEW_FOR_DEBUG] {
  viewer: 'p_gbma14be',
  stackLength: 1,
  stackItems: [ 'Sol Ring' ],
  zones: { p_gbma14be: { handCount: 4, firstKnown: [Array] } }
}
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_gbma14be, viewerId=p_gbma14be, match=true
[getPlayableCardIds] Player p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 2 }
[getPlayableCardIds] Total available mana: 2
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Not checking lands: isMainPhase=true, stackIsEmpty=false, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Archangel Elspeth not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-01-02T08:23:29.661Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767342209661_k54fg) ==========
2026-01-02T08:23:29.661Z [checkAndTriggerAutoPass] Priority: p_gbma14be, Phase: precombatMain, Step: MAIN1
[canAct] p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
2026-01-02T08:23:29.661Z [checkAndTriggerAutoPass] canAct check: p_gbma14be isActive=true canAct=false (ID: autopass_1767342209661_k54fg)
2026-01-02T08:23:29.661Z [checkAndTriggerAutoPass] p_gbma14be CANNOT ACT - proceeding with auto-pass (ID: autopass_1767342209661_k54fg)
2026-01-02T08:23:29.661Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_gbma14be with 150ms delay (ID: autopass_1767342209661_k54fg)
2026-01-02T08:23:29.814Z [executeAutoPass] ========== EXECUTING for p_gbma14be (ID: autopass_1767342209661_k54fg) ==========
2026-01-02T08:23:29.814Z [executeAutoPass] Phase: precombatMain, Step: MAIN1
[canAct] p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
2026-01-02T08:23:29.814Z [executeAutoPass] Re-check: p_gbma14be canAct=false (ID: autopass_1767342209661_k54fg)
2026-01-02T08:23:29.814Z [executeAutoPass] Proceeding with auto-pass for p_gbma14be (ID: autopass_1767342209661_k54fg)
2026-01-02T08:23:29.814Z [executeAutoPass] Set _autoPassInProgress flag for p_gbma14be (ID: autopass_1767342209661_k54fg)
[priority] autoPassLoop starting - active players: p_gbma14be, autoPassEnabled: p_gbma14be, currentPriority: p_gbma14be, turnPlayer: p_gbma14be
[canAct] p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[priority] autoPassLoop - checking p_gbma14be (ACTIVE): canAct=false, stack.length=1, step=MAIN1
[priority] Auto-passing for p_gbma14be - no available actions
2026-01-02T08:23:29.814Z [executeAutoPass] passPriority result: changed=true, advanceStep=false, resolvedNow=true (ID: autopass_1767342209661_k54fg)
[checkAndTriggerAutoPass] Stack resolved after auto-pass for p_gbma14be
[resolveTopOfStack] Permanent Sol Ring entered battlefield under p_gbma14be
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[recalculateHandVisibility] Players with hand reveal effects: none
[resolveTopOfStack] Reset priorityPassedBy after spell resolution
2026-01-02T08:23:29.815Z [executeAutoPass] Cleared _autoPassInProgress flag for p_gbma14be (ID: autopass_1767342209661_k54fg)
2026-01-02T08:23:29.815Z [executeAutoPass] Broadcasting state after auto-pass (ID: autopass_1767342209661_k54fg)
[VIEW_FOR_DEBUG] {
  viewer: 'p_gbma14be',
  stackLength: 0,
  stackItems: [],
  zones: { p_gbma14be: { handCount: 4, firstKnown: [Array] } }
}
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_gbma14be, viewerId=p_gbma14be, match=true
[getPlayableCardIds] Player p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 4 }
[getPlayableCardIds] Total available mana: 4
[getPlayableCardIds] Checking 4 cards in hand
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[getPlayableCardIds] Checking lands: landsPlayed=1, max=1
[getPlayableCardIds] Already played max lands this turn (1/1)
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Archangel Elspeth not playable - canCastNow=true, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canAct] p_gbma14be: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canAct] p_gbma14be: No sorcery-speed actions available in main phase - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-01-02T08:23:29.817Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767342209817_ugfly) ==========
2026-01-02T08:23:29.817Z [checkAndTriggerAutoPass] Priority: p_gbma14be, Phase: precombatMain, Step: MAIN1
[canAct] p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canAct] p_gbma14be: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canAct] p_gbma14be: No sorcery-speed actions available in main phase - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
2026-01-02T08:23:29.817Z [checkAndTriggerAutoPass] canAct check: p_gbma14be isActive=true canAct=false (ID: autopass_1767342209817_ugfly)
2026-01-02T08:23:29.817Z [checkAndTriggerAutoPass] p_gbma14be CANNOT ACT - proceeding with auto-pass (ID: autopass_1767342209817_ugfly)
2026-01-02T08:23:29.817Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_gbma14be with 150ms delay (ID: autopass_1767342209817_ugfly)
2026-01-02T08:23:29.817Z [executeAutoPass] Broadcast complete (ID: autopass_1767342209661_k54fg)
2026-01-02T08:23:29.970Z [executeAutoPass] ========== EXECUTING for p_gbma14be (ID: autopass_1767342209817_ugfly) ==========
2026-01-02T08:23:29.970Z [executeAutoPass] Phase: precombatMain, Step: MAIN1
[canAct] p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canAct] p_gbma14be: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canAct] p_gbma14be: No sorcery-speed actions available in main phase - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
2026-01-02T08:23:29.970Z [executeAutoPass] Re-check: p_gbma14be canAct=false (ID: autopass_1767342209817_ugfly)
2026-01-02T08:23:29.970Z [executeAutoPass] Proceeding with auto-pass for p_gbma14be (ID: autopass_1767342209817_ugfly)
2026-01-02T08:23:29.970Z [executeAutoPass] Set _autoPassInProgress flag for p_gbma14be (ID: autopass_1767342209817_ugfly)
2026-01-02T08:23:29.970Z [executeAutoPass] passPriority result: changed=true, advanceStep=true, resolvedNow=false (ID: autopass_1767342209817_ugfly)
2026-01-02T08:23:29.970Z [executeAutoPass] Advancing step after auto-pass for p_gbma14be (ID: autopass_1767342209817_ugfly)
2026-01-02T08:23:29.971Z [nextStep] ========== CALLED ==========
2026-01-02T08:23:29.971Z [nextStep] Game: game_mjwlv4zk
2026-01-02T08:23:29.971Z [nextStep] Current: precombatMain/MAIN1
2026-01-02T08:23:29.971Z [nextStep] Priority: p_gbma14be, Turn: p_gbma14be
2026-01-02T08:23:29.971Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at Timeout.executeAutoPass (D:\Git\MTGEDH\server\src\socket\util.ts:2017:31)
        at listOnTimeout (node:internal/timers:588:17)
        at process.processTimers (node:internal/timers:523:7)
2026-01-02T08:23:29.971Z [clearManaPool] Processed mana pools for all players
2026-01-02T08:23:29.971Z [nextStep] Advanced to phase=combat, step=BEGIN_COMBAT
[getBeginningOfCombatTriggers] Total triggers for activePlayer=p_gbma14be: 0
2026-01-02T08:23:29.972Z [nextStep] Granting priority to active player p_gbma14be (step: BEGIN_COMBAT, stack size: 0)
[canAct] p_gbma14be: step=BEGIN_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
2026-01-02T08:23:29.972Z [nextStep] DEBUG - Turn Player p_gbma14be:
2026-01-02T08:23:29.972Z [nextStep]   Hand (4): Plains, Plains, Plains, Plains
2026-01-02T08:23:29.972Z [nextStep]   canAct: false, canRespond: false
2026-01-02T08:23:29.972Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_gbma14be, autoPassEnabled: p_gbma14be, currentPriority: p_gbma14be, turnPlayer: p_gbma14be
[canAct] p_gbma14be: step=BEGIN_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[priority] autoPassLoop - checking p_gbma14be (ACTIVE): canAct=false, stack.length=0, step=BEGIN_COMBAT
[priority] Auto-passing for p_gbma14be - no available actions
2026-01-02T08:23:29.972Z [nextStep] All players auto-passed after granting priority - caller should advance step
2026-01-02T08:23:29.972Z [executeAutoPass] Cleared _autoPassInProgress flag for p_gbma14be (ID: autopass_1767342209817_ugfly)
2026-01-02T08:23:29.972Z [executeAutoPass] Broadcasting state after auto-pass (ID: autopass_1767342209817_ugfly)
[VIEW_FOR_DEBUG] {
  viewer: 'p_gbma14be',
  stackLength: 0,
  stackItems: [],
  zones: { p_gbma14be: { handCount: 4, firstKnown: [Array] } }
}
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_gbma14be, viewerId=p_gbma14be, match=true
[getPlayableCardIds] Player p_gbma14be: step=BEGIN_COMBAT, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 4 }
[getPlayableCardIds] Total available mana: 4
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Archangel Elspeth not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_gbma14be: step=BEGIN_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-01-02T08:23:29.973Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767342209973_z8xn2) ==========
2026-01-02T08:23:29.973Z [checkAndTriggerAutoPass] Priority: p_gbma14be, Phase: combat, Step: BEGIN_COMBAT
[canAct] p_gbma14be: step=BEGIN_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
2026-01-02T08:23:29.974Z [checkAndTriggerAutoPass] canAct check: p_gbma14be isActive=true canAct=false (ID: autopass_1767342209973_z8xn2)
2026-01-02T08:23:29.974Z [checkAndTriggerAutoPass] p_gbma14be CANNOT ACT - proceeding with auto-pass (ID: autopass_1767342209973_z8xn2)
2026-01-02T08:23:29.974Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_gbma14be with 150ms delay (ID: autopass_1767342209973_z8xn2)
2026-01-02T08:23:29.974Z [executeAutoPass] Broadcast complete (ID: autopass_1767342209817_ugfly)
2026-01-02T08:23:30.126Z [executeAutoPass] ========== EXECUTING for p_gbma14be (ID: autopass_1767342209973_z8xn2) ==========
2026-01-02T08:23:30.126Z [executeAutoPass] Phase: combat, Step: BEGIN_COMBAT
[canAct] p_gbma14be: step=BEGIN_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
2026-01-02T08:23:30.126Z [executeAutoPass] Re-check: p_gbma14be canAct=false (ID: autopass_1767342209973_z8xn2)
2026-01-02T08:23:30.126Z [executeAutoPass] Proceeding with auto-pass for p_gbma14be (ID: autopass_1767342209973_z8xn2)
2026-01-02T08:23:30.126Z [executeAutoPass] Set _autoPassInProgress flag for p_gbma14be (ID: autopass_1767342209973_z8xn2)
2026-01-02T08:23:30.126Z [executeAutoPass] passPriority result: changed=true, advanceStep=true, resolvedNow=false (ID: autopass_1767342209973_z8xn2)
2026-01-02T08:23:30.126Z [executeAutoPass] Advancing step after auto-pass for p_gbma14be (ID: autopass_1767342209973_z8xn2)
2026-01-02T08:23:30.126Z [nextStep] ========== CALLED ==========
2026-01-02T08:23:30.126Z [nextStep] Game: game_mjwlv4zk
2026-01-02T08:23:30.126Z [nextStep] Current: combat/BEGIN_COMBAT
2026-01-02T08:23:30.126Z [nextStep] Priority: p_gbma14be, Turn: p_gbma14be
2026-01-02T08:23:30.126Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at Timeout.executeAutoPass (D:\Git\MTGEDH\server\src\socket\util.ts:2017:31)
        at listOnTimeout (node:internal/timers:588:17)
        at process.processTimers (node:internal/timers:523:7)
2026-01-02T08:23:30.126Z [nextStep] Advanced to phase=combat, step=DECLARE_ATTACKERS
2026-01-02T08:23:30.126Z [nextStep] Granting priority to active player p_gbma14be (step: DECLARE_ATTACKERS, stack size: 0)
[canAct] p_gbma14be: step=DECLARE_ATTACKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
2026-01-02T08:23:30.126Z [nextStep] DEBUG - Turn Player p_gbma14be:
2026-01-02T08:23:30.126Z [nextStep]   Hand (4): Plains, Plains, Plains, Plains
2026-01-02T08:23:30.126Z [nextStep]   canAct: false, canRespond: false
2026-01-02T08:23:30.126Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_gbma14be, autoPassEnabled: p_gbma14be, currentPriority: p_gbma14be, turnPlayer: p_gbma14be
[canAct] p_gbma14be: step=DECLARE_ATTACKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[priority] autoPassLoop - checking p_gbma14be (ACTIVE): canAct=false, stack.length=0, step=DECLARE_ATTACKERS
[priority] Auto-passing for p_gbma14be - no available actions
2026-01-02T08:23:30.127Z [nextStep] All players auto-passed after granting priority - caller should advance step
2026-01-02T08:23:30.127Z [executeAutoPass] Cleared _autoPassInProgress flag for p_gbma14be (ID: autopass_1767342209973_z8xn2)
2026-01-02T08:23:30.127Z [executeAutoPass] Broadcasting state after auto-pass (ID: autopass_1767342209973_z8xn2)
[VIEW_FOR_DEBUG] {
  viewer: 'p_gbma14be',
  stackLength: 0,
  stackItems: [],
  zones: { p_gbma14be: { handCount: 4, firstKnown: [Array] } }
}
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_gbma14be, viewerId=p_gbma14be, match=true
[getPlayableCardIds] Player p_gbma14be: step=DECLARE_ATTACKERS, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 4 }
[getPlayableCardIds] Total available mana: 4
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Archangel Elspeth not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_gbma14be: step=DECLARE_ATTACKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-01-02T08:23:30.127Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767342210127_og0dn) ==========
2026-01-02T08:23:30.127Z [checkAndTriggerAutoPass] Priority: p_gbma14be, Phase: combat, Step: DECLARE_ATTACKERS
[canAct] p_gbma14be: step=DECLARE_ATTACKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
2026-01-02T08:23:30.128Z [checkAndTriggerAutoPass] canAct check: p_gbma14be isActive=true canAct=false (ID: autopass_1767342210127_og0dn)
2026-01-02T08:23:30.128Z [checkAndTriggerAutoPass] p_gbma14be CANNOT ACT - proceeding with auto-pass (ID: autopass_1767342210127_og0dn)
2026-01-02T08:23:30.128Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_gbma14be with 150ms delay (ID: autopass_1767342210127_og0dn)
2026-01-02T08:23:30.128Z [executeAutoPass] Broadcast complete (ID: autopass_1767342209973_z8xn2)
2026-01-02T08:23:30.133Z [nextStep] ========== CALLED ==========
2026-01-02T08:23:30.133Z [nextStep] Game: game_mjwlv4zk
2026-01-02T08:23:30.133Z [nextStep] Current: combat/DECLARE_ATTACKERS
2026-01-02T08:23:30.133Z [nextStep] Priority: p_gbma14be, Turn: p_gbma14be
2026-01-02T08:23:30.133Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at Socket.<anonymous> (D:\Git\MTGEDH\server\src\socket\combat.ts:1857:29)
        at Socket.emit (node:events:519:28)
        at Socket.emitUntyped (D:\Git\MTGEDH\node_modules\socket.io\dist\typed-events.js:69:22)
2026-01-02T08:23:30.133Z [nextStep] Entering DECLARE_BLOCKERS, initialized blockersDeclaredBy array
2026-01-02T08:23:30.133Z [nextStep] Advanced to phase=combat, step=DECLARE_BLOCKERS
2026-01-02T08:23:30.133Z [nextStep] Granting priority to active player p_gbma14be (step: DECLARE_BLOCKERS, stack size: 0)
[canAct] p_gbma14be: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
2026-01-02T08:23:30.133Z [nextStep] DEBUG - Turn Player p_gbma14be:
2026-01-02T08:23:30.133Z [nextStep]   Hand (4): Plains, Plains, Plains, Plains
2026-01-02T08:23:30.133Z [nextStep]   canAct: false, canRespond: false
2026-01-02T08:23:30.133Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_gbma14be, autoPassEnabled: p_gbma14be, currentPriority: p_gbma14be, turnPlayer: p_gbma14be
[canAct] p_gbma14be: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[priority] autoPassLoop - checking p_gbma14be (ACTIVE): canAct=false, stack.length=0, step=DECLARE_BLOCKERS
[priority] Auto-passing for p_gbma14be - no available actions
2026-01-02T08:23:30.134Z [nextStep] All players auto-passed after granting priority - caller should advance step
[VIEW_FOR_DEBUG] {
  viewer: 'p_gbma14be',
  stackLength: 0,
  stackItems: [],
  zones: { p_gbma14be: { handCount: 4, firstKnown: [Array] } }
}
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_gbma14be, viewerId=p_gbma14be, match=true
[getPlayableCardIds] Player p_gbma14be: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 4 }
[getPlayableCardIds] Total available mana: 4
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Archangel Elspeth not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_gbma14be: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-01-02T08:23:30.134Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767342210134_2uqat) ==========
2026-01-02T08:23:30.134Z [checkAndTriggerAutoPass] Priority: p_gbma14be, Phase: combat, Step: DECLARE_BLOCKERS
[canAct] p_gbma14be: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
2026-01-02T08:23:30.135Z [checkAndTriggerAutoPass] canAct check: p_gbma14be isActive=true canAct=false (ID: autopass_1767342210134_2uqat)
2026-01-02T08:23:30.135Z [checkAndTriggerAutoPass] p_gbma14be CANNOT ACT - proceeding with auto-pass (ID: autopass_1767342210134_2uqat)
2026-01-02T08:23:30.135Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_gbma14be with 150ms delay (ID: autopass_1767342210134_2uqat)
2026-01-02T08:23:30.278Z [executeAutoPass] ========== EXECUTING for p_gbma14be (ID: autopass_1767342210127_og0dn) ==========
2026-01-02T08:23:30.278Z [executeAutoPass] Phase: combat, Step: DECLARE_BLOCKERS
[canAct] p_gbma14be: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
2026-01-02T08:23:30.279Z [executeAutoPass] Re-check: p_gbma14be canAct=false (ID: autopass_1767342210127_og0dn)
2026-01-02T08:23:30.279Z [executeAutoPass] Proceeding with auto-pass for p_gbma14be (ID: autopass_1767342210127_og0dn)
2026-01-02T08:23:30.279Z [executeAutoPass] Set _autoPassInProgress flag for p_gbma14be (ID: autopass_1767342210127_og0dn)
2026-01-02T08:23:30.279Z [executeAutoPass] passPriority result: changed=true, advanceStep=true, resolvedNow=false (ID: autopass_1767342210127_og0dn)
2026-01-02T08:23:30.279Z [executeAutoPass] Advancing step after auto-pass for p_gbma14be (ID: autopass_1767342210127_og0dn)
2026-01-02T08:23:30.279Z [nextStep] ========== CALLED ==========
2026-01-02T08:23:30.279Z [nextStep] Game: game_mjwlv4zk
2026-01-02T08:23:30.279Z [nextStep] Current: combat/DECLARE_BLOCKERS
2026-01-02T08:23:30.279Z [nextStep] Priority: p_gbma14be, Turn: p_gbma14be
2026-01-02T08:23:30.279Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at Timeout.executeAutoPass (D:\Git\MTGEDH\server\src\socket\util.ts:2017:31)
        at listOnTimeout (node:internal/timers:588:17)
        at process.processTimers (node:internal/timers:523:7)
2026-01-02T08:23:30.279Z [COMBAT_STEP] ========== TRANSITIONING FROM DECLARE_BLOCKERS TO DAMAGE (no first strike) ==========
2026-01-02T08:23:30.279Z [COMBAT_STEP] Calling dealCombatDamage...
2026-01-02T08:23:30.280Z [COMBAT_DAMAGE] ========== ENTERING dealCombatDamage (firstStrike=undefined) ==========
2026-01-02T08:23:30.280Z [COMBAT_DAMAGE] Found 0 attackers
2026-01-02T08:23:30.280Z [COMBAT_DAMAGE] No attackers, skipping combat damage
2026-01-02T08:23:30.280Z [COMBAT_STEP] dealCombatDamage completed successfully
2026-01-02T08:23:30.280Z [COMBAT_STEP] Result: damageToPlayers={}, creaturesDestroyed=0
2026-01-02T08:23:30.280Z [COMBAT_STEP] ========== END DAMAGE STEP PROCESSING ==========
2026-01-02T08:23:30.280Z [nextStep] Advanced to phase=combat, step=DAMAGE
2026-01-02T08:23:30.280Z [nextStep] Granting priority to active player p_gbma14be (step: DAMAGE, stack size: 0)
[canAct] p_gbma14be: step=DAMAGE, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
2026-01-02T08:23:30.280Z [nextStep] DEBUG - Turn Player p_gbma14be:
2026-01-02T08:23:30.280Z [nextStep]   Hand (4): Plains, Plains, Plains, Plains
2026-01-02T08:23:30.280Z [nextStep]   canAct: false, canRespond: false
2026-01-02T08:23:30.280Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_gbma14be, autoPassEnabled: p_gbma14be, currentPriority: p_gbma14be, turnPlayer: p_gbma14be
[canAct] p_gbma14be: step=DAMAGE, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[priority] autoPassLoop - checking p_gbma14be (ACTIVE): canAct=false, stack.length=0, step=DAMAGE
[priority] Auto-passing for p_gbma14be - no available actions
2026-01-02T08:23:30.280Z [nextStep] All players auto-passed after granting priority - caller should advance step
2026-01-02T08:23:30.280Z [executeAutoPass] Cleared _autoPassInProgress flag for p_gbma14be (ID: autopass_1767342210127_og0dn)
2026-01-02T08:23:30.280Z [executeAutoPass] Broadcasting state after auto-pass (ID: autopass_1767342210127_og0dn)
[VIEW_FOR_DEBUG] {
  viewer: 'p_gbma14be',
  stackLength: 0,
  stackItems: [],
  zones: { p_gbma14be: { handCount: 4, firstKnown: [Array] } }
}
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_gbma14be, viewerId=p_gbma14be, match=true
[getPlayableCardIds] Player p_gbma14be: step=DAMAGE, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 4 }
[getPlayableCardIds] Total available mana: 4
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Archangel Elspeth not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_gbma14be: step=DAMAGE, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-01-02T08:23:30.281Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767342210281_rohbv) ==========
2026-01-02T08:23:30.281Z [checkAndTriggerAutoPass] Priority: p_gbma14be, Phase: combat, Step: DAMAGE
[canAct] p_gbma14be: step=DAMAGE, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
2026-01-02T08:23:30.281Z [checkAndTriggerAutoPass] canAct check: p_gbma14be isActive=true canAct=false (ID: autopass_1767342210281_rohbv)
2026-01-02T08:23:30.281Z [checkAndTriggerAutoPass] p_gbma14be CANNOT ACT - proceeding with auto-pass (ID: autopass_1767342210281_rohbv)
2026-01-02T08:23:30.281Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_gbma14be with 150ms delay (ID: autopass_1767342210281_rohbv)
2026-01-02T08:23:30.281Z [executeAutoPass] Broadcast complete (ID: autopass_1767342210127_og0dn)
2026-01-02T08:23:30.284Z [executeAutoPass] ========== EXECUTING for p_gbma14be (ID: autopass_1767342210134_2uqat) ==========
2026-01-02T08:23:30.284Z [executeAutoPass] Phase: combat, Step: DAMAGE
[canAct] p_gbma14be: step=DAMAGE, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
2026-01-02T08:23:30.285Z [executeAutoPass] Re-check: p_gbma14be canAct=false (ID: autopass_1767342210134_2uqat)
2026-01-02T08:23:30.285Z [executeAutoPass] Proceeding with auto-pass for p_gbma14be (ID: autopass_1767342210134_2uqat)
2026-01-02T08:23:30.285Z [executeAutoPass] Set _autoPassInProgress flag for p_gbma14be (ID: autopass_1767342210134_2uqat)
2026-01-02T08:23:30.285Z [executeAutoPass] passPriority result: changed=true, advanceStep=true, resolvedNow=false (ID: autopass_1767342210134_2uqat)
2026-01-02T08:23:30.285Z [executeAutoPass] Advancing step after auto-pass for p_gbma14be (ID: autopass_1767342210134_2uqat)
2026-01-02T08:23:30.285Z [nextStep] ========== CALLED ==========
2026-01-02T08:23:30.285Z [nextStep] Game: game_mjwlv4zk
2026-01-02T08:23:30.285Z [nextStep] Current: combat/DAMAGE
2026-01-02T08:23:30.285Z [nextStep] Priority: p_gbma14be, Turn: p_gbma14be
2026-01-02T08:23:30.285Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at Timeout.executeAutoPass (D:\Git\MTGEDH\server\src\socket\util.ts:2017:31)
        at listOnTimeout (node:internal/timers:588:17)
        at process.processTimers (node:internal/timers:523:7)
2026-01-02T08:23:30.285Z [nextStep] Advanced to phase=combat, step=END_COMBAT
2026-01-02T08:23:30.285Z [nextStep] Granting priority to active player p_gbma14be (step: END_COMBAT, stack size: 0)
[canAct] p_gbma14be: step=END_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
2026-01-02T08:23:30.286Z [nextStep] DEBUG - Turn Player p_gbma14be:
2026-01-02T08:23:30.286Z [nextStep]   Hand (4): Plains, Plains, Plains, Plains
2026-01-02T08:23:30.286Z [nextStep]   canAct: false, canRespond: false
2026-01-02T08:23:30.286Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_gbma14be, autoPassEnabled: p_gbma14be, currentPriority: p_gbma14be, turnPlayer: p_gbma14be
[canAct] p_gbma14be: step=END_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[priority] autoPassLoop - checking p_gbma14be (ACTIVE): canAct=false, stack.length=0, step=END_COMBAT
[priority] Auto-passing for p_gbma14be - no available actions
2026-01-02T08:23:30.286Z [nextStep] All players auto-passed after granting priority - caller should advance step
2026-01-02T08:23:30.286Z [executeAutoPass] Cleared _autoPassInProgress flag for p_gbma14be (ID: autopass_1767342210134_2uqat)
2026-01-02T08:23:30.286Z [executeAutoPass] Broadcasting state after auto-pass (ID: autopass_1767342210134_2uqat)
[VIEW_FOR_DEBUG] {
  viewer: 'p_gbma14be',
  stackLength: 0,
  stackItems: [],
  zones: { p_gbma14be: { handCount: 4, firstKnown: [Array] } }
}
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_gbma14be, viewerId=p_gbma14be, match=true
[getPlayableCardIds] Player p_gbma14be: step=END_COMBAT, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 4 }
[getPlayableCardIds] Total available mana: 4
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Archangel Elspeth not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_gbma14be: step=END_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-01-02T08:23:30.287Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767342210287_wnlfn) ==========
2026-01-02T08:23:30.287Z [checkAndTriggerAutoPass] Priority: p_gbma14be, Phase: combat, Step: END_COMBAT
[canAct] p_gbma14be: step=END_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
2026-01-02T08:23:30.287Z [checkAndTriggerAutoPass] canAct check: p_gbma14be isActive=true canAct=false (ID: autopass_1767342210287_wnlfn)
2026-01-02T08:23:30.287Z [checkAndTriggerAutoPass] p_gbma14be CANNOT ACT - proceeding with auto-pass (ID: autopass_1767342210287_wnlfn)
2026-01-02T08:23:30.287Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_gbma14be with 150ms delay (ID: autopass_1767342210287_wnlfn)
2026-01-02T08:23:30.287Z [executeAutoPass] Broadcast complete (ID: autopass_1767342210134_2uqat)
2026-01-02T08:23:30.433Z [executeAutoPass] ========== EXECUTING for p_gbma14be (ID: autopass_1767342210281_rohbv) ==========
2026-01-02T08:23:30.433Z [executeAutoPass] Phase: combat, Step: END_COMBAT
[canAct] p_gbma14be: step=END_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
2026-01-02T08:23:30.433Z [executeAutoPass] Re-check: p_gbma14be canAct=false (ID: autopass_1767342210281_rohbv)
2026-01-02T08:23:30.433Z [executeAutoPass] Proceeding with auto-pass for p_gbma14be (ID: autopass_1767342210281_rohbv)
2026-01-02T08:23:30.433Z [executeAutoPass] Set _autoPassInProgress flag for p_gbma14be (ID: autopass_1767342210281_rohbv)
2026-01-02T08:23:30.433Z [executeAutoPass] passPriority result: changed=true, advanceStep=true, resolvedNow=false (ID: autopass_1767342210281_rohbv)
2026-01-02T08:23:30.433Z [executeAutoPass] Advancing step after auto-pass for p_gbma14be (ID: autopass_1767342210281_rohbv)
2026-01-02T08:23:30.433Z [nextStep] ========== CALLED ==========
2026-01-02T08:23:30.433Z [nextStep] Game: game_mjwlv4zk
2026-01-02T08:23:30.433Z [nextStep] Current: combat/END_COMBAT
2026-01-02T08:23:30.433Z [nextStep] Priority: p_gbma14be, Turn: p_gbma14be
2026-01-02T08:23:30.433Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at Timeout.executeAutoPass (D:\Git\MTGEDH\server\src\socket\util.ts:2017:31)
        at listOnTimeout (node:internal/timers:588:17)
        at process.processTimers (node:internal/timers:523:7)
2026-01-02T08:23:30.433Z [clearManaPool] Processed mana pools for all players
2026-01-02T08:23:30.433Z [nextStep] Advanced to phase=postcombatMain, step=MAIN2
2026-01-02T08:23:30.433Z [nextStep] Granting priority to active player p_gbma14be (step: MAIN2, stack size: 0)
[canAct] p_gbma14be: step=MAIN2, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canAct] p_gbma14be: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canAct] p_gbma14be: No sorcery-speed actions available in main phase - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
2026-01-02T08:23:30.434Z [nextStep] DEBUG - Turn Player p_gbma14be:
2026-01-02T08:23:30.434Z [nextStep]   Hand (4): Plains, Plains, Plains, Plains
2026-01-02T08:23:30.434Z [nextStep]   canAct: false, canRespond: false
2026-01-02T08:23:30.434Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_gbma14be, autoPassEnabled: p_gbma14be, currentPriority: p_gbma14be, turnPlayer: p_gbma14be
[canAct] p_gbma14be: step=MAIN2, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canAct] p_gbma14be: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canAct] p_gbma14be: No sorcery-speed actions available in main phase - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[priority] autoPassLoop - checking p_gbma14be (ACTIVE): canAct=false, stack.length=0, step=MAIN2
[priority] Auto-passing for p_gbma14be - no available actions
2026-01-02T08:23:30.434Z [nextStep] All players auto-passed after granting priority - caller should advance step
2026-01-02T08:23:30.434Z [executeAutoPass] Cleared _autoPassInProgress flag for p_gbma14be (ID: autopass_1767342210281_rohbv)
2026-01-02T08:23:30.434Z [executeAutoPass] Broadcasting state after auto-pass (ID: autopass_1767342210281_rohbv)
[VIEW_FOR_DEBUG] {
  viewer: 'p_gbma14be',
  stackLength: 0,
  stackItems: [],
  zones: { p_gbma14be: { handCount: 4, firstKnown: [Array] } }
}
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_gbma14be, viewerId=p_gbma14be, match=true
[getPlayableCardIds] Player p_gbma14be: step=MAIN2, isMainPhase=true, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 4 }
[getPlayableCardIds] Total available mana: 4
[getPlayableCardIds] Checking 4 cards in hand
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[getPlayableCardIds] Checking lands: landsPlayed=1, max=1
[getPlayableCardIds] Already played max lands this turn (1/1)
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Archangel Elspeth not playable - canCastNow=true, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_gbma14be: step=MAIN2, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canAct] p_gbma14be: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canAct] p_gbma14be: No sorcery-speed actions available in main phase - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-01-02T08:23:30.435Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767342210435_ys9gu) ==========
2026-01-02T08:23:30.435Z [checkAndTriggerAutoPass] Priority: p_gbma14be, Phase: postcombatMain, Step: MAIN2
[canAct] p_gbma14be: step=MAIN2, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canAct] p_gbma14be: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canAct] p_gbma14be: No sorcery-speed actions available in main phase - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
2026-01-02T08:23:30.435Z [checkAndTriggerAutoPass] canAct check: p_gbma14be isActive=true canAct=false (ID: autopass_1767342210435_ys9gu)
2026-01-02T08:23:30.435Z [checkAndTriggerAutoPass] p_gbma14be CANNOT ACT - proceeding with auto-pass (ID: autopass_1767342210435_ys9gu)
2026-01-02T08:23:30.435Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_gbma14be with 150ms delay (ID: autopass_1767342210435_ys9gu)
2026-01-02T08:23:30.435Z [executeAutoPass] Broadcast complete (ID: autopass_1767342210281_rohbv)
2026-01-02T08:23:30.438Z [executeAutoPass] ========== EXECUTING for p_gbma14be (ID: autopass_1767342210287_wnlfn) ==========
2026-01-02T08:23:30.438Z [executeAutoPass] Phase: postcombatMain, Step: MAIN2
[canAct] p_gbma14be: step=MAIN2, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canAct] p_gbma14be: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canAct] p_gbma14be: No sorcery-speed actions available in main phase - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
2026-01-02T08:23:30.438Z [executeAutoPass] Re-check: p_gbma14be canAct=false (ID: autopass_1767342210287_wnlfn)
2026-01-02T08:23:30.438Z [executeAutoPass] Proceeding with auto-pass for p_gbma14be (ID: autopass_1767342210287_wnlfn)
2026-01-02T08:23:30.438Z [executeAutoPass] Set _autoPassInProgress flag for p_gbma14be (ID: autopass_1767342210287_wnlfn)
2026-01-02T08:23:30.438Z [executeAutoPass] passPriority result: changed=true, advanceStep=true, resolvedNow=false (ID: autopass_1767342210287_wnlfn)
2026-01-02T08:23:30.438Z [executeAutoPass] Advancing step after auto-pass for p_gbma14be (ID: autopass_1767342210287_wnlfn)
2026-01-02T08:23:30.438Z [nextStep] ========== CALLED ==========
2026-01-02T08:23:30.438Z [nextStep] Game: game_mjwlv4zk
2026-01-02T08:23:30.438Z [nextStep] Current: postcombatMain/MAIN2
2026-01-02T08:23:30.438Z [nextStep] Priority: p_gbma14be, Turn: p_gbma14be
2026-01-02T08:23:30.438Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at Timeout.executeAutoPass (D:\Git\MTGEDH\server\src\socket\util.ts:2017:31)
        at listOnTimeout (node:internal/timers:588:17)
        at process.processTimers (node:internal/timers:523:7)
2026-01-02T08:23:30.438Z [clearManaPool] Processed mana pools for all players
2026-01-02T08:23:30.438Z [nextStep] Advanced to phase=ending, step=END
2026-01-02T08:23:30.439Z [nextStep] Granting priority to active player p_gbma14be (step: END, stack size: 0)
[canAct] p_gbma14be: step=END, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
2026-01-02T08:23:30.439Z [nextStep] DEBUG - Turn Player p_gbma14be:
2026-01-02T08:23:30.439Z [nextStep]   Hand (4): Plains, Plains, Plains, Plains
2026-01-02T08:23:30.439Z [nextStep]   canAct: false, canRespond: false
2026-01-02T08:23:30.439Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_gbma14be, autoPassEnabled: p_gbma14be, currentPriority: p_gbma14be, turnPlayer: p_gbma14be
[canAct] p_gbma14be: step=END, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[priority] autoPassLoop - checking p_gbma14be (ACTIVE): canAct=false, stack.length=0, step=END
[priority] Auto-passing for p_gbma14be - no available actions
2026-01-02T08:23:30.439Z [nextStep] All players auto-passed after granting priority - caller should advance step
2026-01-02T08:23:30.439Z [executeAutoPass] Cleared _autoPassInProgress flag for p_gbma14be (ID: autopass_1767342210287_wnlfn)
2026-01-02T08:23:30.439Z [executeAutoPass] Broadcasting state after auto-pass (ID: autopass_1767342210287_wnlfn)
[VIEW_FOR_DEBUG] {
  viewer: 'p_gbma14be',
  stackLength: 0,
  stackItems: [],
  zones: { p_gbma14be: { handCount: 4, firstKnown: [Array] } }
}
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_gbma14be, viewerId=p_gbma14be, match=true
[getPlayableCardIds] Player p_gbma14be: step=END, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 4 }
[getPlayableCardIds] Total available mana: 4
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Archangel Elspeth not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_gbma14be: step=END, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-01-02T08:23:30.440Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767342210440_jqn19) ==========
2026-01-02T08:23:30.440Z [checkAndTriggerAutoPass] Priority: p_gbma14be, Phase: ending, Step: END
[canAct] p_gbma14be: step=END, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
2026-01-02T08:23:30.440Z [checkAndTriggerAutoPass] canAct check: p_gbma14be isActive=true canAct=false (ID: autopass_1767342210440_jqn19)
2026-01-02T08:23:30.440Z [checkAndTriggerAutoPass] p_gbma14be CANNOT ACT - proceeding with auto-pass (ID: autopass_1767342210440_jqn19)
2026-01-02T08:23:30.440Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_gbma14be with 150ms delay (ID: autopass_1767342210440_jqn19)
2026-01-02T08:23:30.440Z [executeAutoPass] Broadcast complete (ID: autopass_1767342210287_wnlfn)
2026-01-02T08:23:30.586Z [executeAutoPass] ========== EXECUTING for p_gbma14be (ID: autopass_1767342210435_ys9gu) ==========
2026-01-02T08:23:30.586Z [executeAutoPass] Phase: ending, Step: END
[canAct] p_gbma14be: step=END, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
2026-01-02T08:23:30.586Z [executeAutoPass] Re-check: p_gbma14be canAct=false (ID: autopass_1767342210435_ys9gu)
2026-01-02T08:23:30.586Z [executeAutoPass] Proceeding with auto-pass for p_gbma14be (ID: autopass_1767342210435_ys9gu)
2026-01-02T08:23:30.586Z [executeAutoPass] Set _autoPassInProgress flag for p_gbma14be (ID: autopass_1767342210435_ys9gu)
2026-01-02T08:23:30.586Z [executeAutoPass] passPriority result: changed=true, advanceStep=true, resolvedNow=false (ID: autopass_1767342210435_ys9gu)
2026-01-02T08:23:30.586Z [executeAutoPass] Advancing step after auto-pass for p_gbma14be (ID: autopass_1767342210435_ys9gu)
2026-01-02T08:23:30.586Z [nextStep] ========== CALLED ==========
2026-01-02T08:23:30.586Z [nextStep] Game: game_mjwlv4zk
2026-01-02T08:23:30.586Z [nextStep] Current: ending/END
2026-01-02T08:23:30.586Z [nextStep] Priority: p_gbma14be, Turn: p_gbma14be
2026-01-02T08:23:30.586Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at Timeout.executeAutoPass (D:\Git\MTGEDH\server\src\socket\util.ts:2017:31)
        at listOnTimeout (node:internal/timers:588:17)
        at process.processTimers (node:internal/timers:523:7)
2026-01-02T08:23:30.586Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T08:23:30.587Z [nextStep] Step CLEANUP does not grant priority (Rule 502.1/514.1)
2026-01-02T08:23:30.587Z [nextStep] Cleanup complete, advancing to next turn
2026-01-02T08:23:30.587Z [untapPermanentsForPlayer] Player p_gbma14be: untapped 2, stun counters removed 0, skipped (doesn't untap) 0
2026-01-02T08:23:30.587Z [nextTurn] Cleared autoPassForTurn flags for new turn
2026-01-02T08:23:30.587Z [nextTurn] Advanced to player p_gbma14be, phase=beginning, step=UPKEEP
2026-01-02T08:23:30.587Z [nextTurn] Checking if auto-pass should apply at upkeep
[priority] autoPassLoop starting - active players: p_gbma14be, autoPassEnabled: p_gbma14be, currentPriority: p_gbma14be, turnPlayer: p_gbma14be
[canAct] p_gbma14be: step=UPKEEP, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[priority] autoPassLoop - checking p_gbma14be (ACTIVE): canAct=false, stack.length=0, step=UPKEEP
[priority] Auto-passing for p_gbma14be - no available actions
2026-01-02T08:23:30.587Z [nextTurn] All players auto-passed at upkeep - caller should advance step
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[recalculateHandVisibility] Players with hand reveal effects: none
2026-01-02T08:23:30.587Z [executeAutoPass] Cleared _autoPassInProgress flag for p_gbma14be (ID: autopass_1767342210435_ys9gu)
2026-01-02T08:23:30.587Z [executeAutoPass] Broadcasting state after auto-pass (ID: autopass_1767342210435_ys9gu)
[VIEW_FOR_DEBUG] {
  viewer: 'p_gbma14be',
  stackLength: 0,
  stackItems: [],
  zones: { p_gbma14be: { handCount: 4, firstKnown: [Array] } }
}
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_gbma14be, viewerId=p_gbma14be, match=true
[getPlayableCardIds] Player p_gbma14be: step=UPKEEP, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 1, blue: 0, black: 0, red: 0, green: 0, colorless: 6 }
[getPlayableCardIds] Total available mana: 7
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Archangel Elspeth not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_gbma14be: step=UPKEEP, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-01-02T08:23:30.588Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767342210588_i65cs) ==========
2026-01-02T08:23:30.588Z [checkAndTriggerAutoPass] Priority: p_gbma14be, Phase: beginning, Step: UPKEEP
[canAct] p_gbma14be: step=UPKEEP, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
2026-01-02T08:23:30.589Z [checkAndTriggerAutoPass] canAct check: p_gbma14be isActive=true canAct=false (ID: autopass_1767342210588_i65cs)
2026-01-02T08:23:30.589Z [checkAndTriggerAutoPass] p_gbma14be CANNOT ACT - proceeding with auto-pass (ID: autopass_1767342210588_i65cs)
2026-01-02T08:23:30.589Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_gbma14be with 150ms delay (ID: autopass_1767342210588_i65cs)
2026-01-02T08:23:30.589Z [executeAutoPass] Broadcast complete (ID: autopass_1767342210435_ys9gu)
2026-01-02T08:23:30.591Z [executeAutoPass] ========== EXECUTING for p_gbma14be (ID: autopass_1767342210440_jqn19) ==========
2026-01-02T08:23:30.591Z [executeAutoPass] Phase: beginning, Step: UPKEEP
[canAct] p_gbma14be: step=UPKEEP, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
2026-01-02T08:23:30.591Z [executeAutoPass] Re-check: p_gbma14be canAct=false (ID: autopass_1767342210440_jqn19)
2026-01-02T08:23:30.591Z [executeAutoPass] Proceeding with auto-pass for p_gbma14be (ID: autopass_1767342210440_jqn19)
2026-01-02T08:23:30.591Z [executeAutoPass] Set _autoPassInProgress flag for p_gbma14be (ID: autopass_1767342210440_jqn19)
2026-01-02T08:23:30.591Z [executeAutoPass] passPriority result: changed=true, advanceStep=true, resolvedNow=false (ID: autopass_1767342210440_jqn19)
2026-01-02T08:23:30.591Z [executeAutoPass] Advancing step after auto-pass for p_gbma14be (ID: autopass_1767342210440_jqn19)
2026-01-02T08:23:30.591Z [nextStep] ========== CALLED ==========
2026-01-02T08:23:30.591Z [nextStep] Game: game_mjwlv4zk
2026-01-02T08:23:30.591Z [nextStep] Current: beginning/UPKEEP
2026-01-02T08:23:30.591Z [nextStep] Priority: p_gbma14be, Turn: p_gbma14be
2026-01-02T08:23:30.591Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at Timeout.executeAutoPass (D:\Git\MTGEDH\server\src\socket\util.ts:2017:31)
        at listOnTimeout (node:internal/timers:588:17)
        at process.processTimers (node:internal/timers:523:7)
2026-01-02T08:23:30.592Z [nextStep] Advanced to phase=beginning, step=DRAW
2026-01-02T08:23:30.592Z [nextStep] Drew 1 card(s) for p_gbma14be at draw step (base: 1, additional: 0)
2026-01-02T08:23:30.592Z [nextStep] No draw triggers, immediately advancing to MAIN1 (similar to UNTAP->UPKEEP)
2026-01-02T08:23:30.592Z [nextStep] Advanced to MAIN1, found 0 precombat main trigger(s)
2026-01-02T08:23:30.592Z [nextStep] Granting priority to active player p_gbma14be (step: MAIN1, stack size: 0)
[canAct] p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Checking hand with 5 cards
[canPlayLand] p_gbma14be: Sample cards in hand: [Plains(Basic Land ΓÇö Plains), Plains(Basic Land ΓÇö Plains), Plains(Basic Land ΓÇö Plains)]
[canPlayLand] p_gbma14be: Found land in hand: Plains (Basic Land ΓÇö Plains) - returning TRUE
[canAct] p_gbma14be: Turn player in main phase can play land - returning TRUE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
2026-01-02T08:23:30.592Z [nextStep] DEBUG - Turn Player p_gbma14be:
2026-01-02T08:23:30.592Z [nextStep]   Hand (5): Plains, Plains, Plains, Plains, Plains
2026-01-02T08:23:30.592Z [nextStep]   canAct: true, canRespond: false
2026-01-02T08:23:30.592Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_gbma14be, autoPassEnabled: p_gbma14be, currentPriority: p_gbma14be, turnPlayer: p_gbma14be
[canAct] p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Checking hand with 5 cards
[canPlayLand] p_gbma14be: Sample cards in hand: [Plains(Basic Land ΓÇö Plains), Plains(Basic Land ΓÇö Plains), Plains(Basic Land ΓÇö Plains)]
[canPlayLand] p_gbma14be: Found land in hand: Plains (Basic Land ΓÇö Plains) - returning TRUE
[canAct] p_gbma14be: Turn player in main phase can play land - returning TRUE
[priority] autoPassLoop - checking p_gbma14be (ACTIVE): canAct=true, stack.length=0, step=MAIN1
[priority] autoPassLoop - stopping at p_gbma14be: active player can act
2026-01-02T08:23:30.593Z [nextStep] Auto-pass stopped, player p_gbma14be has priority
2026-01-02T08:23:30.593Z [executeAutoPass] Cleared _autoPassInProgress flag for p_gbma14be (ID: autopass_1767342210440_jqn19)
2026-01-02T08:23:30.593Z [executeAutoPass] Broadcasting state after auto-pass (ID: autopass_1767342210440_jqn19)
[VIEW_FOR_DEBUG] {
  viewer: 'p_gbma14be',
  stackLength: 0,
  stackItems: [],
  zones: { p_gbma14be: { handCount: 5, firstKnown: [Array] } }
}
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_gbma14be, viewerId=p_gbma14be, match=true
[getPlayableCardIds] Player p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 1, blue: 0, black: 0, red: 0, green: 0, colorless: 6 }
[getPlayableCardIds] Total available mana: 7
[getPlayableCardIds] Checking 5 cards in hand
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[getPlayableCardIds] Checking lands: landsPlayed=0, max=1
[getPlayableCardIds] Land Plains (4069fb4a-8ee1-41ef-ab93-39a8cc58e0e5_mjwlwqz5_5_f2d8a582) is playable
[getPlayableCardIds] Land Plains (4069fb4a-8ee1-41ef-ab93-39a8cc58e0e5_mjwlwqz5_9_0fa97370) is playable
[getPlayableCardIds] Land Plains (4069fb4a-8ee1-41ef-ab93-39a8cc58e0e5_mjwlwqz5_6_9c4c1c5e) is playable
[getPlayableCardIds] Land Plains (4069fb4a-8ee1-41ef-ab93-39a8cc58e0e5_mjwlwqz5_7_6ff1a17c) is playable
[getPlayableCardIds] Land Plains (4069fb4a-8ee1-41ef-ab93-39a8cc58e0e5_mjwlwqz5_8_316654ef) is playable
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Archangel Elspeth not playable - canCastNow=true, canPay=false
[getPlayableCardIds] Returning 5 playable card(s): [
  '4069fb4a-8ee1-41ef-ab93-39a8cc58e0e5_mjwlwqz5_5_f2d8a582',
  '4069fb4a-8ee1-41ef-ab93-39a8cc58e0e5_mjwlwqz5_9_0fa97370',
  '4069fb4a-8ee1-41ef-ab93-39a8cc58e0e5_mjwlwqz5_6_9c4c1c5e',
  '4069fb4a-8ee1-41ef-ab93-39a8cc58e0e5_mjwlwqz5_7_6ff1a17c',
  '4069fb4a-8ee1-41ef-ab93-39a8cc58e0e5_mjwlwqz5_8_316654ef'
]
[normalizeViewForEmit] getPlayableCardIds returned 5 cards
[normalizeViewForEmit] Set view.playableCards with 5 cards
[canAct] p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Checking hand with 5 cards
[canPlayLand] p_gbma14be: Sample cards in hand: [Plains(Basic Land ΓÇö Plains), Plains(Basic Land ΓÇö Plains), Plains(Basic Land ΓÇö Plains)]
[canPlayLand] p_gbma14be: Found land in hand: Plains (Basic Land ΓÇö Plains) - returning TRUE
[canAct] p_gbma14be: Turn player in main phase can play land - returning TRUE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=true, canRespond=false
2026-01-02T08:23:30.594Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767342210594_z02o2) ==========
2026-01-02T08:23:30.594Z [checkAndTriggerAutoPass] Priority: p_gbma14be, Phase: precombatMain, Step: MAIN1
[canAct] p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Checking hand with 5 cards
[canPlayLand] p_gbma14be: Sample cards in hand: [Plains(Basic Land ΓÇö Plains), Plains(Basic Land ΓÇö Plains), Plains(Basic Land ΓÇö Plains)]
[canPlayLand] p_gbma14be: Found land in hand: Plains (Basic Land ΓÇö Plains) - returning TRUE
[canAct] p_gbma14be: Turn player in main phase can play land - returning TRUE
2026-01-02T08:23:30.594Z [checkAndTriggerAutoPass] canAct check: p_gbma14be isActive=true canAct=true (ID: autopass_1767342210594_z02o2)
2026-01-02T08:23:30.594Z [checkAndTriggerAutoPass] p_gbma14be CAN ACT - returning early, NO auto-pass (ID: autopass_1767342210594_z02o2)
2026-01-02T08:23:30.594Z [executeAutoPass] Broadcast complete (ID: autopass_1767342210440_jqn19)
2026-01-02T08:23:30.741Z [executeAutoPass] ========== EXECUTING for p_gbma14be (ID: autopass_1767342210588_i65cs) ==========
2026-01-02T08:23:30.741Z [executeAutoPass] Phase: precombatMain, Step: MAIN1
[canAct] p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Checking hand with 5 cards
[canPlayLand] p_gbma14be: Sample cards in hand: [Plains(Basic Land ΓÇö Plains), Plains(Basic Land ΓÇö Plains), Plains(Basic Land ΓÇö Plains)]
[canPlayLand] p_gbma14be: Found land in hand: Plains (Basic Land ΓÇö Plains) - returning TRUE
[canAct] p_gbma14be: Turn player in main phase can play land - returning TRUE
2026-01-02T08:23:30.742Z [executeAutoPass] Re-check: p_gbma14be canAct=true (ID: autopass_1767342210588_i65cs)
2026-01-02T08:23:30.742Z [executeAutoPass] Player p_gbma14be CAN NOW ACT - canceling auto-pass (ID: autopass_1767342210588_i65cs)
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[playLand] Player p_gbma14be has played 0 lands this turn, max is 1
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 5 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[recalculateHandVisibility] Players with hand reveal effects: none
[VIEW_FOR_DEBUG] {
  viewer: 'p_gbma14be',
  stackLength: 0,
  stackItems: [],
  zones: { p_gbma14be: { handCount: 4, firstKnown: [Array] } }
}
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_gbma14be, viewerId=p_gbma14be, match=true
[getPlayableCardIds] Player p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 2, blue: 0, black: 0, red: 0, green: 0, colorless: 6 }
[getPlayableCardIds] Total available mana: 8
[getPlayableCardIds] Checking 4 cards in hand
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 5 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[getPlayableCardIds] Checking lands: landsPlayed=1, max=1
[getPlayableCardIds] Already played max lands this turn (1/1)
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Archangel Elspeth (35ed6263-bdd7-4013-ac8c-9b652d71a0db_mjwlwqz4_1_6df322f4) is playable with cost {2}{W}{W}
[getPlayableCardIds] Returning 1 playable card(s): [ '35ed6263-bdd7-4013-ac8c-9b652d71a0db_mjwlwqz4_1_6df322f4' ]
[normalizeViewForEmit] getPlayableCardIds returned 1 cards
[normalizeViewForEmit] Set view.playableCards with 1 cards
[canAct] p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 5 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canCastCommanderFromCommandZone] p_gbma14be: Commander Archangel Elspeth can be cast (main phase, empty stack)
[canAct] p_gbma14be: Can cast commander from command zone - returning TRUE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=true, canRespond=false
2026-01-02T08:23:32.021Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767342212021_a0o6e) ==========
2026-01-02T08:23:32.021Z [checkAndTriggerAutoPass] Priority: p_gbma14be, Phase: precombatMain, Step: MAIN1
[canAct] p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 5 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canCastCommanderFromCommandZone] p_gbma14be: Commander Archangel Elspeth can be cast (main phase, empty stack)
[canAct] p_gbma14be: Can cast commander from command zone - returning TRUE
2026-01-02T08:23:32.021Z [checkAndTriggerAutoPass] canAct check: p_gbma14be isActive=true canAct=true (ID: autopass_1767342212021_a0o6e)
2026-01-02T08:23:32.021Z [checkAndTriggerAutoPass] p_gbma14be CAN ACT - returning early, NO auto-pass (ID: autopass_1767342212021_a0o6e)
[VIEW_FOR_DEBUG] {
  viewer: 'p_gbma14be',
  stackLength: 0,
  stackItems: [],
  zones: { p_gbma14be: { handCount: 4, firstKnown: [Array] } }
}
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_gbma14be, viewerId=p_gbma14be, match=true
[getPlayableCardIds] Player p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 2, blue: 0, black: 0, red: 0, green: 0, colorless: 6 }
[getPlayableCardIds] Total available mana: 8
[getPlayableCardIds] Checking 4 cards in hand
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 5 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[getPlayableCardIds] Checking lands: landsPlayed=1, max=1
[getPlayableCardIds] Already played max lands this turn (1/1)
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Archangel Elspeth (35ed6263-bdd7-4013-ac8c-9b652d71a0db_mjwlwqz4_1_6df322f4) is playable with cost {2}{W}{W}
[getPlayableCardIds] Returning 1 playable card(s): [ '35ed6263-bdd7-4013-ac8c-9b652d71a0db_mjwlwqz4_1_6df322f4' ]
[normalizeViewForEmit] getPlayableCardIds returned 1 cards
[normalizeViewForEmit] Set view.playableCards with 1 cards
[canAct] p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 5 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canCastCommanderFromCommandZone] p_gbma14be: Commander Archangel Elspeth can be cast (main phase, empty stack)
[canAct] p_gbma14be: Can cast commander from command zone - returning TRUE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=true, canRespond=false
2026-01-02T08:23:32.022Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767342212022_93qhi) ==========
2026-01-02T08:23:32.022Z [checkAndTriggerAutoPass] Priority: p_gbma14be, Phase: precombatMain, Step: MAIN1
[canAct] p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 5 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canCastCommanderFromCommandZone] p_gbma14be: Commander Archangel Elspeth can be cast (main phase, empty stack)
[canAct] p_gbma14be: Can cast commander from command zone - returning TRUE
2026-01-02T08:23:32.022Z [checkAndTriggerAutoPass] canAct check: p_gbma14be isActive=true canAct=true (ID: autopass_1767342212022_93qhi)
2026-01-02T08:23:32.022Z [checkAndTriggerAutoPass] p_gbma14be CAN ACT - returning early, NO auto-pass (ID: autopass_1767342212022_93qhi)
[castCommander] Received payload: {
  gameId: 'game_mjwlv4zk',
  commanderId: undefined,
  commanderNameOrId: '35ed6263-bdd7-4013-ac8c-9b652d71a0db_mjwlwqz4_1_6df322f4',
  resolvedCommanderId: '35ed6263-bdd7-4013-ac8c-9b652d71a0db_mjwlwqz4_1_6df322f4',
  hasPayment: true
}
[castCommander] CommanderId 35ed6263-bdd7-4013-ac8c-9b652d71a0db_mjwlwqz4_1_6df322f4 found in commanderIds, no resolution needed
[castCommander] Checking if commander 35ed6263-bdd7-4013-ac8c-9b652d71a0db_mjwlwqz4_1_6df322f4 is in command zone: {
  commanderId: '35ed6263-bdd7-4013-ac8c-9b652d71a0db_mjwlwqz4_1_6df322f4',
  inCommandZone: [ '35ed6263-bdd7-4013-ac8c-9b652d71a0db_mjwlwqz4_1_6df322f4' ],
  commanderIds: [ '35ed6263-bdd7-4013-ac8c-9b652d71a0db_mjwlwqz4_1_6df322f4' ]
}
[castCommander] Commander is in command zone, checking priority
[castCommander] Priority check passed, getting commander card details
[castCommander] Looking for commanderId 35ed6263-bdd7-4013-ac8c-9b652d71a0db_mjwlwqz4_1_6df322f4 in commanderCards array: [
  {
    id: '35ed6263-bdd7-4013-ac8c-9b652d71a0db_mjwlwqz4_1_6df322f4',
    name: 'Archangel Elspeth',
    type_line: 'Legendary Planeswalker ΓÇö Elspeth',
    oracle_text: '+1: Create a 1/1 white Soldier creature token with lifelink.\n' +
      'ΓêÆ2: Put two +1/+1 counters on target creature. It becomes an Angel in addition to its other types and gains flying.\n' +
      'ΓêÆ6: Return all nonland permanent cards with mana value 3 or less from your graveyard to the battlefield.',
    image_uris: {
      small: 'https://cards.scryfall.io/small/front/3/5/35ed6263-bdd7-4013-ac8c-9b652d71a0db.jpg?1682202486',
      normal: 'https://cards.scryfall.io/normal/front/3/5/35ed6263-bdd7-4013-ac8c-9b652d71a0db.jpg?1682202486',
      art_crop: 'https://cards.scryfall.io/art_crop/front/3/5/35ed6263-bdd7-4013-ac8c-9b652d71a0db.jpg?1682202486'
    },
    mana_cost: '{2}{W}{W}',
    power: undefined,
    toughness: undefined
  }
]
[castCommander] Found commander card: Archangel Elspeth
[castCommander] Commander tax for 35ed6263-bdd7-4013-ac8c-9b652d71a0db_mjwlwqz4_1_6df322f4: 0 (taxById: undefined, total tax: 0)
[castCommander] Cost adjustment for Archangel Elspeth: 0 (negative = reduction, positive = tax)
[castCommander] Validating mana payment: totalCost=4, coloredCostTotal=2, totalGeneric=2
[castCommander] Mana validation passed
[castCommander] Player p_gbma14be casting commander 35ed6263-bdd7-4013-ac8c-9b652d71a0db_mjwlwqz4_1_6df322f4 (Archangel Elspeth) in game game_mjwlv4zk
[castCommander] Commander info before casting: {
  commanderId: '35ed6263-bdd7-4013-ac8c-9b652d71a0db_mjwlwqz4_1_6df322f4',
  commanderName: 'Archangel Elspeth',
  inCommandZone: [ '35ed6263-bdd7-4013-ac8c-9b652d71a0db_mjwlwqz4_1_6df322f4' ],
  tax: 0
}
[castCommander] About to process payment and cast commander
[castCommander] Processing payment for Archangel Elspeth: [
  { permanentId: 'perm_36rxr53d', mana: 'W', count: 1 },
  { permanentId: 'perm_9xm2kzaw', mana: 'W', count: 1 },
  { permanentId: 'perm_sw7gus93', mana: 'C', count: 2 }
]
[castCommander] Tapped Plains for 1x W mana
[castCommander] Tapped Plains for 1x W mana
[castCommander] Tapped Sol Ring for 2x C mana
[castCommander] Payment processing complete, about to consume mana from pool
[castCommander] Pool before consume: { white: 2, blue: 0, black: 0, red: 0, green: 0, colorless: 2 }
[castCommander] Consumed 2 W mana from pool
[castCommander] Consumed 2 colorless mana for generic cost
[castCommander] Pool after consume: { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[castCommander] About to add commander to stack
[castCommander] Pushing commander to stack...
[castCommander] Calling game.pushStack with item: {
  id: 'stack_1767342222711_35ed6263-bdd7-4013-ac8c-9b652d71a0db_mjwlwqz4_1_6df322f4',
  controller: 'p_gbma14be',
  card: {
    id: '35ed6263-bdd7-4013-ac8c-9b652d71a0db_mjwlwqz4_1_6df322f4',
    name: 'Archangel Elspeth',
    type_line: 'Legendary Planeswalker ΓÇö Elspeth',
    oracle_text: '+1: Create a 1/1 white Soldier creature token with lifelink.\n' +
      'ΓêÆ2: Put two +1/+1 counters on target creature. It becomes an Angel in addition to its other types and gains flying.\n' +
      'ΓêÆ6: Return all nonland permanent cards with mana value 3 or less from your graveyard to the battlefield.',
    image_uris: {
      small: 'https://cards.scryfall.io/small/front/3/5/35ed6263-bdd7-4013-ac8c-9b652d71a0db.jpg?1682202486',
      normal: 'https://cards.scryfall.io/normal/front/3/5/35ed6263-bdd7-4013-ac8c-9b652d71a0db.jpg?1682202486',
      art_crop: 'https://cards.scryfall.io/art_crop/front/3/5/35ed6263-bdd7-4013-ac8c-9b652d71a0db.jpg?1682202486'
    },
    mana_cost: '{2}{W}{W}',
    power: undefined,
    toughness: undefined,
    zone: 'stack',
    isCommander: true
  },
  targets: []
}
[castCommander] Successfully pushed to stack via game.pushStack
[castCommander] About to call game.castCommander to update tax and command zone
[castCommander] Calling game.castCommander with playerId: p_gbma14be, commanderId: 35ed6263-bdd7-4013-ac8c-9b652d71a0db_mjwlwqz4_1_6df322f4
[castCommander] Called with playerId: p_gbma14be, commanderId: 35ed6263-bdd7-4013-ac8c-9b652d71a0db_mjwlwqz4_1_6df322f4
[castCommander] Commander info for player p_gbma14be: {
  commanderIds: [ '35ed6263-bdd7-4013-ac8c-9b652d71a0db_mjwlwqz4_1_6df322f4' ],
  inCommandZone: [ '35ed6263-bdd7-4013-ac8c-9b652d71a0db_mjwlwqz4_1_6df322f4' ],
  tax: 0,
  taxById: {}
}
[castCommander] Removed commander 35ed6263-bdd7-4013-ac8c-9b652d71a0db_mjwlwqz4_1_6df322f4 from command zone. Remaining in CZ: []
[castCommander] Updated tax for 35ed6263-bdd7-4013-ac8c-9b652d71a0db_mjwlwqz4_1_6df322f4: 2, total tax: 2
[castCommander] Successfully called game.castCommander
[castCommander] Appending event with playerId: p_gbma14be, commanderId: 35ed6263-bdd7-4013-ac8c-9b652d71a0db_mjwlwqz4_1_6df322f4
[castCommander] About to append event and broadcast
[castCommander] Event appended successfully
[castCommander] Chat message emitted
[castCommander] About to broadcast game state
[VIEW_FOR_DEBUG] {
  viewer: 'p_gbma14be',
  stackLength: 1,
  stackItems: [ 'Archangel Elspeth' ],
  zones: { p_gbma14be: { handCount: 4, firstKnown: [Array] } }
}
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_gbma14be, viewerId=p_gbma14be, match=true
[getPlayableCardIds] Player p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 4 }
[getPlayableCardIds] Total available mana: 4
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Not checking lands: isMainPhase=true, stackIsEmpty=false, isMyTurn=true
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-01-02T08:23:42.713Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767342222713_ne6ts) ==========
2026-01-02T08:23:42.713Z [checkAndTriggerAutoPass] Priority: p_gbma14be, Phase: precombatMain, Step: MAIN1
[canAct] p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
2026-01-02T08:23:42.713Z [checkAndTriggerAutoPass] canAct check: p_gbma14be isActive=true canAct=false (ID: autopass_1767342222713_ne6ts)
2026-01-02T08:23:42.713Z [checkAndTriggerAutoPass] p_gbma14be CANNOT ACT - proceeding with auto-pass (ID: autopass_1767342222713_ne6ts)
2026-01-02T08:23:42.713Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_gbma14be with 150ms delay (ID: autopass_1767342222713_ne6ts)
[castCommander] Successfully cast commander and broadcast game state
2026-01-02T08:23:42.867Z [executeAutoPass] ========== EXECUTING for p_gbma14be (ID: autopass_1767342222713_ne6ts) ==========
2026-01-02T08:23:42.867Z [executeAutoPass] Phase: precombatMain, Step: MAIN1
[canAct] p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
2026-01-02T08:23:42.868Z [executeAutoPass] Re-check: p_gbma14be canAct=false (ID: autopass_1767342222713_ne6ts)
2026-01-02T08:23:42.868Z [executeAutoPass] Proceeding with auto-pass for p_gbma14be (ID: autopass_1767342222713_ne6ts)
2026-01-02T08:23:42.868Z [executeAutoPass] Set _autoPassInProgress flag for p_gbma14be (ID: autopass_1767342222713_ne6ts)
[priority] autoPassLoop starting - active players: p_gbma14be, autoPassEnabled: p_gbma14be, currentPriority: p_gbma14be, turnPlayer: p_gbma14be
[canAct] p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[priority] autoPassLoop - checking p_gbma14be (ACTIVE): canAct=false, stack.length=1, step=MAIN1
[priority] Auto-passing for p_gbma14be - no available actions
2026-01-02T08:23:42.868Z [executeAutoPass] passPriority result: changed=true, advanceStep=false, resolvedNow=true (ID: autopass_1767342222713_ne6ts)
[checkAndTriggerAutoPass] Stack resolved after auto-pass for p_gbma14be
[PLANESWALKER DEBUG] Archangel Elspeth entering battlefield: {
  loyalty: undefined,
  baseLoyalty: 0,
  counters: undefined,
  hasOracleText: true,
  oracleTextLength: 281
}
[resolveTopOfStack] Permanent Archangel Elspeth entered battlefield under p_gbma14be
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[recalculateHandVisibility] Players with hand reveal effects: none
[resolveTopOfStack] Reset priorityPassedBy after spell resolution
2026-01-02T08:23:42.870Z [executeAutoPass] Cleared _autoPassInProgress flag for p_gbma14be (ID: autopass_1767342222713_ne6ts)
2026-01-02T08:23:42.870Z [executeAutoPass] Broadcasting state after auto-pass (ID: autopass_1767342222713_ne6ts)
[VIEW_FOR_DEBUG] {
  viewer: 'p_gbma14be',
  stackLength: 0,
  stackItems: [],
  zones: { p_gbma14be: { handCount: 4, firstKnown: [Array] } }
}
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking archangel elspeth: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'archangel elspeth'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_gbma14be, viewerId=p_gbma14be, match=true
[getPlayableCardIds] Player p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 4 }
[getPlayableCardIds] Total available mana: 4
[getPlayableCardIds] Checking 4 cards in hand
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[getPlayableCardIds] Checking lands: landsPlayed=1, max=1
[getPlayableCardIds] Already played max lands this turn (1/1)
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canAct] p_gbma14be: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canAct] p_gbma14be: No sorcery-speed actions available in main phase - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-01-02T08:23:42.872Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767342222872_78yr5) ==========
2026-01-02T08:23:42.872Z [checkAndTriggerAutoPass] Priority: p_gbma14be, Phase: precombatMain, Step: MAIN1
[canAct] p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canAct] p_gbma14be: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canAct] p_gbma14be: No sorcery-speed actions available in main phase - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
2026-01-02T08:23:42.872Z [checkAndTriggerAutoPass] canAct check: p_gbma14be isActive=true canAct=false (ID: autopass_1767342222872_78yr5)
2026-01-02T08:23:42.872Z [checkAndTriggerAutoPass] p_gbma14be CANNOT ACT - proceeding with auto-pass (ID: autopass_1767342222872_78yr5)
2026-01-02T08:23:42.872Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_gbma14be with 150ms delay (ID: autopass_1767342222872_78yr5)
2026-01-02T08:23:42.872Z [executeAutoPass] Broadcast complete (ID: autopass_1767342222713_ne6ts)
2026-01-02T08:23:43.022Z [executeAutoPass] ========== EXECUTING for p_gbma14be (ID: autopass_1767342222872_78yr5) ==========
2026-01-02T08:23:43.022Z [executeAutoPass] Phase: precombatMain, Step: MAIN1
[canAct] p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canAct] p_gbma14be: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canAct] p_gbma14be: No sorcery-speed actions available in main phase - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
2026-01-02T08:23:43.023Z [executeAutoPass] Re-check: p_gbma14be canAct=false (ID: autopass_1767342222872_78yr5)
2026-01-02T08:23:43.023Z [executeAutoPass] Proceeding with auto-pass for p_gbma14be (ID: autopass_1767342222872_78yr5)
2026-01-02T08:23:43.023Z [executeAutoPass] Set _autoPassInProgress flag for p_gbma14be (ID: autopass_1767342222872_78yr5)
2026-01-02T08:23:43.023Z [executeAutoPass] passPriority result: changed=true, advanceStep=true, resolvedNow=false (ID: autopass_1767342222872_78yr5)
2026-01-02T08:23:43.023Z [executeAutoPass] Advancing step after auto-pass for p_gbma14be (ID: autopass_1767342222872_78yr5)
2026-01-02T08:23:43.023Z [nextStep] ========== CALLED ==========
2026-01-02T08:23:43.023Z [nextStep] Game: game_mjwlv4zk
2026-01-02T08:23:43.023Z [nextStep] Current: precombatMain/MAIN1
2026-01-02T08:23:43.023Z [nextStep] Priority: p_gbma14be, Turn: p_gbma14be
2026-01-02T08:23:43.023Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at Timeout.executeAutoPass (D:\Git\MTGEDH\server\src\socket\util.ts:2017:31)
        at listOnTimeout (node:internal/timers:588:17)
        at process.processTimers (node:internal/timers:523:7)
2026-01-02T08:23:43.023Z [clearManaPool] Processed mana pools for all players
2026-01-02T08:23:43.024Z [nextStep] Advanced to phase=combat, step=BEGIN_COMBAT
[getBeginningOfCombatTriggers] Total triggers for activePlayer=p_gbma14be: 0
2026-01-02T08:23:43.024Z [nextStep] Granting priority to active player p_gbma14be (step: BEGIN_COMBAT, stack size: 0)
[canAct] p_gbma14be: step=BEGIN_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
2026-01-02T08:23:43.024Z [nextStep] DEBUG - Turn Player p_gbma14be:
2026-01-02T08:23:43.024Z [nextStep]   Hand (4): Plains, Plains, Plains, Plains
2026-01-02T08:23:43.024Z [nextStep]   canAct: false, canRespond: false
2026-01-02T08:23:43.024Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_gbma14be, autoPassEnabled: p_gbma14be, currentPriority: p_gbma14be, turnPlayer: p_gbma14be
[canAct] p_gbma14be: step=BEGIN_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[priority] autoPassLoop - checking p_gbma14be (ACTIVE): canAct=false, stack.length=0, step=BEGIN_COMBAT
[priority] Auto-passing for p_gbma14be - no available actions
2026-01-02T08:23:43.024Z [nextStep] All players auto-passed after granting priority - caller should advance step
2026-01-02T08:23:43.024Z [executeAutoPass] Cleared _autoPassInProgress flag for p_gbma14be (ID: autopass_1767342222872_78yr5)
2026-01-02T08:23:43.024Z [executeAutoPass] Broadcasting state after auto-pass (ID: autopass_1767342222872_78yr5)
[VIEW_FOR_DEBUG] {
  viewer: 'p_gbma14be',
  stackLength: 0,
  stackItems: [],
  zones: { p_gbma14be: { handCount: 4, firstKnown: [Array] } }
}
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking archangel elspeth: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'archangel elspeth'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_gbma14be, viewerId=p_gbma14be, match=true
[getPlayableCardIds] Player p_gbma14be: step=BEGIN_COMBAT, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 4 }
[getPlayableCardIds] Total available mana: 4
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_gbma14be: step=BEGIN_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-01-02T08:23:43.025Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767342223025_q7grd) ==========
2026-01-02T08:23:43.025Z [checkAndTriggerAutoPass] Priority: p_gbma14be, Phase: combat, Step: BEGIN_COMBAT
[canAct] p_gbma14be: step=BEGIN_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
2026-01-02T08:23:43.026Z [checkAndTriggerAutoPass] canAct check: p_gbma14be isActive=true canAct=false (ID: autopass_1767342223025_q7grd)
2026-01-02T08:23:43.026Z [checkAndTriggerAutoPass] p_gbma14be CANNOT ACT - proceeding with auto-pass (ID: autopass_1767342223025_q7grd)
2026-01-02T08:23:43.026Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_gbma14be with 150ms delay (ID: autopass_1767342223025_q7grd)
2026-01-02T08:23:43.026Z [executeAutoPass] Broadcast complete (ID: autopass_1767342222872_78yr5)
2026-01-02T08:23:43.179Z [executeAutoPass] ========== EXECUTING for p_gbma14be (ID: autopass_1767342223025_q7grd) ==========
2026-01-02T08:23:43.179Z [executeAutoPass] Phase: combat, Step: BEGIN_COMBAT
[canAct] p_gbma14be: step=BEGIN_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
2026-01-02T08:23:43.179Z [executeAutoPass] Re-check: p_gbma14be canAct=false (ID: autopass_1767342223025_q7grd)
2026-01-02T08:23:43.179Z [executeAutoPass] Proceeding with auto-pass for p_gbma14be (ID: autopass_1767342223025_q7grd)
2026-01-02T08:23:43.179Z [executeAutoPass] Set _autoPassInProgress flag for p_gbma14be (ID: autopass_1767342223025_q7grd)
2026-01-02T08:23:43.179Z [executeAutoPass] passPriority result: changed=true, advanceStep=true, resolvedNow=false (ID: autopass_1767342223025_q7grd)
2026-01-02T08:23:43.179Z [executeAutoPass] Advancing step after auto-pass for p_gbma14be (ID: autopass_1767342223025_q7grd)
2026-01-02T08:23:43.179Z [nextStep] ========== CALLED ==========
2026-01-02T08:23:43.179Z [nextStep] Game: game_mjwlv4zk
2026-01-02T08:23:43.179Z [nextStep] Current: combat/BEGIN_COMBAT
2026-01-02T08:23:43.179Z [nextStep] Priority: p_gbma14be, Turn: p_gbma14be
2026-01-02T08:23:43.179Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at Timeout.executeAutoPass (D:\Git\MTGEDH\server\src\socket\util.ts:2017:31)
        at listOnTimeout (node:internal/timers:588:17)
        at process.processTimers (node:internal/timers:523:7)
2026-01-02T08:23:43.180Z [nextStep] Advanced to phase=combat, step=DECLARE_ATTACKERS
2026-01-02T08:23:43.180Z [nextStep] Granting priority to active player p_gbma14be (step: DECLARE_ATTACKERS, stack size: 0)
[canAct] p_gbma14be: step=DECLARE_ATTACKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
2026-01-02T08:23:43.180Z [nextStep] DEBUG - Turn Player p_gbma14be:
2026-01-02T08:23:43.180Z [nextStep]   Hand (4): Plains, Plains, Plains, Plains
2026-01-02T08:23:43.180Z [nextStep]   canAct: false, canRespond: false
2026-01-02T08:23:43.180Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_gbma14be, autoPassEnabled: p_gbma14be, currentPriority: p_gbma14be, turnPlayer: p_gbma14be
[canAct] p_gbma14be: step=DECLARE_ATTACKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[priority] autoPassLoop - checking p_gbma14be (ACTIVE): canAct=false, stack.length=0, step=DECLARE_ATTACKERS
[priority] Auto-passing for p_gbma14be - no available actions
2026-01-02T08:23:43.180Z [nextStep] All players auto-passed after granting priority - caller should advance step
2026-01-02T08:23:43.180Z [executeAutoPass] Cleared _autoPassInProgress flag for p_gbma14be (ID: autopass_1767342223025_q7grd)
2026-01-02T08:23:43.180Z [executeAutoPass] Broadcasting state after auto-pass (ID: autopass_1767342223025_q7grd)
[VIEW_FOR_DEBUG] {
  viewer: 'p_gbma14be',
  stackLength: 0,
  stackItems: [],
  zones: { p_gbma14be: { handCount: 4, firstKnown: [Array] } }
}
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking archangel elspeth: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'archangel elspeth'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_gbma14be, viewerId=p_gbma14be, match=true
[getPlayableCardIds] Player p_gbma14be: step=DECLARE_ATTACKERS, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 4 }
[getPlayableCardIds] Total available mana: 4
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_gbma14be: step=DECLARE_ATTACKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-01-02T08:23:43.181Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767342223181_mt7et) ==========
2026-01-02T08:23:43.181Z [checkAndTriggerAutoPass] Priority: p_gbma14be, Phase: combat, Step: DECLARE_ATTACKERS
[canAct] p_gbma14be: step=DECLARE_ATTACKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
2026-01-02T08:23:43.181Z [checkAndTriggerAutoPass] canAct check: p_gbma14be isActive=true canAct=false (ID: autopass_1767342223181_mt7et)
2026-01-02T08:23:43.181Z [checkAndTriggerAutoPass] p_gbma14be CANNOT ACT - proceeding with auto-pass (ID: autopass_1767342223181_mt7et)
2026-01-02T08:23:43.181Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_gbma14be with 150ms delay (ID: autopass_1767342223181_mt7et)
2026-01-02T08:23:43.181Z [executeAutoPass] Broadcast complete (ID: autopass_1767342223025_q7grd)
2026-01-02T08:23:43.184Z [nextStep] ========== CALLED ==========
2026-01-02T08:23:43.184Z [nextStep] Game: game_mjwlv4zk
2026-01-02T08:23:43.184Z [nextStep] Current: combat/DECLARE_ATTACKERS
2026-01-02T08:23:43.184Z [nextStep] Priority: p_gbma14be, Turn: p_gbma14be
2026-01-02T08:23:43.184Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at Socket.<anonymous> (D:\Git\MTGEDH\server\src\socket\combat.ts:1857:29)
        at Socket.emit (node:events:519:28)
        at Socket.emitUntyped (D:\Git\MTGEDH\node_modules\socket.io\dist\typed-events.js:69:22)
2026-01-02T08:23:43.184Z [nextStep] Entering DECLARE_BLOCKERS, initialized blockersDeclaredBy array
2026-01-02T08:23:43.184Z [nextStep] Advanced to phase=combat, step=DECLARE_BLOCKERS
2026-01-02T08:23:43.184Z [nextStep] Granting priority to active player p_gbma14be (step: DECLARE_BLOCKERS, stack size: 0)
[canAct] p_gbma14be: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
2026-01-02T08:23:43.184Z [nextStep] DEBUG - Turn Player p_gbma14be:
2026-01-02T08:23:43.184Z [nextStep]   Hand (4): Plains, Plains, Plains, Plains
2026-01-02T08:23:43.184Z [nextStep]   canAct: false, canRespond: false
2026-01-02T08:23:43.184Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_gbma14be, autoPassEnabled: p_gbma14be, currentPriority: p_gbma14be, turnPlayer: p_gbma14be
[canAct] p_gbma14be: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[priority] autoPassLoop - checking p_gbma14be (ACTIVE): canAct=false, stack.length=0, step=DECLARE_BLOCKERS
[priority] Auto-passing for p_gbma14be - no available actions
2026-01-02T08:23:43.184Z [nextStep] All players auto-passed after granting priority - caller should advance step
[VIEW_FOR_DEBUG] {
  viewer: 'p_gbma14be',
  stackLength: 0,
  stackItems: [],
  zones: { p_gbma14be: { handCount: 4, firstKnown: [Array] } }
}
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking archangel elspeth: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'archangel elspeth'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_gbma14be, viewerId=p_gbma14be, match=true
[getPlayableCardIds] Player p_gbma14be: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 4 }
[getPlayableCardIds] Total available mana: 4
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_gbma14be: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-01-02T08:23:43.185Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767342223185_d5ds0) ==========
2026-01-02T08:23:43.185Z [checkAndTriggerAutoPass] Priority: p_gbma14be, Phase: combat, Step: DECLARE_BLOCKERS
[canAct] p_gbma14be: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
2026-01-02T08:23:43.185Z [checkAndTriggerAutoPass] canAct check: p_gbma14be isActive=true canAct=false (ID: autopass_1767342223185_d5ds0)
2026-01-02T08:23:43.185Z [checkAndTriggerAutoPass] p_gbma14be CANNOT ACT - proceeding with auto-pass (ID: autopass_1767342223185_d5ds0)
2026-01-02T08:23:43.185Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_gbma14be with 150ms delay (ID: autopass_1767342223185_d5ds0)
2026-01-02T08:23:43.337Z [executeAutoPass] ========== EXECUTING for p_gbma14be (ID: autopass_1767342223181_mt7et) ==========
2026-01-02T08:23:43.337Z [executeAutoPass] Phase: combat, Step: DECLARE_BLOCKERS
[canAct] p_gbma14be: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
2026-01-02T08:23:43.337Z [executeAutoPass] Re-check: p_gbma14be canAct=false (ID: autopass_1767342223181_mt7et)
2026-01-02T08:23:43.337Z [executeAutoPass] Proceeding with auto-pass for p_gbma14be (ID: autopass_1767342223181_mt7et)
2026-01-02T08:23:43.337Z [executeAutoPass] Set _autoPassInProgress flag for p_gbma14be (ID: autopass_1767342223181_mt7et)
2026-01-02T08:23:43.337Z [executeAutoPass] passPriority result: changed=true, advanceStep=true, resolvedNow=false (ID: autopass_1767342223181_mt7et)
2026-01-02T08:23:43.337Z [executeAutoPass] Advancing step after auto-pass for p_gbma14be (ID: autopass_1767342223181_mt7et)
2026-01-02T08:23:43.338Z [nextStep] ========== CALLED ==========
2026-01-02T08:23:43.338Z [nextStep] Game: game_mjwlv4zk
2026-01-02T08:23:43.338Z [nextStep] Current: combat/DECLARE_BLOCKERS
2026-01-02T08:23:43.338Z [nextStep] Priority: p_gbma14be, Turn: p_gbma14be
2026-01-02T08:23:43.338Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at Timeout.executeAutoPass (D:\Git\MTGEDH\server\src\socket\util.ts:2017:31)
        at listOnTimeout (node:internal/timers:588:17)
        at process.processTimers (node:internal/timers:523:7)
2026-01-02T08:23:43.338Z [COMBAT_STEP] ========== TRANSITIONING FROM DECLARE_BLOCKERS TO DAMAGE (no first strike) ==========
2026-01-02T08:23:43.338Z [COMBAT_STEP] Calling dealCombatDamage...
2026-01-02T08:23:43.338Z [COMBAT_DAMAGE] ========== ENTERING dealCombatDamage (firstStrike=undefined) ==========
2026-01-02T08:23:43.338Z [COMBAT_DAMAGE] Found 0 attackers
2026-01-02T08:23:43.338Z [COMBAT_DAMAGE] No attackers, skipping combat damage
2026-01-02T08:23:43.338Z [COMBAT_STEP] dealCombatDamage completed successfully
2026-01-02T08:23:43.338Z [COMBAT_STEP] Result: damageToPlayers={}, creaturesDestroyed=0
2026-01-02T08:23:43.338Z [COMBAT_STEP] ========== END DAMAGE STEP PROCESSING ==========
2026-01-02T08:23:43.338Z [nextStep] Advanced to phase=combat, step=DAMAGE
2026-01-02T08:23:43.338Z [nextStep] Granting priority to active player p_gbma14be (step: DAMAGE, stack size: 0)
[canAct] p_gbma14be: step=DAMAGE, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
2026-01-02T08:23:43.338Z [nextStep] DEBUG - Turn Player p_gbma14be:
2026-01-02T08:23:43.338Z [nextStep]   Hand (4): Plains, Plains, Plains, Plains
2026-01-02T08:23:43.338Z [nextStep]   canAct: false, canRespond: false
2026-01-02T08:23:43.338Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_gbma14be, autoPassEnabled: p_gbma14be, currentPriority: p_gbma14be, turnPlayer: p_gbma14be
[canAct] p_gbma14be: step=DAMAGE, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[priority] autoPassLoop - checking p_gbma14be (ACTIVE): canAct=false, stack.length=0, step=DAMAGE
[priority] Auto-passing for p_gbma14be - no available actions
2026-01-02T08:23:43.338Z [nextStep] All players auto-passed after granting priority - caller should advance step
2026-01-02T08:23:43.338Z [executeAutoPass] Cleared _autoPassInProgress flag for p_gbma14be (ID: autopass_1767342223181_mt7et)
2026-01-02T08:23:43.338Z [executeAutoPass] Broadcasting state after auto-pass (ID: autopass_1767342223181_mt7et)
[VIEW_FOR_DEBUG] {
  viewer: 'p_gbma14be',
  stackLength: 0,
  stackItems: [],
  zones: { p_gbma14be: { handCount: 4, firstKnown: [Array] } }
}
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking archangel elspeth: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'archangel elspeth'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_gbma14be, viewerId=p_gbma14be, match=true
[getPlayableCardIds] Player p_gbma14be: step=DAMAGE, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 4 }
[getPlayableCardIds] Total available mana: 4
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_gbma14be: step=DAMAGE, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-01-02T08:23:43.339Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767342223339_ml103) ==========
2026-01-02T08:23:43.339Z [checkAndTriggerAutoPass] Priority: p_gbma14be, Phase: combat, Step: DAMAGE
[canAct] p_gbma14be: step=DAMAGE, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
2026-01-02T08:23:43.339Z [checkAndTriggerAutoPass] canAct check: p_gbma14be isActive=true canAct=false (ID: autopass_1767342223339_ml103)
2026-01-02T08:23:43.339Z [checkAndTriggerAutoPass] p_gbma14be CANNOT ACT - proceeding with auto-pass (ID: autopass_1767342223339_ml103)
2026-01-02T08:23:43.339Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_gbma14be with 150ms delay (ID: autopass_1767342223339_ml103)
2026-01-02T08:23:43.339Z [executeAutoPass] Broadcast complete (ID: autopass_1767342223181_mt7et)
2026-01-02T08:23:43.339Z [executeAutoPass] ========== EXECUTING for p_gbma14be (ID: autopass_1767342223185_d5ds0) ==========
2026-01-02T08:23:43.339Z [executeAutoPass] Phase: combat, Step: DAMAGE
[canAct] p_gbma14be: step=DAMAGE, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
2026-01-02T08:23:43.339Z [executeAutoPass] Re-check: p_gbma14be canAct=false (ID: autopass_1767342223185_d5ds0)
2026-01-02T08:23:43.339Z [executeAutoPass] Proceeding with auto-pass for p_gbma14be (ID: autopass_1767342223185_d5ds0)
2026-01-02T08:23:43.339Z [executeAutoPass] Set _autoPassInProgress flag for p_gbma14be (ID: autopass_1767342223185_d5ds0)
2026-01-02T08:23:43.339Z [executeAutoPass] passPriority result: changed=true, advanceStep=true, resolvedNow=false (ID: autopass_1767342223185_d5ds0)
2026-01-02T08:23:43.340Z [executeAutoPass] Advancing step after auto-pass for p_gbma14be (ID: autopass_1767342223185_d5ds0)
2026-01-02T08:23:43.340Z [nextStep] ========== CALLED ==========
2026-01-02T08:23:43.340Z [nextStep] Game: game_mjwlv4zk
2026-01-02T08:23:43.340Z [nextStep] Current: combat/DAMAGE
2026-01-02T08:23:43.340Z [nextStep] Priority: p_gbma14be, Turn: p_gbma14be
2026-01-02T08:23:43.340Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at Timeout.executeAutoPass (D:\Git\MTGEDH\server\src\socket\util.ts:2017:31)
        at listOnTimeout (node:internal/timers:588:17)
        at process.processTimers (node:internal/timers:523:7)
2026-01-02T08:23:43.340Z [nextStep] Advanced to phase=combat, step=END_COMBAT
2026-01-02T08:23:43.340Z [nextStep] Granting priority to active player p_gbma14be (step: END_COMBAT, stack size: 0)
[canAct] p_gbma14be: step=END_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
2026-01-02T08:23:43.340Z [nextStep] DEBUG - Turn Player p_gbma14be:
2026-01-02T08:23:43.340Z [nextStep]   Hand (4): Plains, Plains, Plains, Plains
2026-01-02T08:23:43.340Z [nextStep]   canAct: false, canRespond: false
2026-01-02T08:23:43.340Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_gbma14be, autoPassEnabled: p_gbma14be, currentPriority: p_gbma14be, turnPlayer: p_gbma14be
[canAct] p_gbma14be: step=END_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[priority] autoPassLoop - checking p_gbma14be (ACTIVE): canAct=false, stack.length=0, step=END_COMBAT
[priority] Auto-passing for p_gbma14be - no available actions
2026-01-02T08:23:43.340Z [nextStep] All players auto-passed after granting priority - caller should advance step
2026-01-02T08:23:43.340Z [executeAutoPass] Cleared _autoPassInProgress flag for p_gbma14be (ID: autopass_1767342223185_d5ds0)
2026-01-02T08:23:43.340Z [executeAutoPass] Broadcasting state after auto-pass (ID: autopass_1767342223185_d5ds0)
[VIEW_FOR_DEBUG] {
  viewer: 'p_gbma14be',
  stackLength: 0,
  stackItems: [],
  zones: { p_gbma14be: { handCount: 4, firstKnown: [Array] } }
}
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking archangel elspeth: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'archangel elspeth'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_gbma14be, viewerId=p_gbma14be, match=true
[getPlayableCardIds] Player p_gbma14be: step=END_COMBAT, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 4 }
[getPlayableCardIds] Total available mana: 4
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_gbma14be: step=END_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-01-02T08:23:43.341Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767342223341_iieiz) ==========
2026-01-02T08:23:43.341Z [checkAndTriggerAutoPass] Priority: p_gbma14be, Phase: combat, Step: END_COMBAT
[canAct] p_gbma14be: step=END_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
2026-01-02T08:23:43.341Z [checkAndTriggerAutoPass] canAct check: p_gbma14be isActive=true canAct=false (ID: autopass_1767342223341_iieiz)
2026-01-02T08:23:43.341Z [checkAndTriggerAutoPass] p_gbma14be CANNOT ACT - proceeding with auto-pass (ID: autopass_1767342223341_iieiz)
2026-01-02T08:23:43.341Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_gbma14be with 150ms delay (ID: autopass_1767342223341_iieiz)
2026-01-02T08:23:43.341Z [executeAutoPass] Broadcast complete (ID: autopass_1767342223185_d5ds0)
2026-01-02T08:23:43.494Z [executeAutoPass] ========== EXECUTING for p_gbma14be (ID: autopass_1767342223339_ml103) ==========
2026-01-02T08:23:43.494Z [executeAutoPass] Phase: combat, Step: END_COMBAT
[canAct] p_gbma14be: step=END_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
2026-01-02T08:23:43.494Z [executeAutoPass] Re-check: p_gbma14be canAct=false (ID: autopass_1767342223339_ml103)
2026-01-02T08:23:43.494Z [executeAutoPass] Proceeding with auto-pass for p_gbma14be (ID: autopass_1767342223339_ml103)
2026-01-02T08:23:43.494Z [executeAutoPass] Set _autoPassInProgress flag for p_gbma14be (ID: autopass_1767342223339_ml103)
2026-01-02T08:23:43.494Z [executeAutoPass] passPriority result: changed=true, advanceStep=true, resolvedNow=false (ID: autopass_1767342223339_ml103)
2026-01-02T08:23:43.495Z [executeAutoPass] Advancing step after auto-pass for p_gbma14be (ID: autopass_1767342223339_ml103)
2026-01-02T08:23:43.495Z [nextStep] ========== CALLED ==========
2026-01-02T08:23:43.495Z [nextStep] Game: game_mjwlv4zk
2026-01-02T08:23:43.495Z [nextStep] Current: combat/END_COMBAT
2026-01-02T08:23:43.495Z [nextStep] Priority: p_gbma14be, Turn: p_gbma14be
2026-01-02T08:23:43.495Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at Timeout.executeAutoPass (D:\Git\MTGEDH\server\src\socket\util.ts:2017:31)
        at listOnTimeout (node:internal/timers:588:17)
        at process.processTimers (node:internal/timers:523:7)
2026-01-02T08:23:43.495Z [clearManaPool] Processed mana pools for all players
2026-01-02T08:23:43.495Z [nextStep] Advanced to phase=postcombatMain, step=MAIN2
2026-01-02T08:23:43.495Z [nextStep] Granting priority to active player p_gbma14be (step: MAIN2, stack size: 0)
[canAct] p_gbma14be: step=MAIN2, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canAct] p_gbma14be: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canAct] p_gbma14be: No sorcery-speed actions available in main phase - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
2026-01-02T08:23:43.495Z [nextStep] DEBUG - Turn Player p_gbma14be:
2026-01-02T08:23:43.495Z [nextStep]   Hand (4): Plains, Plains, Plains, Plains
2026-01-02T08:23:43.495Z [nextStep]   canAct: false, canRespond: false
2026-01-02T08:23:43.495Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_gbma14be, autoPassEnabled: p_gbma14be, currentPriority: p_gbma14be, turnPlayer: p_gbma14be
[canAct] p_gbma14be: step=MAIN2, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canAct] p_gbma14be: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canAct] p_gbma14be: No sorcery-speed actions available in main phase - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[priority] autoPassLoop - checking p_gbma14be (ACTIVE): canAct=false, stack.length=0, step=MAIN2
[priority] Auto-passing for p_gbma14be - no available actions
2026-01-02T08:23:43.496Z [nextStep] All players auto-passed after granting priority - caller should advance step
2026-01-02T08:23:43.496Z [executeAutoPass] Cleared _autoPassInProgress flag for p_gbma14be (ID: autopass_1767342223339_ml103)
2026-01-02T08:23:43.496Z [executeAutoPass] Broadcasting state after auto-pass (ID: autopass_1767342223339_ml103)
[VIEW_FOR_DEBUG] {
  viewer: 'p_gbma14be',
  stackLength: 0,
  stackItems: [],
  zones: { p_gbma14be: { handCount: 4, firstKnown: [Array] } }
}
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking archangel elspeth: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'archangel elspeth'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_gbma14be, viewerId=p_gbma14be, match=true
[getPlayableCardIds] Player p_gbma14be: step=MAIN2, isMainPhase=true, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 4 }
[getPlayableCardIds] Total available mana: 4
[getPlayableCardIds] Checking 4 cards in hand
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[getPlayableCardIds] Checking lands: landsPlayed=1, max=1
[getPlayableCardIds] Already played max lands this turn (1/1)
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_gbma14be: step=MAIN2, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canAct] p_gbma14be: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canAct] p_gbma14be: No sorcery-speed actions available in main phase - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-01-02T08:23:43.497Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767342223497_xs744) ==========
2026-01-02T08:23:43.497Z [checkAndTriggerAutoPass] Priority: p_gbma14be, Phase: postcombatMain, Step: MAIN2
[canAct] p_gbma14be: step=MAIN2, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canAct] p_gbma14be: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canAct] p_gbma14be: No sorcery-speed actions available in main phase - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
2026-01-02T08:23:43.497Z [checkAndTriggerAutoPass] canAct check: p_gbma14be isActive=true canAct=false (ID: autopass_1767342223497_xs744)
2026-01-02T08:23:43.497Z [checkAndTriggerAutoPass] p_gbma14be CANNOT ACT - proceeding with auto-pass (ID: autopass_1767342223497_xs744)
2026-01-02T08:23:43.497Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_gbma14be with 150ms delay (ID: autopass_1767342223497_xs744)
2026-01-02T08:23:43.497Z [executeAutoPass] Broadcast complete (ID: autopass_1767342223339_ml103)
2026-01-02T08:23:43.497Z [executeAutoPass] ========== EXECUTING for p_gbma14be (ID: autopass_1767342223341_iieiz) ==========
2026-01-02T08:23:43.497Z [executeAutoPass] Phase: postcombatMain, Step: MAIN2
[canAct] p_gbma14be: step=MAIN2, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canAct] p_gbma14be: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Already played max lands this turn (1/1)
[canAct] p_gbma14be: No sorcery-speed actions available in main phase - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
2026-01-02T08:23:43.498Z [executeAutoPass] Re-check: p_gbma14be canAct=false (ID: autopass_1767342223341_iieiz)
2026-01-02T08:23:43.498Z [executeAutoPass] Proceeding with auto-pass for p_gbma14be (ID: autopass_1767342223341_iieiz)
2026-01-02T08:23:43.498Z [executeAutoPass] Set _autoPassInProgress flag for p_gbma14be (ID: autopass_1767342223341_iieiz)
2026-01-02T08:23:43.498Z [executeAutoPass] passPriority result: changed=true, advanceStep=true, resolvedNow=false (ID: autopass_1767342223341_iieiz)
2026-01-02T08:23:43.498Z [executeAutoPass] Advancing step after auto-pass for p_gbma14be (ID: autopass_1767342223341_iieiz)
2026-01-02T08:23:43.498Z [nextStep] ========== CALLED ==========
2026-01-02T08:23:43.498Z [nextStep] Game: game_mjwlv4zk
2026-01-02T08:23:43.498Z [nextStep] Current: postcombatMain/MAIN2
2026-01-02T08:23:43.498Z [nextStep] Priority: p_gbma14be, Turn: p_gbma14be
2026-01-02T08:23:43.498Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at Timeout.executeAutoPass (D:\Git\MTGEDH\server\src\socket\util.ts:2017:31)
        at listOnTimeout (node:internal/timers:588:17)
        at process.processTimers (node:internal/timers:523:7)
2026-01-02T08:23:43.498Z [clearManaPool] Processed mana pools for all players
2026-01-02T08:23:43.498Z [nextStep] Advanced to phase=ending, step=END
2026-01-02T08:23:43.498Z [nextStep] Granting priority to active player p_gbma14be (step: END, stack size: 0)
[canAct] p_gbma14be: step=END, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
2026-01-02T08:23:43.498Z [nextStep] DEBUG - Turn Player p_gbma14be:
2026-01-02T08:23:43.498Z [nextStep]   Hand (4): Plains, Plains, Plains, Plains
2026-01-02T08:23:43.498Z [nextStep]   canAct: false, canRespond: false
2026-01-02T08:23:43.498Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_gbma14be, autoPassEnabled: p_gbma14be, currentPriority: p_gbma14be, turnPlayer: p_gbma14be
[canAct] p_gbma14be: step=END, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[priority] autoPassLoop - checking p_gbma14be (ACTIVE): canAct=false, stack.length=0, step=END
[priority] Auto-passing for p_gbma14be - no available actions
2026-01-02T08:23:43.498Z [nextStep] All players auto-passed after granting priority - caller should advance step
2026-01-02T08:23:43.498Z [executeAutoPass] Cleared _autoPassInProgress flag for p_gbma14be (ID: autopass_1767342223341_iieiz)
2026-01-02T08:23:43.498Z [executeAutoPass] Broadcasting state after auto-pass (ID: autopass_1767342223341_iieiz)
[VIEW_FOR_DEBUG] {
  viewer: 'p_gbma14be',
  stackLength: 0,
  stackItems: [],
  zones: { p_gbma14be: { handCount: 4, firstKnown: [Array] } }
}
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking archangel elspeth: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'archangel elspeth'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_gbma14be, viewerId=p_gbma14be, match=true
[getPlayableCardIds] Player p_gbma14be: step=END, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 4 }
[getPlayableCardIds] Total available mana: 4
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_gbma14be: step=END, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-01-02T08:23:43.499Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767342223499_s627m) ==========
2026-01-02T08:23:43.499Z [checkAndTriggerAutoPass] Priority: p_gbma14be, Phase: ending, Step: END
[canAct] p_gbma14be: step=END, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
2026-01-02T08:23:43.499Z [checkAndTriggerAutoPass] canAct check: p_gbma14be isActive=true canAct=false (ID: autopass_1767342223499_s627m)
2026-01-02T08:23:43.499Z [checkAndTriggerAutoPass] p_gbma14be CANNOT ACT - proceeding with auto-pass (ID: autopass_1767342223499_s627m)
2026-01-02T08:23:43.499Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_gbma14be with 150ms delay (ID: autopass_1767342223499_s627m)
2026-01-02T08:23:43.499Z [executeAutoPass] Broadcast complete (ID: autopass_1767342223341_iieiz)
2026-01-02T08:23:43.649Z [executeAutoPass] ========== EXECUTING for p_gbma14be (ID: autopass_1767342223497_xs744) ==========
2026-01-02T08:23:43.649Z [executeAutoPass] Phase: ending, Step: END
[canAct] p_gbma14be: step=END, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
2026-01-02T08:23:43.650Z [executeAutoPass] Re-check: p_gbma14be canAct=false (ID: autopass_1767342223497_xs744)
2026-01-02T08:23:43.650Z [executeAutoPass] Proceeding with auto-pass for p_gbma14be (ID: autopass_1767342223497_xs744)
2026-01-02T08:23:43.650Z [executeAutoPass] Set _autoPassInProgress flag for p_gbma14be (ID: autopass_1767342223497_xs744)
2026-01-02T08:23:43.650Z [executeAutoPass] passPriority result: changed=true, advanceStep=true, resolvedNow=false (ID: autopass_1767342223497_xs744)
2026-01-02T08:23:43.650Z [executeAutoPass] Advancing step after auto-pass for p_gbma14be (ID: autopass_1767342223497_xs744)
2026-01-02T08:23:43.650Z [nextStep] ========== CALLED ==========
2026-01-02T08:23:43.650Z [nextStep] Game: game_mjwlv4zk
2026-01-02T08:23:43.650Z [nextStep] Current: ending/END
2026-01-02T08:23:43.650Z [nextStep] Priority: p_gbma14be, Turn: p_gbma14be
2026-01-02T08:23:43.650Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at Timeout.executeAutoPass (D:\Git\MTGEDH\server\src\socket\util.ts:2017:31)
        at listOnTimeout (node:internal/timers:588:17)
        at process.processTimers (node:internal/timers:523:7)
2026-01-02T08:23:43.650Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T08:23:43.650Z [nextStep] Step CLEANUP does not grant priority (Rule 502.1/514.1)
2026-01-02T08:23:43.650Z [nextStep] Cleanup complete, advancing to next turn
2026-01-02T08:23:43.650Z [untapPermanentsForPlayer] Player p_gbma14be: untapped 3, stun counters removed 0, skipped (doesn't untap) 0
2026-01-02T08:23:43.651Z [nextTurn] Cleared autoPassForTurn flags for new turn
2026-01-02T08:23:43.651Z [nextTurn] Advanced to player p_gbma14be, phase=beginning, step=UPKEEP
2026-01-02T08:23:43.651Z [nextTurn] Checking if auto-pass should apply at upkeep
[priority] autoPassLoop starting - active players: p_gbma14be, autoPassEnabled: p_gbma14be, currentPriority: p_gbma14be, turnPlayer: p_gbma14be
[canAct] p_gbma14be: step=UPKEEP, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[priority] autoPassLoop - checking p_gbma14be (ACTIVE): canAct=false, stack.length=0, step=UPKEEP
[priority] Auto-passing for p_gbma14be - no available actions
2026-01-02T08:23:43.651Z [nextTurn] All players auto-passed at upkeep - caller should advance step
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[recalculateHandVisibility] Players with hand reveal effects: none
2026-01-02T08:23:43.651Z [executeAutoPass] Cleared _autoPassInProgress flag for p_gbma14be (ID: autopass_1767342223497_xs744)
2026-01-02T08:23:43.651Z [executeAutoPass] Broadcasting state after auto-pass (ID: autopass_1767342223497_xs744)
[VIEW_FOR_DEBUG] {
  viewer: 'p_gbma14be',
  stackLength: 0,
  stackItems: [],
  zones: { p_gbma14be: { handCount: 4, firstKnown: [Array] } }
}
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking archangel elspeth: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'archangel elspeth'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_gbma14be, viewerId=p_gbma14be, match=true
[getPlayableCardIds] Player p_gbma14be: step=UPKEEP, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 2, blue: 0, black: 0, red: 0, green: 0, colorless: 6 }
[getPlayableCardIds] Total available mana: 8
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_gbma14be: step=UPKEEP, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-01-02T08:23:43.652Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767342223652_kae1y) ==========
2026-01-02T08:23:43.652Z [checkAndTriggerAutoPass] Priority: p_gbma14be, Phase: beginning, Step: UPKEEP
[canAct] p_gbma14be: step=UPKEEP, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
2026-01-02T08:23:43.652Z [checkAndTriggerAutoPass] canAct check: p_gbma14be isActive=true canAct=false (ID: autopass_1767342223652_kae1y)
2026-01-02T08:23:43.652Z [checkAndTriggerAutoPass] p_gbma14be CANNOT ACT - proceeding with auto-pass (ID: autopass_1767342223652_kae1y)
2026-01-02T08:23:43.652Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_gbma14be with 150ms delay (ID: autopass_1767342223652_kae1y)
2026-01-02T08:23:43.652Z [executeAutoPass] Broadcast complete (ID: autopass_1767342223497_xs744)
2026-01-02T08:23:43.652Z [executeAutoPass] ========== EXECUTING for p_gbma14be (ID: autopass_1767342223499_s627m) ==========
2026-01-02T08:23:43.652Z [executeAutoPass] Phase: beginning, Step: UPKEEP
[canAct] p_gbma14be: step=UPKEEP, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_gbma14be: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_gbma14be: No actions available - returning FALSE
2026-01-02T08:23:43.652Z [executeAutoPass] Re-check: p_gbma14be canAct=false (ID: autopass_1767342223499_s627m)
2026-01-02T08:23:43.652Z [executeAutoPass] Proceeding with auto-pass for p_gbma14be (ID: autopass_1767342223499_s627m)
2026-01-02T08:23:43.652Z [executeAutoPass] Set _autoPassInProgress flag for p_gbma14be (ID: autopass_1767342223499_s627m)
2026-01-02T08:23:43.652Z [executeAutoPass] passPriority result: changed=true, advanceStep=true, resolvedNow=false (ID: autopass_1767342223499_s627m)
2026-01-02T08:23:43.652Z [executeAutoPass] Advancing step after auto-pass for p_gbma14be (ID: autopass_1767342223499_s627m)
2026-01-02T08:23:43.653Z [nextStep] ========== CALLED ==========
2026-01-02T08:23:43.653Z [nextStep] Game: game_mjwlv4zk
2026-01-02T08:23:43.653Z [nextStep] Current: beginning/UPKEEP
2026-01-02T08:23:43.653Z [nextStep] Priority: p_gbma14be, Turn: p_gbma14be
2026-01-02T08:23:43.653Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at Timeout.executeAutoPass (D:\Git\MTGEDH\server\src\socket\util.ts:2017:31)
        at listOnTimeout (node:internal/timers:588:17)
        at process.processTimers (node:internal/timers:523:7)
2026-01-02T08:23:43.653Z [nextStep] Advanced to phase=beginning, step=DRAW
[drawCards] Player p_gbma14be attempted to draw from empty library
[drawCards] Player p_gbma14be LOSES: Drew from empty library
2026-01-02T08:23:43.653Z [nextStep] Drew 0 card(s) for p_gbma14be at draw step (base: 1, additional: 0)
2026-01-02T08:23:43.653Z [nextStep] No draw triggers, immediately advancing to MAIN1 (similar to UNTAP->UPKEEP)
2026-01-02T08:23:43.653Z [nextStep] Advanced to MAIN1, found 0 precombat main trigger(s)
2026-01-02T08:23:43.653Z [nextStep] Granting priority to active player p_gbma14be (step: MAIN1, stack size: 0)
[canAct] p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Checking hand with 4 cards
[canPlayLand] p_gbma14be: Sample cards in hand: [Plains(Basic Land ΓÇö Plains), Plains(Basic Land ΓÇö Plains), Plains(Basic Land ΓÇö Plains)]
[canPlayLand] p_gbma14be: Found land in hand: Plains (Basic Land ΓÇö Plains) - returning TRUE
[canAct] p_gbma14be: Turn player in main phase can play land - returning TRUE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
2026-01-02T08:23:43.653Z [nextStep] DEBUG - Turn Player p_gbma14be:
2026-01-02T08:23:43.653Z [nextStep]   Hand (4): Plains, Plains, Plains, Plains
2026-01-02T08:23:43.653Z [nextStep]   canAct: true, canRespond: false
2026-01-02T08:23:43.653Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_gbma14be, autoPassEnabled: p_gbma14be, currentPriority: p_gbma14be, turnPlayer: p_gbma14be
[canAct] p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Checking hand with 4 cards
[canPlayLand] p_gbma14be: Sample cards in hand: [Plains(Basic Land ΓÇö Plains), Plains(Basic Land ΓÇö Plains), Plains(Basic Land ΓÇö Plains)]
[canPlayLand] p_gbma14be: Found land in hand: Plains (Basic Land ΓÇö Plains) - returning TRUE
[canAct] p_gbma14be: Turn player in main phase can play land - returning TRUE
[priority] autoPassLoop - checking p_gbma14be (ACTIVE): canAct=true, stack.length=0, step=MAIN1
[priority] autoPassLoop - stopping at p_gbma14be: active player can act
2026-01-02T08:23:43.654Z [nextStep] Auto-pass stopped, player p_gbma14be has priority
2026-01-02T08:23:43.654Z [executeAutoPass] Cleared _autoPassInProgress flag for p_gbma14be (ID: autopass_1767342223499_s627m)
2026-01-02T08:23:43.654Z [executeAutoPass] Broadcasting state after auto-pass (ID: autopass_1767342223499_s627m)
[VIEW_FOR_DEBUG] {
  viewer: 'p_gbma14be',
  stackLength: 0,
  stackItems: [],
  zones: { p_gbma14be: { handCount: 4, firstKnown: [Array] } }
}
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sol ring: { hasKarametra: false, hasAcolyte: false, fullCardName: 'sol ring' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking archangel elspeth: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'archangel elspeth'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_gbma14be, viewerId=p_gbma14be, match=true
[getPlayableCardIds] Player p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 2, blue: 0, black: 0, red: 0, green: 0, colorless: 6 }
[getPlayableCardIds] Total available mana: 8
[getPlayableCardIds] Checking 4 cards in hand
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[getPlayableCardIds] Checking lands: landsPlayed=0, max=1
[getPlayableCardIds] Land Plains (4069fb4a-8ee1-41ef-ab93-39a8cc58e0e5_mjwlwqz5_9_0fa97370) is playable
[getPlayableCardIds] Land Plains (4069fb4a-8ee1-41ef-ab93-39a8cc58e0e5_mjwlwqz5_6_9c4c1c5e) is playable
[getPlayableCardIds] Land Plains (4069fb4a-8ee1-41ef-ab93-39a8cc58e0e5_mjwlwqz5_7_6ff1a17c) is playable
[getPlayableCardIds] Land Plains (4069fb4a-8ee1-41ef-ab93-39a8cc58e0e5_mjwlwqz5_8_316654ef) is playable
[getPlayableCardIds] Returning 4 playable card(s): [
  '4069fb4a-8ee1-41ef-ab93-39a8cc58e0e5_mjwlwqz5_9_0fa97370',
  '4069fb4a-8ee1-41ef-ab93-39a8cc58e0e5_mjwlwqz5_6_9c4c1c5e',
  '4069fb4a-8ee1-41ef-ab93-39a8cc58e0e5_mjwlwqz5_7_6ff1a17c',
  '4069fb4a-8ee1-41ef-ab93-39a8cc58e0e5_mjwlwqz5_8_316654ef'
]
[normalizeViewForEmit] getPlayableCardIds returned 4 cards
[normalizeViewForEmit] Set view.playableCards with 4 cards
[canAct] p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Checking hand with 4 cards
[canPlayLand] p_gbma14be: Sample cards in hand: [Plains(Basic Land ΓÇö Plains), Plains(Basic Land ΓÇö Plains), Plains(Basic Land ΓÇö Plains)]
[canPlayLand] p_gbma14be: Found land in hand: Plains (Basic Land ΓÇö Plains) - returning TRUE
[canAct] p_gbma14be: Turn player in main phase can play land - returning TRUE
[canRespond] p_gbma14be: checking instant-speed responses only
[canRespond] p_gbma14be: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=true, canRespond=false
2026-01-02T08:23:43.655Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767342223655_zr1pa) ==========
2026-01-02T08:23:43.655Z [checkAndTriggerAutoPass] Priority: p_gbma14be, Phase: precombatMain, Step: MAIN1
[canAct] p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Checking hand with 4 cards
[canPlayLand] p_gbma14be: Sample cards in hand: [Plains(Basic Land ΓÇö Plains), Plains(Basic Land ΓÇö Plains), Plains(Basic Land ΓÇö Plains)]
[canPlayLand] p_gbma14be: Found land in hand: Plains (Basic Land ΓÇö Plains) - returning TRUE
[canAct] p_gbma14be: Turn player in main phase can play land - returning TRUE
2026-01-02T08:23:43.655Z [checkAndTriggerAutoPass] canAct check: p_gbma14be isActive=true canAct=true (ID: autopass_1767342223655_zr1pa)
2026-01-02T08:23:43.655Z [checkAndTriggerAutoPass] p_gbma14be CAN ACT - returning early, NO auto-pass (ID: autopass_1767342223655_zr1pa)
2026-01-02T08:23:43.655Z [executeAutoPass] Broadcast complete (ID: autopass_1767342223499_s627m)
2026-01-02T08:23:43.805Z [executeAutoPass] ========== EXECUTING for p_gbma14be (ID: autopass_1767342223652_kae1y) ==========
2026-01-02T08:23:43.805Z [executeAutoPass] Phase: precombatMain, Step: MAIN1
[canAct] p_gbma14be: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_gbma14be, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_gbma14be: 1 lands per turn
[canPlayLand] p_gbma14be: Checking hand with 4 cards
[canPlayLand] p_gbma14be: Sample cards in hand: [Plains(Basic Land ΓÇö Plains), Plains(Basic Land ΓÇö Plains), Plains(Basic Land ΓÇö Plains)]
[canPlayLand] p_gbma14be: Found land in hand: Plains (Basic Land ΓÇö Plains) - returning TRUE
[canAct] p_gbma14be: Turn player in main phase can play land - returning TRUE
2026-01-02T08:23:43.806Z [executeAutoPass] Re-check: p_gbma14be canAct=true (ID: autopass_1767342223652_kae1y)
2026-01-02T08:23:43.806Z [executeAutoPass] Player p_gbma14be CAN NOW ACT - canceling auto-pass (ID: autopass_1767342223652_kae1y)