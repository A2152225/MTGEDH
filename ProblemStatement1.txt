  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_3tgu9yec, viewerId=p_3tgu9yec, match=true
[getPlayableCardIds] Player p_3tgu9yec: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Path to Exile not playable - cannot pay cost {W} (after reduction: {"generic":0,"colors":{"W":1,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Hero of Bladehold blocked - no valid targets: No attacking creatures on the battlefield
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Iroas, God of Victory not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_3tgu9yec: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_3tgu9yec: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_3tgu9yec: No actions available - returning FALSE
[canRespond] p_3tgu9yec: checking instant-speed responses only
[canRespond] p_3tgu9yec: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-01-02T06:30:52.572Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767335452572_0t4gy) ==========
2026-01-02T06:30:52.572Z [checkAndTriggerAutoPass] Priority: p_3tgu9yec, Phase: combat, Step: DECLARE_BLOCKERS
2026-01-02T06:30:52.572Z [checkAndTriggerAutoPass] p_3tgu9yec is AI, handled separately (ID: autopass_1767335452572_0t4gy)
[AI] handleAIGameFlow: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_9eb7iiyf',
  phase: 'COMBAT',
  step: 'DECLARE_BLOCKERS',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: false,
  hasPriority: false
}
[AI] AI player checking priority: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_3tgu9yec',
  phase: 'combat',
  step: 'declare_blockers',
  isAITurn: true,
  stackEmpty: true,
  priority: 'p_3tgu9yec',
  hasPriority: true
}
[AI] AI has priority, proceeding with action
[AI] Blockers already declared (in blockersDeclaredBy), passing priority for responses
[AI] Passing priority: { gameId: 'game_mjwhphwz', playerId: 'p_3tgu9yec' }
[priority] autoPassLoop starting - active players: p_9eb7iiyf, p_2vckyop2, p_3tgu9yec, autoPassEnabled: p_2vckyop2, p_9eb7iiyf, p_3tgu9yec, currentPriority: p_9eb7iiyf, turnPlayer: p_3tgu9yec
[canRespond] p_9eb7iiyf: checking instant-speed responses only
[canRespond] p_9eb7iiyf: Can cast instant/flash spell
[priority] autoPassLoop - checking p_9eb7iiyf (non-active): canAct=true, stack.length=0, step=DECLARE_BLOCKERS
[priority] autoPassLoop - stopping at p_9eb7iiyf: player can act
[VIEW_FOR_DEBUG] {
  viewer: 'p_9eb7iiyf',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_9eb7iiyf, match=true
[getPlayableCardIds] Player p_9eb7iiyf: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isMyTurn=false
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 1, colorless: 0 }
[getPlayableCardIds] Total available mana: 1
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Snakeskin Veil (card_a3d2c692-7566-468e-9c86-47a9f768fde2_132e0417c989bb28) is playable
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=false
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Omnath, Locus of Mana not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 1 playable card(s): [ 'card_a3d2c692-7566-468e-9c86-47a9f768fde2_132e0417c989bb28' ]
[normalizeViewForEmit] getPlayableCardIds returned 1 cards
[normalizeViewForEmit] Set view.playableCards with 1 cards
[canAct] p_9eb7iiyf: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=false
[canAct] p_9eb7iiyf: Can cast instant/flash spell - returning TRUE
[canRespond] p_9eb7iiyf: checking instant-speed responses only
[canRespond] p_9eb7iiyf: Can cast instant/flash spell
[normalizeViewForEmit] Set canAct=true, canRespond=true
[VIEW_FOR_DEBUG] {
  viewer: 'p_2vckyop2',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_2vckyop2, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_3tgu9yec',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_3tgu9yec, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
2026-01-02T06:30:52.871Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767335452871_bz7xa) ==========
2026-01-02T06:30:52.871Z [checkAndTriggerAutoPass] Priority: p_9eb7iiyf, Phase: combat, Step: DECLARE_BLOCKERS
2026-01-02T06:30:52.871Z [checkAndTriggerAutoPass] p_9eb7iiyf is AI, handled separately (ID: autopass_1767335452871_bz7xa)
[AI] handleAIGameFlow: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_3tgu9yec',
  phase: 'COMBAT',
  step: 'DECLARE_BLOCKERS',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: true,
  hasPriority: false
}
[AI] AI player checking priority: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_9eb7iiyf',
  phase: 'combat',
  step: 'declare_blockers',
  isAITurn: false,
  stackEmpty: true,
  priority: 'p_9eb7iiyf',
  hasPriority: true
}
[AI] AI has priority, proceeding with action
[AI] Not AI turn, but it's DECLARE_BLOCKERS step - AI needs to decide on blockers
[AI] Blockers already declared for p_9eb7iiyf, skipping
[AI] Not AI turn, passing priority
[AI] Passing priority: { gameId: 'game_mjwhphwz', playerId: 'p_9eb7iiyf' }
[priority] autoPassLoop starting - active players: p_9eb7iiyf, p_2vckyop2, p_3tgu9yec, autoPassEnabled: p_2vckyop2, p_9eb7iiyf, p_3tgu9yec, currentPriority: p_2vckyop2, turnPlayer: p_3tgu9yec
[canRespond] p_2vckyop2: checking instant-speed responses only
[canRespond] p_2vckyop2: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_2vckyop2 (non-active): canAct=false, stack.length=0, step=DECLARE_BLOCKERS
[priority] Auto-passing for p_2vckyop2 - no available actions
[AI] All players passed priority with empty stack, advancing step
2026-01-02T06:30:52.872Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:52.872Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:52.872Z [nextStep] Current: combat/DECLARE_BLOCKERS
2026-01-02T06:30:52.872Z [nextStep] Priority: p_3tgu9yec, Turn: p_3tgu9yec
2026-01-02T06:30:52.872Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4590:25)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at runNextTicks (node:internal/process/task_queues:69:3)
2026-01-02T06:30:52.872Z [checkPendingInteractions] Waiting for p_2vckyop2 to declare blockers
2026-01-02T06:30:52.872Z [checkPendingInteractions] Pending: blocker_declaration
2026-01-02T06:30:52.872Z [nextStep] BLOCKED: Cannot advance step - pending interactions: blocker_declaration
[AI] Advanced to next step for game game_mjwhphwz
[VIEW_FOR_DEBUG] {
  viewer: 'p_9eb7iiyf',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_3tgu9yec, viewerId=p_9eb7iiyf, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_2vckyop2',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_3tgu9yec, viewerId=p_2vckyop2, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_3tgu9yec',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_3tgu9yec, viewerId=p_3tgu9yec, match=true
[getPlayableCardIds] Player p_3tgu9yec: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Path to Exile not playable - cannot pay cost {W} (after reduction: {"generic":0,"colors":{"W":1,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Hero of Bladehold blocked - no valid targets: No attacking creatures on the battlefield
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Iroas, God of Victory not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_3tgu9yec: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_3tgu9yec: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_3tgu9yec: No actions available - returning FALSE
[canRespond] p_3tgu9yec: checking instant-speed responses only
[canRespond] p_3tgu9yec: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-01-02T06:30:52.875Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767335452875_j5dku) ==========
2026-01-02T06:30:52.875Z [checkAndTriggerAutoPass] Priority: p_3tgu9yec, Phase: combat, Step: DECLARE_BLOCKERS
2026-01-02T06:30:52.875Z [checkAndTriggerAutoPass] p_3tgu9yec is AI, handled separately (ID: autopass_1767335452875_j5dku)
[AI] AI player checking priority: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_9eb7iiyf',
  phase: 'combat',
  step: 'declare_blockers',
  isAITurn: false,
  stackEmpty: true,
  priority: 'p_3tgu9yec',
  hasPriority: false
}
[AI] AI does not have priority, skipping action
[AI] handleAIGameFlow: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_9eb7iiyf',
  phase: 'COMBAT',
  step: 'DECLARE_BLOCKERS',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: false,
  hasPriority: false
}
[AI] AI player checking priority: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_3tgu9yec',
  phase: 'combat',
  step: 'declare_blockers',
  isAITurn: true,
  stackEmpty: true,
  priority: 'p_3tgu9yec',
  hasPriority: true
}
[AI] AI has priority, proceeding with action
[AI] Blockers already declared (in blockersDeclaredBy), passing priority for responses
[AI] Passing priority: { gameId: 'game_mjwhphwz', playerId: 'p_3tgu9yec' }
[priority] autoPassLoop starting - active players: p_9eb7iiyf, p_2vckyop2, p_3tgu9yec, autoPassEnabled: p_2vckyop2, p_9eb7iiyf, p_3tgu9yec, currentPriority: p_9eb7iiyf, turnPlayer: p_3tgu9yec
[canRespond] p_9eb7iiyf: checking instant-speed responses only
[canRespond] p_9eb7iiyf: Can cast instant/flash spell
[priority] autoPassLoop - checking p_9eb7iiyf (non-active): canAct=true, stack.length=0, step=DECLARE_BLOCKERS
[priority] autoPassLoop - stopping at p_9eb7iiyf: player can act
[VIEW_FOR_DEBUG] {
  viewer: 'p_9eb7iiyf',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_9eb7iiyf, match=true
[getPlayableCardIds] Player p_9eb7iiyf: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isMyTurn=false
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 1, colorless: 0 }
[getPlayableCardIds] Total available mana: 1
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Snakeskin Veil (card_a3d2c692-7566-468e-9c86-47a9f768fde2_132e0417c989bb28) is playable
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=false
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Omnath, Locus of Mana not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 1 playable card(s): [ 'card_a3d2c692-7566-468e-9c86-47a9f768fde2_132e0417c989bb28' ]
[normalizeViewForEmit] getPlayableCardIds returned 1 cards
[normalizeViewForEmit] Set view.playableCards with 1 cards
[canAct] p_9eb7iiyf: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=false
[canAct] p_9eb7iiyf: Can cast instant/flash spell - returning TRUE
[canRespond] p_9eb7iiyf: checking instant-speed responses only
[canRespond] p_9eb7iiyf: Can cast instant/flash spell
[normalizeViewForEmit] Set canAct=true, canRespond=true
[VIEW_FOR_DEBUG] {
  viewer: 'p_2vckyop2',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_2vckyop2, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_3tgu9yec',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_3tgu9yec, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
2026-01-02T06:30:52.878Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767335452878_301hv) ==========
2026-01-02T06:30:52.878Z [checkAndTriggerAutoPass] Priority: p_9eb7iiyf, Phase: combat, Step: DECLARE_BLOCKERS
2026-01-02T06:30:52.878Z [checkAndTriggerAutoPass] p_9eb7iiyf is AI, handled separately (ID: autopass_1767335452878_301hv)
[AI] handleAIGameFlow: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_3tgu9yec',
  phase: 'COMBAT',
  step: 'DECLARE_BLOCKERS',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: true,
  hasPriority: false
}
[AI] AI player checking priority: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_9eb7iiyf',
  phase: 'combat',
  step: 'declare_blockers',
  isAITurn: false,
  stackEmpty: true,
  priority: 'p_9eb7iiyf',
  hasPriority: true
}
[AI] AI has priority, proceeding with action
[AI] Not AI turn, but it's DECLARE_BLOCKERS step - AI needs to decide on blockers
[AI] Blockers already declared for p_9eb7iiyf, skipping
[AI] Not AI turn, passing priority
[AI] Passing priority: { gameId: 'game_mjwhphwz', playerId: 'p_9eb7iiyf' }
[priority] autoPassLoop starting - active players: p_9eb7iiyf, p_2vckyop2, p_3tgu9yec, autoPassEnabled: p_2vckyop2, p_9eb7iiyf, p_3tgu9yec, currentPriority: p_2vckyop2, turnPlayer: p_3tgu9yec
[canRespond] p_2vckyop2: checking instant-speed responses only
[canRespond] p_2vckyop2: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_2vckyop2 (non-active): canAct=false, stack.length=0, step=DECLARE_BLOCKERS
[priority] Auto-passing for p_2vckyop2 - no available actions
[AI] All players passed priority with empty stack, advancing step
2026-01-02T06:30:53.179Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:53.179Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:53.179Z [nextStep] Current: combat/DECLARE_BLOCKERS
2026-01-02T06:30:53.179Z [nextStep] Priority: p_3tgu9yec, Turn: p_3tgu9yec
2026-01-02T06:30:53.179Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4590:25)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at runNextTicks (node:internal/process/task_queues:69:3)
2026-01-02T06:30:53.179Z [checkPendingInteractions] Waiting for p_2vckyop2 to declare blockers
2026-01-02T06:30:53.179Z [checkPendingInteractions] Pending: blocker_declaration
2026-01-02T06:30:53.179Z [nextStep] BLOCKED: Cannot advance step - pending interactions: blocker_declaration
[AI] Advanced to next step for game game_mjwhphwz
[VIEW_FOR_DEBUG] {
  viewer: 'p_9eb7iiyf',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_3tgu9yec, viewerId=p_9eb7iiyf, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_2vckyop2',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_3tgu9yec, viewerId=p_2vckyop2, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_3tgu9yec',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_3tgu9yec, viewerId=p_3tgu9yec, match=true
[getPlayableCardIds] Player p_3tgu9yec: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Path to Exile not playable - cannot pay cost {W} (after reduction: {"generic":0,"colors":{"W":1,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Hero of Bladehold blocked - no valid targets: No attacking creatures on the battlefield
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Iroas, God of Victory not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_3tgu9yec: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_3tgu9yec: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_3tgu9yec: No actions available - returning FALSE
[canRespond] p_3tgu9yec: checking instant-speed responses only
[canRespond] p_3tgu9yec: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-01-02T06:30:53.183Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767335453183_9jfqs) ==========
2026-01-02T06:30:53.183Z [checkAndTriggerAutoPass] Priority: p_3tgu9yec, Phase: combat, Step: DECLARE_BLOCKERS
2026-01-02T06:30:53.183Z [checkAndTriggerAutoPass] p_3tgu9yec is AI, handled separately (ID: autopass_1767335453183_9jfqs)
[AI] AI player checking priority: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_3tgu9yec',
  phase: 'combat',
  step: 'declare_blockers',
  isAITurn: true,
  stackEmpty: true,
  priority: 'p_3tgu9yec',
  hasPriority: true
}
[AI] AI has priority, proceeding with action
[AI] Blockers already declared (in blockersDeclaredBy), passing priority for responses
[AI] Passing priority: { gameId: 'game_mjwhphwz', playerId: 'p_3tgu9yec' }
[priority] autoPassLoop starting - active players: p_9eb7iiyf, p_2vckyop2, p_3tgu9yec, autoPassEnabled: p_2vckyop2, p_9eb7iiyf, p_3tgu9yec, currentPriority: p_9eb7iiyf, turnPlayer: p_3tgu9yec
[canRespond] p_9eb7iiyf: checking instant-speed responses only
[canRespond] p_9eb7iiyf: Can cast instant/flash spell
[priority] autoPassLoop - checking p_9eb7iiyf (non-active): canAct=true, stack.length=0, step=DECLARE_BLOCKERS
[priority] autoPassLoop - stopping at p_9eb7iiyf: player can act
[VIEW_FOR_DEBUG] {
  viewer: 'p_9eb7iiyf',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_9eb7iiyf, match=true
[getPlayableCardIds] Player p_9eb7iiyf: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isMyTurn=false
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 1, colorless: 0 }
[getPlayableCardIds] Total available mana: 1
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Snakeskin Veil (card_a3d2c692-7566-468e-9c86-47a9f768fde2_132e0417c989bb28) is playable
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=false
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Omnath, Locus of Mana not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 1 playable card(s): [ 'card_a3d2c692-7566-468e-9c86-47a9f768fde2_132e0417c989bb28' ]
[normalizeViewForEmit] getPlayableCardIds returned 1 cards
[normalizeViewForEmit] Set view.playableCards with 1 cards
[canAct] p_9eb7iiyf: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=false
[canAct] p_9eb7iiyf: Can cast instant/flash spell - returning TRUE
[canRespond] p_9eb7iiyf: checking instant-speed responses only
[canRespond] p_9eb7iiyf: Can cast instant/flash spell
[normalizeViewForEmit] Set canAct=true, canRespond=true
[VIEW_FOR_DEBUG] {
  viewer: 'p_2vckyop2',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_2vckyop2, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_3tgu9yec',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_3tgu9yec, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
2026-01-02T06:30:53.186Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767335453186_7zut1) ==========
2026-01-02T06:30:53.186Z [checkAndTriggerAutoPass] Priority: p_9eb7iiyf, Phase: combat, Step: DECLARE_BLOCKERS
2026-01-02T06:30:53.186Z [checkAndTriggerAutoPass] p_9eb7iiyf is AI, handled separately (ID: autopass_1767335453186_7zut1)
[AI] handleAIGameFlow: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_9eb7iiyf',
  phase: 'COMBAT',
  step: 'DECLARE_BLOCKERS',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: false,
  hasPriority: true
}
[AI] handleAIGameFlow: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_3tgu9yec',
  phase: 'COMBAT',
  step: 'DECLARE_BLOCKERS',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: true,
  hasPriority: false
}
[AI] AI player checking priority: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_9eb7iiyf',
  phase: 'combat',
  step: 'declare_blockers',
  isAITurn: false,
  stackEmpty: true,
  priority: 'p_9eb7iiyf',
  hasPriority: true
}
[AI] AI has priority, proceeding with action
[AI] Not AI turn, but it's DECLARE_BLOCKERS step - AI needs to decide on blockers
[AI] Blockers already declared for p_9eb7iiyf, skipping
[AI] Not AI turn, passing priority
[AI] Passing priority: { gameId: 'game_mjwhphwz', playerId: 'p_9eb7iiyf' }
[priority] autoPassLoop starting - active players: p_9eb7iiyf, p_2vckyop2, p_3tgu9yec, autoPassEnabled: p_2vckyop2, p_9eb7iiyf, p_3tgu9yec, currentPriority: p_2vckyop2, turnPlayer: p_3tgu9yec
[canRespond] p_2vckyop2: checking instant-speed responses only
[canRespond] p_2vckyop2: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_2vckyop2 (non-active): canAct=false, stack.length=0, step=DECLARE_BLOCKERS
[priority] Auto-passing for p_2vckyop2 - no available actions
[AI] All players passed priority with empty stack, advancing step
2026-01-02T06:30:53.187Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:53.187Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:53.187Z [nextStep] Current: combat/DECLARE_BLOCKERS
2026-01-02T06:30:53.187Z [nextStep] Priority: p_3tgu9yec, Turn: p_3tgu9yec
2026-01-02T06:30:53.187Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4590:25)
        at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
        at async handleAIPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:2459:7)
2026-01-02T06:30:53.187Z [checkPendingInteractions] Waiting for p_2vckyop2 to declare blockers
2026-01-02T06:30:53.187Z [checkPendingInteractions] Pending: blocker_declaration
2026-01-02T06:30:53.187Z [nextStep] BLOCKED: Cannot advance step - pending interactions: blocker_declaration
[AI] Advanced to next step for game game_mjwhphwz
[VIEW_FOR_DEBUG] {
  viewer: 'p_9eb7iiyf',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_3tgu9yec, viewerId=p_9eb7iiyf, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_2vckyop2',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_3tgu9yec, viewerId=p_2vckyop2, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_3tgu9yec',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_3tgu9yec, viewerId=p_3tgu9yec, match=true
[getPlayableCardIds] Player p_3tgu9yec: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Path to Exile not playable - cannot pay cost {W} (after reduction: {"generic":0,"colors":{"W":1,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Hero of Bladehold blocked - no valid targets: No attacking creatures on the battlefield
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Iroas, God of Victory not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_3tgu9yec: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_3tgu9yec: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_3tgu9yec: No actions available - returning FALSE
[canRespond] p_3tgu9yec: checking instant-speed responses only
[canRespond] p_3tgu9yec: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-01-02T06:30:53.189Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767335453189_718nm) ==========
2026-01-02T06:30:53.189Z [checkAndTriggerAutoPass] Priority: p_3tgu9yec, Phase: combat, Step: DECLARE_BLOCKERS
2026-01-02T06:30:53.189Z [checkAndTriggerAutoPass] p_3tgu9yec is AI, handled separately (ID: autopass_1767335453189_718nm)
[AI] handleAIGameFlow: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_9eb7iiyf',
  phase: 'COMBAT',
  step: 'DECLARE_BLOCKERS',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: false,
  hasPriority: false
}
[AI] AI player checking priority: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_3tgu9yec',
  phase: 'combat',
  step: 'declare_blockers',
  isAITurn: true,
  stackEmpty: true,
  priority: 'p_3tgu9yec',
  hasPriority: true
}
[AI] AI has priority, proceeding with action
[AI] Blockers already declared (in blockersDeclaredBy), passing priority for responses
[AI] Passing priority: { gameId: 'game_mjwhphwz', playerId: 'p_3tgu9yec' }
[priority] autoPassLoop starting - active players: p_9eb7iiyf, p_2vckyop2, p_3tgu9yec, autoPassEnabled: p_2vckyop2, p_9eb7iiyf, p_3tgu9yec, currentPriority: p_9eb7iiyf, turnPlayer: p_3tgu9yec
[canRespond] p_9eb7iiyf: checking instant-speed responses only
[canRespond] p_9eb7iiyf: Can cast instant/flash spell
[priority] autoPassLoop - checking p_9eb7iiyf (non-active): canAct=true, stack.length=0, step=DECLARE_BLOCKERS
[priority] autoPassLoop - stopping at p_9eb7iiyf: player can act
[VIEW_FOR_DEBUG] {
  viewer: 'p_9eb7iiyf',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_9eb7iiyf, match=true
[getPlayableCardIds] Player p_9eb7iiyf: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isMyTurn=false
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 1, colorless: 0 }
[getPlayableCardIds] Total available mana: 1
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Snakeskin Veil (card_a3d2c692-7566-468e-9c86-47a9f768fde2_132e0417c989bb28) is playable
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=false
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Omnath, Locus of Mana not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 1 playable card(s): [ 'card_a3d2c692-7566-468e-9c86-47a9f768fde2_132e0417c989bb28' ]
[normalizeViewForEmit] getPlayableCardIds returned 1 cards
[normalizeViewForEmit] Set view.playableCards with 1 cards
[canAct] p_9eb7iiyf: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=false
[canAct] p_9eb7iiyf: Can cast instant/flash spell - returning TRUE
[canRespond] p_9eb7iiyf: checking instant-speed responses only
[canRespond] p_9eb7iiyf: Can cast instant/flash spell
[normalizeViewForEmit] Set canAct=true, canRespond=true
[VIEW_FOR_DEBUG] {
  viewer: 'p_2vckyop2',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_2vckyop2, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_3tgu9yec',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_3tgu9yec, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
2026-01-02T06:30:53.494Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767335453494_ru1z3) ==========
2026-01-02T06:30:53.494Z [checkAndTriggerAutoPass] Priority: p_9eb7iiyf, Phase: combat, Step: DECLARE_BLOCKERS
2026-01-02T06:30:53.494Z [checkAndTriggerAutoPass] p_9eb7iiyf is AI, handled separately (ID: autopass_1767335453494_ru1z3)
[AI] AI player checking priority: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_9eb7iiyf',
  phase: 'combat',
  step: 'declare_blockers',
  isAITurn: false,
  stackEmpty: true,
  priority: 'p_9eb7iiyf',
  hasPriority: true
}
[AI] AI has priority, proceeding with action
[AI] Not AI turn, but it's DECLARE_BLOCKERS step - AI needs to decide on blockers
[AI] Blockers already declared for p_9eb7iiyf, skipping
[AI] Not AI turn, passing priority
[AI] Passing priority: { gameId: 'game_mjwhphwz', playerId: 'p_9eb7iiyf' }
[priority] autoPassLoop starting - active players: p_9eb7iiyf, p_2vckyop2, p_3tgu9yec, autoPassEnabled: p_2vckyop2, p_9eb7iiyf, p_3tgu9yec, currentPriority: p_2vckyop2, turnPlayer: p_3tgu9yec
[canRespond] p_2vckyop2: checking instant-speed responses only
[canRespond] p_2vckyop2: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_2vckyop2 (non-active): canAct=false, stack.length=0, step=DECLARE_BLOCKERS
[priority] Auto-passing for p_2vckyop2 - no available actions
[AI] All players passed priority with empty stack, advancing step
2026-01-02T06:30:53.495Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:53.495Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:53.495Z [nextStep] Current: combat/DECLARE_BLOCKERS
2026-01-02T06:30:53.495Z [nextStep] Priority: p_3tgu9yec, Turn: p_3tgu9yec
2026-01-02T06:30:53.495Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4590:25)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at runNextTicks (node:internal/process/task_queues:69:3)
2026-01-02T06:30:53.495Z [checkPendingInteractions] Waiting for p_2vckyop2 to declare blockers
2026-01-02T06:30:53.495Z [checkPendingInteractions] Pending: blocker_declaration
2026-01-02T06:30:53.495Z [nextStep] BLOCKED: Cannot advance step - pending interactions: blocker_declaration
[AI] Advanced to next step for game game_mjwhphwz
[VIEW_FOR_DEBUG] {
  viewer: 'p_9eb7iiyf',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_3tgu9yec, viewerId=p_9eb7iiyf, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_2vckyop2',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_3tgu9yec, viewerId=p_2vckyop2, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_3tgu9yec',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_3tgu9yec, viewerId=p_3tgu9yec, match=true
[getPlayableCardIds] Player p_3tgu9yec: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Path to Exile not playable - cannot pay cost {W} (after reduction: {"generic":0,"colors":{"W":1,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Hero of Bladehold blocked - no valid targets: No attacking creatures on the battlefield
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Iroas, God of Victory not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_3tgu9yec: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_3tgu9yec: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_3tgu9yec: No actions available - returning FALSE
[canRespond] p_3tgu9yec: checking instant-speed responses only
[canRespond] p_3tgu9yec: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-01-02T06:30:53.497Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767335453497_19nm4) ==========
2026-01-02T06:30:53.497Z [checkAndTriggerAutoPass] Priority: p_3tgu9yec, Phase: combat, Step: DECLARE_BLOCKERS
2026-01-02T06:30:53.497Z [checkAndTriggerAutoPass] p_3tgu9yec is AI, handled separately (ID: autopass_1767335453497_19nm4)
[AI] AI player checking priority: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_9eb7iiyf',
  phase: 'combat',
  step: 'declare_blockers',
  isAITurn: false,
  stackEmpty: true,
  priority: 'p_3tgu9yec',
  hasPriority: false
}
[AI] AI does not have priority, skipping action
[AI] AI player checking priority: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_3tgu9yec',
  phase: 'combat',
  step: 'declare_blockers',
  isAITurn: true,
  stackEmpty: true,
  priority: 'p_3tgu9yec',
  hasPriority: true
}
[AI] AI has priority, proceeding with action
[AI] Blockers already declared (in blockersDeclaredBy), passing priority for responses
[AI] Passing priority: { gameId: 'game_mjwhphwz', playerId: 'p_3tgu9yec' }
[priority] autoPassLoop starting - active players: p_9eb7iiyf, p_2vckyop2, p_3tgu9yec, autoPassEnabled: p_2vckyop2, p_9eb7iiyf, p_3tgu9yec, currentPriority: p_9eb7iiyf, turnPlayer: p_3tgu9yec
[canRespond] p_9eb7iiyf: checking instant-speed responses only
[canRespond] p_9eb7iiyf: Can cast instant/flash spell
[priority] autoPassLoop - checking p_9eb7iiyf (non-active): canAct=true, stack.length=0, step=DECLARE_BLOCKERS
[priority] autoPassLoop - stopping at p_9eb7iiyf: player can act
[VIEW_FOR_DEBUG] {
  viewer: 'p_9eb7iiyf',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_9eb7iiyf, match=true
[getPlayableCardIds] Player p_9eb7iiyf: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isMyTurn=false
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 1, colorless: 0 }
[getPlayableCardIds] Total available mana: 1
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Snakeskin Veil (card_a3d2c692-7566-468e-9c86-47a9f768fde2_132e0417c989bb28) is playable
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=false
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Omnath, Locus of Mana not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 1 playable card(s): [ 'card_a3d2c692-7566-468e-9c86-47a9f768fde2_132e0417c989bb28' ]
[normalizeViewForEmit] getPlayableCardIds returned 1 cards
[normalizeViewForEmit] Set view.playableCards with 1 cards
[canAct] p_9eb7iiyf: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=false
[canAct] p_9eb7iiyf: Can cast instant/flash spell - returning TRUE
[canRespond] p_9eb7iiyf: checking instant-speed responses only
[canRespond] p_9eb7iiyf: Can cast instant/flash spell
[normalizeViewForEmit] Set canAct=true, canRespond=true
[VIEW_FOR_DEBUG] {
  viewer: 'p_2vckyop2',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_2vckyop2, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_3tgu9yec',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_3tgu9yec, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
2026-01-02T06:30:53.500Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767335453500_2wzxg) ==========
2026-01-02T06:30:53.500Z [checkAndTriggerAutoPass] Priority: p_9eb7iiyf, Phase: combat, Step: DECLARE_BLOCKERS
2026-01-02T06:30:53.500Z [checkAndTriggerAutoPass] p_9eb7iiyf is AI, handled separately (ID: autopass_1767335453500_2wzxg)
[AI] handleAIGameFlow: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_3tgu9yec',
  phase: 'COMBAT',
  step: 'DECLARE_BLOCKERS',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: true,
  hasPriority: false
}
[AI] handleAIGameFlow: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_9eb7iiyf',
  phase: 'COMBAT',
  step: 'DECLARE_BLOCKERS',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: false,
  hasPriority: true
}
[AI] handleAIGameFlow: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_3tgu9yec',
  phase: 'COMBAT',
  step: 'DECLARE_BLOCKERS',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: true,
  hasPriority: false
}
[AI] AI player checking priority: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_9eb7iiyf',
  phase: 'combat',
  step: 'declare_blockers',
  isAITurn: false,
  stackEmpty: true,
  priority: 'p_9eb7iiyf',
  hasPriority: true
}
[AI] AI has priority, proceeding with action
[AI] Not AI turn, but it's DECLARE_BLOCKERS step - AI needs to decide on blockers
[AI] Blockers already declared for p_9eb7iiyf, skipping
[AI] Not AI turn, passing priority
[AI] Passing priority: { gameId: 'game_mjwhphwz', playerId: 'p_9eb7iiyf' }
[priority] autoPassLoop starting - active players: p_9eb7iiyf, p_2vckyop2, p_3tgu9yec, autoPassEnabled: p_2vckyop2, p_9eb7iiyf, p_3tgu9yec, currentPriority: p_2vckyop2, turnPlayer: p_3tgu9yec
[canRespond] p_2vckyop2: checking instant-speed responses only
[canRespond] p_2vckyop2: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_2vckyop2 (non-active): canAct=false, stack.length=0, step=DECLARE_BLOCKERS
[priority] Auto-passing for p_2vckyop2 - no available actions
[AI] All players passed priority with empty stack, advancing step
2026-01-02T06:30:53.801Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:53.802Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:53.802Z [nextStep] Current: combat/DECLARE_BLOCKERS
2026-01-02T06:30:53.802Z [nextStep] Priority: p_3tgu9yec, Turn: p_3tgu9yec
2026-01-02T06:30:53.802Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4590:25)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at runNextTicks (node:internal/process/task_queues:69:3)
2026-01-02T06:30:53.802Z [checkPendingInteractions] Waiting for p_2vckyop2 to declare blockers
2026-01-02T06:30:53.802Z [checkPendingInteractions] Pending: blocker_declaration
2026-01-02T06:30:53.802Z [nextStep] BLOCKED: Cannot advance step - pending interactions: blocker_declaration
[AI] Advanced to next step for game game_mjwhphwz
[VIEW_FOR_DEBUG] {
  viewer: 'p_9eb7iiyf',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_3tgu9yec, viewerId=p_9eb7iiyf, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_2vckyop2',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_3tgu9yec, viewerId=p_2vckyop2, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_3tgu9yec',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_3tgu9yec, viewerId=p_3tgu9yec, match=true
[getPlayableCardIds] Player p_3tgu9yec: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Path to Exile not playable - cannot pay cost {W} (after reduction: {"generic":0,"colors":{"W":1,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Hero of Bladehold blocked - no valid targets: No attacking creatures on the battlefield
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Iroas, God of Victory not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_3tgu9yec: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_3tgu9yec: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_3tgu9yec: No actions available - returning FALSE
[canRespond] p_3tgu9yec: checking instant-speed responses only
[canRespond] p_3tgu9yec: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-01-02T06:30:53.805Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767335453805_zjik2) ==========
2026-01-02T06:30:53.805Z [checkAndTriggerAutoPass] Priority: p_3tgu9yec, Phase: combat, Step: DECLARE_BLOCKERS
2026-01-02T06:30:53.805Z [checkAndTriggerAutoPass] p_3tgu9yec is AI, handled separately (ID: autopass_1767335453805_zjik2)
[AI] AI player checking priority: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_3tgu9yec',
  phase: 'combat',
  step: 'declare_blockers',
  isAITurn: true,
  stackEmpty: true,
  priority: 'p_3tgu9yec',
  hasPriority: true
}
[AI] AI has priority, proceeding with action
[AI] Blockers already declared (in blockersDeclaredBy), passing priority for responses
[AI] Passing priority: { gameId: 'game_mjwhphwz', playerId: 'p_3tgu9yec' }
[priority] autoPassLoop starting - active players: p_9eb7iiyf, p_2vckyop2, p_3tgu9yec, autoPassEnabled: p_2vckyop2, p_9eb7iiyf, p_3tgu9yec, currentPriority: p_9eb7iiyf, turnPlayer: p_3tgu9yec
[canRespond] p_9eb7iiyf: checking instant-speed responses only
[canRespond] p_9eb7iiyf: Can cast instant/flash spell
[priority] autoPassLoop - checking p_9eb7iiyf (non-active): canAct=true, stack.length=0, step=DECLARE_BLOCKERS
[priority] autoPassLoop - stopping at p_9eb7iiyf: player can act
[VIEW_FOR_DEBUG] {
  viewer: 'p_9eb7iiyf',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_9eb7iiyf, match=true
[getPlayableCardIds] Player p_9eb7iiyf: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isMyTurn=false
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 1, colorless: 0 }
[getPlayableCardIds] Total available mana: 1
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Snakeskin Veil (card_a3d2c692-7566-468e-9c86-47a9f768fde2_132e0417c989bb28) is playable
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=false
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Omnath, Locus of Mana not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 1 playable card(s): [ 'card_a3d2c692-7566-468e-9c86-47a9f768fde2_132e0417c989bb28' ]
[normalizeViewForEmit] getPlayableCardIds returned 1 cards
[normalizeViewForEmit] Set view.playableCards with 1 cards
[canAct] p_9eb7iiyf: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=false
[canAct] p_9eb7iiyf: Can cast instant/flash spell - returning TRUE
[canRespond] p_9eb7iiyf: checking instant-speed responses only
[canRespond] p_9eb7iiyf: Can cast instant/flash spell
[normalizeViewForEmit] Set canAct=true, canRespond=true
[VIEW_FOR_DEBUG] {
  viewer: 'p_2vckyop2',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_2vckyop2, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_3tgu9yec',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_3tgu9yec, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
2026-01-02T06:30:53.808Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767335453808_my0i2) ==========
2026-01-02T06:30:53.808Z [checkAndTriggerAutoPass] Priority: p_9eb7iiyf, Phase: combat, Step: DECLARE_BLOCKERS
2026-01-02T06:30:53.808Z [checkAndTriggerAutoPass] p_9eb7iiyf is AI, handled separately (ID: autopass_1767335453808_my0i2)
[AI] AI player checking priority: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_9eb7iiyf',
  phase: 'combat',
  step: 'declare_blockers',
  isAITurn: false,
  stackEmpty: true,
  priority: 'p_9eb7iiyf',
  hasPriority: true
}
[AI] AI has priority, proceeding with action
[AI] Not AI turn, but it's DECLARE_BLOCKERS step - AI needs to decide on blockers
[AI] Blockers already declared for p_9eb7iiyf, skipping
[AI] Not AI turn, passing priority
[AI] Passing priority: { gameId: 'game_mjwhphwz', playerId: 'p_9eb7iiyf' }
[priority] autoPassLoop starting - active players: p_9eb7iiyf, p_2vckyop2, p_3tgu9yec, autoPassEnabled: p_2vckyop2, p_9eb7iiyf, p_3tgu9yec, currentPriority: p_2vckyop2, turnPlayer: p_3tgu9yec
[canRespond] p_2vckyop2: checking instant-speed responses only
[canRespond] p_2vckyop2: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_2vckyop2 (non-active): canAct=false, stack.length=0, step=DECLARE_BLOCKERS
[priority] Auto-passing for p_2vckyop2 - no available actions
[AI] All players passed priority with empty stack, advancing step
2026-01-02T06:30:53.809Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:53.809Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:53.809Z [nextStep] Current: combat/DECLARE_BLOCKERS
2026-01-02T06:30:53.809Z [nextStep] Priority: p_3tgu9yec, Turn: p_3tgu9yec
2026-01-02T06:30:53.809Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4590:25)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at runNextTicks (node:internal/process/task_queues:69:3)
2026-01-02T06:30:53.809Z [checkPendingInteractions] Waiting for p_2vckyop2 to declare blockers
2026-01-02T06:30:53.809Z [checkPendingInteractions] Pending: blocker_declaration
2026-01-02T06:30:53.809Z [nextStep] BLOCKED: Cannot advance step - pending interactions: blocker_declaration
[AI] Advanced to next step for game game_mjwhphwz
[VIEW_FOR_DEBUG] {
  viewer: 'p_9eb7iiyf',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_3tgu9yec, viewerId=p_9eb7iiyf, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_2vckyop2',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_3tgu9yec, viewerId=p_2vckyop2, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_3tgu9yec',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_3tgu9yec, viewerId=p_3tgu9yec, match=true
[getPlayableCardIds] Player p_3tgu9yec: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Path to Exile not playable - cannot pay cost {W} (after reduction: {"generic":0,"colors":{"W":1,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Hero of Bladehold blocked - no valid targets: No attacking creatures on the battlefield
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Iroas, God of Victory not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_3tgu9yec: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_3tgu9yec: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_3tgu9yec: No actions available - returning FALSE
[canRespond] p_3tgu9yec: checking instant-speed responses only
[canRespond] p_3tgu9yec: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-01-02T06:30:53.812Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767335453812_i9tox) ==========
2026-01-02T06:30:53.812Z [checkAndTriggerAutoPass] Priority: p_3tgu9yec, Phase: combat, Step: DECLARE_BLOCKERS
2026-01-02T06:30:53.812Z [checkAndTriggerAutoPass] p_3tgu9yec is AI, handled separately (ID: autopass_1767335453812_i9tox)
[AI] AI player checking priority: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_9eb7iiyf',
  phase: 'combat',
  step: 'declare_blockers',
  isAITurn: false,
  stackEmpty: true,
  priority: 'p_3tgu9yec',
  hasPriority: false
}
[AI] AI does not have priority, skipping action
[AI] handleAIGameFlow: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_9eb7iiyf',
  phase: 'COMBAT',
  step: 'DECLARE_BLOCKERS',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: false,
  hasPriority: false
}
[AI] handleAIGameFlow: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_3tgu9yec',
  phase: 'COMBAT',
  step: 'DECLARE_BLOCKERS',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: true,
  hasPriority: true
}
[AI] handleAIGameFlow: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_9eb7iiyf',
  phase: 'COMBAT',
  step: 'DECLARE_BLOCKERS',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: false,
  hasPriority: false
}
[AI] AI player checking priority: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_3tgu9yec',
  phase: 'combat',
  step: 'declare_blockers',
  isAITurn: true,
  stackEmpty: true,
  priority: 'p_3tgu9yec',
  hasPriority: true
}
[AI] AI has priority, proceeding with action
[AI] Blockers already declared (in blockersDeclaredBy), passing priority for responses
[AI] Passing priority: { gameId: 'game_mjwhphwz', playerId: 'p_3tgu9yec' }
[priority] autoPassLoop starting - active players: p_9eb7iiyf, p_2vckyop2, p_3tgu9yec, autoPassEnabled: p_2vckyop2, p_9eb7iiyf, p_3tgu9yec, currentPriority: p_9eb7iiyf, turnPlayer: p_3tgu9yec
[canRespond] p_9eb7iiyf: checking instant-speed responses only
[canRespond] p_9eb7iiyf: Can cast instant/flash spell
[priority] autoPassLoop - checking p_9eb7iiyf (non-active): canAct=true, stack.length=0, step=DECLARE_BLOCKERS
[priority] autoPassLoop - stopping at p_9eb7iiyf: player can act
[VIEW_FOR_DEBUG] {
  viewer: 'p_9eb7iiyf',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_9eb7iiyf, match=true
[getPlayableCardIds] Player p_9eb7iiyf: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isMyTurn=false
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 1, colorless: 0 }
[getPlayableCardIds] Total available mana: 1
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Snakeskin Veil (card_a3d2c692-7566-468e-9c86-47a9f768fde2_132e0417c989bb28) is playable
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=false
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Omnath, Locus of Mana not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 1 playable card(s): [ 'card_a3d2c692-7566-468e-9c86-47a9f768fde2_132e0417c989bb28' ]
[normalizeViewForEmit] getPlayableCardIds returned 1 cards
[normalizeViewForEmit] Set view.playableCards with 1 cards
[canAct] p_9eb7iiyf: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=false
[canAct] p_9eb7iiyf: Can cast instant/flash spell - returning TRUE
[canRespond] p_9eb7iiyf: checking instant-speed responses only
[canRespond] p_9eb7iiyf: Can cast instant/flash spell
[normalizeViewForEmit] Set canAct=true, canRespond=true
[VIEW_FOR_DEBUG] {
  viewer: 'p_2vckyop2',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_2vckyop2, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_3tgu9yec',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_3tgu9yec, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
2026-01-02T06:30:54.114Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767335454114_6jfiy) ==========
2026-01-02T06:30:54.114Z [checkAndTriggerAutoPass] Priority: p_9eb7iiyf, Phase: combat, Step: DECLARE_BLOCKERS
2026-01-02T06:30:54.114Z [checkAndTriggerAutoPass] p_9eb7iiyf is AI, handled separately (ID: autopass_1767335454114_6jfiy)
[AI] AI player checking priority: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_9eb7iiyf',
  phase: 'combat',
  step: 'declare_blockers',
  isAITurn: false,
  stackEmpty: true,
  priority: 'p_9eb7iiyf',
  hasPriority: true
}
[AI] AI has priority, proceeding with action
[AI] Not AI turn, but it's DECLARE_BLOCKERS step - AI needs to decide on blockers
[AI] Blockers already declared for p_9eb7iiyf, skipping
[AI] Not AI turn, passing priority
[AI] Passing priority: { gameId: 'game_mjwhphwz', playerId: 'p_9eb7iiyf' }
[priority] autoPassLoop starting - active players: p_9eb7iiyf, p_2vckyop2, p_3tgu9yec, autoPassEnabled: p_2vckyop2, p_9eb7iiyf, p_3tgu9yec, currentPriority: p_2vckyop2, turnPlayer: p_3tgu9yec
[canRespond] p_2vckyop2: checking instant-speed responses only
[canRespond] p_2vckyop2: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_2vckyop2 (non-active): canAct=false, stack.length=0, step=DECLARE_BLOCKERS
[priority] Auto-passing for p_2vckyop2 - no available actions
[AI] All players passed priority with empty stack, advancing step
2026-01-02T06:30:54.115Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:54.115Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:54.115Z [nextStep] Current: combat/DECLARE_BLOCKERS
2026-01-02T06:30:54.115Z [nextStep] Priority: p_3tgu9yec, Turn: p_3tgu9yec
2026-01-02T06:30:54.115Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4590:25)
        at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
        at async handleAIPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:2459:7)
2026-01-02T06:30:54.115Z [checkPendingInteractions] Waiting for p_2vckyop2 to declare blockers
2026-01-02T06:30:54.115Z [checkPendingInteractions] Pending: blocker_declaration
2026-01-02T06:30:54.115Z [nextStep] BLOCKED: Cannot advance step - pending interactions: blocker_declaration
[AI] Advanced to next step for game game_mjwhphwz
[VIEW_FOR_DEBUG] {
  viewer: 'p_9eb7iiyf',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_3tgu9yec, viewerId=p_9eb7iiyf, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_2vckyop2',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_3tgu9yec, viewerId=p_2vckyop2, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_3tgu9yec',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_3tgu9yec, viewerId=p_3tgu9yec, match=true
[getPlayableCardIds] Player p_3tgu9yec: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Path to Exile not playable - cannot pay cost {W} (after reduction: {"generic":0,"colors":{"W":1,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Hero of Bladehold blocked - no valid targets: No attacking creatures on the battlefield
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Iroas, God of Victory not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_3tgu9yec: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_3tgu9yec: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_3tgu9yec: No actions available - returning FALSE
[canRespond] p_3tgu9yec: checking instant-speed responses only
[canRespond] p_3tgu9yec: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-01-02T06:30:54.118Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767335454118_pwfsz) ==========
2026-01-02T06:30:54.118Z [checkAndTriggerAutoPass] Priority: p_3tgu9yec, Phase: combat, Step: DECLARE_BLOCKERS
2026-01-02T06:30:54.118Z [checkAndTriggerAutoPass] p_3tgu9yec is AI, handled separately (ID: autopass_1767335454118_pwfsz)
[AI] handleAIGameFlow: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_3tgu9yec',
  phase: 'COMBAT',
  step: 'DECLARE_BLOCKERS',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: true,
  hasPriority: true
}
[AI] handleAIGameFlow: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_9eb7iiyf',
  phase: 'COMBAT',
  step: 'DECLARE_BLOCKERS',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: false,
  hasPriority: false
}
[AI] AI player checking priority: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_3tgu9yec',
  phase: 'combat',
  step: 'declare_blockers',
  isAITurn: true,
  stackEmpty: true,
  priority: 'p_3tgu9yec',
  hasPriority: true
}
[AI] AI has priority, proceeding with action
[AI] Blockers already declared (in blockersDeclaredBy), passing priority for responses
[AI] Passing priority: { gameId: 'game_mjwhphwz', playerId: 'p_3tgu9yec' }
[priority] autoPassLoop starting - active players: p_9eb7iiyf, p_2vckyop2, p_3tgu9yec, autoPassEnabled: p_2vckyop2, p_9eb7iiyf, p_3tgu9yec, currentPriority: p_9eb7iiyf, turnPlayer: p_3tgu9yec
[canRespond] p_9eb7iiyf: checking instant-speed responses only
[canRespond] p_9eb7iiyf: Can cast instant/flash spell
[priority] autoPassLoop - checking p_9eb7iiyf (non-active): canAct=true, stack.length=0, step=DECLARE_BLOCKERS
[priority] autoPassLoop - stopping at p_9eb7iiyf: player can act
[VIEW_FOR_DEBUG] {
  viewer: 'p_9eb7iiyf',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_9eb7iiyf, match=true
[getPlayableCardIds] Player p_9eb7iiyf: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isMyTurn=false
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 1, colorless: 0 }
[getPlayableCardIds] Total available mana: 1
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Snakeskin Veil (card_a3d2c692-7566-468e-9c86-47a9f768fde2_132e0417c989bb28) is playable
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=false
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Omnath, Locus of Mana not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 1 playable card(s): [ 'card_a3d2c692-7566-468e-9c86-47a9f768fde2_132e0417c989bb28' ]
[normalizeViewForEmit] getPlayableCardIds returned 1 cards
[normalizeViewForEmit] Set view.playableCards with 1 cards
[canAct] p_9eb7iiyf: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=false
[canAct] p_9eb7iiyf: Can cast instant/flash spell - returning TRUE
[canRespond] p_9eb7iiyf: checking instant-speed responses only
[canRespond] p_9eb7iiyf: Can cast instant/flash spell
[normalizeViewForEmit] Set canAct=true, canRespond=true
[VIEW_FOR_DEBUG] {
  viewer: 'p_2vckyop2',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_2vckyop2, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_3tgu9yec',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_3tgu9yec, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
2026-01-02T06:30:54.122Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767335454122_7t049) ==========
2026-01-02T06:30:54.122Z [checkAndTriggerAutoPass] Priority: p_9eb7iiyf, Phase: combat, Step: DECLARE_BLOCKERS
2026-01-02T06:30:54.122Z [checkAndTriggerAutoPass] p_9eb7iiyf is AI, handled separately (ID: autopass_1767335454122_7t049)
[AI] AI player checking priority: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_3tgu9yec',
  phase: 'combat',
  step: 'declare_blockers',
  isAITurn: true,
  stackEmpty: true,
  priority: 'p_9eb7iiyf',
  hasPriority: false
}
[AI] AI does not have priority, skipping action
[AI] handleAIGameFlow: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_3tgu9yec',
  phase: 'COMBAT',
  step: 'DECLARE_BLOCKERS',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: true,
  hasPriority: false
}
[AI] AI player checking priority: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_9eb7iiyf',
  phase: 'combat',
  step: 'declare_blockers',
  isAITurn: false,
  stackEmpty: true,
  priority: 'p_9eb7iiyf',
  hasPriority: true
}
[AI] AI has priority, proceeding with action
[AI] Not AI turn, but it's DECLARE_BLOCKERS step - AI needs to decide on blockers
[AI] Blockers already declared for p_9eb7iiyf, skipping
[AI] Not AI turn, passing priority
[AI] Passing priority: { gameId: 'game_mjwhphwz', playerId: 'p_9eb7iiyf' }
[priority] autoPassLoop starting - active players: p_9eb7iiyf, p_2vckyop2, p_3tgu9yec, autoPassEnabled: p_2vckyop2, p_9eb7iiyf, p_3tgu9yec, currentPriority: p_2vckyop2, turnPlayer: p_3tgu9yec
[canRespond] p_2vckyop2: checking instant-speed responses only
[canRespond] p_2vckyop2: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_2vckyop2 (non-active): canAct=false, stack.length=0, step=DECLARE_BLOCKERS
[priority] Auto-passing for p_2vckyop2 - no available actions
[AI] All players passed priority with empty stack, advancing step
2026-01-02T06:30:54.423Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:54.423Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:54.423Z [nextStep] Current: combat/DECLARE_BLOCKERS
2026-01-02T06:30:54.423Z [nextStep] Priority: p_3tgu9yec, Turn: p_3tgu9yec
2026-01-02T06:30:54.423Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4590:25)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at runNextTicks (node:internal/process/task_queues:69:3)
2026-01-02T06:30:54.423Z [checkPendingInteractions] Waiting for p_2vckyop2 to declare blockers
2026-01-02T06:30:54.423Z [checkPendingInteractions] Pending: blocker_declaration
2026-01-02T06:30:54.423Z [nextStep] BLOCKED: Cannot advance step - pending interactions: blocker_declaration
[AI] Advanced to next step for game game_mjwhphwz
[VIEW_FOR_DEBUG] {
  viewer: 'p_9eb7iiyf',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_3tgu9yec, viewerId=p_9eb7iiyf, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_2vckyop2',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_3tgu9yec, viewerId=p_2vckyop2, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_3tgu9yec',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_3tgu9yec, viewerId=p_3tgu9yec, match=true
[getPlayableCardIds] Player p_3tgu9yec: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Path to Exile not playable - cannot pay cost {W} (after reduction: {"generic":0,"colors":{"W":1,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Hero of Bladehold blocked - no valid targets: No attacking creatures on the battlefield
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Iroas, God of Victory not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_3tgu9yec: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_3tgu9yec: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_3tgu9yec: No actions available - returning FALSE
[canRespond] p_3tgu9yec: checking instant-speed responses only
[canRespond] p_3tgu9yec: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-01-02T06:30:54.425Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767335454425_y4xb9) ==========
2026-01-02T06:30:54.426Z [checkAndTriggerAutoPass] Priority: p_3tgu9yec, Phase: combat, Step: DECLARE_BLOCKERS
2026-01-02T06:30:54.426Z [checkAndTriggerAutoPass] p_3tgu9yec is AI, handled separately (ID: autopass_1767335454425_y4xb9)
[AI] AI player checking priority: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_3tgu9yec',
  phase: 'combat',
  step: 'declare_blockers',
  isAITurn: true,
  stackEmpty: true,
  priority: 'p_3tgu9yec',
  hasPriority: true
}
[AI] AI has priority, proceeding with action
[AI] Blockers already declared (in blockersDeclaredBy), passing priority for responses
[AI] Passing priority: { gameId: 'game_mjwhphwz', playerId: 'p_3tgu9yec' }
[priority] autoPassLoop starting - active players: p_9eb7iiyf, p_2vckyop2, p_3tgu9yec, autoPassEnabled: p_2vckyop2, p_9eb7iiyf, p_3tgu9yec, currentPriority: p_9eb7iiyf, turnPlayer: p_3tgu9yec
[canRespond] p_9eb7iiyf: checking instant-speed responses only
[canRespond] p_9eb7iiyf: Can cast instant/flash spell
[priority] autoPassLoop - checking p_9eb7iiyf (non-active): canAct=true, stack.length=0, step=DECLARE_BLOCKERS
[priority] autoPassLoop - stopping at p_9eb7iiyf: player can act
[VIEW_FOR_DEBUG] {
  viewer: 'p_9eb7iiyf',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_9eb7iiyf, match=true
[getPlayableCardIds] Player p_9eb7iiyf: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isMyTurn=false
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 1, colorless: 0 }
[getPlayableCardIds] Total available mana: 1
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Snakeskin Veil (card_a3d2c692-7566-468e-9c86-47a9f768fde2_132e0417c989bb28) is playable
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=false
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Omnath, Locus of Mana not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 1 playable card(s): [ 'card_a3d2c692-7566-468e-9c86-47a9f768fde2_132e0417c989bb28' ]
[normalizeViewForEmit] getPlayableCardIds returned 1 cards
[normalizeViewForEmit] Set view.playableCards with 1 cards
[canAct] p_9eb7iiyf: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=false
[canAct] p_9eb7iiyf: Can cast instant/flash spell - returning TRUE
[canRespond] p_9eb7iiyf: checking instant-speed responses only
[canRespond] p_9eb7iiyf: Can cast instant/flash spell
[normalizeViewForEmit] Set canAct=true, canRespond=true
[VIEW_FOR_DEBUG] {
  viewer: 'p_2vckyop2',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_2vckyop2, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_3tgu9yec',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_3tgu9yec, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
2026-01-02T06:30:54.429Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767335454429_4oaa5) ==========
2026-01-02T06:30:54.429Z [checkAndTriggerAutoPass] Priority: p_9eb7iiyf, Phase: combat, Step: DECLARE_BLOCKERS
2026-01-02T06:30:54.429Z [checkAndTriggerAutoPass] p_9eb7iiyf is AI, handled separately (ID: autopass_1767335454429_4oaa5)
[AI] AI player checking priority: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_3tgu9yec',
  phase: 'combat',
  step: 'declare_blockers',
  isAITurn: true,
  stackEmpty: true,
  priority: 'p_9eb7iiyf',
  hasPriority: false
}
[AI] AI does not have priority, skipping action
[AI] AI player checking priority: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_9eb7iiyf',
  phase: 'combat',
  step: 'declare_blockers',
  isAITurn: false,
  stackEmpty: true,
  priority: 'p_9eb7iiyf',
  hasPriority: true
}
[AI] AI has priority, proceeding with action
[AI] Not AI turn, but it's DECLARE_BLOCKERS step - AI needs to decide on blockers
[AI] Blockers already declared for p_9eb7iiyf, skipping
[AI] Not AI turn, passing priority
[AI] Passing priority: { gameId: 'game_mjwhphwz', playerId: 'p_9eb7iiyf' }
[priority] autoPassLoop starting - active players: p_9eb7iiyf, p_2vckyop2, p_3tgu9yec, autoPassEnabled: p_2vckyop2, p_9eb7iiyf, p_3tgu9yec, currentPriority: p_2vckyop2, turnPlayer: p_3tgu9yec
[canRespond] p_2vckyop2: checking instant-speed responses only
[canRespond] p_2vckyop2: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_2vckyop2 (non-active): canAct=false, stack.length=0, step=DECLARE_BLOCKERS
[priority] Auto-passing for p_2vckyop2 - no available actions
[AI] All players passed priority with empty stack, advancing step
2026-01-02T06:30:54.429Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:54.429Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:54.429Z [nextStep] Current: combat/DECLARE_BLOCKERS
2026-01-02T06:30:54.429Z [nextStep] Priority: p_3tgu9yec, Turn: p_3tgu9yec
2026-01-02T06:30:54.429Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4590:25)
        at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
        at async handleAIPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:2459:7)
2026-01-02T06:30:54.429Z [checkPendingInteractions] Waiting for p_2vckyop2 to declare blockers
2026-01-02T06:30:54.429Z [checkPendingInteractions] Pending: blocker_declaration
2026-01-02T06:30:54.429Z [nextStep] BLOCKED: Cannot advance step - pending interactions: blocker_declaration
[AI] Advanced to next step for game game_mjwhphwz
[VIEW_FOR_DEBUG] {
  viewer: 'p_9eb7iiyf',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_3tgu9yec, viewerId=p_9eb7iiyf, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_2vckyop2',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_3tgu9yec, viewerId=p_2vckyop2, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_3tgu9yec',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_3tgu9yec, viewerId=p_3tgu9yec, match=true
[getPlayableCardIds] Player p_3tgu9yec: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Path to Exile not playable - cannot pay cost {W} (after reduction: {"generic":0,"colors":{"W":1,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Hero of Bladehold blocked - no valid targets: No attacking creatures on the battlefield
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Iroas, God of Victory not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_3tgu9yec: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_3tgu9yec: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_3tgu9yec: No actions available - returning FALSE
[canRespond] p_3tgu9yec: checking instant-speed responses only
[canRespond] p_3tgu9yec: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-01-02T06:30:54.432Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767335454432_wwewq) ==========
2026-01-02T06:30:54.432Z [checkAndTriggerAutoPass] Priority: p_3tgu9yec, Phase: combat, Step: DECLARE_BLOCKERS
2026-01-02T06:30:54.432Z [checkAndTriggerAutoPass] p_3tgu9yec is AI, handled separately (ID: autopass_1767335454432_wwewq)
[AI] handleAIGameFlow: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_9eb7iiyf',
  phase: 'COMBAT',
  step: 'DECLARE_BLOCKERS',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: false,
  hasPriority: false
}
[AI] handleAIGameFlow: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_3tgu9yec',
  phase: 'COMBAT',
  step: 'DECLARE_BLOCKERS',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: true,
  hasPriority: true
}
[AI] handleAIGameFlow: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_9eb7iiyf',
  phase: 'COMBAT',
  step: 'DECLARE_BLOCKERS',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: false,
  hasPriority: false
}
[AI] AI player checking priority: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_3tgu9yec',
  phase: 'combat',
  step: 'declare_blockers',
  isAITurn: true,
  stackEmpty: true,
  priority: 'p_3tgu9yec',
  hasPriority: true
}
[AI] AI has priority, proceeding with action
[AI] Blockers already declared (in blockersDeclaredBy), passing priority for responses
[AI] Passing priority: { gameId: 'game_mjwhphwz', playerId: 'p_3tgu9yec' }
[priority] autoPassLoop starting - active players: p_9eb7iiyf, p_2vckyop2, p_3tgu9yec, autoPassEnabled: p_2vckyop2, p_9eb7iiyf, p_3tgu9yec, currentPriority: p_9eb7iiyf, turnPlayer: p_3tgu9yec
[canRespond] p_9eb7iiyf: checking instant-speed responses only
[canRespond] p_9eb7iiyf: Can cast instant/flash spell
[priority] autoPassLoop - checking p_9eb7iiyf (non-active): canAct=true, stack.length=0, step=DECLARE_BLOCKERS
[priority] autoPassLoop - stopping at p_9eb7iiyf: player can act
[VIEW_FOR_DEBUG] {
  viewer: 'p_9eb7iiyf',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_9eb7iiyf, match=true
[getPlayableCardIds] Player p_9eb7iiyf: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isMyTurn=false
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 1, colorless: 0 }
[getPlayableCardIds] Total available mana: 1
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Snakeskin Veil (card_a3d2c692-7566-468e-9c86-47a9f768fde2_132e0417c989bb28) is playable
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=false
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Omnath, Locus of Mana not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 1 playable card(s): [ 'card_a3d2c692-7566-468e-9c86-47a9f768fde2_132e0417c989bb28' ]
[normalizeViewForEmit] getPlayableCardIds returned 1 cards
[normalizeViewForEmit] Set view.playableCards with 1 cards
[canAct] p_9eb7iiyf: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=false
[canAct] p_9eb7iiyf: Can cast instant/flash spell - returning TRUE
[canRespond] p_9eb7iiyf: checking instant-speed responses only
[canRespond] p_9eb7iiyf: Can cast instant/flash spell
[normalizeViewForEmit] Set canAct=true, canRespond=true
[VIEW_FOR_DEBUG] {
  viewer: 'p_2vckyop2',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_2vckyop2, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_3tgu9yec',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_3tgu9yec, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
2026-01-02T06:30:54.735Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767335454735_69q7x) ==========
2026-01-02T06:30:54.735Z [checkAndTriggerAutoPass] Priority: p_9eb7iiyf, Phase: combat, Step: DECLARE_BLOCKERS
2026-01-02T06:30:54.735Z [checkAndTriggerAutoPass] p_9eb7iiyf is AI, handled separately (ID: autopass_1767335454735_69q7x)
[AI] AI player checking priority: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_9eb7iiyf',
  phase: 'combat',
  step: 'declare_blockers',
  isAITurn: false,
  stackEmpty: true,
  priority: 'p_9eb7iiyf',
  hasPriority: true
}
[AI] AI has priority, proceeding with action
[AI] Not AI turn, but it's DECLARE_BLOCKERS step - AI needs to decide on blockers
[AI] Blockers already declared for p_9eb7iiyf, skipping
[AI] Not AI turn, passing priority
[AI] Passing priority: { gameId: 'game_mjwhphwz', playerId: 'p_9eb7iiyf' }
[priority] autoPassLoop starting - active players: p_9eb7iiyf, p_2vckyop2, p_3tgu9yec, autoPassEnabled: p_2vckyop2, p_9eb7iiyf, p_3tgu9yec, currentPriority: p_2vckyop2, turnPlayer: p_3tgu9yec
[canRespond] p_2vckyop2: checking instant-speed responses only
[canRespond] p_2vckyop2: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_2vckyop2 (non-active): canAct=false, stack.length=0, step=DECLARE_BLOCKERS
[priority] Auto-passing for p_2vckyop2 - no available actions
[AI] All players passed priority with empty stack, advancing step
2026-01-02T06:30:54.736Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:54.736Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:54.736Z [nextStep] Current: combat/DECLARE_BLOCKERS
2026-01-02T06:30:54.736Z [nextStep] Priority: p_3tgu9yec, Turn: p_3tgu9yec
2026-01-02T06:30:54.736Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4590:25)
        at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
        at async handleAIPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:2459:7)
2026-01-02T06:30:54.736Z [checkPendingInteractions] Waiting for p_2vckyop2 to declare blockers
2026-01-02T06:30:54.736Z [checkPendingInteractions] Pending: blocker_declaration
2026-01-02T06:30:54.736Z [nextStep] BLOCKED: Cannot advance step - pending interactions: blocker_declaration
[AI] Advanced to next step for game game_mjwhphwz
[VIEW_FOR_DEBUG] {
  viewer: 'p_9eb7iiyf',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_3tgu9yec, viewerId=p_9eb7iiyf, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_2vckyop2',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_3tgu9yec, viewerId=p_2vckyop2, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_3tgu9yec',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_3tgu9yec, viewerId=p_3tgu9yec, match=true
[getPlayableCardIds] Player p_3tgu9yec: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Path to Exile not playable - cannot pay cost {W} (after reduction: {"generic":0,"colors":{"W":1,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Hero of Bladehold blocked - no valid targets: No attacking creatures on the battlefield
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Iroas, God of Victory not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_3tgu9yec: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_3tgu9yec: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_3tgu9yec: No actions available - returning FALSE
[canRespond] p_3tgu9yec: checking instant-speed responses only
[canRespond] p_3tgu9yec: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-01-02T06:30:54.739Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767335454739_hhiwx) ==========
2026-01-02T06:30:54.739Z [checkAndTriggerAutoPass] Priority: p_3tgu9yec, Phase: combat, Step: DECLARE_BLOCKERS
2026-01-02T06:30:54.739Z [checkAndTriggerAutoPass] p_3tgu9yec is AI, handled separately (ID: autopass_1767335454739_hhiwx)
[AI] handleAIGameFlow: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_3tgu9yec',
  phase: 'COMBAT',
  step: 'DECLARE_BLOCKERS',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: true,
  hasPriority: true
}
[AI] handleAIGameFlow: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_9eb7iiyf',
  phase: 'COMBAT',
  step: 'DECLARE_BLOCKERS',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: false,
  hasPriority: false
}
[AI] AI player checking priority: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_3tgu9yec',
  phase: 'combat',
  step: 'declare_blockers',
  isAITurn: true,
  stackEmpty: true,
  priority: 'p_3tgu9yec',
  hasPriority: true
}
[AI] AI has priority, proceeding with action
[AI] Blockers already declared (in blockersDeclaredBy), passing priority for responses
[AI] Passing priority: { gameId: 'game_mjwhphwz', playerId: 'p_3tgu9yec' }
[priority] autoPassLoop starting - active players: p_9eb7iiyf, p_2vckyop2, p_3tgu9yec, autoPassEnabled: p_2vckyop2, p_9eb7iiyf, p_3tgu9yec, currentPriority: p_9eb7iiyf, turnPlayer: p_3tgu9yec
[canRespond] p_9eb7iiyf: checking instant-speed responses only
[canRespond] p_9eb7iiyf: Can cast instant/flash spell
[priority] autoPassLoop - checking p_9eb7iiyf (non-active): canAct=true, stack.length=0, step=DECLARE_BLOCKERS
[priority] autoPassLoop - stopping at p_9eb7iiyf: player can act
[VIEW_FOR_DEBUG] {
  viewer: 'p_9eb7iiyf',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_9eb7iiyf, match=true
[getPlayableCardIds] Player p_9eb7iiyf: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isMyTurn=false
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 1, colorless: 0 }
[getPlayableCardIds] Total available mana: 1
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Snakeskin Veil (card_a3d2c692-7566-468e-9c86-47a9f768fde2_132e0417c989bb28) is playable
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=false
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Omnath, Locus of Mana not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 1 playable card(s): [ 'card_a3d2c692-7566-468e-9c86-47a9f768fde2_132e0417c989bb28' ]
[normalizeViewForEmit] getPlayableCardIds returned 1 cards
[normalizeViewForEmit] Set view.playableCards with 1 cards
[canAct] p_9eb7iiyf: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=false
[canAct] p_9eb7iiyf: Can cast instant/flash spell - returning TRUE
[canRespond] p_9eb7iiyf: checking instant-speed responses only
[canRespond] p_9eb7iiyf: Can cast instant/flash spell
[normalizeViewForEmit] Set canAct=true, canRespond=true
[VIEW_FOR_DEBUG] {
  viewer: 'p_2vckyop2',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_2vckyop2, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_3tgu9yec',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_3tgu9yec, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
2026-01-02T06:30:54.742Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767335454742_59b97) ==========
2026-01-02T06:30:54.742Z [checkAndTriggerAutoPass] Priority: p_9eb7iiyf, Phase: combat, Step: DECLARE_BLOCKERS
2026-01-02T06:30:54.742Z [checkAndTriggerAutoPass] p_9eb7iiyf is AI, handled separately (ID: autopass_1767335454742_59b97)
[AI] AI player checking priority: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_3tgu9yec',
  phase: 'combat',
  step: 'declare_blockers',
  isAITurn: true,
  stackEmpty: true,
  priority: 'p_9eb7iiyf',
  hasPriority: false
}
[AI] AI does not have priority, skipping action
[AI] handleAIGameFlow: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_3tgu9yec',
  phase: 'COMBAT',
  step: 'DECLARE_BLOCKERS',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: true,
  hasPriority: false
}
[AI] AI player checking priority: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_9eb7iiyf',
  phase: 'combat',
  step: 'declare_blockers',
  isAITurn: false,
  stackEmpty: true,
  priority: 'p_9eb7iiyf',
  hasPriority: true
}
[AI] AI has priority, proceeding with action
[AI] Not AI turn, but it's DECLARE_BLOCKERS step - AI needs to decide on blockers
[AI] Blockers already declared for p_9eb7iiyf, skipping
[AI] Not AI turn, passing priority
[AI] Passing priority: { gameId: 'game_mjwhphwz', playerId: 'p_9eb7iiyf' }
[priority] autoPassLoop starting - active players: p_9eb7iiyf, p_2vckyop2, p_3tgu9yec, autoPassEnabled: p_2vckyop2, p_9eb7iiyf, p_3tgu9yec, currentPriority: p_2vckyop2, turnPlayer: p_3tgu9yec
[canRespond] p_2vckyop2: checking instant-speed responses only
[canRespond] p_2vckyop2: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_2vckyop2 (non-active): canAct=false, stack.length=0, step=DECLARE_BLOCKERS
[priority] Auto-passing for p_2vckyop2 - no available actions
[AI] All players passed priority with empty stack, advancing step
2026-01-02T06:30:55.041Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:55.041Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:55.041Z [nextStep] Current: combat/DECLARE_BLOCKERS
2026-01-02T06:30:55.041Z [nextStep] Priority: p_3tgu9yec, Turn: p_3tgu9yec
2026-01-02T06:30:55.041Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4590:25)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at runNextTicks (node:internal/process/task_queues:69:3)
2026-01-02T06:30:55.041Z [checkPendingInteractions] Waiting for p_2vckyop2 to declare blockers
2026-01-02T06:30:55.042Z [checkPendingInteractions] Pending: blocker_declaration
2026-01-02T06:30:55.042Z [nextStep] BLOCKED: Cannot advance step - pending interactions: blocker_declaration
[AI] Advanced to next step for game game_mjwhphwz
[VIEW_FOR_DEBUG] {
  viewer: 'p_9eb7iiyf',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_3tgu9yec, viewerId=p_9eb7iiyf, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_2vckyop2',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_3tgu9yec, viewerId=p_2vckyop2, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_3tgu9yec',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_3tgu9yec, viewerId=p_3tgu9yec, match=true
[getPlayableCardIds] Player p_3tgu9yec: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Path to Exile not playable - cannot pay cost {W} (after reduction: {"generic":0,"colors":{"W":1,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Hero of Bladehold blocked - no valid targets: No attacking creatures on the battlefield
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Iroas, God of Victory not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_3tgu9yec: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_3tgu9yec: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_3tgu9yec: No actions available - returning FALSE
[canRespond] p_3tgu9yec: checking instant-speed responses only
[canRespond] p_3tgu9yec: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-01-02T06:30:55.044Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767335455044_hp69s) ==========
2026-01-02T06:30:55.044Z [checkAndTriggerAutoPass] Priority: p_3tgu9yec, Phase: combat, Step: DECLARE_BLOCKERS
2026-01-02T06:30:55.044Z [checkAndTriggerAutoPass] p_3tgu9yec is AI, handled separately (ID: autopass_1767335455044_hp69s)
[AI] AI player checking priority: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_3tgu9yec',
  phase: 'combat',
  step: 'declare_blockers',
  isAITurn: true,
  stackEmpty: true,
  priority: 'p_3tgu9yec',
  hasPriority: true
}
[AI] AI has priority, proceeding with action
[AI] Blockers already declared (in blockersDeclaredBy), passing priority for responses
[AI] Passing priority: { gameId: 'game_mjwhphwz', playerId: 'p_3tgu9yec' }
[priority] autoPassLoop starting - active players: p_9eb7iiyf, p_2vckyop2, p_3tgu9yec, autoPassEnabled: p_2vckyop2, p_9eb7iiyf, p_3tgu9yec, currentPriority: p_9eb7iiyf, turnPlayer: p_3tgu9yec
[canRespond] p_9eb7iiyf: checking instant-speed responses only
[canRespond] p_9eb7iiyf: Can cast instant/flash spell
[priority] autoPassLoop - checking p_9eb7iiyf (non-active): canAct=true, stack.length=0, step=DECLARE_BLOCKERS
[priority] autoPassLoop - stopping at p_9eb7iiyf: player can act
[VIEW_FOR_DEBUG] {
  viewer: 'p_9eb7iiyf',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_9eb7iiyf, match=true
[getPlayableCardIds] Player p_9eb7iiyf: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isMyTurn=false
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 1, colorless: 0 }
[getPlayableCardIds] Total available mana: 1
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Snakeskin Veil (card_a3d2c692-7566-468e-9c86-47a9f768fde2_132e0417c989bb28) is playable
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=false
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Omnath, Locus of Mana not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 1 playable card(s): [ 'card_a3d2c692-7566-468e-9c86-47a9f768fde2_132e0417c989bb28' ]
[normalizeViewForEmit] getPlayableCardIds returned 1 cards
[normalizeViewForEmit] Set view.playableCards with 1 cards
[canAct] p_9eb7iiyf: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=false
[canAct] p_9eb7iiyf: Can cast instant/flash spell - returning TRUE
[canRespond] p_9eb7iiyf: checking instant-speed responses only
[canRespond] p_9eb7iiyf: Can cast instant/flash spell
[normalizeViewForEmit] Set canAct=true, canRespond=true
[VIEW_FOR_DEBUG] {
  viewer: 'p_2vckyop2',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_2vckyop2, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_3tgu9yec',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_3tgu9yec, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
2026-01-02T06:30:55.048Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767335455048_qqqzu) ==========
2026-01-02T06:30:55.048Z [checkAndTriggerAutoPass] Priority: p_9eb7iiyf, Phase: combat, Step: DECLARE_BLOCKERS
2026-01-02T06:30:55.048Z [checkAndTriggerAutoPass] p_9eb7iiyf is AI, handled separately (ID: autopass_1767335455048_qqqzu)
[AI] AI player checking priority: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_3tgu9yec',
  phase: 'combat',
  step: 'declare_blockers',
  isAITurn: true,
  stackEmpty: true,
  priority: 'p_9eb7iiyf',
  hasPriority: false
}
[AI] AI does not have priority, skipping action
[AI] handleAIGameFlow: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_9eb7iiyf',
  phase: 'COMBAT',
  step: 'DECLARE_BLOCKERS',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: false,
  hasPriority: true
}
[AI] handleAIGameFlow: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_3tgu9yec',
  phase: 'COMBAT',
  step: 'DECLARE_BLOCKERS',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: true,
  hasPriority: false
}
[AI] AI player checking priority: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_9eb7iiyf',
  phase: 'combat',
  step: 'declare_blockers',
  isAITurn: false,
  stackEmpty: true,
  priority: 'p_9eb7iiyf',
  hasPriority: true
}
[AI] AI has priority, proceeding with action
[AI] Not AI turn, but it's DECLARE_BLOCKERS step - AI needs to decide on blockers
[AI] Blockers already declared for p_9eb7iiyf, skipping
[AI] Not AI turn, passing priority
[AI] Passing priority: { gameId: 'game_mjwhphwz', playerId: 'p_9eb7iiyf' }
[priority] autoPassLoop starting - active players: p_9eb7iiyf, p_2vckyop2, p_3tgu9yec, autoPassEnabled: p_2vckyop2, p_9eb7iiyf, p_3tgu9yec, currentPriority: p_2vckyop2, turnPlayer: p_3tgu9yec
[canRespond] p_2vckyop2: checking instant-speed responses only
[canRespond] p_2vckyop2: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_2vckyop2 (non-active): canAct=false, stack.length=0, step=DECLARE_BLOCKERS
[priority] Auto-passing for p_2vckyop2 - no available actions
[AI] All players passed priority with empty stack, advancing step
2026-01-02T06:30:55.049Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:55.049Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:55.049Z [nextStep] Current: combat/DECLARE_BLOCKERS
2026-01-02T06:30:55.049Z [nextStep] Priority: p_3tgu9yec, Turn: p_3tgu9yec
2026-01-02T06:30:55.049Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4590:25)
        at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
        at async handleAIPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:2459:7)
2026-01-02T06:30:55.049Z [checkPendingInteractions] Waiting for p_2vckyop2 to declare blockers
2026-01-02T06:30:55.049Z [checkPendingInteractions] Pending: blocker_declaration
2026-01-02T06:30:55.049Z [nextStep] BLOCKED: Cannot advance step - pending interactions: blocker_declaration
[AI] Advanced to next step for game game_mjwhphwz
[VIEW_FOR_DEBUG] {
  viewer: 'p_9eb7iiyf',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_3tgu9yec, viewerId=p_9eb7iiyf, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_2vckyop2',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_3tgu9yec, viewerId=p_2vckyop2, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_3tgu9yec',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_3tgu9yec, viewerId=p_3tgu9yec, match=true
[getPlayableCardIds] Player p_3tgu9yec: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Path to Exile not playable - cannot pay cost {W} (after reduction: {"generic":0,"colors":{"W":1,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Hero of Bladehold blocked - no valid targets: No attacking creatures on the battlefield
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Iroas, God of Victory not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_3tgu9yec: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_3tgu9yec: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_3tgu9yec: No actions available - returning FALSE
[canRespond] p_3tgu9yec: checking instant-speed responses only
[canRespond] p_3tgu9yec: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-01-02T06:30:55.052Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767335455052_e05th) ==========
2026-01-02T06:30:55.052Z [checkAndTriggerAutoPass] Priority: p_3tgu9yec, Phase: combat, Step: DECLARE_BLOCKERS
2026-01-02T06:30:55.052Z [checkAndTriggerAutoPass] p_3tgu9yec is AI, handled separately (ID: autopass_1767335455052_e05th)
[AI] handleAIGameFlow: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_9eb7iiyf',
  phase: 'COMBAT',
  step: 'DECLARE_BLOCKERS',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: false,
  hasPriority: false
}
[AI] AI player checking priority: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_3tgu9yec',
  phase: 'combat',
  step: 'declare_blockers',
  isAITurn: true,
  stackEmpty: true,
  priority: 'p_3tgu9yec',
  hasPriority: true
}
[AI] AI has priority, proceeding with action
[AI] Blockers already declared (in blockersDeclaredBy), passing priority for responses
[AI] Passing priority: { gameId: 'game_mjwhphwz', playerId: 'p_3tgu9yec' }
[priority] autoPassLoop starting - active players: p_9eb7iiyf, p_2vckyop2, p_3tgu9yec, autoPassEnabled: p_2vckyop2, p_9eb7iiyf, p_3tgu9yec, currentPriority: p_9eb7iiyf, turnPlayer: p_3tgu9yec
[canRespond] p_9eb7iiyf: checking instant-speed responses only
[canRespond] p_9eb7iiyf: Can cast instant/flash spell
[priority] autoPassLoop - checking p_9eb7iiyf (non-active): canAct=true, stack.length=0, step=DECLARE_BLOCKERS
[priority] autoPassLoop - stopping at p_9eb7iiyf: player can act
[VIEW_FOR_DEBUG] {
  viewer: 'p_9eb7iiyf',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_9eb7iiyf, match=true
[getPlayableCardIds] Player p_9eb7iiyf: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isMyTurn=false
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 1, colorless: 0 }
[getPlayableCardIds] Total available mana: 1
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Snakeskin Veil (card_a3d2c692-7566-468e-9c86-47a9f768fde2_132e0417c989bb28) is playable
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=false
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Omnath, Locus of Mana not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 1 playable card(s): [ 'card_a3d2c692-7566-468e-9c86-47a9f768fde2_132e0417c989bb28' ]
[normalizeViewForEmit] getPlayableCardIds returned 1 cards
[normalizeViewForEmit] Set view.playableCards with 1 cards
[canAct] p_9eb7iiyf: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=false
[canAct] p_9eb7iiyf: Can cast instant/flash spell - returning TRUE
[canRespond] p_9eb7iiyf: checking instant-speed responses only
[canRespond] p_9eb7iiyf: Can cast instant/flash spell
[normalizeViewForEmit] Set canAct=true, canRespond=true
[VIEW_FOR_DEBUG] {
  viewer: 'p_2vckyop2',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_2vckyop2, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_3tgu9yec',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_3tgu9yec, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
2026-01-02T06:30:55.354Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767335455354_oxiut) ==========
2026-01-02T06:30:55.354Z [checkAndTriggerAutoPass] Priority: p_9eb7iiyf, Phase: combat, Step: DECLARE_BLOCKERS
2026-01-02T06:30:55.354Z [checkAndTriggerAutoPass] p_9eb7iiyf is AI, handled separately (ID: autopass_1767335455354_oxiut)
[AI] AI player checking priority: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_9eb7iiyf',
  phase: 'combat',
  step: 'declare_blockers',
  isAITurn: false,
  stackEmpty: true,
  priority: 'p_9eb7iiyf',
  hasPriority: true
}
[AI] AI has priority, proceeding with action
[AI] Not AI turn, but it's DECLARE_BLOCKERS step - AI needs to decide on blockers
[AI] Blockers already declared for p_9eb7iiyf, skipping
[AI] Not AI turn, passing priority
[AI] Passing priority: { gameId: 'game_mjwhphwz', playerId: 'p_9eb7iiyf' }
[priority] autoPassLoop starting - active players: p_9eb7iiyf, p_2vckyop2, p_3tgu9yec, autoPassEnabled: p_2vckyop2, p_9eb7iiyf, p_3tgu9yec, currentPriority: p_2vckyop2, turnPlayer: p_3tgu9yec
[canRespond] p_2vckyop2: checking instant-speed responses only
[canRespond] p_2vckyop2: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_2vckyop2 (non-active): canAct=false, stack.length=0, step=DECLARE_BLOCKERS
[priority] Auto-passing for p_2vckyop2 - no available actions
[AI] All players passed priority with empty stack, advancing step
2026-01-02T06:30:55.355Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:55.355Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:55.355Z [nextStep] Current: combat/DECLARE_BLOCKERS
2026-01-02T06:30:55.355Z [nextStep] Priority: p_3tgu9yec, Turn: p_3tgu9yec
2026-01-02T06:30:55.355Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4590:25)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at runNextTicks (node:internal/process/task_queues:69:3)
2026-01-02T06:30:55.355Z [checkPendingInteractions] Waiting for p_2vckyop2 to declare blockers
2026-01-02T06:30:55.355Z [checkPendingInteractions] Pending: blocker_declaration
2026-01-02T06:30:55.355Z [nextStep] BLOCKED: Cannot advance step - pending interactions: blocker_declaration
[AI] Advanced to next step for game game_mjwhphwz
[VIEW_FOR_DEBUG] {
  viewer: 'p_9eb7iiyf',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_3tgu9yec, viewerId=p_9eb7iiyf, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_2vckyop2',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_3tgu9yec, viewerId=p_2vckyop2, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_3tgu9yec',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_3tgu9yec, viewerId=p_3tgu9yec, match=true
[getPlayableCardIds] Player p_3tgu9yec: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Path to Exile not playable - cannot pay cost {W} (after reduction: {"generic":0,"colors":{"W":1,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Hero of Bladehold blocked - no valid targets: No attacking creatures on the battlefield
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Iroas, God of Victory not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_3tgu9yec: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_3tgu9yec: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_3tgu9yec: No actions available - returning FALSE
[canRespond] p_3tgu9yec: checking instant-speed responses only
[canRespond] p_3tgu9yec: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-01-02T06:30:55.357Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767335455357_duoxw) ==========
2026-01-02T06:30:55.357Z [checkAndTriggerAutoPass] Priority: p_3tgu9yec, Phase: combat, Step: DECLARE_BLOCKERS
2026-01-02T06:30:55.357Z [checkAndTriggerAutoPass] p_3tgu9yec is AI, handled separately (ID: autopass_1767335455357_duoxw)
[AI] AI player checking priority: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_9eb7iiyf',
  phase: 'combat',
  step: 'declare_blockers',
  isAITurn: false,
  stackEmpty: true,
  priority: 'p_3tgu9yec',
  hasPriority: false
}
[AI] AI does not have priority, skipping action
[AI] handleAIGameFlow: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_3tgu9yec',
  phase: 'COMBAT',
  step: 'DECLARE_BLOCKERS',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: true,
  hasPriority: true
}
[AI] handleAIGameFlow: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_9eb7iiyf',
  phase: 'COMBAT',
  step: 'DECLARE_BLOCKERS',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: false,
  hasPriority: false
}
[AI] AI player checking priority: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_3tgu9yec',
  phase: 'combat',
  step: 'declare_blockers',
  isAITurn: true,
  stackEmpty: true,
  priority: 'p_3tgu9yec',
  hasPriority: true
}
[AI] AI has priority, proceeding with action
[AI] Blockers already declared (in blockersDeclaredBy), passing priority for responses
[AI] Passing priority: { gameId: 'game_mjwhphwz', playerId: 'p_3tgu9yec' }
[priority] autoPassLoop starting - active players: p_9eb7iiyf, p_2vckyop2, p_3tgu9yec, autoPassEnabled: p_2vckyop2, p_9eb7iiyf, p_3tgu9yec, currentPriority: p_9eb7iiyf, turnPlayer: p_3tgu9yec
[canRespond] p_9eb7iiyf: checking instant-speed responses only
[canRespond] p_9eb7iiyf: Can cast instant/flash spell
[priority] autoPassLoop - checking p_9eb7iiyf (non-active): canAct=true, stack.length=0, step=DECLARE_BLOCKERS
[priority] autoPassLoop - stopping at p_9eb7iiyf: player can act
[VIEW_FOR_DEBUG] {
  viewer: 'p_9eb7iiyf',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_9eb7iiyf, match=true
[getPlayableCardIds] Player p_9eb7iiyf: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isMyTurn=false
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 1, colorless: 0 }
[getPlayableCardIds] Total available mana: 1
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Snakeskin Veil (card_a3d2c692-7566-468e-9c86-47a9f768fde2_132e0417c989bb28) is playable
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=false
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Omnath, Locus of Mana not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 1 playable card(s): [ 'card_a3d2c692-7566-468e-9c86-47a9f768fde2_132e0417c989bb28' ]
[normalizeViewForEmit] getPlayableCardIds returned 1 cards
[normalizeViewForEmit] Set view.playableCards with 1 cards
[canAct] p_9eb7iiyf: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=false
[canAct] p_9eb7iiyf: Can cast instant/flash spell - returning TRUE
[canRespond] p_9eb7iiyf: checking instant-speed responses only
[canRespond] p_9eb7iiyf: Can cast instant/flash spell
[normalizeViewForEmit] Set canAct=true, canRespond=true
[VIEW_FOR_DEBUG] {
  viewer: 'p_2vckyop2',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_2vckyop2, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_3tgu9yec',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_3tgu9yec, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
2026-01-02T06:30:55.362Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767335455362_a9jfv) ==========
2026-01-02T06:30:55.362Z [checkAndTriggerAutoPass] Priority: p_9eb7iiyf, Phase: combat, Step: DECLARE_BLOCKERS
2026-01-02T06:30:55.362Z [checkAndTriggerAutoPass] p_9eb7iiyf is AI, handled separately (ID: autopass_1767335455362_a9jfv)
[AI] handleAIGameFlow: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_3tgu9yec',
  phase: 'COMBAT',
  step: 'DECLARE_BLOCKERS',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: true,
  hasPriority: false
}
[AI] AI player checking priority: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_9eb7iiyf',
  phase: 'combat',
  step: 'declare_blockers',
  isAITurn: false,
  stackEmpty: true,
  priority: 'p_9eb7iiyf',
  hasPriority: true
}
[AI] AI has priority, proceeding with action
[AI] Not AI turn, but it's DECLARE_BLOCKERS step - AI needs to decide on blockers
[AI] Blockers already declared for p_9eb7iiyf, skipping
[AI] Not AI turn, passing priority
[AI] Passing priority: { gameId: 'game_mjwhphwz', playerId: 'p_9eb7iiyf' }
[priority] autoPassLoop starting - active players: p_9eb7iiyf, p_2vckyop2, p_3tgu9yec, autoPassEnabled: p_2vckyop2, p_9eb7iiyf, p_3tgu9yec, currentPriority: p_2vckyop2, turnPlayer: p_3tgu9yec
[canRespond] p_2vckyop2: checking instant-speed responses only
[canRespond] p_2vckyop2: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_2vckyop2 (non-active): canAct=false, stack.length=0, step=DECLARE_BLOCKERS
[priority] Auto-passing for p_2vckyop2 - no available actions
[AI] All players passed priority with empty stack, advancing step
2026-01-02T06:30:55.659Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:55.659Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:55.659Z [nextStep] Current: combat/DECLARE_BLOCKERS
2026-01-02T06:30:55.659Z [nextStep] Priority: p_3tgu9yec, Turn: p_3tgu9yec
2026-01-02T06:30:55.659Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4590:25)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at runNextTicks (node:internal/process/task_queues:69:3)
2026-01-02T06:30:55.659Z [checkPendingInteractions] Waiting for p_2vckyop2 to declare blockers
2026-01-02T06:30:55.659Z [checkPendingInteractions] Pending: blocker_declaration
2026-01-02T06:30:55.659Z [nextStep] BLOCKED: Cannot advance step - pending interactions: blocker_declaration
[AI] Advanced to next step for game game_mjwhphwz
[VIEW_FOR_DEBUG] {
  viewer: 'p_9eb7iiyf',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_3tgu9yec, viewerId=p_9eb7iiyf, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_2vckyop2',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_3tgu9yec, viewerId=p_2vckyop2, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_3tgu9yec',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_3tgu9yec, viewerId=p_3tgu9yec, match=true
[getPlayableCardIds] Player p_3tgu9yec: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Path to Exile not playable - cannot pay cost {W} (after reduction: {"generic":0,"colors":{"W":1,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Hero of Bladehold blocked - no valid targets: No attacking creatures on the battlefield
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Iroas, God of Victory not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_3tgu9yec: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_3tgu9yec: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_3tgu9yec: No actions available - returning FALSE
[canRespond] p_3tgu9yec: checking instant-speed responses only
[canRespond] p_3tgu9yec: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-01-02T06:30:55.662Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767335455662_arzit) ==========
2026-01-02T06:30:55.662Z [checkAndTriggerAutoPass] Priority: p_3tgu9yec, Phase: combat, Step: DECLARE_BLOCKERS
2026-01-02T06:30:55.662Z [checkAndTriggerAutoPass] p_3tgu9yec is AI, handled separately (ID: autopass_1767335455662_arzit)
[AI] AI player checking priority: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_3tgu9yec',
  phase: 'combat',
  step: 'declare_blockers',
  isAITurn: true,
  stackEmpty: true,
  priority: 'p_3tgu9yec',
  hasPriority: true
}
[AI] AI has priority, proceeding with action
[AI] Blockers already declared (in blockersDeclaredBy), passing priority for responses
[AI] Passing priority: { gameId: 'game_mjwhphwz', playerId: 'p_3tgu9yec' }
[priority] autoPassLoop starting - active players: p_9eb7iiyf, p_2vckyop2, p_3tgu9yec, autoPassEnabled: p_2vckyop2, p_9eb7iiyf, p_3tgu9yec, currentPriority: p_9eb7iiyf, turnPlayer: p_3tgu9yec
[canRespond] p_9eb7iiyf: checking instant-speed responses only
[canRespond] p_9eb7iiyf: Can cast instant/flash spell
[priority] autoPassLoop - checking p_9eb7iiyf (non-active): canAct=true, stack.length=0, step=DECLARE_BLOCKERS
[priority] autoPassLoop - stopping at p_9eb7iiyf: player can act
[VIEW_FOR_DEBUG] {
  viewer: 'p_9eb7iiyf',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_9eb7iiyf, match=true
[getPlayableCardIds] Player p_9eb7iiyf: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isMyTurn=false
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 1, colorless: 0 }
[getPlayableCardIds] Total available mana: 1
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Snakeskin Veil (card_a3d2c692-7566-468e-9c86-47a9f768fde2_132e0417c989bb28) is playable
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=false
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Omnath, Locus of Mana not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 1 playable card(s): [ 'card_a3d2c692-7566-468e-9c86-47a9f768fde2_132e0417c989bb28' ]
[normalizeViewForEmit] getPlayableCardIds returned 1 cards
[normalizeViewForEmit] Set view.playableCards with 1 cards
[canAct] p_9eb7iiyf: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=false
[canAct] p_9eb7iiyf: Can cast instant/flash spell - returning TRUE
[canRespond] p_9eb7iiyf: checking instant-speed responses only
[canRespond] p_9eb7iiyf: Can cast instant/flash spell
[normalizeViewForEmit] Set canAct=true, canRespond=true
[VIEW_FOR_DEBUG] {
  viewer: 'p_2vckyop2',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_2vckyop2, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_3tgu9yec',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_3tgu9yec, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
2026-01-02T06:30:55.666Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767335455666_i8qbg) ==========
2026-01-02T06:30:55.666Z [checkAndTriggerAutoPass] Priority: p_9eb7iiyf, Phase: combat, Step: DECLARE_BLOCKERS
2026-01-02T06:30:55.666Z [checkAndTriggerAutoPass] p_9eb7iiyf is AI, handled separately (ID: autopass_1767335455666_i8qbg)
[AI] AI player checking priority: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_3tgu9yec',
  phase: 'combat',
  step: 'declare_blockers',
  isAITurn: true,
  stackEmpty: true,
  priority: 'p_9eb7iiyf',
  hasPriority: false
}
[AI] AI does not have priority, skipping action
[AI] handleAIGameFlow: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_9eb7iiyf',
  phase: 'COMBAT',
  step: 'DECLARE_BLOCKERS',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: false,
  hasPriority: true
}
[AI] handleAIGameFlow: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_3tgu9yec',
  phase: 'COMBAT',
  step: 'DECLARE_BLOCKERS',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: true,
  hasPriority: false
}
[AI] AI player checking priority: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_9eb7iiyf',
  phase: 'combat',
  step: 'declare_blockers',
  isAITurn: false,
  stackEmpty: true,
  priority: 'p_9eb7iiyf',
  hasPriority: true
}
[AI] AI has priority, proceeding with action
[AI] Not AI turn, but it's DECLARE_BLOCKERS step - AI needs to decide on blockers
[AI] Blockers already declared for p_9eb7iiyf, skipping
[AI] Not AI turn, passing priority
[AI] Passing priority: { gameId: 'game_mjwhphwz', playerId: 'p_9eb7iiyf' }
[priority] autoPassLoop starting - active players: p_9eb7iiyf, p_2vckyop2, p_3tgu9yec, autoPassEnabled: p_2vckyop2, p_9eb7iiyf, p_3tgu9yec, currentPriority: p_2vckyop2, turnPlayer: p_3tgu9yec
[canRespond] p_2vckyop2: checking instant-speed responses only
[canRespond] p_2vckyop2: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_2vckyop2 (non-active): canAct=false, stack.length=0, step=DECLARE_BLOCKERS
[priority] Auto-passing for p_2vckyop2 - no available actions
[AI] All players passed priority with empty stack, advancing step
2026-01-02T06:30:55.667Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:55.667Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:55.667Z [nextStep] Current: combat/DECLARE_BLOCKERS
2026-01-02T06:30:55.667Z [nextStep] Priority: p_3tgu9yec, Turn: p_3tgu9yec
2026-01-02T06:30:55.667Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4590:25)
        at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
        at async handleAIPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:2459:7)
2026-01-02T06:30:55.667Z [checkPendingInteractions] Waiting for p_2vckyop2 to declare blockers
2026-01-02T06:30:55.667Z [checkPendingInteractions] Pending: blocker_declaration
2026-01-02T06:30:55.667Z [nextStep] BLOCKED: Cannot advance step - pending interactions: blocker_declaration
[AI] Advanced to next step for game game_mjwhphwz
[VIEW_FOR_DEBUG] {
  viewer: 'p_9eb7iiyf',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_3tgu9yec, viewerId=p_9eb7iiyf, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_2vckyop2',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_3tgu9yec, viewerId=p_2vckyop2, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_3tgu9yec',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_3tgu9yec, viewerId=p_3tgu9yec, match=true
[getPlayableCardIds] Player p_3tgu9yec: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Path to Exile not playable - cannot pay cost {W} (after reduction: {"generic":0,"colors":{"W":1,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Hero of Bladehold blocked - no valid targets: No attacking creatures on the battlefield
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Iroas, God of Victory not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_3tgu9yec: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_3tgu9yec: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_3tgu9yec: No actions available - returning FALSE
[canRespond] p_3tgu9yec: checking instant-speed responses only
[canRespond] p_3tgu9yec: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-01-02T06:30:55.670Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767335455670_knh2m) ==========
2026-01-02T06:30:55.670Z [checkAndTriggerAutoPass] Priority: p_3tgu9yec, Phase: combat, Step: DECLARE_BLOCKERS
2026-01-02T06:30:55.670Z [checkAndTriggerAutoPass] p_3tgu9yec is AI, handled separately (ID: autopass_1767335455670_knh2m)
[AI] handleAIGameFlow: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_9eb7iiyf',
  phase: 'COMBAT',
  step: 'DECLARE_BLOCKERS',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: false,
  hasPriority: false
}
[AI] AI player checking priority: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_3tgu9yec',
  phase: 'combat',
  step: 'declare_blockers',
  isAITurn: true,
  stackEmpty: true,
  priority: 'p_3tgu9yec',
  hasPriority: true
}
[AI] AI has priority, proceeding with action
[AI] Blockers already declared (in blockersDeclaredBy), passing priority for responses
[AI] Passing priority: { gameId: 'game_mjwhphwz', playerId: 'p_3tgu9yec' }
[priority] autoPassLoop starting - active players: p_9eb7iiyf, p_2vckyop2, p_3tgu9yec, autoPassEnabled: p_2vckyop2, p_9eb7iiyf, p_3tgu9yec, currentPriority: p_9eb7iiyf, turnPlayer: p_3tgu9yec
[canRespond] p_9eb7iiyf: checking instant-speed responses only
[canRespond] p_9eb7iiyf: Can cast instant/flash spell
[priority] autoPassLoop - checking p_9eb7iiyf (non-active): canAct=true, stack.length=0, step=DECLARE_BLOCKERS
[priority] autoPassLoop - stopping at p_9eb7iiyf: player can act
[VIEW_FOR_DEBUG] {
  viewer: 'p_9eb7iiyf',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_9eb7iiyf, match=true
[getPlayableCardIds] Player p_9eb7iiyf: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isMyTurn=false
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 1, colorless: 0 }
[getPlayableCardIds] Total available mana: 1
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Snakeskin Veil (card_a3d2c692-7566-468e-9c86-47a9f768fde2_132e0417c989bb28) is playable
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=false
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Omnath, Locus of Mana not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 1 playable card(s): [ 'card_a3d2c692-7566-468e-9c86-47a9f768fde2_132e0417c989bb28' ]
[normalizeViewForEmit] getPlayableCardIds returned 1 cards
[normalizeViewForEmit] Set view.playableCards with 1 cards
[canAct] p_9eb7iiyf: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=false
[canAct] p_9eb7iiyf: Can cast instant/flash spell - returning TRUE
[canRespond] p_9eb7iiyf: checking instant-speed responses only
[canRespond] p_9eb7iiyf: Can cast instant/flash spell
[normalizeViewForEmit] Set canAct=true, canRespond=true
[VIEW_FOR_DEBUG] {
  viewer: 'p_2vckyop2',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_2vckyop2, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_3tgu9yec',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_3tgu9yec, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
2026-01-02T06:30:55.967Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767335455967_d3qq7) ==========
2026-01-02T06:30:55.967Z [checkAndTriggerAutoPass] Priority: p_9eb7iiyf, Phase: combat, Step: DECLARE_BLOCKERS
2026-01-02T06:30:55.967Z [checkAndTriggerAutoPass] p_9eb7iiyf is AI, handled separately (ID: autopass_1767335455967_d3qq7)
[AI] handleAIGameFlow: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_3tgu9yec',
  phase: 'COMBAT',
  step: 'DECLARE_BLOCKERS',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: true,
  hasPriority: false
}
[VIEW_FOR_DEBUG] {
  viewer: 'p_9eb7iiyf',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_9eb7iiyf, match=true
[getPlayableCardIds] Player p_9eb7iiyf: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isMyTurn=false
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 1, colorless: 0 }
[getPlayableCardIds] Total available mana: 1
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Snakeskin Veil (card_a3d2c692-7566-468e-9c86-47a9f768fde2_132e0417c989bb28) is playable
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=false
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Omnath, Locus of Mana not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 1 playable card(s): [ 'card_a3d2c692-7566-468e-9c86-47a9f768fde2_132e0417c989bb28' ]
[normalizeViewForEmit] getPlayableCardIds returned 1 cards
[normalizeViewForEmit] Set view.playableCards with 1 cards
[canAct] p_9eb7iiyf: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=false
[canAct] p_9eb7iiyf: Can cast instant/flash spell - returning TRUE
[canRespond] p_9eb7iiyf: checking instant-speed responses only
[canRespond] p_9eb7iiyf: Can cast instant/flash spell
[normalizeViewForEmit] Set canAct=true, canRespond=true
[VIEW_FOR_DEBUG] {
  viewer: 'p_2vckyop2',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_2vckyop2, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_3tgu9yec',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_3tgu9yec, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
2026-01-02T06:30:55.972Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767335455972_7sqrd) ==========
2026-01-02T06:30:55.972Z [checkAndTriggerAutoPass] Priority: p_9eb7iiyf, Phase: combat, Step: DECLARE_BLOCKERS
2026-01-02T06:30:55.972Z [checkAndTriggerAutoPass] p_9eb7iiyf is AI, handled separately (ID: autopass_1767335455972_7sqrd)
[combat] Player p_2vckyop2 declared 2 blockers in game game_mjwhphwz
[AI] AI player checking priority: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_9eb7iiyf',
  phase: 'combat',
  step: 'declare_blockers',
  isAITurn: false,
  stackEmpty: true,
  priority: 'p_9eb7iiyf',
  hasPriority: true
}
[AI] AI has priority, proceeding with action
[AI] Not AI turn, but it's DECLARE_BLOCKERS step - AI needs to decide on blockers
[AI] Blockers already declared for p_9eb7iiyf, skipping
[AI] Not AI turn, passing priority
[AI] Passing priority: { gameId: 'game_mjwhphwz', playerId: 'p_9eb7iiyf' }
[priority] autoPassLoop starting - active players: p_9eb7iiyf, p_2vckyop2, p_3tgu9yec, autoPassEnabled: p_2vckyop2, p_9eb7iiyf, p_3tgu9yec, currentPriority: p_2vckyop2, turnPlayer: p_3tgu9yec
[canRespond] p_2vckyop2: checking instant-speed responses only
[canRespond] p_2vckyop2: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_2vckyop2 (non-active): canAct=false, stack.length=0, step=DECLARE_BLOCKERS
[priority] Auto-passing for p_2vckyop2 - no available actions
[AI] All players passed priority with empty stack, advancing step
2026-01-02T06:30:55.973Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:55.973Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:55.973Z [nextStep] Current: combat/DECLARE_BLOCKERS
2026-01-02T06:30:55.973Z [nextStep] Priority: p_3tgu9yec, Turn: p_3tgu9yec
2026-01-02T06:30:55.973Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4590:25)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at runNextTicks (node:internal/process/task_queues:69:3)
2026-01-02T06:30:55.973Z [COMBAT_STEP] ========== TRANSITIONING FROM DECLARE_BLOCKERS TO DAMAGE (no first strike) ==========
2026-01-02T06:30:55.973Z [COMBAT_STEP] Calling dealCombatDamage...
2026-01-02T06:30:55.973Z [COMBAT_DAMAGE] ========== ENTERING dealCombatDamage (firstStrike=undefined) ==========
2026-01-02T06:30:55.973Z [COMBAT_DAMAGE] Found 2 attackers
2026-01-02T06:30:55.973Z [COMBAT_DAMAGE] Attacker: Seasoned Pyromancer, blocked by 1 creatures: [perm_xbhjyofw]
2026-01-02T06:30:55.973Z [COMBAT_DAMAGE] Attacker: Selfless Spirit, blocked by 1 creatures: [perm_gqytbgjn]
2026-01-02T06:30:55.973Z [COMBAT_DAMAGE] Processing attacker: Seasoned Pyromancer
[KEYWORDS] ========== Parsing keywords for: Seasoned Pyromancer ==========
[KEYWORDS] Raw keywords: type=undefined, isArray=false
[KEYWORDS] Raw value: undefined
[KEYWORDS] Normalized keywords array: []
[KEYWORDS] Seasoned Pyromancer ACTIVE ABILITIES: [none]
[KEYWORDS] First Strike: false, Double Strike: false
[KEYWORDS] ========== End parsing for: Seasoned Pyromancer ==========
2026-01-02T06:30:55.975Z [dealCombatDamage] Seasoned Pyromancer dealt 2 damage to blocker Keeper of the Accord
2026-01-02T06:30:55.975Z [COMBAT_DAMAGE] Processing 1 blocker(s) dealing damage to attacker Seasoned Pyromancer
2026-01-02T06:30:55.975Z [COMBAT_DAMAGE] Processing blocker: perm_xbhjyofw
2026-01-02T06:30:55.975Z [COMBAT_DAMAGE] Found blocker: Keeper of the Accord, parsing keywords...
[KEYWORDS] ========== Parsing keywords for: Keeper of the Accord ==========
[KEYWORDS] Raw keywords: type=undefined, isArray=false
[KEYWORDS] Raw value: undefined
[KEYWORDS] Normalized keywords array: []
[KEYWORDS] Keeper of the Accord ACTIVE ABILITIES: [none]
[KEYWORDS] First Strike: false, Double Strike: false
[KEYWORDS] ========== End parsing for: Keeper of the Accord ==========
2026-01-02T06:30:55.975Z [COMBAT_DAMAGE] Blocker keywords parsed successfully
2026-01-02T06:30:55.975Z [COMBAT_DAMAGE] Blocker Keeper of the Accord has power 3
2026-01-02T06:30:55.975Z [COMBAT_DAMAGE] Blocker Keeper of the Accord dealt 3 damage to attacker Seasoned Pyromancer
2026-01-02T06:30:55.975Z [COMBAT_DAMAGE] Attacker Seasoned Pyromancer: toughness=2, totalDamage=3, isDead=true
2026-01-02T06:30:55.975Z [COMBAT_DAMAGE] Attacker Seasoned Pyromancer received lethal damage
2026-01-02T06:30:55.975Z [COMBAT_DAMAGE] Processing attacker: Selfless Spirit
[KEYWORDS] ========== Parsing keywords for: Selfless Spirit ==========
[KEYWORDS] Raw keywords: type=undefined, isArray=false
[KEYWORDS] Raw value: undefined
[KEYWORDS] Normalized keywords array: []
[KEYWORDS] Selfless Spirit ACTIVE ABILITIES: [flying, indestructible]
[KEYWORDS] First Strike: false, Double Strike: false
[KEYWORDS] ========== End parsing for: Selfless Spirit ==========
2026-01-02T06:30:55.975Z [dealCombatDamage] Selfless Spirit dealt 2 damage to blocker Abzan Falconer
2026-01-02T06:30:55.975Z [COMBAT_DAMAGE] Processing 1 blocker(s) dealing damage to attacker Selfless Spirit
2026-01-02T06:30:55.975Z [COMBAT_DAMAGE] Processing blocker: perm_gqytbgjn
2026-01-02T06:30:55.975Z [COMBAT_DAMAGE] Found blocker: Abzan Falconer, parsing keywords...
[KEYWORDS] ========== Parsing keywords for: Abzan Falconer ==========
[KEYWORDS] Raw keywords: type=undefined, isArray=false
[KEYWORDS] Raw value: undefined
[KEYWORDS] Normalized keywords array: []
[KEYWORDS] Abzan Falconer ACTIVE ABILITIES: [flying]
[KEYWORDS] First Strike: false, Double Strike: false
[KEYWORDS] ========== End parsing for: Abzan Falconer ==========
2026-01-02T06:30:55.975Z [COMBAT_DAMAGE] Blocker keywords parsed successfully
2026-01-02T06:30:55.975Z [COMBAT_DAMAGE] Blocker Abzan Falconer has power 2
2026-01-02T06:30:55.975Z [COMBAT_DAMAGE] Blocker Abzan Falconer dealt 2 damage to attacker Selfless Spirit
2026-01-02T06:30:55.975Z [COMBAT_DAMAGE] Attacker Selfless Spirit: toughness=1, totalDamage=2, isDead=true
2026-01-02T06:30:55.975Z [COMBAT_DAMAGE] Attacker Selfless Spirit received lethal damage
2026-01-02T06:30:55.976Z [dealCombatDamage] Combat damage complete. Damage to players: {}, Life gained: {}, Creatures destroyed: 2
2026-01-02T06:30:55.976Z [COMBAT_STEP] dealCombatDamage completed successfully
2026-01-02T06:30:55.976Z [COMBAT_STEP] Result: damageToPlayers={}, creaturesDestroyed=2
2026-01-02T06:30:55.976Z [COMBAT_STEP] ========== END DAMAGE STEP PROCESSING ==========
2026-01-02T06:30:55.976Z [nextStep] Advanced to phase=combat, step=DAMAGE
2026-01-02T06:30:55.976Z [nextStep] Granting priority to active player p_3tgu9yec (step: DAMAGE, stack size: 0)
[canAct] p_3tgu9yec: step=DAMAGE, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_3tgu9yec: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_3tgu9yec: No actions available - returning FALSE
[canRespond] p_3tgu9yec: checking instant-speed responses only
[canRespond] p_3tgu9yec: No instant-speed responses available (returning false)
2026-01-02T06:30:55.977Z [nextStep] DEBUG - Turn Player p_3tgu9yec:
2026-01-02T06:30:55.977Z [nextStep]   Hand (7): Soltari Priest, Aurelia's Vindicator, Path to Exile, Hero of Bladehold, Brimaz, King of Oreskos, Gisela, Blade of Goldnight, Recruiter of the Guard
2026-01-02T06:30:55.977Z [nextStep]   canAct: false, canRespond: false
2026-01-02T06:30:55.977Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_9eb7iiyf, p_2vckyop2, p_3tgu9yec, autoPassEnabled: p_2vckyop2, p_9eb7iiyf, p_3tgu9yec, currentPriority: p_3tgu9yec, turnPlayer: p_3tgu9yec
[canAct] p_3tgu9yec: step=DAMAGE, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_3tgu9yec: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_3tgu9yec: No actions available - returning FALSE
[priority] autoPassLoop - checking p_3tgu9yec (ACTIVE): canAct=false, stack.length=0, step=DAMAGE
[priority] Auto-passing for p_3tgu9yec - no available actions
[canRespond] p_9eb7iiyf: checking instant-speed responses only
[canRespond] p_9eb7iiyf: Can cast instant/flash spell
[priority] autoPassLoop - checking p_9eb7iiyf (non-active): canAct=true, stack.length=0, step=DAMAGE
[priority] autoPassLoop - stopping at p_9eb7iiyf: player can act
2026-01-02T06:30:55.977Z [nextStep] Auto-pass stopped, player p_9eb7iiyf has priority
[AI] Advanced to next step for game game_mjwhphwz
[VIEW_FOR_DEBUG] {
  viewer: 'p_9eb7iiyf',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_9eb7iiyf, match=true
[getPlayableCardIds] Player p_9eb7iiyf: step=DAMAGE, isMainPhase=false, stackIsEmpty=true, isMyTurn=false
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 1, colorless: 0 }
[getPlayableCardIds] Total available mana: 1
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Snakeskin Veil (card_a3d2c692-7566-468e-9c86-47a9f768fde2_132e0417c989bb28) is playable
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=false
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Omnath, Locus of Mana not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 1 playable card(s): [ 'card_a3d2c692-7566-468e-9c86-47a9f768fde2_132e0417c989bb28' ]
[normalizeViewForEmit] getPlayableCardIds returned 1 cards
[normalizeViewForEmit] Set view.playableCards with 1 cards
[canAct] p_9eb7iiyf: step=DAMAGE, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=false
[canAct] p_9eb7iiyf: Can cast instant/flash spell - returning TRUE
[canRespond] p_9eb7iiyf: checking instant-speed responses only
[canRespond] p_9eb7iiyf: Can cast instant/flash spell
[normalizeViewForEmit] Set canAct=true, canRespond=true
[VIEW_FOR_DEBUG] {
  viewer: 'p_2vckyop2',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_2vckyop2, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_3tgu9yec',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_3tgu9yec, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
2026-01-02T06:30:55.980Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767335455980_4n1su) ==========
2026-01-02T06:30:55.980Z [checkAndTriggerAutoPass] Priority: p_9eb7iiyf, Phase: combat, Step: DAMAGE
2026-01-02T06:30:55.980Z [checkAndTriggerAutoPass] p_9eb7iiyf is AI, handled separately (ID: autopass_1767335455980_4n1su)
[AI] AI player checking priority: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_9eb7iiyf',
  phase: 'combat',
  step: 'damage',
  isAITurn: false,
  stackEmpty: true,
  priority: 'p_9eb7iiyf',
  hasPriority: true
}
[AI] AI has priority, proceeding with action
[AI] Not AI turn, passing priority
[AI] Passing priority: { gameId: 'game_mjwhphwz', playerId: 'p_9eb7iiyf' }
[priority] autoPassLoop starting - active players: p_9eb7iiyf, p_2vckyop2, p_3tgu9yec, autoPassEnabled: p_2vckyop2, p_9eb7iiyf, p_3tgu9yec, currentPriority: p_2vckyop2, turnPlayer: p_3tgu9yec
[canRespond] p_2vckyop2: checking instant-speed responses only
[canRespond] p_2vckyop2: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_2vckyop2 (non-active): canAct=false, stack.length=0, step=DAMAGE
[priority] Auto-passing for p_2vckyop2 - no available actions
[AI] All players passed priority with empty stack, advancing step
2026-01-02T06:30:55.981Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:55.981Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:55.981Z [nextStep] Current: combat/DAMAGE
2026-01-02T06:30:55.981Z [nextStep] Priority: p_3tgu9yec, Turn: p_3tgu9yec
2026-01-02T06:30:55.981Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4590:25)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at runNextTicks (node:internal/process/task_queues:69:3)
2026-01-02T06:30:55.981Z [nextStep] Advanced to phase=combat, step=END_COMBAT
2026-01-02T06:30:55.981Z [nextStep] Granting priority to active player p_3tgu9yec (step: END_COMBAT, stack size: 0)
[canAct] p_3tgu9yec: step=END_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_3tgu9yec: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_3tgu9yec: No actions available - returning FALSE
[canRespond] p_3tgu9yec: checking instant-speed responses only
[canRespond] p_3tgu9yec: No instant-speed responses available (returning false)
2026-01-02T06:30:55.981Z [nextStep] DEBUG - Turn Player p_3tgu9yec:
2026-01-02T06:30:55.981Z [nextStep]   Hand (7): Soltari Priest, Aurelia's Vindicator, Path to Exile, Hero of Bladehold, Brimaz, King of Oreskos, Gisela, Blade of Goldnight, Recruiter of the Guard
2026-01-02T06:30:55.981Z [nextStep]   canAct: false, canRespond: false
2026-01-02T06:30:55.981Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_9eb7iiyf, p_2vckyop2, p_3tgu9yec, autoPassEnabled: p_2vckyop2, p_9eb7iiyf, p_3tgu9yec, currentPriority: p_3tgu9yec, turnPlayer: p_3tgu9yec
[canAct] p_3tgu9yec: step=END_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_3tgu9yec: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_3tgu9yec: No actions available - returning FALSE
[priority] autoPassLoop - checking p_3tgu9yec (ACTIVE): canAct=false, stack.length=0, step=END_COMBAT
[priority] Auto-passing for p_3tgu9yec - no available actions
[canRespond] p_9eb7iiyf: checking instant-speed responses only
[canRespond] p_9eb7iiyf: Can cast instant/flash spell
[priority] autoPassLoop - checking p_9eb7iiyf (non-active): canAct=true, stack.length=0, step=END_COMBAT
[priority] autoPassLoop - stopping at p_9eb7iiyf: player can act
2026-01-02T06:30:55.981Z [nextStep] Auto-pass stopped, player p_9eb7iiyf has priority
[AI] Advanced to next step for game game_mjwhphwz
[VIEW_FOR_DEBUG] {
  viewer: 'p_9eb7iiyf',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_9eb7iiyf, match=true
[getPlayableCardIds] Player p_9eb7iiyf: step=END_COMBAT, isMainPhase=false, stackIsEmpty=true, isMyTurn=false
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 1, colorless: 0 }
[getPlayableCardIds] Total available mana: 1
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Snakeskin Veil (card_a3d2c692-7566-468e-9c86-47a9f768fde2_132e0417c989bb28) is playable
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=false
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Omnath, Locus of Mana not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 1 playable card(s): [ 'card_a3d2c692-7566-468e-9c86-47a9f768fde2_132e0417c989bb28' ]
[normalizeViewForEmit] getPlayableCardIds returned 1 cards
[normalizeViewForEmit] Set view.playableCards with 1 cards
[canAct] p_9eb7iiyf: step=END_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=false
[canAct] p_9eb7iiyf: Can cast instant/flash spell - returning TRUE
[canRespond] p_9eb7iiyf: checking instant-speed responses only
[canRespond] p_9eb7iiyf: Can cast instant/flash spell
[normalizeViewForEmit] Set canAct=true, canRespond=true
[VIEW_FOR_DEBUG] {
  viewer: 'p_2vckyop2',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_2vckyop2, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] {
  viewer: 'p_3tgu9yec',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_9eb7iiyf: { handCount: 7, firstKnown: [Array] },
    p_2vckyop2: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[getDevotionManaAmount] Checking abzan falconer: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'abzan falconer'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking sword of the animist: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'sword of the animist'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking forest: { hasKarametra: false, hasAcolyte: false, fullCardName: 'forest' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking keeper of the accord: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'keeper of the accord'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking omnath, locus of mana: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: 'omnath, locus of mana'
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking cathars' crusade: {
  hasKarametra: false,
  hasAcolyte: false,
  fullCardName: "cathars' crusade"
}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_9eb7iiyf, viewerId=p_3tgu9yec, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
2026-01-02T06:30:55.984Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1767335455984_x6lyz) ==========
2026-01-02T06:30:55.984Z [checkAndTriggerAutoPass] Priority: p_9eb7iiyf, Phase: combat, Step: END_COMBAT
2026-01-02T06:30:55.984Z [checkAndTriggerAutoPass] p_9eb7iiyf is AI, handled separately (ID: autopass_1767335455984_x6lyz)
[AI] AI player checking priority: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_3tgu9yec',
  phase: 'combat',
  step: 'end_combat',
  isAITurn: true,
  stackEmpty: true,
  priority: 'p_9eb7iiyf',
  hasPriority: false
}
[AI] AI does not have priority, skipping action
[AI] handleAIGameFlow: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_9eb7iiyf',
  phase: 'COMBAT',
  step: 'END_COMBAT',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: false,
  hasPriority: true
}
[AI] handleAIGameFlow: {
  gameId: 'game_mjwhphwz',
  playerId: 'p_3tgu9yec',
  phase: 'COMBAT',
  step: 'END_COMBAT',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: true,
  hasPriority: false
}
Restarting 'src/index.ts'
[Server] Initializing database...
[Server] Database initialized successfully.
[Socket] GameManager configured with IO server for rules engine integration
[Resolution] AI handler initialized
[Server] Running at http://127.0.0.1:3001
[CLI] Detected Windows PowerShell. If CLI commands are not working correctly,
[CLI] try using cmd.exe, Windows Terminal, or Git Bash instead.


  MTGEDH Server CLI - Type "help" for available commands


mtgedh> [Resolution] Priority management handler initialized
Socket connected: c7remfGVtXqKjmmEAAAB
[GameManager] Ensured game game_mjwhphwz using full rules engine (createInitialGameState)
[importDeckResolved] Importing 100 cards for player p_9eb7iiyf
[importDeckResolved] Mapped 100 cards. First card: Omnath, Locus of Mana (card_acf0cab3-da50-4561-8797-cd179af39216_bceb447f7a68348d)
[importDeckResolved] Library set for player p_9eb7iiyf. Final library size: 100
[importDeckResolved] Importing 100 cards for player p_3tgu9yec
[importDeckResolved] Mapped 100 cards. First card: Iroas, God of Victory (card_b4036bb7-835d-4690-aca1-1ab566776e9a_4542bcec42ba4968)
[importDeckResolved] Library set for player p_3tgu9yec. Final library size: 100
[setCommander] Initialized inCommandZone for p_9eb7iiyf: [ 'card_acf0cab3-da50-4561-8797-cd179af39216_bceb447f7a68348d' ]
[setCommander] Library size before commander removal: 100, Commander IDs to remove: [ 'card_acf0cab3-da50-4561-8797-cd179af39216_bceb447f7a68348d' ]
[setCommander] Found commander "Omnath, Locus of Mana" (card_acf0cab3-da50-4561-8797-cd179af39216_bceb447f7a68348d) in library at index 0
[setCommander] Removing 1 commander(s) from library at indices: [ 0 ] library size before: 100
[setCommander] Removed card at index 0: Omnath, Locus of Mana (card_acf0cab3-da50-4561-8797-cd179af39216_bceb447f7a68348d)
[setCommander] Library size after removal: 99
[setCommander] Updated zones[p_9eb7iiyf].libraryCount to 99
[setCommander] Initialized inCommandZone for p_3tgu9yec: [ 'card_b4036bb7-835d-4690-aca1-1ab566776e9a_4542bcec42ba4968' ]
[setCommander] Library size before commander removal: 100, Commander IDs to remove: [ 'card_b4036bb7-835d-4690-aca1-1ab566776e9a_4542bcec42ba4968' ]
[setCommander] Found commander "Iroas, God of Victory" (card_b4036bb7-835d-4690-aca1-1ab566776e9a_4542bcec42ba4968) in library at index 0
[setCommander] Removing 1 commander(s) from library at indices: [ 0 ] library size before: 100
[setCommander] Removed card at index 0: Iroas, God of Victory (card_b4036bb7-835d-4690-aca1-1ab566776e9a_4542bcec42ba4968)
[setCommander] Library size after removal: 99
[setCommander] Updated zones[p_3tgu9yec].libraryCount to 99
[importDeckResolved] Importing 100 cards for player p_2vckyop2
[importDeckResolved] Mapped 100 cards. First card: Myrel, Shield of Argive (e632ed57-bb00-4493-adef-7b4805edd7ea_mjwhpp5y_1_91449f06)
[importDeckResolved] Library set for player p_2vckyop2. Final library size: 100
[setCommander] Initialized inCommandZone for p_2vckyop2: [ 'e632ed57-bb00-4493-adef-7b4805edd7ea_mjwhpp5y_1_91449f06' ]
[setCommander] Library size before commander removal: 100, Commander IDs to remove: [ 'e632ed57-bb00-4493-adef-7b4805edd7ea_mjwhpp5y_1_91449f06' ]
[setCommander] Found commander "Myrel, Shield of Argive" (e632ed57-bb00-4493-adef-7b4805edd7ea_mjwhpp5y_1_91449f06) in library at index 0
[setCommander] Removing 1 commander(s) from library at indices: [ 0 ] library size before: 100
[setCommander] Removed card at index 0: Myrel, Shield of Argive (e632ed57-bb00-4493-adef-7b4805edd7ea_mjwhpp5y_1_91449f06)
[setCommander] Library size after removal: 99
[setCommander] Updated zones[p_2vckyop2].libraryCount to 99
2026-01-02T06:30:57.160Z [nextTurn] Advanced to player p_9eb7iiyf, phase=beginning, step=UPKEEP
2026-01-02T06:30:57.160Z [nextTurn] Checking if auto-pass should apply at upkeep
[priority] autoPassLoop starting - active players: p_2vckyop2, p_9eb7iiyf, p_3tgu9yec, autoPassEnabled: , currentPriority: p_9eb7iiyf, turnPlayer: p_9eb7iiyf
[priority] autoPassLoop - stopping at p_9eb7iiyf: auto-pass not enabled
2026-01-02T06:30:57.160Z [nextTurn] Auto-pass stopped at upkeep, player p_9eb7iiyf has priority
[calculateMaxLandsPerTurn] Calculating for player p_2vckyop2, battlefield has 0 permanents
[calculateMaxLandsPerTurn] Final result for p_2vckyop2: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_9eb7iiyf, battlefield has 0 permanents
[calculateMaxLandsPerTurn] Final result for p_9eb7iiyf: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_3tgu9yec, battlefield has 0 permanents
[calculateMaxLandsPerTurn] Final result for p_3tgu9yec: 1 lands per turn
[recalculateHandVisibility] Players with hand reveal effects: none
[calculateMaxLandsPerTurn] Calculating for player p_2vckyop2, battlefield has 1 permanents
[calculateMaxLandsPerTurn] Final result for p_2vckyop2: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_9eb7iiyf, battlefield has 1 permanents
[calculateMaxLandsPerTurn] Final result for p_9eb7iiyf: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_3tgu9yec, battlefield has 1 permanents
[calculateMaxLandsPerTurn] Final result for p_3tgu9yec: 1 lands per turn
[recalculateHandVisibility] Players with hand reveal effects: none
2026-01-02T06:30:57.178Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.178Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.179Z [nextStep] Current: beginning/UPKEEP
2026-01-02T06:30:57.179Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.179Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.179Z [nextStep] Advanced to phase=beginning, step=DRAW
playLand: card card_4912e4d0-b16a-4aa6-a583-3430d26bd591_a40ab357d3bde6a0 not found in hand for player p_3tgu9yec (may be replay)
2026-01-02T06:30:57.182Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.182Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.182Z [nextStep] Current: beginning/DRAW
2026-01-02T06:30:57.182Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.182Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.183Z [clearManaPool] Processed mana pools for all players
2026-01-02T06:30:57.183Z [nextStep] Advanced to phase=precombatMain, step=MAIN1
playLand: card card_834b27a0-dfd7-4f96-8cde-cacac4b24acc_3761f9fe01158c5a not found in hand for player p_9eb7iiyf (may be replay)
2026-01-02T06:30:57.183Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.183Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.183Z [nextStep] Current: precombatMain/MAIN1
2026-01-02T06:30:57.183Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.183Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.183Z [clearManaPool] Processed mana pools for all players
2026-01-02T06:30:57.183Z [nextStep] Advanced to phase=combat, step=BEGIN_COMBAT
[calculateMaxLandsPerTurn] Calculating for player p_2vckyop2, battlefield has 2 permanents
[calculateMaxLandsPerTurn] Final result for p_2vckyop2: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_9eb7iiyf, battlefield has 2 permanents
[calculateMaxLandsPerTurn] Final result for p_9eb7iiyf: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_3tgu9yec, battlefield has 2 permanents
[calculateMaxLandsPerTurn] Final result for p_3tgu9yec: 1 lands per turn
[recalculateHandVisibility] Players with hand reveal effects: none
2026-01-02T06:30:57.186Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.186Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.186Z [nextStep] Current: combat/BEGIN_COMBAT
2026-01-02T06:30:57.186Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.186Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.186Z [nextStep] Advanced to phase=combat, step=DECLARE_ATTACKERS
playLand: card card_c44f81ca-f72f-445c-8901-3a894a2a47f9_e16e0d5aede7f36f not found in hand for player p_3tgu9yec (may be replay)
2026-01-02T06:30:57.186Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.186Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.186Z [nextStep] Current: combat/DECLARE_ATTACKERS
2026-01-02T06:30:57.186Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.186Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.186Z [nextStep] Entering DECLARE_BLOCKERS, initialized blockersDeclaredBy array
2026-01-02T06:30:57.186Z [nextStep] Advanced to phase=combat, step=DECLARE_BLOCKERS
playLand: card card_a305e44f-4253-4754-b83f-1e34103d77b0_f9abb7acefdfb08b not found in hand for player p_9eb7iiyf (may be replay)
2026-01-02T06:30:57.186Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.186Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.186Z [nextStep] Current: combat/DECLARE_BLOCKERS
2026-01-02T06:30:57.186Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.186Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.186Z [COMBAT_STEP] ========== TRANSITIONING FROM DECLARE_BLOCKERS TO DAMAGE (no first strike) ==========
2026-01-02T06:30:57.186Z [COMBAT_STEP] ========== END DAMAGE STEP PROCESSING ==========
2026-01-02T06:30:57.187Z [nextStep] Advanced to phase=combat, step=DAMAGE
[calculateMaxLandsPerTurn] Calculating for player p_2vckyop2, battlefield has 3 permanents
[calculateMaxLandsPerTurn] Final result for p_2vckyop2: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_9eb7iiyf, battlefield has 3 permanents
[calculateMaxLandsPerTurn] Final result for p_9eb7iiyf: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_3tgu9yec, battlefield has 3 permanents
[calculateMaxLandsPerTurn] Final result for p_3tgu9yec: 1 lands per turn
[recalculateHandVisibility] Players with hand reveal effects: none
[resolveTopOfStack] Permanent Ghostly Prison entered battlefield under p_2vckyop2
[calculateMaxLandsPerTurn] Calculating for player p_2vckyop2, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_2vckyop2: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_9eb7iiyf, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_9eb7iiyf: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_3tgu9yec, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_3tgu9yec: 1 lands per turn
[recalculateHandVisibility] Players with hand reveal effects: none
[resolveTopOfStack] Reset priorityPassedBy after spell resolution
2026-01-02T06:30:57.193Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.193Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.193Z [nextStep] Current: combat/DAMAGE
2026-01-02T06:30:57.193Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.193Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.193Z [nextStep] Advanced to phase=combat, step=END_COMBAT
2026-01-02T06:30:57.194Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.194Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.194Z [nextStep] Current: combat/END_COMBAT
2026-01-02T06:30:57.194Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.194Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.194Z [clearManaPool] Processed mana pools for all players
2026-01-02T06:30:57.194Z [nextStep] Advanced to phase=postcombatMain, step=MAIN2
playLand: card card_c375a022-5b57-496d-a802-e4ea8376e9e4_85c80d57b136f430 not found in hand for player p_3tgu9yec (may be replay)
2026-01-02T06:30:57.194Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.194Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.194Z [nextStep] Current: postcombatMain/MAIN2
2026-01-02T06:30:57.194Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.194Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.194Z [clearManaPool] Processed mana pools for all players
2026-01-02T06:30:57.194Z [nextStep] Advanced to phase=ending, step=END
2026-01-02T06:30:57.195Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.195Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.195Z [nextStep] Current: ending/END
2026-01-02T06:30:57.195Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.195Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.195Z [nextStep] Advanced to phase=ending, step=CLEANUP
[calculateMaxLandsPerTurn] Calculating for player p_2vckyop2, battlefield has 5 permanents
[calculateMaxLandsPerTurn] Final result for p_2vckyop2: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_9eb7iiyf, battlefield has 5 permanents
[calculateMaxLandsPerTurn] Final result for p_9eb7iiyf: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_3tgu9yec, battlefield has 5 permanents
[calculateMaxLandsPerTurn] Final result for p_3tgu9yec: 1 lands per turn
[recalculateHandVisibility] Players with hand reveal effects: none
2026-01-02T06:30:57.195Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.195Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.195Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.195Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.195Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.195Z [nextStep] Advanced to phase=ending, step=CLEANUP
[resolveTopOfStack] Permanent Abzan Falconer entered battlefield under p_2vckyop2 (summoning sickness)
[calculateMaxLandsPerTurn] Calculating for player p_2vckyop2, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_2vckyop2: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_9eb7iiyf, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_9eb7iiyf: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_3tgu9yec, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_3tgu9yec: 1 lands per turn
[recalculateHandVisibility] Players with hand reveal effects: none
[resolveTopOfStack] Reset priorityPassedBy after spell resolution
2026-01-02T06:30:57.198Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.198Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.198Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.198Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.198Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.198Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.198Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.199Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.199Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.199Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.199Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.199Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.199Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.199Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.199Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.199Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.199Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.199Z [nextStep] Advanced to phase=ending, step=CLEANUP
[resolveTopOfStack] Permanent Sword of the Animist entered battlefield under p_3tgu9yec
[calculateMaxLandsPerTurn] Calculating for player p_2vckyop2, battlefield has 7 permanents
[calculateMaxLandsPerTurn] Final result for p_2vckyop2: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_9eb7iiyf, battlefield has 7 permanents
[calculateMaxLandsPerTurn] Final result for p_9eb7iiyf: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_3tgu9yec, battlefield has 7 permanents
[calculateMaxLandsPerTurn] Final result for p_3tgu9yec: 1 lands per turn
[recalculateHandVisibility] Players with hand reveal effects: none
[resolveTopOfStack] Reset priorityPassedBy after spell resolution
2026-01-02T06:30:57.200Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.200Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.200Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.200Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.200Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.200Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.200Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.200Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.200Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.200Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.200Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.200Z [nextStep] Advanced to phase=ending, step=CLEANUP
playLand: card card_a305e44f-4253-4754-b83f-1e34103d77b0_3c663a88f5daa9a2 not found in hand for player p_9eb7iiyf (may be replay)
2026-01-02T06:30:57.200Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.200Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.200Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.200Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.201Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.201Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.201Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.201Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.201Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.201Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.201Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.201Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.201Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.201Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.201Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.201Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.201Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.201Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.201Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.201Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.201Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.201Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.201Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.201Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.201Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.201Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.201Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.201Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.201Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.201Z [nextStep] Advanced to phase=ending, step=CLEANUP
[resolveTopOfStack] Permanent Seasoned Pyromancer entered battlefield under p_3tgu9yec (summoning sickness)
[resolveTopOfStack] Found 1 ETB trigger(s) for Seasoned Pyromancer
[resolveTopOfStack]  Seasoned Pyromancer's triggered ability (controlled by p_3tgu9yec): discard two cards, then draw two cards
[calculateMaxLandsPerTurn] Calculating for player p_2vckyop2, battlefield has 8 permanents
[calculateMaxLandsPerTurn] Final result for p_2vckyop2: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_9eb7iiyf, battlefield has 8 permanents
[calculateMaxLandsPerTurn] Final result for p_9eb7iiyf: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_3tgu9yec, battlefield has 8 permanents
[calculateMaxLandsPerTurn] Final result for p_3tgu9yec: 1 lands per turn
[recalculateHandVisibility] Players with hand reveal effects: none
[resolveTopOfStack] Reset priorityPassedBy after spell resolution
[resolveTopOfStack] Triggered ability from Seasoned Pyromancer resolved: discard two cards, then draw two cards
[executeTriggerEffect] Unhandled trigger effect: "discard two cards, then draw two cards" from Seasoned Pyromancer
2026-01-02T06:30:57.208Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.208Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.208Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.208Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.208Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.208Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.209Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.209Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.209Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.209Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.209Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.209Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.209Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.209Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.209Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.209Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.209Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.209Z [nextStep] Advanced to phase=ending, step=CLEANUP
[calculateMaxLandsPerTurn] Calculating for player p_2vckyop2, battlefield has 9 permanents
[calculateMaxLandsPerTurn] Final result for p_2vckyop2: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_9eb7iiyf, battlefield has 9 permanents
[calculateMaxLandsPerTurn] Final result for p_9eb7iiyf: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_3tgu9yec, battlefield has 9 permanents
[calculateMaxLandsPerTurn] Final result for p_3tgu9yec: 1 lands per turn
[recalculateHandVisibility] Players with hand reveal effects: none
2026-01-02T06:30:57.210Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.210Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.210Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.210Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.210Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.210Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.210Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.210Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.210Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.210Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.210Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.210Z [nextStep] Advanced to phase=ending, step=CLEANUP
[calculateMaxLandsPerTurn] Calculating for player p_2vckyop2, battlefield has 10 permanents
[calculateMaxLandsPerTurn] Final result for p_2vckyop2: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_9eb7iiyf, battlefield has 10 permanents
[calculateMaxLandsPerTurn] Final result for p_9eb7iiyf: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_3tgu9yec, battlefield has 10 permanents
[calculateMaxLandsPerTurn] Final result for p_3tgu9yec: 1 lands per turn
[recalculateHandVisibility] Players with hand reveal effects: none
[resolveTopOfStack] Permanent Keeper of the Accord entered battlefield under p_2vckyop2 (summoning sickness)
[calculateMaxLandsPerTurn] Calculating for player p_2vckyop2, battlefield has 11 permanents
[calculateMaxLandsPerTurn] Final result for p_2vckyop2: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_9eb7iiyf, battlefield has 11 permanents
[calculateMaxLandsPerTurn] Final result for p_9eb7iiyf: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_3tgu9yec, battlefield has 11 permanents
[calculateMaxLandsPerTurn] Final result for p_3tgu9yec: 1 lands per turn
[recalculateHandVisibility] Players with hand reveal effects: none
[resolveTopOfStack] Reset priorityPassedBy after spell resolution
2026-01-02T06:30:57.212Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.212Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.212Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.212Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.212Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.212Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.212Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.212Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.212Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.212Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.212Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.212Z [nextStep] Advanced to phase=ending, step=CLEANUP
[resolveTopOfStack] Permanent Selfless Spirit entered battlefield under p_3tgu9yec (summoning sickness)
[calculateMaxLandsPerTurn] Calculating for player p_2vckyop2, battlefield has 12 permanents
[calculateMaxLandsPerTurn] Final result for p_2vckyop2: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_9eb7iiyf, battlefield has 12 permanents
[calculateMaxLandsPerTurn] Final result for p_9eb7iiyf: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_3tgu9yec, battlefield has 12 permanents
[calculateMaxLandsPerTurn] Final result for p_3tgu9yec: 1 lands per turn
[recalculateHandVisibility] Players with hand reveal effects: none
[resolveTopOfStack] Reset priorityPassedBy after spell resolution
2026-01-02T06:30:57.214Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.214Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.214Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.214Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.214Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.214Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.214Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.214Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.214Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.214Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.214Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.214Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.214Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.214Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.214Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.214Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.214Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.214Z [nextStep] Advanced to phase=ending, step=CLEANUP
[applyEvent] Replaying castCommander event: { playerId: 'p_9eb7iiyf', commanderId: undefined }
[applyEvent] CRITICAL: castCommander event has undefined commanderId! {
  event: {
    type: 'castCommander',
    playerId: 'p_9eb7iiyf',
    cardId: 'card_acf0cab3-da50-4561-8797-cd179af39216_bceb447f7a68348d',
    cardName: 'Omnath, Locus of Mana',
    card: {
      id: 'card_acf0cab3-da50-4561-8797-cd179af39216_bceb447f7a68348d',
      name: 'Omnath, Locus of Mana',
      type_line: 'Legendary Creature  Elemental',
      oracle_text: "You don't lose unspent green mana as steps and phases end.\n" +
        'Omnath gets +1/+1 for each unspent green mana you have.',
      image_uris: [Object],
      mana_cost: '{2}{G}',
      power: '1',
      toughness: '1'
    },
    isAI: true
  },
  playerId: 'p_9eb7iiyf'
}
[applyEvent] Skipping castCommander event with undefined commanderId to prevent infinite loop
[resolveTopOfStack] Nature's Claim: Checking draw+treasure pattern. Match: false, drawThenDiscardMatch: false, eachPlayer: false
[resolveTopOfStack] Checking if Nature's Claim is a Join Forces spell...
[resolveTopOfStack] Nature's Claim is NOT a Join Forces spell (name: "nature's claim", has 'join forces': false)
[resolveTopOfStack] Checking if Nature's Claim is a Tempting Offer spell...
[resolveTopOfStack] Nature's Claim is NOT a Tempting Offer spell
[resolveTopOfStack] Spell Nature's Claim resolved and moved to graveyard for p_9eb7iiyf
[resolveTopOfStack] Reset priorityPassedBy after spell resolution
2026-01-02T06:30:57.220Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.220Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.220Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.220Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.220Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.221Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.221Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.221Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.221Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.221Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.221Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.221Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.221Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.221Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.221Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.221Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.221Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.221Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.221Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.221Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.221Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.221Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.221Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.221Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.221Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.221Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.221Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.221Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.221Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.221Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.221Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.221Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.221Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.221Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.221Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.221Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.222Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.222Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.222Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.222Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.222Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.222Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.222Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.222Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.222Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.222Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.222Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.222Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.222Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.222Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.222Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.222Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.222Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.222Z [nextStep] Advanced to phase=ending, step=CLEANUP
[calculateMaxLandsPerTurn] Calculating for player p_2vckyop2, battlefield has 13 permanents
[calculateMaxLandsPerTurn] Final result for p_2vckyop2: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_9eb7iiyf, battlefield has 13 permanents
[calculateMaxLandsPerTurn] Final result for p_9eb7iiyf: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_3tgu9yec, battlefield has 13 permanents
[calculateMaxLandsPerTurn] Final result for p_3tgu9yec: 1 lands per turn
[recalculateHandVisibility] Players with hand reveal effects: none
[resolveTopOfStack] Permanent Cathars' Crusade entered battlefield under p_2vckyop2
[calculateMaxLandsPerTurn] Calculating for player p_2vckyop2, battlefield has 14 permanents
[calculateMaxLandsPerTurn] Final result for p_2vckyop2: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_9eb7iiyf, battlefield has 14 permanents
[calculateMaxLandsPerTurn] Final result for p_9eb7iiyf: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_3tgu9yec, battlefield has 14 permanents
[calculateMaxLandsPerTurn] Final result for p_3tgu9yec: 1 lands per turn
[recalculateHandVisibility] Players with hand reveal effects: none
[resolveTopOfStack] Reset priorityPassedBy after spell resolution
2026-01-02T06:30:57.225Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.225Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.225Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.225Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.225Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.225Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.225Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.225Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.225Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.225Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.225Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.225Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.225Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.226Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.226Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.226Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.226Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.226Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.226Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.226Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.226Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.226Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.226Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.226Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.226Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.226Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.226Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.226Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.226Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.226Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.226Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.226Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.226Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.226Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.226Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.226Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.226Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.226Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.226Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.226Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.226Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.226Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.226Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.226Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.226Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.226Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.226Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.226Z [nextStep] Advanced to phase=ending, step=CLEANUP
playLand: card card_c44f81ca-f72f-445c-8901-3a894a2a47f9_3e2456e15159b6fb not found in hand for player p_3tgu9yec (may be replay)
2026-01-02T06:30:57.226Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.226Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.226Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.226Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.226Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.226Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.227Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.227Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.227Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.227Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.227Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.227Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.227Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.227Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.227Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.227Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.227Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.227Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.227Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.227Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.227Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.227Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.227Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.227Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.227Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.227Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.227Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.227Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.227Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.227Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.227Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.227Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.227Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.227Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.227Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.227Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.228Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.228Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.228Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.228Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.228Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.228Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.228Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.228Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.228Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.228Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.228Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.228Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.228Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.228Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.228Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.228Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.228Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.228Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.228Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.228Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.228Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.228Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.228Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.228Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.228Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.228Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.228Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.228Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.228Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.228Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.228Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.228Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.228Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.228Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.228Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.228Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.228Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.228Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.229Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.229Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.229Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.229Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.229Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.229Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.229Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.229Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.229Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.229Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.229Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.229Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.229Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.229Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.229Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.229Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.229Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.229Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.229Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.229Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.229Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.229Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.229Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.229Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.229Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.229Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.229Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.229Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.229Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.229Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.229Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.229Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.229Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.229Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.229Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.229Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.229Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.229Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.230Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.230Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.230Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.230Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.230Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.230Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.230Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.230Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.230Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.230Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.230Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.230Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.230Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.230Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.230Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.230Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.230Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.230Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.230Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.230Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.230Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.230Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.230Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.230Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.230Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.230Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.230Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.230Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.230Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.230Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.230Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.230Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.230Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.230Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.230Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.230Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.230Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.230Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.231Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.231Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.231Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.231Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.231Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.231Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.231Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.231Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.231Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.231Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.231Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.231Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.231Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.231Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.231Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.231Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.231Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.231Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.231Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.231Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.231Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.231Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.231Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.231Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.231Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.231Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.231Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.231Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.231Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.231Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.231Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.231Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.231Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.231Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.231Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.231Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.231Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.231Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.231Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.231Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.231Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.232Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.232Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.232Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.232Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.232Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.232Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.232Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.232Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.232Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.232Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.232Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.232Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.232Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.232Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.232Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.232Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.232Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.232Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.232Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.232Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.232Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.232Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.232Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.232Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.232Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.232Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.232Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.232Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.232Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.232Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.232Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.232Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.232Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.232Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.232Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.232Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.232Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.233Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.233Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.233Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.233Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.233Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.233Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.233Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.233Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.233Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.233Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.233Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.233Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.233Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.233Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.233Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.233Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.233Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.233Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.233Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.233Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.233Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.233Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.233Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.233Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.233Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.233Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.233Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.233Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.233Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.233Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.233Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.233Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.233Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.233Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.233Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.233Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.234Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.234Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.234Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.234Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.234Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.234Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.234Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.234Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.234Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.234Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.234Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.234Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.234Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.234Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.234Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.234Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.234Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.234Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.234Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.234Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.234Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.234Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.234Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.234Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.234Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.234Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.234Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.234Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.234Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.234Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.234Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.234Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.234Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.234Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.234Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.234Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.234Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.234Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.234Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.234Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.234Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.234Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.235Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.235Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.235Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.235Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.235Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.235Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.235Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.235Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.235Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.235Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.235Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.235Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.235Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.235Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.235Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.235Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.235Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.235Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.235Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.235Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.235Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.235Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.235Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.235Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.235Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.235Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.235Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.235Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.235Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.235Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.235Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.235Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.235Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.235Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.235Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.235Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.235Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.235Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.235Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.235Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.235Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.235Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.236Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.236Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.236Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.236Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.236Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.236Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.236Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.236Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.236Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.236Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.236Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.236Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.236Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.236Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.236Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.236Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.236Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.236Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.236Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.236Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.236Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.236Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.236Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.236Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.236Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.236Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.236Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.236Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.236Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.236Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.236Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.236Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.236Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.236Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.236Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.236Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.236Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.236Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.237Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.237Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.237Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.237Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.237Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.237Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.237Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.237Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.237Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.237Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.237Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.237Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.237Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.237Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.237Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.237Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.237Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.237Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.237Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.237Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.237Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.237Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.237Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.237Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.237Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.237Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.237Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.237Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.237Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.237Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.237Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.237Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.237Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.237Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.237Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.237Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.237Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.237Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.237Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.237Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.237Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.238Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.238Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.238Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.238Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.238Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.238Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.238Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.238Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.238Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.241Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.241Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.241Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.241Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.241Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.241Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.241Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.241Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.241Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.241Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.241Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.241Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.241Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.241Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.241Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.241Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.241Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.241Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.241Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.241Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.241Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.241Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.241Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.241Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.241Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.241Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.241Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.241Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.241Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.241Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.241Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.241Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.242Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.242Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.242Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.242Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.242Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.242Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.242Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.242Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.242Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.242Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.242Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.242Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.242Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.242Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.242Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.242Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.242Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.242Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.242Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.242Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.242Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.242Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.242Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.242Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.242Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.242Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.242Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.242Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.242Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.242Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.242Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.242Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.242Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.242Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.242Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.242Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.242Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.242Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.242Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.242Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.242Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.242Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.243Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.243Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.243Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.243Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.243Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.243Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.243Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.243Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.243Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.243Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.243Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.243Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.243Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.243Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.243Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.243Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.243Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.243Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.243Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.243Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.243Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.243Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.243Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.243Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.243Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.243Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.243Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.243Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.243Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.243Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.243Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.243Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.243Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.243Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.243Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.243Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.243Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.243Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.244Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.244Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.244Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.244Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.244Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.244Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.244Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.244Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.244Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.244Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.244Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.244Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.244Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.244Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.244Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.244Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.244Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.244Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.244Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.244Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.244Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.244Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.244Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.244Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.244Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.244Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.244Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.244Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.244Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.244Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.244Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.244Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.244Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.244Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.244Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.244Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.244Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.244Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.244Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.244Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.245Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.245Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.245Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.245Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.245Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.245Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.245Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.245Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.245Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.245Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.245Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.245Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.245Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.245Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.245Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.245Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.245Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.245Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.245Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.245Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.245Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.245Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.245Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.245Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.245Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.245Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.245Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.245Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.245Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.245Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.245Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.245Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.245Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.245Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.245Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.245Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.246Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.246Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.246Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.246Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.246Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.246Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.246Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.246Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.246Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.246Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.246Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.246Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.246Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.246Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.246Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.246Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.246Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.246Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.246Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.246Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.246Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.246Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.246Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.246Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.246Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.246Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.246Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.246Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.246Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.246Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.246Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.246Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.246Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.246Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.246Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.246Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.246Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.246Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.246Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.246Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.246Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.247Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.247Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.247Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.247Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.247Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.247Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.247Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.247Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.247Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.247Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.247Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.247Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.247Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.247Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.247Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.247Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.247Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.247Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.247Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.247Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.247Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.247Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.247Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.247Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.247Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.247Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.247Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.247Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.247Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.247Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.247Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.247Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.247Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.247Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.247Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.247Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.247Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.247Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.248Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.248Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.248Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.248Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.248Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.248Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.248Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.248Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.248Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.248Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.248Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.248Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.248Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.248Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.248Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.248Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.248Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.248Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.248Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.248Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.248Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.248Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.248Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.248Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.248Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.248Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.248Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.248Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.248Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.248Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.248Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.248Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.248Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.248Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.248Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.248Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.248Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.248Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.249Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.249Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.249Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.249Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.249Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.249Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.249Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.249Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.249Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.249Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.249Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.249Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.249Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.249Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.249Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.249Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.249Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.249Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.249Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.249Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.249Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.249Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.249Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.249Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.249Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.249Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.249Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.249Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.249Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.249Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.249Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.249Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.249Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.249Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.249Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.249Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.249Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.249Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.249Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.249Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.249Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.249Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.249Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.249Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.250Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.250Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.250Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.250Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.250Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.250Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.250Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.250Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.250Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.250Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.250Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.250Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.250Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.250Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.250Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.250Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.250Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.250Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.250Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.250Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.250Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.250Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.250Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.250Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.250Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.250Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.250Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.250Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.250Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.250Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.250Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.250Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.250Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.250Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.250Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.250Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.250Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.250Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.250Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.250Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.250Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.250Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.250Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.250Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.250Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.250Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.250Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.250Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.250Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.250Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.250Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.250Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.250Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.250Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.250Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.250Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.250Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.250Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.250Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.250Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.250Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.251Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.251Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.251Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.251Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.251Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.251Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.251Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.251Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.251Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.251Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.251Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.251Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.251Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.251Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.251Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.251Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.251Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.251Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.251Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.251Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.251Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.251Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.251Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.251Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.251Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.251Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.251Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.251Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.251Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.251Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.251Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.251Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.251Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.251Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.251Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.251Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.251Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.251Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.251Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.251Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.251Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.251Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.251Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.251Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.251Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.251Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.251Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.251Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.251Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.251Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.251Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.251Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.251Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.251Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.251Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.251Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.251Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.251Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.251Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.251Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.251Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.251Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.251Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.251Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.251Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.251Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.252Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.252Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.252Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.252Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.252Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.252Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.252Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.252Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.252Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.252Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.252Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.252Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.252Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.252Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.252Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.252Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.252Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.252Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.252Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.252Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.252Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.252Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.252Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.252Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.252Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.252Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.252Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.252Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.252Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.252Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.252Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.252Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.252Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.252Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.252Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.252Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.253Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.253Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.253Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.253Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.253Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.253Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.253Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.253Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.253Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.253Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.253Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.253Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.253Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.253Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.253Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.253Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.253Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.253Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.253Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.253Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.253Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.253Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.253Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.253Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.253Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.253Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.253Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.253Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.253Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.253Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.253Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.253Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.253Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.253Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.253Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.253Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.253Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.253Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.253Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.253Z [nextStep] Priority: p_3tgu9yec, Turn: p_9eb7iiyf
2026-01-02T06:30:57.253Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.253Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.254Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.254Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.254Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.254Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.254Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.254Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.254Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.254Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.254Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.254Z [nextStep] Priority: p_2vckyop2, Turn: p_9eb7iiyf
2026-01-02T06:30:57.254Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.254Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-01-02T06:30:57.254Z [nextStep] ========== CALLED ==========
2026-01-02T06:30:57.254Z [nextStep] Game: game_mjwhphwz
2026-01-02T06:30:57.254Z [nextStep] Current: ending/CLEANUP
2026-01-02T06:30:57.254Z [nextStep] Priority: p_9eb7iiyf, Turn: p_9eb7iiyf
2026-01-02T06:30:57.254Z [nextStep] Call stack:
        at applyEvent (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:757:9)
        at replay (D:\Git\MTGEDH\server\src\state\modules\applyEvent.ts:2006:7)
        at Object.replay (D:\Git\MTGEDH\server\src\state\index.ts:208:38)
        at GameManagerClass.ensureGame (D:\Git\MTGEDH\server\src\GameManager.ts:563:18)
2026-01-02T06:30:57.254Z [nextStep] Advanced to phase=ending, step=CLEANUP
[GameManager] ensureGame: replayed persisted events { gameId: 'game_mjwhphwz', count: 818 }
[GameManager] RulesBridge initialized for game game_mjwhphwz
[VIEW_FOR_DEBUG] {
  viewer: 'p_2vckyop2',
  stackLength: 0,
  stackItems: [],
  zones: {
    p_2vckyop2: { handCount: 6, firstKnown: [Array] },
    p_9eb7iiyf: { handCount: 5, firstKnown: [Array] },
    p_3tgu9yec: { handCount: 7, firstKnown: [Array] }
  }
}
[Automation] Auto-pass for turn disabled for p_2vckyop2 in game game_mjwhphwz
[Automation] Auto-pass for turn state in game game_mjwhphwz: {}
