[priority] Auto-passing for p_anwtvwn9 - no available actions
2026-02-11T04:01:21.841Z [executeAutoPass] passPriority result: changed=true, advanceStep=true, resolvedNow=false (ID: autopass_1770782481680_r224w)
2026-02-11T04:01:21.842Z [executeAutoPass] Advancing step after auto-pass for p_u47pxo6i (ID: autopass_1770782481680_r224w)
2026-02-11T04:01:21.842Z [nextStep] ========== CALLED ==========
2026-02-11T04:01:21.842Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:01:21.842Z [nextStep] Current: ending/END
2026-02-11T04:01:21.842Z [nextStep] Priority: p_anwtvwn9, Turn: p_u47pxo6i
2026-02-11T04:01:21.842Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at Timeout.executeAutoPass (D:\Git\MTGEDH\server\src\socket\util.ts:2058:31)
        at listOnTimeout (node:internal/timers:588:17)
        at process.processTimers (node:internal/timers:523:7)
2026-02-11T04:01:21.842Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-02-11T04:01:21.842Z [nextStep] Step CLEANUP does not grant priority (Rule 502.1/514.1)
2026-02-11T04:01:21.842Z [endTemporaryEffects] Cleared creaturesAttackedThisTurn tracking
2026-02-11T04:01:21.842Z [nextStep] Cleanup complete, advancing to next turn
2026-02-11T04:01:21.842Z [nextTurn] Reset planeswalker loyalty activation counters for player p_anwtvwn9
2026-02-11T04:01:21.842Z [nextTurn] Cleared autoPassForTurn flags for new turn
2026-02-11T04:01:21.842Z [nextTurn] Cleared noncreatureSpellsCastThisTurn for new turn
2026-02-11T04:01:21.842Z [nextTurn] Cleared spellsCastFromHandThisTurn for new turn
2026-02-11T04:01:21.842Z [nextTurn] Cleared spellsCastThisTurn for new turn
2026-02-11T04:01:21.842Z [nextTurn] Cleared playedCardFromExileThisTurn for new turn
2026-02-11T04:01:21.842Z [nextTurn] Advanced to player p_anwtvwn9, phase=beginning, step=UNTAP
[calculateMaxLandsPerTurn] Calculating for player p_anwtvwn9, battlefield has 3 permanents
[calculateMaxLandsPerTurn] Final result for p_anwtvwn9: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 3 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[recalculateHandVisibility] Players with hand reveal effects: none
2026-02-11T04:01:21.842Z [executeAutoPass] Cleared _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782481680_r224w)
2026-02-11T04:01:21.842Z [executeAutoPass] Broadcasting state after auto-pass (ID: autopass_1770782481680_r224w)
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 5, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_anwtvwn9, viewerId=p_anwtvwn9, match=true
[getPlayableCardIds] Player p_anwtvwn9: step=UNTAP, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Arcane Denial blocked - no valid targets
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Kynaios and Tiro of Meletis not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_anwtvwn9: step=UNTAP, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 5, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_anwtvwn9, viewerId=p_u47pxo6i, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
2026-02-11T04:01:21.848Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782481848_l5klz) ==========
2026-02-11T04:01:21.848Z [checkAndTriggerAutoPass] Priority: p_anwtvwn9, Phase: beginning, Step: UNTAP
2026-02-11T04:01:21.848Z [checkAndTriggerAutoPass] p_anwtvwn9 is AI, handled separately (ID: autopass_1770782481848_l5klz)
2026-02-11T04:01:21.848Z [executeAutoPass] Broadcast complete (ID: autopass_1770782481680_r224w)
2026-02-11T04:01:21.848Z [executeAutoPass] ========== EXECUTING for p_u47pxo6i (ID: autopass_1770782481687_5pedx) ==========
2026-02-11T04:01:21.848Z [executeAutoPass] Phase: beginning, Step: UNTAP
2026-02-11T04:01:21.848Z [executeAutoPass] Priority changed from p_u47pxo6i to p_anwtvwn9, aborting (ID: autopass_1770782481687_5pedx)
[Automation] Auto-pass for turn disabled for p_u47pxo6i in game game_mlhi50vs
[Automation] Auto-pass for turn state in game game_mlhi50vs: {}
[AI] handleAIGameFlow: { gameId: 'game_mlhi50vs',
  playerId: 'p_anwtvwn9',
  phase: 'BEGINNING',
  step: 'UNTAP',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: true,
  hasPriority: true }
[AI] AI player checking priority: { gameId: 'game_mlhi50vs',
  playerId: 'p_anwtvwn9',
  phase: 'beginning',
  step: 'untap',
  isAITurn: true,
  stackEmpty: true,
  priority: 'p_anwtvwn9',
  hasPriority: true }
[AI] AI has priority, proceeding with action
[AI] Beginning phase, step: untap - passing priority
[AI] Passing priority: { gameId: 'game_mlhi50vs', playerId: 'p_anwtvwn9' }
[AI] All players passed priority with empty stack, advancing step
2026-02-11T04:01:22.460Z [nextStep] ========== CALLED ==========
2026-02-11T04:01:22.460Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:01:22.460Z [nextStep] Current: beginning/UNTAP
2026-02-11T04:01:22.460Z [nextStep] Priority: p_anwtvwn9, Turn: p_anwtvwn9
2026-02-11T04:01:22.460Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4470:25)
        at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
        at async handleAIPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:2663:7)
2026-02-11T04:01:22.460Z [nextStep] Advanced to phase=beginning, step=UPKEEP
2026-02-11T04:01:22.461Z [nextStep] Granting priority to active player p_anwtvwn9 (step: UPKEEP, stack size: 0)
[canAct] p_anwtvwn9: step=UPKEEP, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
2026-02-11T04:01:22.461Z [nextStep] DEBUG - Turn Player p_anwtvwn9:
2026-02-11T04:01:22.461Z [nextStep]   Hand (7): Commander's Sphere, Kraum, Ludevic's Opus, Hour of Promise, Minds Aglow, Arcane Denial, Frontier Bivouac, Boros Garrison
2026-02-11T04:01:22.461Z [nextStep]   canAct: false, canRespond: false
2026-02-11T04:01:22.461Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_anwtvwn9
[canAct] p_anwtvwn9: step=UPKEEP, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[priority] autoPassLoop - checking p_anwtvwn9 (ACTIVE): canAct=false, stack.length=0, step=UPKEEP
[priority] Auto-passing for p_anwtvwn9 - no available actions
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_u47pxo6i (non-active): canAct=false, stack.length=0, step=UPKEEP
[priority] Auto-passing for p_u47pxo6i - no available actions
2026-02-11T04:01:22.461Z [nextStep] All players auto-passed after granting priority - caller should advance step
[AI] Advanced to next step for game game_mlhi50vs
[AI] Auto-pass detected after step advancement (iteration 1), advancing again
2026-02-11T04:01:22.461Z [nextStep] ========== CALLED ==========
2026-02-11T04:01:22.461Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:01:22.461Z [nextStep] Current: beginning/UPKEEP
2026-02-11T04:01:22.461Z [nextStep] Priority: p_anwtvwn9, Turn: p_anwtvwn9
2026-02-11T04:01:22.461Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4495:29)
        at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
        at async handleAIPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:2663:7)
2026-02-11T04:01:22.461Z [nextStep] Advanced to phase=beginning, step=DRAW
2026-02-11T04:01:22.461Z [nextStep] Drew 1 card(s) for p_anwtvwn9 at draw step (base: 1, additional: 0)
2026-02-11T04:01:22.461Z [nextStep] Granting priority to active player p_anwtvwn9 (step: DRAW, stack size: 0)
[canAct] p_anwtvwn9: step=DRAW, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
2026-02-11T04:01:22.462Z [nextStep] DEBUG - Turn Player p_anwtvwn9:
2026-02-11T04:01:22.462Z [nextStep]   Hand (8): Commander's Sphere, Kraum, Ludevic's Opus, Hour of Promise, Minds Aglow, Arcane Denial, Frontier Bivouac, Boros Garrison, Edric, Spymaster of Trest
2026-02-11T04:01:22.462Z [nextStep]   canAct: false, canRespond: false
2026-02-11T04:01:22.462Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_anwtvwn9
[canAct] p_anwtvwn9: step=DRAW, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[priority] autoPassLoop - checking p_anwtvwn9 (ACTIVE): canAct=false, stack.length=0, step=DRAW
[priority] Auto-passing for p_anwtvwn9 - no available actions
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_u47pxo6i (non-active): canAct=false, stack.length=0, step=DRAW
[priority] Auto-passing for p_u47pxo6i - no available actions
2026-02-11T04:01:22.462Z [nextStep] All players auto-passed after granting priority - caller should advance step
[AI] Auto-advanced to DRAW
[AI] Auto-pass detected after step advancement (iteration 2), advancing again
2026-02-11T04:01:22.462Z [nextStep] ========== CALLED ==========
2026-02-11T04:01:22.462Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:01:22.462Z [nextStep] Current: beginning/DRAW
2026-02-11T04:01:22.462Z [nextStep] Priority: p_anwtvwn9, Turn: p_anwtvwn9
2026-02-11T04:01:22.462Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4495:29)
        at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
        at async handleAIPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:2663:7)
2026-02-11T04:01:22.462Z [clearManaPool] Processed mana pools for all players
2026-02-11T04:01:22.462Z [nextStep] Advanced to phase=precombatMain, step=MAIN1
2026-02-11T04:01:22.462Z [nextStep] Checking precombat main triggers for p_anwtvwn9, found 0 trigger(s)
2026-02-11T04:01:22.462Z [nextStep] Granting priority to active player p_anwtvwn9 (step: MAIN1, stack size: 0)
[canAct] p_anwtvwn9: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_anwtvwn9, battlefield has 3 permanents
[calculateMaxLandsPerTurn] Final result for p_anwtvwn9: 1 lands per turn
[canPlayLand] p_anwtvwn9: Checking hand with 8 cards
[canPlayLand] p_anwtvwn9: Sample cards in hand: [Commander's Sphere(Artifact), Kraum, Ludevic's Opus(Legendary CreatureΓÇö), Hour of Promise(Sorcery)]
[canPlayLand] p_anwtvwn9: Found land in hand: Frontier Bivouac (Land) - returning TRUE
[canAct] p_anwtvwn9: Turn player in main phase can play land - returning TRUE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
2026-02-11T04:01:22.462Z [nextStep] DEBUG - Turn Player p_anwtvwn9:
2026-02-11T04:01:22.462Z [nextStep]   Hand (8): Commander's Sphere, Kraum, Ludevic's Opus, Hour of Promise, Minds Aglow, Arcane Denial, Frontier Bivouac, Boros Garrison, Edric, Spymaster of Trest
2026-02-11T04:01:22.462Z [nextStep]   canAct: true, canRespond: false
2026-02-11T04:01:22.462Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_anwtvwn9
[canAct] p_anwtvwn9: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_anwtvwn9, battlefield has 3 permanents
[calculateMaxLandsPerTurn] Final result for p_anwtvwn9: 1 lands per turn
[canPlayLand] p_anwtvwn9: Checking hand with 8 cards
[canPlayLand] p_anwtvwn9: Sample cards in hand: [Commander's Sphere(Artifact), Kraum, Ludevic's Opus(Legendary CreatureΓÇö), Hour of Promise(Sorcery)]
[canPlayLand] p_anwtvwn9: Found land in hand: Frontier Bivouac (Land) - returning TRUE
[canAct] p_anwtvwn9: Turn player in main phase can play land - returning TRUE
[priority] autoPassLoop - checking p_anwtvwn9 (ACTIVE): canAct=true, stack.length=0, step=MAIN1
[priority] autoPassLoop - stopping at p_anwtvwn9: active player can act
2026-02-11T04:01:22.462Z [nextStep] Auto-pass stopped, player p_anwtvwn9 has priority
[AI] Auto-advanced to MAIN1
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 8, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 5, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_anwtvwn9, viewerId=p_anwtvwn9, match=true
[getPlayableCardIds] Player p_anwtvwn9: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 8 cards in hand
[getPlayableCardIds] Card Commander's Sphere not playable - cannot pay cost {3} (after reduction: {"generic":3,"colors":{"W":0,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Kraum, Ludevic's Opus not playable - cannot pay cost {3}{U}{R} (after reduction: {"generic":3,"colors":{"W":0,"U":1,"B":0,"R":1,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Hour of Promise not playable - cannot pay cost {4}{G} (after reduction: {"generic":4,"colors":{"W":0,"U":0,"B":0,"R":0,"G":1,"C":0},"hasX":false})
[getPlayableCardIds] Card Minds Aglow not playable - cannot pay cost {U} (after reduction: {"generic":0,"colors":{"W":0,"U":1,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Arcane Denial blocked - no valid targets
[getPlayableCardIds] Card Edric, Spymaster of Trest not playable - cannot pay cost {1}{G}{U} (after reduction: {"generic":1,"colors":{"W":0,"U":1,"B":0,"R":0,"G":1,"C":0},"hasX":false})
[calculateMaxLandsPerTurn] Calculating for player p_anwtvwn9, battlefield has 3 permanents
[calculateMaxLandsPerTurn] Final result for p_anwtvwn9: 1 lands per turn
[getPlayableCardIds] Checking lands: landsPlayed=0, max=1
[getPlayableCardIds] Land Frontier Bivouac (card_48810b27-0646-4ff9-9d4d-c6d09b2e0267_92e044d452c6c9ff) is playable
[getPlayableCardIds] Land Boros Garrison (card_76ec3366-98f3-4903-8f7b-cfcdd60e3be1_84c74e1c210f0f33) is playable
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Kynaios and Tiro of Meletis not playable - canCastNow=true, canPay=false
[getPlayableCardIds] Returning 2 playable card(s): [ 'card_48810b27-0646-4ff9-9d4d-c6d09b2e0267_92e044d452c6c9ff', 'card_76ec3366-98f3-4903-8f7b-cfcdd60e3be1_84c74e1c210f0f33' ]
[normalizeViewForEmit] getPlayableCardIds returned 2 cards
[normalizeViewForEmit] Set view.playableCards with 2 cards
[canAct] p_anwtvwn9: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_anwtvwn9, battlefield has 3 permanents
[calculateMaxLandsPerTurn] Final result for p_anwtvwn9: 1 lands per turn
[canPlayLand] p_anwtvwn9: Checking hand with 8 cards
[canPlayLand] p_anwtvwn9: Sample cards in hand: [Commander's Sphere(Artifact), Kraum, Ludevic's Opus(Legendary CreatureΓÇö), Hour of Promise(Sorcery)]
[canPlayLand] p_anwtvwn9: Found land in hand: Frontier Bivouac (Land) - returning TRUE
[canAct] p_anwtvwn9: Turn player in main phase can play land - returning TRUE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=true, canRespond=false
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 8, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 5, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_anwtvwn9, viewerId=p_u47pxo6i, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
2026-02-11T04:01:22.469Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782482469_o42ow) ==========
2026-02-11T04:01:22.469Z [checkAndTriggerAutoPass] Priority: p_anwtvwn9, Phase: precombatMain, Step: MAIN1
2026-02-11T04:01:22.469Z [checkAndTriggerAutoPass] p_anwtvwn9 is AI, handled separately (ID: autopass_1770782482469_o42ow)
[AI] AI player checking priority: { gameId: 'game_mlhi50vs',
  playerId: 'p_anwtvwn9',
  phase: 'precombatmain',
  step: 'main1',
  isAITurn: true,
  stackEmpty: true,
  priority: 'p_anwtvwn9',
  hasPriority: true }
[AI] AI has priority, proceeding with action
[AI] Hand size 8 exceeds max 7 - will prioritize casting spells to avoid discarding
[AI] Playing land: Frontier Bivouac
[AI] Playing land: { gameId: 'game_mlhi50vs', playerId: 'p_anwtvwn9', cardId: 'card_48810b27-0646-4ff9-9d4d-c6d09b2e0267_92e044d452c6c9ff' }
[AI] Land enters tapped: frontier bivouac
[playLand] Frontier Bivouac enters tapped (ETB-tapped pattern detected)
[calculateMaxLandsPerTurn] Calculating for player p_anwtvwn9, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_anwtvwn9: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[recalculateHandVisibility] Players with hand reveal effects: none
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 5, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_anwtvwn9, viewerId=p_anwtvwn9, match=true
[getPlayableCardIds] Player p_anwtvwn9: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Commander's Sphere not playable - cannot pay cost {3} (after reduction: {"generic":3,"colors":{"W":0,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Kraum, Ludevic's Opus not playable - cannot pay cost {3}{U}{R} (after reduction: {"generic":3,"colors":{"W":0,"U":1,"B":0,"R":1,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Hour of Promise not playable - cannot pay cost {4}{G} (after reduction: {"generic":4,"colors":{"W":0,"U":0,"B":0,"R":0,"G":1,"C":0},"hasX":false})
[getPlayableCardIds] Card Minds Aglow not playable - cannot pay cost {U} (after reduction: {"generic":0,"colors":{"W":0,"U":1,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Arcane Denial blocked - no valid targets
[getPlayableCardIds] Card Edric, Spymaster of Trest not playable - cannot pay cost {1}{G}{U} (after reduction: {"generic":1,"colors":{"W":0,"U":1,"B":0,"R":0,"G":1,"C":0},"hasX":false})
[calculateMaxLandsPerTurn] Calculating for player p_anwtvwn9, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_anwtvwn9: 1 lands per turn
[getPlayableCardIds] Checking lands: landsPlayed=1, max=1
[getPlayableCardIds] Already played max lands this turn (1/1)
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Kynaios and Tiro of Meletis not playable - canCastNow=true, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_anwtvwn9: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_anwtvwn9, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_anwtvwn9: 1 lands per turn
[canPlayLand] p_anwtvwn9: Already played max lands this turn (1/1)
[canAct] p_anwtvwn9: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_anwtvwn9, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_anwtvwn9: 1 lands per turn
[canPlayLand] p_anwtvwn9: Already played max lands this turn (1/1)
[canAct] p_anwtvwn9: No sorcery-speed actions available in main phase - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 5, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_anwtvwn9, viewerId=p_u47pxo6i, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
2026-02-11T04:01:22.779Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782482779_bzlay) ==========
2026-02-11T04:01:22.779Z [checkAndTriggerAutoPass] Priority: p_anwtvwn9, Phase: precombatMain, Step: MAIN1
2026-02-11T04:01:22.779Z [checkAndTriggerAutoPass] p_anwtvwn9 is AI, handled separately (ID: autopass_1770782482779_bzlay)
[AI] handleAIGameFlow: { gameId: 'game_mlhi50vs',
  playerId: 'p_anwtvwn9',
  phase: 'PRECOMBATMAIN',
  step: 'MAIN1',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: true,
  hasPriority: true }
[AI] AI player checking priority: { gameId: 'game_mlhi50vs',
  playerId: 'p_anwtvwn9',
  phase: 'precombatmain',
  step: 'main1',
  isAITurn: true,
  stackEmpty: true,
  priority: 'p_anwtvwn9',
  hasPriority: true }
[AI] AI has priority, proceeding with action
[AI] Cannot play land: { isMainPhase: true, isAITurn: true, landsPlayed: 1, maxLands: 1, reason: 'already played max lands' }
[AI] handleAIGameFlow: { gameId: 'game_mlhi50vs',
  playerId: 'p_anwtvwn9',
  phase: 'PRECOMBATMAIN',
  step: 'MAIN1',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: true,
  hasPriority: true }
[AI] AI player checking priority: { gameId: 'game_mlhi50vs',
  playerId: 'p_anwtvwn9',
  phase: 'precombatmain',
  step: 'main1',
  isAITurn: true,
  stackEmpty: true,
  priority: 'p_anwtvwn9',
  hasPriority: true }
[AI] AI has priority, proceeding with action
[AI] Cannot play land: { isMainPhase: true, isAITurn: true, landsPlayed: 1, maxLands: 1, reason: 'already played max lands' }
[AI] AI player checking priority: { gameId: 'game_mlhi50vs',
  playerId: 'p_anwtvwn9',
  phase: 'precombatmain',
  step: 'main1',
  isAITurn: true,
  stackEmpty: true,
  priority: 'p_anwtvwn9',
  hasPriority: true }
[AI] AI has priority, proceeding with action
[AI] Cannot play land: { isMainPhase: true, isAITurn: true, landsPlayed: 1, maxLands: 1, reason: 'already played max lands' }
[AI] Cannot cast commander: Kynaios and Tiro of Meletis Cost: {"colors":{"W":1,"U":1,"B":0,"R":1,"G":1,"C":0},"generic":0,"hasX":false,"hybrid":[]} Available: {"white":0,"blue":0,"black":0,"red":0,"green":0,"colorless":0}
[AI] findCastableSpells: Checking 7 cards in hand
[AI] Available mana pool: { total: 0, colors: { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 } }
[AI] findCastableSpells: No castable spells. Reasons: [ `Commander's Sphere: need 3 mana (have 0), colors: {"W":0,"U":0,"B":0,"R":0,"G":0,"C":0}`,
  `Kraum, Ludevic's Opus: need 5 mana (have 0), colors: {"W":0,"U":1,"B":0,"R":1,"G":0,"C":0}`,
  'Hour of Promise: need 5 mana (have 0), colors: {"W":0,"U":0,"B":0,"R":0,"G":1,"C":0}',
  'Minds Aglow: need 1 mana (have 0), colors: {"W":0,"U":1,"B":0,"R":0,"G":0,"C":0}',
  'Arcane Denial: no valid targets (needs 1, found 0)' ]
[AI] ... and 1 more cards not castable
[AI] Main phase, no more actions, passing priority
[AI] Passing priority: { gameId: 'game_mlhi50vs', playerId: 'p_anwtvwn9' }
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_u47pxo6i, turnPlayer: p_anwtvwn9
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_u47pxo6i (non-active): canAct=false, stack.length=0, step=MAIN1
[priority] Auto-passing for p_u47pxo6i - no available actions
[AI] All players passed priority with empty stack, advancing step
2026-02-11T04:01:23.591Z [nextStep] ========== CALLED ==========
2026-02-11T04:01:23.591Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:01:23.591Z [nextStep] Current: precombatMain/MAIN1
2026-02-11T04:01:23.591Z [nextStep] Priority: p_anwtvwn9, Turn: p_anwtvwn9
2026-02-11T04:01:23.591Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4470:25)
        at async handleAIPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:2542:7)
        at async Timeout._onTimeout (D:\Git\MTGEDH\server\src\socket\ai.ts:988:7)
2026-02-11T04:01:23.591Z [clearManaPool] Processed mana pools for all players
2026-02-11T04:01:23.591Z [nextStep] Advanced to phase=combat, step=BEGIN_COMBAT
[getBeginningOfCombatTriggers] Total triggers for activePlayer=p_anwtvwn9: 0
2026-02-11T04:01:23.591Z [nextStep] Granting priority to active player p_anwtvwn9 (step: BEGIN_COMBAT, stack size: 0)
[canAct] p_anwtvwn9: step=BEGIN_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
2026-02-11T04:01:23.591Z [nextStep] DEBUG - Turn Player p_anwtvwn9:
2026-02-11T04:01:23.591Z [nextStep]   Hand (7): Commander's Sphere, Kraum, Ludevic's Opus, Hour of Promise, Minds Aglow, Arcane Denial, Boros Garrison, Edric, Spymaster of Trest
2026-02-11T04:01:23.591Z [nextStep]   canAct: false, canRespond: false
2026-02-11T04:01:23.591Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_anwtvwn9
[canAct] p_anwtvwn9: step=BEGIN_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[priority] autoPassLoop - checking p_anwtvwn9 (ACTIVE): canAct=false, stack.length=0, step=BEGIN_COMBAT
[priority] Auto-passing for p_anwtvwn9 - no available actions
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_u47pxo6i (non-active): canAct=false, stack.length=0, step=BEGIN_COMBAT
[priority] Auto-passing for p_u47pxo6i - no available actions
2026-02-11T04:01:23.591Z [nextStep] All players auto-passed after granting priority - caller should advance step
[AI] Advanced to next step for game game_mlhi50vs
[AI] Auto-pass detected after step advancement (iteration 1), advancing again
2026-02-11T04:01:23.591Z [nextStep] ========== CALLED ==========
2026-02-11T04:01:23.591Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:01:23.591Z [nextStep] Current: combat/BEGIN_COMBAT
2026-02-11T04:01:23.591Z [nextStep] Priority: p_anwtvwn9, Turn: p_anwtvwn9
2026-02-11T04:01:23.591Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4495:29)
        at async handleAIPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:2542:7)
        at async Timeout._onTimeout (D:\Git\MTGEDH\server\src\socket\ai.ts:988:7)
2026-02-11T04:01:23.591Z [nextStep] Advanced to phase=combat, step=DECLARE_ATTACKERS
2026-02-11T04:01:23.591Z [nextStep] Granting priority to active player p_anwtvwn9 (step: DECLARE_ATTACKERS, stack size:0)
[canAct] p_anwtvwn9: step=DECLARE_ATTACKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
2026-02-11T04:01:23.592Z [nextStep] DEBUG - Turn Player p_anwtvwn9:
2026-02-11T04:01:23.592Z [nextStep]   Hand (7): Commander's Sphere, Kraum, Ludevic's Opus, Hour of Promise, Minds Aglow, Arcane Denial, Boros Garrison, Edric, Spymaster of Trest
2026-02-11T04:01:23.592Z [nextStep]   canAct: false, canRespond: false
2026-02-11T04:01:23.592Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_anwtvwn9
[canAct] p_anwtvwn9: step=DECLARE_ATTACKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[priority] autoPassLoop - checking p_anwtvwn9 (ACTIVE): canAct=false, stack.length=0, step=DECLARE_ATTACKERS
[priority] Auto-passing for p_anwtvwn9 - no available actions
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_u47pxo6i (non-active): canAct=false, stack.length=0, step=DECLARE_ATTACKERS
[priority] Auto-passing for p_u47pxo6i - no available actions
2026-02-11T04:01:23.592Z [nextStep] All players auto-passed after granting priority - caller should advance step
[AI] Auto-advanced to DECLARE_ATTACKERS
[AI] Auto-pass detected after step advancement (iteration 2), advancing again
2026-02-11T04:01:23.592Z [nextStep] ========== CALLED ==========
2026-02-11T04:01:23.592Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:01:23.592Z [nextStep] Current: combat/DECLARE_ATTACKERS
2026-02-11T04:01:23.592Z [nextStep] Priority: p_anwtvwn9, Turn: p_anwtvwn9
2026-02-11T04:01:23.592Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4495:29)
        at async handleAIPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:2542:7)
        at async Timeout._onTimeout (D:\Git\MTGEDH\server\src\socket\ai.ts:988:7)
2026-02-11T04:01:23.592Z [nextStep] Entering DECLARE_BLOCKERS, initialized blockersDeclaredBy array
2026-02-11T04:01:23.592Z [nextStep] Advanced to phase=combat, step=DECLARE_BLOCKERS
2026-02-11T04:01:23.592Z [nextStep] Granting priority to active player p_anwtvwn9 (step: DECLARE_BLOCKERS, stack size: 0)
[canAct] p_anwtvwn9: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
2026-02-11T04:01:23.592Z [nextStep] DEBUG - Turn Player p_anwtvwn9:
2026-02-11T04:01:23.592Z [nextStep]   Hand (7): Commander's Sphere, Kraum, Ludevic's Opus, Hour of Promise, Minds Aglow, Arcane Denial, Boros Garrison, Edric, Spymaster of Trest
2026-02-11T04:01:23.592Z [nextStep]   canAct: false, canRespond: false
2026-02-11T04:01:23.592Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_anwtvwn9
[canAct] p_anwtvwn9: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[priority] autoPassLoop - checking p_anwtvwn9 (ACTIVE): canAct=false, stack.length=0, step=DECLARE_BLOCKERS
[priority] Auto-passing for p_anwtvwn9 - no available actions
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_u47pxo6i (non-active): canAct=false, stack.length=0, step=DECLARE_BLOCKERS
[priority] Auto-passing for p_u47pxo6i - no available actions
2026-02-11T04:01:23.592Z [nextStep] All players auto-passed after granting priority - caller should advance step
[AI] Auto-advanced to DECLARE_BLOCKERS
[AI] Auto-pass detected after step advancement (iteration 3), advancing again
2026-02-11T04:01:23.592Z [nextStep] ========== CALLED ==========
2026-02-11T04:01:23.592Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:01:23.592Z [nextStep] Current: combat/DECLARE_BLOCKERS
2026-02-11T04:01:23.592Z [nextStep] Priority: p_anwtvwn9, Turn: p_anwtvwn9
2026-02-11T04:01:23.592Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4495:29)
        at async handleAIPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:2542:7)
        at async Timeout._onTimeout (D:\Git\MTGEDH\server\src\socket\ai.ts:988:7)
2026-02-11T04:01:23.592Z [COMBAT_STEP] ========== TRANSITIONING FROM DECLARE_BLOCKERS TO DAMAGE (no first strike) ==========
2026-02-11T04:01:23.592Z [COMBAT_STEP] Calling dealCombatDamage...
2026-02-11T04:01:23.592Z [COMBAT_DAMAGE] ========== ENTERING dealCombatDamage (firstStrike=undefined) ==========
2026-02-11T04:01:23.592Z [COMBAT_DAMAGE] Found 0 attackers
2026-02-11T04:01:23.592Z [COMBAT_DAMAGE] No attackers, skipping combat damage
2026-02-11T04:01:23.592Z [COMBAT_STEP] dealCombatDamage completed successfully
2026-02-11T04:01:23.592Z [COMBAT_STEP] Result: damageToPlayers={}, creaturesDestroyed=0
2026-02-11T04:01:23.592Z [COMBAT_STEP] ========== END DAMAGE STEP PROCESSING ==========
2026-02-11T04:01:23.592Z [nextStep] Advanced to phase=combat, step=DAMAGE
2026-02-11T04:01:23.592Z [nextStep] Granting priority to active player p_anwtvwn9 (step: DAMAGE, stack size: 0)
[canAct] p_anwtvwn9: step=DAMAGE, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
2026-02-11T04:01:23.592Z [nextStep] DEBUG - Turn Player p_anwtvwn9:
2026-02-11T04:01:23.593Z [nextStep]   Hand (7): Commander's Sphere, Kraum, Ludevic's Opus, Hour of Promise, Minds Aglow, Arcane Denial, Boros Garrison, Edric, Spymaster of Trest
2026-02-11T04:01:23.593Z [nextStep]   canAct: false, canRespond: false
2026-02-11T04:01:23.593Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_anwtvwn9
[canAct] p_anwtvwn9: step=DAMAGE, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[priority] autoPassLoop - checking p_anwtvwn9 (ACTIVE): canAct=false, stack.length=0, step=DAMAGE
[priority] Auto-passing for p_anwtvwn9 - no available actions
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_u47pxo6i (non-active): canAct=false, stack.length=0, step=DAMAGE
[priority] Auto-passing for p_u47pxo6i - no available actions
2026-02-11T04:01:23.593Z [nextStep] All players auto-passed after granting priority - caller should advance step
[AI] Auto-advanced to DAMAGE
[AI] Auto-pass detected after step advancement (iteration 4), advancing again
2026-02-11T04:01:23.593Z [nextStep] ========== CALLED ==========
2026-02-11T04:01:23.593Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:01:23.593Z [nextStep] Current: combat/DAMAGE
2026-02-11T04:01:23.593Z [nextStep] Priority: p_anwtvwn9, Turn: p_anwtvwn9
2026-02-11T04:01:23.593Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4495:29)
        at async handleAIPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:2542:7)
        at async Timeout._onTimeout (D:\Git\MTGEDH\server\src\socket\ai.ts:988:7)
2026-02-11T04:01:23.593Z [nextStep] Advanced to phase=combat, step=END_COMBAT
2026-02-11T04:01:23.593Z [nextStep] Granting priority to active player p_anwtvwn9 (step: END_COMBAT, stack size: 0)
[canAct] p_anwtvwn9: step=END_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
2026-02-11T04:01:23.593Z [nextStep] DEBUG - Turn Player p_anwtvwn9:
2026-02-11T04:01:23.593Z [nextStep]   Hand (7): Commander's Sphere, Kraum, Ludevic's Opus, Hour of Promise, Minds Aglow, Arcane Denial, Boros Garrison, Edric, Spymaster of Trest
2026-02-11T04:01:23.593Z [nextStep]   canAct: false, canRespond: false
2026-02-11T04:01:23.593Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_anwtvwn9
[canAct] p_anwtvwn9: step=END_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[priority] autoPassLoop - checking p_anwtvwn9 (ACTIVE): canAct=false, stack.length=0, step=END_COMBAT
[priority] Auto-passing for p_anwtvwn9 - no available actions
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_u47pxo6i (non-active): canAct=false, stack.length=0, step=END_COMBAT
[priority] Auto-passing for p_u47pxo6i - no available actions
2026-02-11T04:01:23.593Z [nextStep] All players auto-passed after granting priority - caller should advance step
[AI] Auto-advanced to END_COMBAT
[AI] Auto-pass detected after step advancement (iteration 5), advancing again
2026-02-11T04:01:23.593Z [nextStep] ========== CALLED ==========
2026-02-11T04:01:23.593Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:01:23.593Z [nextStep] Current: combat/END_COMBAT
2026-02-11T04:01:23.593Z [nextStep] Priority: p_anwtvwn9, Turn: p_anwtvwn9
2026-02-11T04:01:23.593Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4495:29)
        at async handleAIPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:2542:7)
        at async Timeout._onTimeout (D:\Git\MTGEDH\server\src\socket\ai.ts:988:7)
2026-02-11T04:01:23.593Z [clearManaPool] Processed mana pools for all players
2026-02-11T04:01:23.593Z [nextStep] Advanced to phase=postcombatMain, step=MAIN2
2026-02-11T04:01:23.593Z [nextStep] Granting priority to active player p_anwtvwn9 (step: MAIN2, stack size: 0)
[canAct] p_anwtvwn9: step=MAIN2, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_anwtvwn9, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_anwtvwn9: 1 lands per turn
[canPlayLand] p_anwtvwn9: Already played max lands this turn (1/1)
[canAct] p_anwtvwn9: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_anwtvwn9, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_anwtvwn9: 1 lands per turn
[canPlayLand] p_anwtvwn9: Already played max lands this turn (1/1)
[canAct] p_anwtvwn9: No sorcery-speed actions available in main phase - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
2026-02-11T04:01:23.594Z [nextStep] DEBUG - Turn Player p_anwtvwn9:
2026-02-11T04:01:23.594Z [nextStep]   Hand (7): Commander's Sphere, Kraum, Ludevic's Opus, Hour of Promise, Minds Aglow, Arcane Denial, Boros Garrison, Edric, Spymaster of Trest
2026-02-11T04:01:23.594Z [nextStep]   canAct: false, canRespond: false
2026-02-11T04:01:23.594Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_anwtvwn9
[canAct] p_anwtvwn9: step=MAIN2, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_anwtvwn9, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_anwtvwn9: 1 lands per turn
[canPlayLand] p_anwtvwn9: Already played max lands this turn (1/1)
[canAct] p_anwtvwn9: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_anwtvwn9, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_anwtvwn9: 1 lands per turn
[canPlayLand] p_anwtvwn9: Already played max lands this turn (1/1)
[canAct] p_anwtvwn9: No sorcery-speed actions available in main phase - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[priority] autoPassLoop - checking p_anwtvwn9 (ACTIVE): canAct=false, stack.length=0, step=MAIN2
[priority] Auto-passing for p_anwtvwn9 - no available actions
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_u47pxo6i (non-active): canAct=false, stack.length=0, step=MAIN2
[priority] Auto-passing for p_u47pxo6i - no available actions
2026-02-11T04:01:23.594Z [nextStep] All players auto-passed after granting priority - caller should advance step
[AI] Auto-advanced to MAIN2
[AI] Auto-pass detected after step advancement (iteration 6), advancing again
2026-02-11T04:01:23.594Z [nextStep] ========== CALLED ==========
2026-02-11T04:01:23.594Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:01:23.594Z [nextStep] Current: postcombatMain/MAIN2
2026-02-11T04:01:23.594Z [nextStep] Priority: p_anwtvwn9, Turn: p_anwtvwn9
2026-02-11T04:01:23.594Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4495:29)
        at async handleAIPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:2542:7)
        at async Timeout._onTimeout (D:\Git\MTGEDH\server\src\socket\ai.ts:988:7)
2026-02-11T04:01:23.594Z [clearManaPool] Processed mana pools for all players
2026-02-11T04:01:23.594Z [nextStep] Advanced to phase=ending, step=END
2026-02-11T04:01:23.595Z [nextStep] Granting priority to active player p_anwtvwn9 (step: END, stack size: 0)
[canAct] p_anwtvwn9: step=END, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
2026-02-11T04:01:23.595Z [nextStep] DEBUG - Turn Player p_anwtvwn9:
2026-02-11T04:01:23.595Z [nextStep]   Hand (7): Commander's Sphere, Kraum, Ludevic's Opus, Hour of Promise, Minds Aglow, Arcane Denial, Boros Garrison, Edric, Spymaster of Trest
2026-02-11T04:01:23.595Z [nextStep]   canAct: false, canRespond: false
2026-02-11T04:01:23.595Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_anwtvwn9
[canAct] p_anwtvwn9: step=END, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[priority] autoPassLoop - checking p_anwtvwn9 (ACTIVE): canAct=false, stack.length=0, step=END
[priority] Auto-passing for p_anwtvwn9 - no available actions
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_u47pxo6i (non-active): canAct=false, stack.length=0, step=END
[priority] Auto-passing for p_u47pxo6i - no available actions
2026-02-11T04:01:23.595Z [nextStep] All players auto-passed after granting priority - caller should advance step
[AI] Auto-advanced to END
[AI] Auto-pass detected after step advancement (iteration 7), advancing again
2026-02-11T04:01:23.595Z [nextStep] ========== CALLED ==========
2026-02-11T04:01:23.595Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:01:23.595Z [nextStep] Current: ending/END
2026-02-11T04:01:23.595Z [nextStep] Priority: p_anwtvwn9, Turn: p_anwtvwn9
2026-02-11T04:01:23.595Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4495:29)
        at async handleAIPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:2542:7)
        at async Timeout._onTimeout (D:\Git\MTGEDH\server\src\socket\ai.ts:988:7)
2026-02-11T04:01:23.595Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-02-11T04:01:23.595Z [nextStep] Step CLEANUP does not grant priority (Rule 502.1/514.1)
2026-02-11T04:01:23.595Z [endTemporaryEffects] Cleared creaturesAttackedThisTurn tracking
2026-02-11T04:01:23.595Z [nextStep] Cleanup complete, advancing to next turn
2026-02-11T04:01:23.595Z [nextTurn] Reset planeswalker loyalty activation counters for player p_u47pxo6i
2026-02-11T04:01:23.595Z [nextTurn] Cleared autoPassForTurn flags for new turn
2026-02-11T04:01:23.595Z [nextTurn] Cleared noncreatureSpellsCastThisTurn for new turn
2026-02-11T04:01:23.595Z [nextTurn] Cleared spellsCastFromHandThisTurn for new turn
2026-02-11T04:01:23.595Z [nextTurn] Cleared spellsCastThisTurn for new turn
2026-02-11T04:01:23.595Z [nextTurn] Cleared playedCardFromExileThisTurn for new turn
2026-02-11T04:01:23.595Z [nextTurn] Advanced to player p_u47pxo6i, phase=beginning, step=UNTAP
[calculateMaxLandsPerTurn] Calculating for player p_anwtvwn9, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_anwtvwn9: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[recalculateHandVisibility] Players with hand reveal effects: none
[AI] Auto-advanced to UNTAP
[AI] Auto-pass loop stopping - human player p_u47pxo6i has priority
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 5, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 5, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=UNTAP, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 5 cards in hand
[getPlayableCardIds] Card Heidegger, Shinra Executive blocked - no valid targets
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_u47pxo6i: step=UNTAP, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-02-11T04:01:23.604Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782483604_95ks1) ==========
2026-02-11T04:01:23.604Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: beginning, Step: UNTAP
[canAct] p_u47pxo6i: step=UNTAP, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:01:23.604Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=true canAct=false (ID: autopass_1770782483604_95ks1)
2026-02-11T04:01:23.604Z [checkAndTriggerAutoPass] p_u47pxo6i CANNOT ACT - proceeding with auto-pass (ID: autopass_1770782483604_95ks1)
2026-02-11T04:01:23.604Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_u47pxo6i with 150ms delay (ID: autopass_1770782483604_95ks1)
[Automation] Auto-pass for turn disabled for p_u47pxo6i in game game_mlhi50vs
[Automation] Auto-pass for turn state in game game_mlhi50vs: {}
2026-02-11T04:01:23.757Z [executeAutoPass] ========== EXECUTING for p_u47pxo6i (ID: autopass_1770782483604_95ks1) ==========
2026-02-11T04:01:23.757Z [executeAutoPass] Phase: beginning, Step: UNTAP
[canAct] p_u47pxo6i: step=UNTAP, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:01:23.757Z [executeAutoPass] Re-check: p_u47pxo6i canAct=false (ID: autopass_1770782483604_95ks1)
2026-02-11T04:01:23.757Z [executeAutoPass] Proceeding with auto-pass for p_u47pxo6i (ID: autopass_1770782483604_95ks1)
2026-02-11T04:01:23.757Z [executeAutoPass] Set _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782483604_95ks1)
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_u47pxo6i
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_anwtvwn9 (non-active): canAct=false, stack.length=0, step=UNTAP
[priority] Auto-passing for p_anwtvwn9 - no available actions
2026-02-11T04:01:23.757Z [executeAutoPass] passPriority result: changed=true, advanceStep=true, resolvedNow=false (ID: autopass_1770782483604_95ks1)
2026-02-11T04:01:23.758Z [executeAutoPass] Advancing step after auto-pass for p_u47pxo6i (ID: autopass_1770782483604_95ks1)
2026-02-11T04:01:23.758Z [nextStep] ========== CALLED ==========
2026-02-11T04:01:23.758Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:01:23.758Z [nextStep] Current: beginning/UNTAP
2026-02-11T04:01:23.758Z [nextStep] Priority: p_anwtvwn9, Turn: p_u47pxo6i
2026-02-11T04:01:23.758Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at Timeout.executeAutoPass (D:\Git\MTGEDH\server\src\socket\util.ts:2058:31)
        at listOnTimeout (node:internal/timers:588:17)
        at process.processTimers (node:internal/timers:523:7)
2026-02-11T04:01:23.758Z [nextStep] Advanced to phase=beginning, step=UPKEEP
2026-02-11T04:01:23.758Z [nextStep] Granting priority to active player p_u47pxo6i (step: UPKEEP, stack size: 0)
[canAct] p_u47pxo6i: step=UPKEEP, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
2026-02-11T04:01:23.758Z [nextStep] DEBUG - Turn Player p_u47pxo6i:
2026-02-11T04:01:23.758Z [nextStep]   Hand (5): Helm of the Host, Horn of Gondor, SOLDIER Military Program, Heidegger, Shinra Executive, Ghostly Prison
2026-02-11T04:01:23.758Z [nextStep]   canAct: false, canRespond: false
2026-02-11T04:01:23.758Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_u47pxo6i, turnPlayer: p_u47pxo6i
[canAct] p_u47pxo6i: step=UPKEEP, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[priority] autoPassLoop - checking p_u47pxo6i (ACTIVE): canAct=false, stack.length=0, step=UPKEEP
[priority] Auto-passing for p_u47pxo6i - no available actions
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_anwtvwn9 (non-active): canAct=false, stack.length=0, step=UPKEEP
[priority] Auto-passing for p_anwtvwn9 - no available actions
2026-02-11T04:01:23.759Z [nextStep] All players auto-passed after granting priority - caller should advance step
2026-02-11T04:01:23.759Z [untapPermanentsForPlayer] Player p_u47pxo6i: untapped 2, stun counters removed 0, skipped (doesn't untap) 0
2026-02-11T04:01:23.759Z [executeAutoPass] Cleared _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782483604_95ks1)
2026-02-11T04:01:23.759Z [executeAutoPass] Broadcasting state after auto-pass (ID: autopass_1770782483604_95ks1)
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 5, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 5, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=UPKEEP, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 2, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 2
[getPlayableCardIds] Checking 5 cards in hand
[getPlayableCardIds] Card Heidegger, Shinra Executive blocked - no valid targets
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_u47pxo6i: step=UPKEEP, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-02-11T04:01:23.766Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782483766_9cxfk) ==========
2026-02-11T04:01:23.766Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: beginning, Step: UPKEEP
[canAct] p_u47pxo6i: step=UPKEEP, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:01:23.766Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=true canAct=false (ID: autopass_1770782483766_9cxfk)
2026-02-11T04:01:23.766Z [checkAndTriggerAutoPass] p_u47pxo6i CANNOT ACT - proceeding with auto-pass (ID: autopass_1770782483766_9cxfk)
2026-02-11T04:01:23.766Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_u47pxo6i with 150ms delay (ID: autopass_1770782483766_9cxfk)
2026-02-11T04:01:23.766Z [executeAutoPass] Broadcast complete (ID: autopass_1770782483604_95ks1)
[AI] Cannot cast commander: Kynaios and Tiro of Meletis Cost: {"colors":{"W":1,"U":1,"B":0,"R":1,"G":1,"C":0},"generic":0,"hasX":false,"hybrid":[]} Available: {"white":0,"blue":0,"black":0,"red":0,"green":0,"colorless":0}
[AI] findCastableSpells: Checking 7 cards in hand
[AI] Available mana pool: { total: 0, colors: { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 } }
[AI] findCastableSpells: No castable spells. Reasons: [ `Commander's Sphere: need 3 mana (have 0), colors: {"W":0,"U":0,"B":0,"R":0,"G":0,"C":0}`,
  `Kraum, Ludevic's Opus: need 5 mana (have 0), colors: {"W":0,"U":1,"B":0,"R":1,"G":0,"C":0}`,
  'Hour of Promise: need 5 mana (have 0), colors: {"W":0,"U":0,"B":0,"R":0,"G":1,"C":0}',
  'Minds Aglow: need 1 mana (have 0), colors: {"W":0,"U":1,"B":0,"R":0,"G":0,"C":0}',
  'Arcane Denial: no valid targets (needs 1, found 0)' ]
[AI] ... and 1 more cards not castable
[AI] Main phase, no more actions, passing priority
[AI] Passing priority: { gameId: 'game_mlhi50vs', playerId: 'p_anwtvwn9' }
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 5, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 5, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=UPKEEP, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 2, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 2
[getPlayableCardIds] Checking 5 cards in hand
[getPlayableCardIds] Card Heidegger, Shinra Executive blocked - no valid targets
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_u47pxo6i: step=UPKEEP, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-02-11T04:01:23.811Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782483811_4vku2) ==========
2026-02-11T04:01:23.811Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: beginning, Step: UPKEEP
[canAct] p_u47pxo6i: step=UPKEEP, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:01:23.811Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=true canAct=false (ID: autopass_1770782483811_4vku2)
2026-02-11T04:01:23.811Z [checkAndTriggerAutoPass] p_u47pxo6i CANNOT ACT - proceeding with auto-pass (ID: autopass_1770782483811_4vku2)
2026-02-11T04:01:23.811Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_u47pxo6i with 150ms delay (ID: autopass_1770782483811_4vku2)
[AI] Cannot cast commander: Kynaios and Tiro of Meletis Cost: {"colors":{"W":1,"U":1,"B":0,"R":1,"G":1,"C":0},"generic":0,"hasX":false,"hybrid":[]} Available: {"white":0,"blue":0,"black":0,"red":0,"green":0,"colorless":0}
[AI] findCastableSpells: Checking 7 cards in hand
[AI] Available mana pool: { total: 0, colors: { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 } }
[AI] findCastableSpells: No castable spells. Reasons: [ `Commander's Sphere: need 3 mana (have 0), colors: {"W":0,"U":0,"B":0,"R":0,"G":0,"C":0}`,
  `Kraum, Ludevic's Opus: need 5 mana (have 0), colors: {"W":0,"U":1,"B":0,"R":1,"G":0,"C":0}`,
  'Hour of Promise: need 5 mana (have 0), colors: {"W":0,"U":0,"B":0,"R":0,"G":1,"C":0}',
  'Minds Aglow: need 1 mana (have 0), colors: {"W":0,"U":1,"B":0,"R":0,"G":0,"C":0}',
  'Arcane Denial: no valid targets (needs 1, found 0)' ]
[AI] ... and 1 more cards not castable
[AI] Main phase, no more actions, passing priority
[AI] Passing priority: { gameId: 'game_mlhi50vs', playerId: 'p_anwtvwn9' }
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 5, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 5, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=UPKEEP, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 2, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 2
[getPlayableCardIds] Checking 5 cards in hand
[getPlayableCardIds] Card Heidegger, Shinra Executive blocked - no valid targets
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_u47pxo6i: step=UPKEEP, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-02-11T04:01:23.903Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782483903_ypqeh) ==========
2026-02-11T04:01:23.903Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: beginning, Step: UPKEEP
[canAct] p_u47pxo6i: step=UPKEEP, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:01:23.903Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=true canAct=false (ID: autopass_1770782483903_ypqeh)
2026-02-11T04:01:23.903Z [checkAndTriggerAutoPass] p_u47pxo6i CANNOT ACT - proceeding with auto-pass (ID: autopass_1770782483903_ypqeh)
2026-02-11T04:01:23.903Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_u47pxo6i with 150ms delay (ID: autopass_1770782483903_ypqeh)
2026-02-11T04:01:23.926Z [executeAutoPass] ========== EXECUTING for p_u47pxo6i (ID: autopass_1770782483766_9cxfk) ==========
2026-02-11T04:01:23.926Z [executeAutoPass] Phase: beginning, Step: UPKEEP
[canAct] p_u47pxo6i: step=UPKEEP, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:01:23.927Z [executeAutoPass] Re-check: p_u47pxo6i canAct=false (ID: autopass_1770782483766_9cxfk)
2026-02-11T04:01:23.927Z [executeAutoPass] Proceeding with auto-pass for p_u47pxo6i (ID: autopass_1770782483766_9cxfk)
2026-02-11T04:01:23.927Z [executeAutoPass] Set _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782483766_9cxfk)
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_u47pxo6i
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_anwtvwn9 (non-active): canAct=false, stack.length=0, step=UPKEEP
[priority] Auto-passing for p_anwtvwn9 - no available actions
2026-02-11T04:01:23.927Z [executeAutoPass] passPriority result: changed=true, advanceStep=true, resolvedNow=false (ID: autopass_1770782483766_9cxfk)
2026-02-11T04:01:23.927Z [executeAutoPass] Advancing step after auto-pass for p_u47pxo6i (ID: autopass_1770782483766_9cxfk)
2026-02-11T04:01:23.927Z [nextStep] ========== CALLED ==========
2026-02-11T04:01:23.927Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:01:23.927Z [nextStep] Current: beginning/UPKEEP
2026-02-11T04:01:23.927Z [nextStep] Priority: p_anwtvwn9, Turn: p_u47pxo6i
2026-02-11T04:01:23.927Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at Timeout.executeAutoPass (D:\Git\MTGEDH\server\src\socket\util.ts:2058:31)
        at listOnTimeout (node:internal/timers:588:17)
        at process.processTimers (node:internal/timers:523:7)
2026-02-11T04:01:23.927Z [nextStep] Advanced to phase=beginning, step=DRAW
2026-02-11T04:01:23.927Z [nextStep] Drew 1 card(s) for p_u47pxo6i at draw step (base: 1, additional: 0)
2026-02-11T04:01:23.927Z [nextStep] Granting priority to active player p_u47pxo6i (step: DRAW, stack size: 0)
[canAct] p_u47pxo6i: step=DRAW, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
2026-02-11T04:01:23.928Z [nextStep] DEBUG - Turn Player p_u47pxo6i:
2026-02-11T04:01:23.928Z [nextStep]   Hand (6): Helm of the Host, Horn of Gondor, SOLDIER Military Program, Heidegger, Shinra Executive, Ghostly Prison, Plains
2026-02-11T04:01:23.928Z [nextStep]   canAct: false, canRespond: false
2026-02-11T04:01:23.928Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_u47pxo6i, turnPlayer: p_u47pxo6i
[canAct] p_u47pxo6i: step=DRAW, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[priority] autoPassLoop - checking p_u47pxo6i (ACTIVE): canAct=false, stack.length=0, step=DRAW
[priority] Auto-passing for p_u47pxo6i - no available actions
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_anwtvwn9 (non-active): canAct=false, stack.length=0, step=DRAW
[priority] Auto-passing for p_anwtvwn9 - no available actions
2026-02-11T04:01:23.928Z [nextStep] All players auto-passed after granting priority - caller should advance step
2026-02-11T04:01:23.928Z [executeAutoPass] Cleared _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782483766_9cxfk)
2026-02-11T04:01:23.928Z [executeAutoPass] Broadcasting state after auto-pass (ID: autopass_1770782483766_9cxfk)
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 6, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 6, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=DRAW, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 2, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 2
[getPlayableCardIds] Checking 6 cards in hand
[getPlayableCardIds] Card Heidegger, Shinra Executive blocked - no valid targets
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_u47pxo6i: step=DRAW, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-02-11T04:01:23.935Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782483935_9fnym) ==========
2026-02-11T04:01:23.935Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: beginning, Step: DRAW
[canAct] p_u47pxo6i: step=DRAW, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:01:23.935Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=true canAct=false (ID: autopass_1770782483935_9fnym)
2026-02-11T04:01:23.935Z [checkAndTriggerAutoPass] p_u47pxo6i CANNOT ACT - proceeding with auto-pass (ID: autopass_1770782483935_9fnym)
2026-02-11T04:01:23.935Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_u47pxo6i with 150ms delay (ID: autopass_1770782483935_9fnym)
2026-02-11T04:01:23.935Z [executeAutoPass] Broadcast complete (ID: autopass_1770782483766_9cxfk)
2026-02-11T04:01:23.973Z [executeAutoPass] ========== EXECUTING for p_u47pxo6i (ID: autopass_1770782483811_4vku2) ==========
2026-02-11T04:01:23.973Z [executeAutoPass] Phase: beginning, Step: DRAW
[canAct] p_u47pxo6i: step=DRAW, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:01:23.973Z [executeAutoPass] Re-check: p_u47pxo6i canAct=false (ID: autopass_1770782483811_4vku2)
2026-02-11T04:01:23.973Z [executeAutoPass] Proceeding with auto-pass for p_u47pxo6i (ID: autopass_1770782483811_4vku2)
2026-02-11T04:01:23.973Z [executeAutoPass] Set _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782483811_4vku2)
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_u47pxo6i
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_anwtvwn9 (non-active): canAct=false, stack.length=0, step=DRAW
[priority] Auto-passing for p_anwtvwn9 - no available actions
2026-02-11T04:01:23.973Z [executeAutoPass] passPriority result: changed=true, advanceStep=true, resolvedNow=false (ID: autopass_1770782483811_4vku2)
2026-02-11T04:01:23.973Z [executeAutoPass] Advancing step after auto-pass for p_u47pxo6i (ID: autopass_1770782483811_4vku2)
2026-02-11T04:01:23.974Z [nextStep] ========== CALLED ==========
2026-02-11T04:01:23.974Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:01:23.974Z [nextStep] Current: beginning/DRAW
2026-02-11T04:01:23.974Z [nextStep] Priority: p_anwtvwn9, Turn: p_u47pxo6i
2026-02-11T04:01:23.974Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at Timeout.executeAutoPass (D:\Git\MTGEDH\server\src\socket\util.ts:2058:31)
        at listOnTimeout (node:internal/timers:588:17)
        at process.processTimers (node:internal/timers:523:7)
2026-02-11T04:01:23.974Z [clearManaPool] Processed mana pools for all players
2026-02-11T04:01:23.974Z [nextStep] Advanced to phase=precombatMain, step=MAIN1
2026-02-11T04:01:23.974Z [nextStep] Checking precombat main triggers for p_u47pxo6i, found 0 trigger(s)
2026-02-11T04:01:23.974Z [nextStep] Granting priority to active player p_u47pxo6i (step: MAIN1, stack size: 0)
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Checking hand with 6 cards
[canPlayLand] p_u47pxo6i: Sample cards in hand: [Helm of the Host(Legendary Artifact ΓÇö), Horn of Gondor(Legendary Artifact), SOLDIER Military Program(Enchantment)]
[canPlayLand] p_u47pxo6i: Found land in hand: Plains (Basic Land ΓÇö Plains) - returning TRUE
[canAct] p_u47pxo6i: Turn player in main phase can play land - returning TRUE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
2026-02-11T04:01:23.974Z [nextStep] DEBUG - Turn Player p_u47pxo6i:
2026-02-11T04:01:23.974Z [nextStep]   Hand (6): Helm of the Host, Horn of Gondor, SOLDIER Military Program, Heidegger, Shinra Executive, Ghostly Prison, Plains
2026-02-11T04:01:23.974Z [nextStep]   canAct: true, canRespond: false
2026-02-11T04:01:23.974Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_u47pxo6i, turnPlayer: p_u47pxo6i
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Checking hand with 6 cards
[canPlayLand] p_u47pxo6i: Sample cards in hand: [Helm of the Host(Legendary Artifact ΓÇö), Horn of Gondor(Legendary Artifact), SOLDIER Military Program(Enchantment)]
[canPlayLand] p_u47pxo6i: Found land in hand: Plains (Basic Land ΓÇö Plains) - returning TRUE
[canAct] p_u47pxo6i: Turn player in main phase can play land - returning TRUE
[priority] autoPassLoop - checking p_u47pxo6i (ACTIVE): canAct=true, stack.length=0, step=MAIN1
[priority] autoPassLoop - stopping at p_u47pxo6i: active player can act
2026-02-11T04:01:23.974Z [nextStep] Auto-pass stopped, player p_u47pxo6i has priority
2026-02-11T04:01:23.974Z [executeAutoPass] Cleared _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782483811_4vku2)
2026-02-11T04:01:23.974Z [executeAutoPass] Broadcasting state after auto-pass (ID: autopass_1770782483811_4vku2)
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 6, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 6, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 2, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 2
[getPlayableCardIds] Checking 6 cards in hand
[getPlayableCardIds] Card Helm of the Host not playable - cannot pay cost {4} (after reduction: {"generic":4,"colors":{"W":0,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Horn of Gondor not playable - cannot pay cost {3} (after reduction: {"generic":3,"colors":{"W":0,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card SOLDIER Military Program not playable - cannot pay cost {2}{W} (after reduction: {"generic":2,"colors":{"W":1,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Heidegger, Shinra Executive blocked - no valid targets
[getPlayableCardIds] Card Ghostly Prison not playable - cannot pay cost {2}{W} (after reduction: {"generic":2,"colors":{"W":1,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[getPlayableCardIds] Checking lands: landsPlayed=0, max=1
[getPlayableCardIds] Land Plains (3a438199-54f8-4702-81cf-a9d42e7cd9f1_mlhi5a9m_2m_96422584) is playable
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=true, canPay=false
[getPlayableCardIds] Returning 1 playable card(s): [ '3a438199-54f8-4702-81cf-a9d42e7cd9f1_mlhi5a9m_2m_96422584' ]
[normalizeViewForEmit] getPlayableCardIds returned 1 cards
[normalizeViewForEmit] Set view.playableCards with 1 cards
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Checking hand with 6 cards
[canPlayLand] p_u47pxo6i: Sample cards in hand: [Helm of the Host(Legendary Artifact ΓÇö), Horn of Gondor(Legendary Artifact), SOLDIER Military Program(Enchantment)]
[canPlayLand] p_u47pxo6i: Found land in hand: Plains (Basic Land ΓÇö Plains) - returning TRUE
[canAct] p_u47pxo6i: Turn player in main phase can play land - returning TRUE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=true, canRespond=false
2026-02-11T04:01:23.981Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782483981_x75o2) ==========
2026-02-11T04:01:23.981Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: precombatMain, Step: MAIN1
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Checking hand with 6 cards
[canPlayLand] p_u47pxo6i: Sample cards in hand: [Helm of the Host(Legendary Artifact ΓÇö), Horn of Gondor(Legendary Artifact), SOLDIER Military Program(Enchantment)]
[canPlayLand] p_u47pxo6i: Found land in hand: Plains (Basic Land ΓÇö Plains) - returning TRUE
[canAct] p_u47pxo6i: Turn player in main phase can play land - returning TRUE
2026-02-11T04:01:23.981Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=true canAct=true (ID: autopass_1770782483981_x75o2)
2026-02-11T04:01:23.981Z [checkAndTriggerAutoPass] p_u47pxo6i CAN ACT - returning early, NO auto-pass (ID: autopass_1770782483981_x75o2)
2026-02-11T04:01:23.981Z [executeAutoPass] Broadcast complete (ID: autopass_1770782483811_4vku2)
2026-02-11T04:01:24.067Z [executeAutoPass] ========== EXECUTING for p_u47pxo6i (ID: autopass_1770782483903_ypqeh) ==========
2026-02-11T04:01:24.067Z [executeAutoPass] Phase: precombatMain, Step: MAIN1
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Checking hand with 6 cards
[canPlayLand] p_u47pxo6i: Sample cards in hand: [Helm of the Host(Legendary Artifact ΓÇö), Horn of Gondor(Legendary Artifact), SOLDIER Military Program(Enchantment)]
[canPlayLand] p_u47pxo6i: Found land in hand: Plains (Basic Land ΓÇö Plains) - returning TRUE
[canAct] p_u47pxo6i: Turn player in main phase can play land - returning TRUE
2026-02-11T04:01:24.067Z [executeAutoPass] Re-check: p_u47pxo6i canAct=true (ID: autopass_1770782483903_ypqeh)
2026-02-11T04:01:24.067Z [executeAutoPass] Player p_u47pxo6i CAN NOW ACT - canceling auto-pass (ID: autopass_1770782483903_ypqeh)
2026-02-11T04:01:24.098Z [executeAutoPass] ========== EXECUTING for p_u47pxo6i (ID: autopass_1770782483935_9fnym) ==========
2026-02-11T04:01:24.098Z [executeAutoPass] Phase: precombatMain, Step: MAIN1
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Checking hand with 6 cards
[canPlayLand] p_u47pxo6i: Sample cards in hand: [Helm of the Host(Legendary Artifact ΓÇö), Horn of Gondor(Legendary Artifact), SOLDIER Military Program(Enchantment)]
[canPlayLand] p_u47pxo6i: Found land in hand: Plains (Basic Land ΓÇö Plains) - returning TRUE
[canAct] p_u47pxo6i: Turn player in main phase can play land - returning TRUE
2026-02-11T04:01:24.098Z [executeAutoPass] Re-check: p_u47pxo6i canAct=true (ID: autopass_1770782483935_9fnym)
2026-02-11T04:01:24.098Z [executeAutoPass] Player p_u47pxo6i CAN NOW ACT - canceling auto-pass (ID: autopass_1770782483935_9fnym)
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 4 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[playLand] Player p_u47pxo6i has played 0 lands this turn, max is 1
[calculateMaxLandsPerTurn] Calculating for player p_anwtvwn9, battlefield has 5 permanents
[calculateMaxLandsPerTurn] Final result for p_anwtvwn9: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 5 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[recalculateHandVisibility] Players with hand reveal effects: none
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 5, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 5, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 3, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 3
[getPlayableCardIds] Checking 5 cards in hand
[getPlayableCardIds] Card Helm of the Host not playable - cannot pay cost {4} (after reduction: {"generic":4,"colors":{"W":0,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Horn of Gondor (b14eaeec-d7ce-462a-90d3-2ae5ff605fdb_mlhi5a9m_17_25ae84d4) is playable
[getPlayableCardIds] Card SOLDIER Military Program (dddad2c2-bd19-42bd-aad6-bbf23ccef269_mlhi5a9m_x_1fe85cff) is playable
[getPlayableCardIds] Card Heidegger, Shinra Executive blocked - no valid targets
[getPlayableCardIds] Card Ghostly Prison (da3b83cb-f778-4096-9022-b1d6637354ff_mlhi5a9m_13_c314e8dc) is playable
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 5 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[getPlayableCardIds] Checking lands: landsPlayed=1, max=1
[getPlayableCardIds] Already played max lands this turn (1/1)
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=true, canPay=false
[getPlayableCardIds] Returning 3 playable card(s): [ 'b14eaeec-d7ce-462a-90d3-2ae5ff605fdb_mlhi5a9m_17_25ae84d4',
  'dddad2c2-bd19-42bd-aad6-bbf23ccef269_mlhi5a9m_x_1fe85cff',
  'da3b83cb-f778-4096-9022-b1d6637354ff_mlhi5a9m_13_c314e8dc' ]
[normalizeViewForEmit] getPlayableCardIds returned 3 cards
[normalizeViewForEmit] Set view.playableCards with 3 cards
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 5 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Already played max lands this turn (1/1)
[canAct] p_u47pxo6i: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 5 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Already played max lands this turn (1/1)
[canAct] p_u47pxo6i: Can cast sorcery-speed spell - returning TRUE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=true, canRespond=false
2026-02-11T04:01:25.967Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782485967_efqjm) ==========
2026-02-11T04:01:25.967Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: precombatMain, Step: MAIN1
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 5 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Already played max lands this turn (1/1)
[canAct] p_u47pxo6i: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 5 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Already played max lands this turn (1/1)
[canAct] p_u47pxo6i: Can cast sorcery-speed spell - returning TRUE
2026-02-11T04:01:25.967Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=true canAct=true (ID: autopass_1770782485967_efqjm)
2026-02-11T04:01:25.967Z [checkAndTriggerAutoPass] p_u47pxo6i CAN ACT - returning early, NO auto-pass (ID: autopass_1770782485967_efqjm)
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 5, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 5, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 3, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 3
[getPlayableCardIds] Checking 5 cards in hand
[getPlayableCardIds] Card Helm of the Host not playable - cannot pay cost {4} (after reduction: {"generic":4,"colors":{"W":0,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Horn of Gondor (b14eaeec-d7ce-462a-90d3-2ae5ff605fdb_mlhi5a9m_17_25ae84d4) is playable
[getPlayableCardIds] Card SOLDIER Military Program (dddad2c2-bd19-42bd-aad6-bbf23ccef269_mlhi5a9m_x_1fe85cff) is playable
[getPlayableCardIds] Card Heidegger, Shinra Executive blocked - no valid targets
[getPlayableCardIds] Card Ghostly Prison (da3b83cb-f778-4096-9022-b1d6637354ff_mlhi5a9m_13_c314e8dc) is playable
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 5 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[getPlayableCardIds] Checking lands: landsPlayed=1, max=1
[getPlayableCardIds] Already played max lands this turn (1/1)
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=true, canPay=false
[getPlayableCardIds] Returning 3 playable card(s): [ 'b14eaeec-d7ce-462a-90d3-2ae5ff605fdb_mlhi5a9m_17_25ae84d4',
  'dddad2c2-bd19-42bd-aad6-bbf23ccef269_mlhi5a9m_x_1fe85cff',
  'da3b83cb-f778-4096-9022-b1d6637354ff_mlhi5a9m_13_c314e8dc' ]
[normalizeViewForEmit] getPlayableCardIds returned 3 cards
[normalizeViewForEmit] Set view.playableCards with 3 cards
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 5 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Already played max lands this turn (1/1)
[canAct] p_u47pxo6i: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 5 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Already played max lands this turn (1/1)
[canAct] p_u47pxo6i: Can cast sorcery-speed spell - returning TRUE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=true, canRespond=false
2026-02-11T04:01:25.976Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782485976_f29pv) ==========
2026-02-11T04:01:25.976Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: precombatMain, Step: MAIN1
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 5 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Already played max lands this turn (1/1)
[canAct] p_u47pxo6i: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 5 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Already played max lands this turn (1/1)
[canAct] p_u47pxo6i: Can cast sorcery-speed spell - returning TRUE
2026-02-11T04:01:25.976Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=true canAct=true (ID: autopass_1770782485976_f29pv)
2026-02-11T04:01:25.976Z [checkAndTriggerAutoPass] p_u47pxo6i CAN ACT - returning early, NO auto-pass (ID: autopass_1770782485976_f29pv)
[requestCastSpell] ======== REQUEST START ========
[requestCastSpell] gameId: game_mlhi50vs, cardId: dddad2c2-bd19-42bd-aad6-bbf23ccef269_mlhi5a9m_x_1fe85cff, faceIndex: undefined
[requestCastSpell] playerId: p_u47pxo6i, priority: p_u47pxo6i
[priority] Entering resolution mode - priority will return to p_u47pxo6i after resolution completes
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 5, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=null, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 5, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=null, viewerId=p_u47pxo6i, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
2026-02-11T04:01:37.911Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782497911_nezax) ==========
2026-02-11T04:01:37.911Z [checkAndTriggerAutoPass] Priority: null, Phase: precombatMain, Step: MAIN1
2026-02-11T04:01:37.911Z [checkAndTriggerAutoPass] Priority is null due to active resolution (1 pending steps), returning (ID: autopass_1770782497911_nezax)
[requestCastSpell] No targets needed, queued spell payment step for SOLDIER Military Program
[requestCastSpell] ======== REQUEST END (waiting for payment) ========
[priority] Exiting resolution mode - priority restored to p_u47pxo6i
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 5, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 5, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 3, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 3
[getPlayableCardIds] Checking 5 cards in hand
[getPlayableCardIds] Card Helm of the Host not playable - cannot pay cost {4} (after reduction: {"generic":4,"colors":{"W":0,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Horn of Gondor (b14eaeec-d7ce-462a-90d3-2ae5ff605fdb_mlhi5a9m_17_25ae84d4) is playable
[getPlayableCardIds] Card SOLDIER Military Program (dddad2c2-bd19-42bd-aad6-bbf23ccef269_mlhi5a9m_x_1fe85cff) is playable
[getPlayableCardIds] Card Heidegger, Shinra Executive blocked - no valid targets
[getPlayableCardIds] Card Ghostly Prison (da3b83cb-f778-4096-9022-b1d6637354ff_mlhi5a9m_13_c314e8dc) is playable
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 5 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[getPlayableCardIds] Checking lands: landsPlayed=1, max=1
[getPlayableCardIds] Already played max lands this turn (1/1)
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=true, canPay=false
[getPlayableCardIds] Returning 3 playable card(s): [ 'b14eaeec-d7ce-462a-90d3-2ae5ff605fdb_mlhi5a9m_17_25ae84d4',
  'dddad2c2-bd19-42bd-aad6-bbf23ccef269_mlhi5a9m_x_1fe85cff',
  'da3b83cb-f778-4096-9022-b1d6637354ff_mlhi5a9m_13_c314e8dc' ]
[normalizeViewForEmit] getPlayableCardIds returned 3 cards
[normalizeViewForEmit] Set view.playableCards with 3 cards
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 5 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Already played max lands this turn (1/1)
[canAct] p_u47pxo6i: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 5 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Already played max lands this turn (1/1)
[canAct] p_u47pxo6i: Can cast sorcery-speed spell - returning TRUE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=true, canRespond=false
2026-02-11T04:01:39.138Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782499138_l4j5k) ==========
2026-02-11T04:01:39.138Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: precombatMain, Step: MAIN1
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 5 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Already played max lands this turn (1/1)
[canAct] p_u47pxo6i: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 5 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Already played max lands this turn (1/1)
[canAct] p_u47pxo6i: Can cast sorcery-speed spell - returning TRUE
2026-02-11T04:01:39.139Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=true canAct=true (ID: autopass_1770782499138_l4j5k)
2026-02-11T04:01:39.139Z [checkAndTriggerAutoPass] p_u47pxo6i CAN ACT - returning early, NO auto-pass (ID: autopass_1770782499138_l4j5k)
[Resolution] Step step-1770782497903-4 completed by p_u47pxo6i: mana_payment_choice
[Resolution] Spell payment complete for SOLDIER Military Program; resuming cast completion (effectId='cast_dddad2c2-bd19-42bd-aad6-bbf23ccef269_mlhi5a9m_x_1fe85cff_1770782497903')
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 5, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 5, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 3, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 3
[getPlayableCardIds] Checking 5 cards in hand
[getPlayableCardIds] Card Helm of the Host not playable - cannot pay cost {4} (after reduction: {"generic":4,"colors":{"W":0,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Horn of Gondor (b14eaeec-d7ce-462a-90d3-2ae5ff605fdb_mlhi5a9m_17_25ae84d4) is playable
[getPlayableCardIds] Card SOLDIER Military Program (dddad2c2-bd19-42bd-aad6-bbf23ccef269_mlhi5a9m_x_1fe85cff) is playable
[getPlayableCardIds] Card Heidegger, Shinra Executive blocked - no valid targets
[getPlayableCardIds] Card Ghostly Prison (da3b83cb-f778-4096-9022-b1d6637354ff_mlhi5a9m_13_c314e8dc) is playable
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 5 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[getPlayableCardIds] Checking lands: landsPlayed=1, max=1
[getPlayableCardIds] Already played max lands this turn (1/1)
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=true, canPay=false
[getPlayableCardIds] Returning 3 playable card(s): [ 'b14eaeec-d7ce-462a-90d3-2ae5ff605fdb_mlhi5a9m_17_25ae84d4',
  'dddad2c2-bd19-42bd-aad6-bbf23ccef269_mlhi5a9m_x_1fe85cff',
  'da3b83cb-f778-4096-9022-b1d6637354ff_mlhi5a9m_13_c314e8dc' ]
[normalizeViewForEmit] getPlayableCardIds returned 3 cards
[normalizeViewForEmit] Set view.playableCards with 3 cards
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 5 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Already played max lands this turn (1/1)
[canAct] p_u47pxo6i: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 5 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Already played max lands this turn (1/1)
[canAct] p_u47pxo6i: Can cast sorcery-speed spell - returning TRUE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=true, canRespond=false
2026-02-11T04:01:39.148Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782499148_0d28x) ==========
2026-02-11T04:01:39.148Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: precombatMain, Step: MAIN1
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 5 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Already played max lands this turn (1/1)
[canAct] p_u47pxo6i: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 5 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Already played max lands this turn (1/1)
[canAct] p_u47pxo6i: Can cast sorcery-speed spell - returning TRUE
2026-02-11T04:01:39.148Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=true canAct=true (ID: autopass_1770782499148_0d28x)
2026-02-11T04:01:39.148Z [checkAndTriggerAutoPass] p_u47pxo6i CAN ACT - returning early, NO auto-pass (ID: autopass_1770782499148_0d28x)
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 5, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 5, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 3, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 3
[getPlayableCardIds] Checking 5 cards in hand
[getPlayableCardIds] Card Helm of the Host not playable - cannot pay cost {4} (after reduction: {"generic":4,"colors":{"W":0,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Horn of Gondor (b14eaeec-d7ce-462a-90d3-2ae5ff605fdb_mlhi5a9m_17_25ae84d4) is playable
[getPlayableCardIds] Card SOLDIER Military Program (dddad2c2-bd19-42bd-aad6-bbf23ccef269_mlhi5a9m_x_1fe85cff) is playable
[getPlayableCardIds] Card Heidegger, Shinra Executive blocked - no valid targets
[getPlayableCardIds] Card Ghostly Prison (da3b83cb-f778-4096-9022-b1d6637354ff_mlhi5a9m_13_c314e8dc) is playable
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 5 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[getPlayableCardIds] Checking lands: landsPlayed=1, max=1
[getPlayableCardIds] Already played max lands this turn (1/1)
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=true, canPay=false
[getPlayableCardIds] Returning 3 playable card(s): [ 'b14eaeec-d7ce-462a-90d3-2ae5ff605fdb_mlhi5a9m_17_25ae84d4',
  'dddad2c2-bd19-42bd-aad6-bbf23ccef269_mlhi5a9m_x_1fe85cff',
  'da3b83cb-f778-4096-9022-b1d6637354ff_mlhi5a9m_13_c314e8dc' ]
[normalizeViewForEmit] getPlayableCardIds returned 3 cards
[normalizeViewForEmit] Set view.playableCards with 3 cards
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 5 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Already played max lands this turn (1/1)
[canAct] p_u47pxo6i: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 5 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Already played max lands this turn (1/1)
[canAct] p_u47pxo6i: Can cast sorcery-speed spell - returning TRUE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=true, canRespond=false
2026-02-11T04:01:39.159Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782499159_itfaf) ==========
2026-02-11T04:01:39.159Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: precombatMain, Step: MAIN1
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 5 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Already played max lands this turn (1/1)
[canAct] p_u47pxo6i: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 5 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Already played max lands this turn (1/1)
[canAct] p_u47pxo6i: Can cast sorcery-speed spell - returning TRUE
2026-02-11T04:01:39.160Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=true canAct=true (ID: autopass_1770782499159_itfaf)
2026-02-11T04:01:39.160Z [checkAndTriggerAutoPass] p_u47pxo6i CAN ACT - returning early, NO auto-pass (ID: autopass_1770782499159_itfaf)
[completeCastSpell] DEBUG START ========================================
[completeCastSpell] cardId: dddad2c2-bd19-42bd-aad6-bbf23ccef269_mlhi5a9m_x_1fe85cff, effectId: cast_dddad2c2-bd19-42bd-aad6-bbf23ccef269_mlhi5a9m_x_1fe85cff_1770782497903
[completeCastSpell] targets from client: undefined
[completeCastSpell] payment from client: [{"permanentId":"perm_74b6t82s","mana":"W","count":1},{"permanentId":"perm_0a48ge2r","mana":"W","count":1},{"permanentId":"perm_3d3wz0ga","mana":"W","count":1}]
[completeCastSpell] Found pendingCast: {
  "cardId": "dddad2c2-bd19-42bd-aad6-bbf23ccef269_mlhi5a9m_x_1fe85cff",
  "cardName": "SOLDIER Military Program",
  "manaCost": "{2}{W}",
  "fromZone": "hand",
  "playerId": "p_u47pxo6i",
  "validTargetIds": [],
  "targets": [],
  "card": {
    "id": "dddad2c2-bd19-42bd-aad6-bbf23ccef269_mlhi5a9m_x_1fe85cff",
    "name": "SOLDIER Military Program",
    "type_line": "Enchantment",
    "oracle_text": "At the beginning of combat on your turn, choose one. If you control a commander, you may choose both instead.\nΓÇó Create a 1/1 white Soldier creature token.\nΓÇó Put a +1/+1 counter on each of up to two Soldiers you control.",
    "image_uris": {
      "small": "https://cards.scryfall.io/small/front/d/d/dddad2c2-bd19-42bd-aad6-bbf23ccef269.jpg?1748704285",
      "normal": "https://cards.scryfall.io/normal/front/d/d/dddad2c2-bd19-42bd-aad6-bbf23ccef269.jpg?1748704285",
      "art_crop": "https://cards.scryfall.io/art_crop/front/d/d/dddad2c2-bd19-42bd-aad6-bbf23ccef269.jpg?1748704285"
    },
    "mana_cost": "{2}{W}",
    "cmc": 3,
    "layout": "normal",
    "zone": "library"
  },
  "noTargets": true,
  "pendingPaymentAfterAdditionalCost": false
}
[completeCastSpell] Using client-sent targets: none
[completeCastSpell] Final targets to use: none
[completeCastSpell] Calling handleCastSpellFromHand with skipInteractivePrompts=true
[completeCastSpell] DEBUG END ==========================================
[handleCastSpellFromHand] ======== DEBUG START ========
[handleCastSpellFromHand] cardId: dddad2c2-bd19-42bd-aad6-bbf23ccef269_mlhi5a9m_x_1fe85cff
[handleCastSpellFromHand] targets: []
[handleCastSpellFromHand] payment: [{"permanentId":"perm_74b6t82s","mana":"W","count":1},{"permanentId":"perm_0a48ge2r","mana":"W","count":1},{"permanentId":"perm_3d3wz0ga","mana":"W","count":1}]
[handleCastSpellFromHand] skipInteractivePrompts: true
[handleCastSpellFromHand] playerId: p_u47pxo6i
[handleCastSpellFromHand] fromZone: hand
[handleCastSpellFromHand] priority: p_u47pxo6i
[handleCastSpellFromHand] SOLDIER Military Program: spellSpec=false, targetReqs=false, needsTargetSelection=null, hasTargets=false
[handleCastSpellFromHand] ======== DEBUG END ========
[castSpellFromHand] Processing payment for SOLDIER Military Program: [ { permanentId: 'perm_74b6t82s', mana: 'W', count: 1 },
  { permanentId: 'perm_0a48ge2r', mana: 'W', count: 1 },
  { permanentId: 'perm_3d3wz0ga', mana: 'W', count: 1 } ]
[castSpellFromHand] Added 1 W mana to p_u47pxo6i's pool from Plains
[castSpellFromHand] Added 1 W mana to p_u47pxo6i's pool from Plains
[castSpellFromHand] Added 1 W mana to p_u47pxo6i's pool from Plains
[castSpellFromHand] Consumed 1 W mana from pool
[castSpellFromHand] Consumed 2 W mana for generic cost
[castSpellFromHand] Converge: 1 different color(s) spent for SOLDIER Military Program
[castSpellFromHand] Added converge data to stack item: 1 colors (white)
[castSpell] Player p_u47pxo6i cast SOLDIER Military Program (dddad2c2-bd19-42bd-aad6-bbf23ccef269_mlhi5a9m_x_1fe85cff) from hand via applyEvent
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 1,
  stackItems: [ 'SOLDIER Military Program' ],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 1,
  stackItems: [ 'SOLDIER Military Program' ],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Card Heidegger, Shinra Executive blocked - no valid targets
[getPlayableCardIds] Not checking lands: isMainPhase=true, stackIsEmpty=false, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-02-11T04:01:39.174Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782499174_u9svs) ==========
2026-02-11T04:01:39.174Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: precombatMain, Step: MAIN1
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:01:39.175Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=true canAct=false (ID: autopass_1770782499174_u9svs)
2026-02-11T04:01:39.175Z [checkAndTriggerAutoPass] p_u47pxo6i CANNOT ACT - proceeding with auto-pass (ID: autopass_1770782499174_u9svs)
2026-02-11T04:01:39.175Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_u47pxo6i with 150ms delay (ID: autopass_1770782499174_u9svs)
2026-02-11T04:01:39.334Z [executeAutoPass] ========== EXECUTING for p_u47pxo6i (ID: autopass_1770782499174_u9svs) ==========
2026-02-11T04:01:39.334Z [executeAutoPass] Phase: precombatMain, Step: MAIN1
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:01:39.335Z [executeAutoPass] Re-check: p_u47pxo6i canAct=false (ID: autopass_1770782499174_u9svs)
2026-02-11T04:01:39.335Z [executeAutoPass] Proceeding with auto-pass for p_u47pxo6i (ID: autopass_1770782499174_u9svs)
2026-02-11T04:01:39.335Z [executeAutoPass] Set _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782499174_u9svs)
2026-02-11T04:01:39.335Z [checkPendingInteractions] Pending: stack_not_empty
[priority] autoPassLoop - blocking due to pending interactions: stack_not_empty
2026-02-11T04:01:39.335Z [executeAutoPass] passPriority result: changed=true, advanceStep=false, resolvedNow=false (ID:autopass_1770782499174_u9svs)
2026-02-11T04:01:39.335Z [executeAutoPass] Cleared _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782499174_u9svs)
2026-02-11T04:01:39.335Z [executeAutoPass] Broadcasting state after auto-pass (ID: autopass_1770782499174_u9svs)
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 1,
  stackItems: [ 'SOLDIER Military Program' ],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_anwtvwn9, viewerId=p_anwtvwn9, match=true
[getPlayableCardIds] Player p_anwtvwn9: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isMyTurn=false
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Arcane Denial not playable - cannot pay cost {1}{U} (after reduction: {"generic":1,"colors":{"W":0,"U":1,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Not checking lands: isMainPhase=true, stackIsEmpty=false, isMyTurn=false
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Kynaios and Tiro of Meletis not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_anwtvwn9: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isTurnPlayer=false
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 1,
  stackItems: [ 'SOLDIER Military Program' ],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_anwtvwn9, viewerId=p_u47pxo6i, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
2026-02-11T04:01:39.342Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782499342_p54f7) ==========
2026-02-11T04:01:39.342Z [checkAndTriggerAutoPass] Priority: p_anwtvwn9, Phase: precombatMain, Step: MAIN1
2026-02-11T04:01:39.342Z [checkAndTriggerAutoPass] p_anwtvwn9 is AI, handled separately (ID: autopass_1770782499342_p54f7)
2026-02-11T04:01:39.342Z [executeAutoPass] Broadcast complete (ID: autopass_1770782499174_u9svs)
[AI] handleAIGameFlow: { gameId: 'game_mlhi50vs',
  playerId: 'p_anwtvwn9',
  phase: 'PRECOMBATMAIN',
  step: 'MAIN1',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: false,
  hasPriority: true }
[AI] AI player checking priority: { gameId: 'game_mlhi50vs',
  playerId: 'p_anwtvwn9',
  phase: 'precombatmain',
  step: 'main1',
  isAITurn: false,
  stackEmpty: false,
  priority: 'p_anwtvwn9',
  hasPriority: true }
[AI] AI has priority, proceeding with action
[AI] Not AI turn, passing priority
[AI] Passing priority: { gameId: 'game_mlhi50vs', playerId: 'p_anwtvwn9' }
2026-02-11T04:01:39.955Z [checkPendingInteractions] Pending: stack_not_empty
[priority] autoPassLoop - blocking due to pending interactions: stack_not_empty
[AI] All players passed priority, resolving top of stack
[resolveTopOfStack] Permanent SOLDIER Military Program entered battlefield under p_u47pxo6i
[calculateMaxLandsPerTurn] Calculating for player p_anwtvwn9, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_anwtvwn9: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[recalculateHandVisibility] Players with hand reveal effects: none
[resolveTopOfStack] Reset priorityPassedBy after spell resolution
[AI] Stack resolved for game game_mlhi50vs
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Card Helm of the Host not playable - cannot pay cost {4} (after reduction: {"generic":4,"colors":{"W":0,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Horn of Gondor not playable - cannot pay cost {3} (after reduction: {"generic":3,"colors":{"W":0,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Heidegger, Shinra Executive blocked - no valid targets
[getPlayableCardIds] Card Ghostly Prison not playable - cannot pay cost {2}{W} (after reduction: {"generic":2,"colors":{"W":1,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[getPlayableCardIds] Checking lands: landsPlayed=1, max=1
[getPlayableCardIds] Already played max lands this turn (1/1)
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=true, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Already played max lands this turn (1/1)
[canAct] p_u47pxo6i: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Already played max lands this turn (1/1)
[canAct] p_u47pxo6i: No sorcery-speed actions available in main phase - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-02-11T04:01:39.996Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782499996_e1h0e) ==========
2026-02-11T04:01:39.996Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: precombatMain, Step: MAIN1
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Already played max lands this turn (1/1)
[canAct] p_u47pxo6i: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Already played max lands this turn (1/1)
[canAct] p_u47pxo6i: No sorcery-speed actions available in main phase - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:01:39.996Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=true canAct=false (ID: autopass_1770782499996_e1h0e)
2026-02-11T04:01:39.996Z [checkAndTriggerAutoPass] p_u47pxo6i CANNOT ACT - proceeding with auto-pass (ID: autopass_1770782499996_e1h0e)
2026-02-11T04:01:39.996Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_u47pxo6i with 150ms delay (ID: autopass_1770782499996_e1h0e)
2026-02-11T04:01:40.156Z [executeAutoPass] ========== EXECUTING for p_u47pxo6i (ID: autopass_1770782499996_e1h0e) ==========
2026-02-11T04:01:40.156Z [executeAutoPass] Phase: precombatMain, Step: MAIN1
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Already played max lands this turn (1/1)
[canAct] p_u47pxo6i: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Already played max lands this turn (1/1)
[canAct] p_u47pxo6i: No sorcery-speed actions available in main phase - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:01:40.156Z [executeAutoPass] Re-check: p_u47pxo6i canAct=false (ID: autopass_1770782499996_e1h0e)
2026-02-11T04:01:40.156Z [executeAutoPass] Proceeding with auto-pass for p_u47pxo6i (ID: autopass_1770782499996_e1h0e)
2026-02-11T04:01:40.156Z [executeAutoPass] Set _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782499996_e1h0e)
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_u47pxo6i
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_anwtvwn9 (non-active): canAct=false, stack.length=0, step=MAIN1
[priority] Auto-passing for p_anwtvwn9 - no available actions
2026-02-11T04:01:40.157Z [executeAutoPass] passPriority result: changed=true, advanceStep=true, resolvedNow=false (ID: autopass_1770782499996_e1h0e)
2026-02-11T04:01:40.157Z [executeAutoPass] Advancing step after auto-pass for p_u47pxo6i (ID: autopass_1770782499996_e1h0e)
2026-02-11T04:01:40.157Z [nextStep] ========== CALLED ==========
2026-02-11T04:01:40.157Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:01:40.157Z [nextStep] Current: precombatMain/MAIN1
2026-02-11T04:01:40.157Z [nextStep] Priority: p_anwtvwn9, Turn: p_u47pxo6i
2026-02-11T04:01:40.157Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at Timeout.executeAutoPass (D:\Git\MTGEDH\server\src\socket\util.ts:2058:31)
        at listOnTimeout (node:internal/timers:588:17)
        at process.processTimers (node:internal/timers:523:7)
2026-02-11T04:01:40.157Z [clearManaPool] Processed mana pools for all players
2026-02-11T04:01:40.157Z [nextStep] Advanced to phase=combat, step=BEGIN_COMBAT
[getBeginningOfCombatTriggers] SOLDIER Military Program: triggers on YOUR turn (controller=p_u47pxo6i, active=p_u47pxo6i)
[getBeginningOfCombatTriggers] Total triggers for activePlayer=p_u47pxo6i: 1
2026-02-11T04:01:40.157Z [nextStep] Found 1 begin_combat trigger(s)
2026-02-11T04:01:40.158Z [nextStep] ΓÜí Pushed begin_combat trigger: SOLDIER Military Program - Choose one. If you control a commander, you may choose both instead: Create a 1/1 white Soldier creature token; or Put a +1/+1 counter on each of up to two Soldiers you control. (modal)
2026-02-11T04:01:40.158Z [nextStep] Granting priority to active player p_u47pxo6i (step: BEGIN_COMBAT, stack size: 1)
[canAct] p_u47pxo6i: step=BEGIN_COMBAT, isMainPhase=false, stackIsEmpty=false, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
2026-02-11T04:01:40.158Z [nextStep] DEBUG - Turn Player p_u47pxo6i:
2026-02-11T04:01:40.158Z [nextStep]   Hand (4): Helm of the Host, Horn of Gondor, Heidegger, Shinra Executive, Ghostly Prison
2026-02-11T04:01:40.158Z [nextStep]   canAct: false, canRespond: false
2026-02-11T04:01:40.158Z [nextStep] Checking if auto-pass should apply after granting priority
2026-02-11T04:01:40.158Z [checkPendingInteractions] Pending: stack_not_empty
[priority] autoPassLoop - blocking due to pending interactions: stack_not_empty
2026-02-11T04:01:40.158Z [nextStep] Auto-pass stopped, player p_u47pxo6i has priority
2026-02-11T04:01:40.158Z [executeAutoPass] Cleared _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782499996_e1h0e)
2026-02-11T04:01:40.158Z [executeAutoPass] Broadcasting state after auto-pass (ID: autopass_1770782499996_e1h0e)
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 1,
  stackItems: [ 'combat_1770782500158_j2b8wn' ],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 1,
  stackItems: [ 'combat_1770782500158_j2b8wn' ],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=BEGIN_COMBAT, isMainPhase=false, stackIsEmpty=false, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Card Heidegger, Shinra Executive blocked - no valid targets
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=false, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_u47pxo6i: step=BEGIN_COMBAT, isMainPhase=false, stackIsEmpty=false, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-02-11T04:01:40.167Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782500167_7mf6a) ==========
2026-02-11T04:01:40.167Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: combat, Step: BEGIN_COMBAT
[canAct] p_u47pxo6i: step=BEGIN_COMBAT, isMainPhase=false, stackIsEmpty=false, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:01:40.167Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=true canAct=false (ID: autopass_1770782500167_7mf6a)
2026-02-11T04:01:40.167Z [checkAndTriggerAutoPass] p_u47pxo6i CANNOT ACT - proceeding with auto-pass (ID: autopass_1770782500167_7mf6a)
2026-02-11T04:01:40.167Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_u47pxo6i with 150ms delay (ID: autopass_1770782500167_7mf6a)
2026-02-11T04:01:40.167Z [executeAutoPass] Broadcast complete (ID: autopass_1770782499996_e1h0e)
2026-02-11T04:01:40.326Z [executeAutoPass] ========== EXECUTING for p_u47pxo6i (ID: autopass_1770782500167_7mf6a) ==========
2026-02-11T04:01:40.326Z [executeAutoPass] Phase: combat, Step: BEGIN_COMBAT
[canAct] p_u47pxo6i: step=BEGIN_COMBAT, isMainPhase=false, stackIsEmpty=false, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:01:40.326Z [executeAutoPass] Re-check: p_u47pxo6i canAct=false (ID: autopass_1770782500167_7mf6a)
2026-02-11T04:01:40.326Z [executeAutoPass] Proceeding with auto-pass for p_u47pxo6i (ID: autopass_1770782500167_7mf6a)
2026-02-11T04:01:40.326Z [executeAutoPass] Set _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782500167_7mf6a)
2026-02-11T04:01:40.326Z [checkPendingInteractions] Pending: stack_not_empty
[priority] autoPassLoop - blocking due to pending interactions: stack_not_empty
2026-02-11T04:01:40.326Z [executeAutoPass] passPriority result: changed=true, advanceStep=false, resolvedNow=false (ID:autopass_1770782500167_7mf6a)
2026-02-11T04:01:40.326Z [executeAutoPass] Cleared _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782500167_7mf6a)
2026-02-11T04:01:40.326Z [executeAutoPass] Broadcasting state after auto-pass (ID: autopass_1770782500167_7mf6a)
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 1,
  stackItems: [ 'combat_1770782500158_j2b8wn' ],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_anwtvwn9, viewerId=p_anwtvwn9, match=true
[getPlayableCardIds] Player p_anwtvwn9: step=BEGIN_COMBAT, isMainPhase=false, stackIsEmpty=false, isMyTurn=false
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Arcane Denial blocked - no valid targets
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=false, isMyTurn=false
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Kynaios and Tiro of Meletis not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_anwtvwn9: step=BEGIN_COMBAT, isMainPhase=false, stackIsEmpty=false, isTurnPlayer=false
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 1,
  stackItems: [ 'combat_1770782500158_j2b8wn' ],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_anwtvwn9, viewerId=p_u47pxo6i, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
2026-02-11T04:01:40.336Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782500336_hklfn) ==========
2026-02-11T04:01:40.336Z [checkAndTriggerAutoPass] Priority: p_anwtvwn9, Phase: combat, Step: BEGIN_COMBAT
2026-02-11T04:01:40.336Z [checkAndTriggerAutoPass] p_anwtvwn9 is AI, handled separately (ID: autopass_1770782500336_hklfn)
2026-02-11T04:01:40.336Z [executeAutoPass] Broadcast complete (ID: autopass_1770782500167_7mf6a)
[AI] handleAIGameFlow: { gameId: 'game_mlhi50vs',
  playerId: 'p_anwtvwn9',
  phase: 'COMBAT',
  step: 'BEGIN_COMBAT',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: false,
  hasPriority: true }
[AI] AI player checking priority: { gameId: 'game_mlhi50vs',
  playerId: 'p_anwtvwn9',
  phase: 'combat',
  step: 'begin_combat',
  isAITurn: false,
  stackEmpty: false,
  priority: 'p_anwtvwn9',
  hasPriority: true }
[AI] AI has priority, proceeding with action
[AI] Not AI turn, passing priority
[AI] Passing priority: { gameId: 'game_mlhi50vs', playerId: 'p_anwtvwn9' }
2026-02-11T04:01:40.949Z [checkPendingInteractions] Pending: stack_not_empty
[priority] autoPassLoop - blocking due to pending interactions: stack_not_empty
[AI] All players passed priority, resolving top of stack
[resolveTopOfStack] Triggered ability from SOLDIER Military Program resolved: Choose one. If you control a commander, you may choose both instead: Create a 1/1 white Soldier creature token; or Put a +1/+1 counter on each of up to two Soldiers you control.
[resolveTopOfStack] SOLDIER Military Program: player does not control a commander
[priority] Entering resolution mode - priority will return to p_u47pxo6i after resolution completes
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=null, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=null, viewerId=p_u47pxo6i, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
2026-02-11T04:01:40.958Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782500958_kc2ov) ==========
2026-02-11T04:01:40.958Z [checkAndTriggerAutoPass] Priority: null, Phase: combat, Step: BEGIN_COMBAT
2026-02-11T04:01:40.958Z [checkAndTriggerAutoPass] Priority is null due to active resolution (1 pending steps), returning (ID: autopass_1770782500958_kc2ov)
[resolveTopOfStack] Modal trigger SOLDIER Military Program: added resolution step for p_u47pxo6i to choose from 2 options
[AI] Stack resolved for game game_mlhi50vs
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=null, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=null, viewerId=p_u47pxo6i, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
2026-02-11T04:01:40.967Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782500967_dxk52) ==========
2026-02-11T04:01:40.967Z [checkAndTriggerAutoPass] Priority: null, Phase: combat, Step: BEGIN_COMBAT
2026-02-11T04:01:40.967Z [checkAndTriggerAutoPass] Priority is null due to active resolution (1 pending steps), returning (ID: autopass_1770782500967_dxk52)
[priority] Exiting resolution mode - priority restored to p_u47pxo6i
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=BEGIN_COMBAT, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Card Heidegger, Shinra Executive blocked - no valid targets
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_u47pxo6i: step=BEGIN_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-02-11T04:01:45.363Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782505363_mhpo9) ==========
2026-02-11T04:01:45.363Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: combat, Step: BEGIN_COMBAT
[canAct] p_u47pxo6i: step=BEGIN_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:01:45.363Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=true canAct=false (ID: autopass_1770782505363_mhpo9)
2026-02-11T04:01:45.363Z [checkAndTriggerAutoPass] p_u47pxo6i CANNOT ACT - proceeding with auto-pass (ID: autopass_1770782505363_mhpo9)
2026-02-11T04:01:45.363Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_u47pxo6i with 150ms delay (ID: autopass_1770782505363_mhpo9)
[Resolution] Step step-1770782500950-5 completed by p_u47pxo6i: modal_choice
[Resolution] Generic modal choice: SOLDIER Military Program: Choose one, selected: create_token
[tokens] Loaded 761 tokens from Tokens.json
[tokens] getTokenImageUrls: name=Soldier, power=1, toughness=1, colors=["W"], abilities=undefined
[tokens] Best dynamic match for soldier: Soldier (score: 12)
[Resolution] SOLDIER Military Program: Created white Soldier token for p_u47pxo6i
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=BEGIN_COMBAT, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_u47pxo6i: step=BEGIN_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-02-11T04:01:45.418Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782505418_9hpef) ==========
2026-02-11T04:01:45.418Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: combat, Step: BEGIN_COMBAT
[canAct] p_u47pxo6i: step=BEGIN_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:01:45.419Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=true canAct=false (ID: autopass_1770782505418_9hpef)
2026-02-11T04:01:45.419Z [checkAndTriggerAutoPass] p_u47pxo6i CANNOT ACT - proceeding with auto-pass (ID: autopass_1770782505418_9hpef)
2026-02-11T04:01:45.419Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_u47pxo6i with 150ms delay (ID: autopass_1770782505418_9hpef)
2026-02-11T04:01:45.527Z [executeAutoPass] ========== EXECUTING for p_u47pxo6i (ID: autopass_1770782505363_mhpo9) ==========
2026-02-11T04:01:45.527Z [executeAutoPass] Phase: combat, Step: BEGIN_COMBAT
[canAct] p_u47pxo6i: step=BEGIN_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:01:45.528Z [executeAutoPass] Re-check: p_u47pxo6i canAct=false (ID: autopass_1770782505363_mhpo9)
2026-02-11T04:01:45.528Z [executeAutoPass] Proceeding with auto-pass for p_u47pxo6i (ID: autopass_1770782505363_mhpo9)
2026-02-11T04:01:45.528Z [executeAutoPass] Set _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782505363_mhpo9)
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_u47pxo6i
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_anwtvwn9 (non-active): canAct=false, stack.length=0, step=BEGIN_COMBAT
[priority] Auto-passing for p_anwtvwn9 - no available actions
2026-02-11T04:01:45.528Z [executeAutoPass] passPriority result: changed=true, advanceStep=true, resolvedNow=false (ID: autopass_1770782505363_mhpo9)
2026-02-11T04:01:45.528Z [executeAutoPass] Advancing step after auto-pass for p_u47pxo6i (ID: autopass_1770782505363_mhpo9)
2026-02-11T04:01:45.528Z [nextStep] ========== CALLED ==========
2026-02-11T04:01:45.528Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:01:45.528Z [nextStep] Current: combat/BEGIN_COMBAT
2026-02-11T04:01:45.528Z [nextStep] Priority: p_anwtvwn9, Turn: p_u47pxo6i
2026-02-11T04:01:45.528Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at Timeout.executeAutoPass (D:\Git\MTGEDH\server\src\socket\util.ts:2058:31)
        at listOnTimeout (node:internal/timers:588:17)
        at process.processTimers (node:internal/timers:523:7)
2026-02-11T04:01:45.528Z [nextStep] Advanced to phase=combat, step=DECLARE_ATTACKERS
2026-02-11T04:01:45.528Z [nextStep] Granting priority to active player p_u47pxo6i (step: DECLARE_ATTACKERS, stack size:0)
[canAct] p_u47pxo6i: step=DECLARE_ATTACKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: Has valid attackers - returning TRUE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
2026-02-11T04:01:45.529Z [nextStep] DEBUG - Turn Player p_u47pxo6i:
2026-02-11T04:01:45.529Z [nextStep]   Hand (4): Helm of the Host, Horn of Gondor, Heidegger, Shinra Executive, Ghostly Prison
2026-02-11T04:01:45.529Z [nextStep]   canAct: true, canRespond: false
2026-02-11T04:01:45.529Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_u47pxo6i, turnPlayer: p_u47pxo6i
[canAct] p_u47pxo6i: step=DECLARE_ATTACKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: Has valid attackers - returning TRUE
[priority] autoPassLoop - checking p_u47pxo6i (ACTIVE): canAct=true, stack.length=0, step=DECLARE_ATTACKERS
[priority] autoPassLoop - stopping at p_u47pxo6i: active player can act
2026-02-11T04:01:45.529Z [nextStep] Auto-pass stopped, player p_u47pxo6i has priority
2026-02-11T04:01:45.529Z [executeAutoPass] Cleared _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782505363_mhpo9)
2026-02-11T04:01:45.529Z [executeAutoPass] Broadcasting state after auto-pass (ID: autopass_1770782505363_mhpo9)
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=DECLARE_ATTACKERS, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_u47pxo6i: step=DECLARE_ATTACKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: Has valid attackers - returning TRUE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=true, canRespond=false
2026-02-11T04:01:45.538Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782505538_ucduy) ==========
2026-02-11T04:01:45.538Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: combat, Step: DECLARE_ATTACKERS
[canAct] p_u47pxo6i: step=DECLARE_ATTACKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: Has valid attackers - returning TRUE
2026-02-11T04:01:45.538Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=true canAct=true (ID: autopass_1770782505538_ucduy)
2026-02-11T04:01:45.538Z [checkAndTriggerAutoPass] p_u47pxo6i CAN ACT - returning early, NO auto-pass (ID: autopass_1770782505538_ucduy)
2026-02-11T04:01:45.538Z [executeAutoPass] Broadcast complete (ID: autopass_1770782505363_mhpo9)
2026-02-11T04:01:45.542Z [nextStep] ========== CALLED ==========
2026-02-11T04:01:45.542Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:01:45.542Z [nextStep] Current: combat/DECLARE_ATTACKERS
2026-02-11T04:01:45.542Z [nextStep] Priority: p_u47pxo6i, Turn: p_u47pxo6i
2026-02-11T04:01:45.542Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at Socket.<anonymous> (D:\Git\MTGEDH\server\src\socket\combat.ts:2540:29)
        at Socket.emit (node:events:519:28)
        at Socket.emitUntyped (D:\Git\MTGEDH\node_modules\socket.io\dist\typed-events.js:69:22)
2026-02-11T04:01:45.542Z [nextStep] Entering DECLARE_BLOCKERS, initialized blockersDeclaredBy array
2026-02-11T04:01:45.542Z [nextStep] Advanced to phase=combat, step=DECLARE_BLOCKERS
2026-02-11T04:01:45.542Z [nextStep] Granting priority to active player p_u47pxo6i (step: DECLARE_BLOCKERS, stack size: 0)
[canAct] p_u47pxo6i: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
2026-02-11T04:01:45.542Z [nextStep] DEBUG - Turn Player p_u47pxo6i:
2026-02-11T04:01:45.542Z [nextStep]   Hand (4): Helm of the Host, Horn of Gondor, Heidegger, Shinra Executive, Ghostly Prison
2026-02-11T04:01:45.542Z [nextStep]   canAct: false, canRespond: false
2026-02-11T04:01:45.542Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_u47pxo6i, turnPlayer: p_u47pxo6i
[canAct] p_u47pxo6i: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[priority] autoPassLoop - checking p_u47pxo6i (ACTIVE): canAct=false, stack.length=0, step=DECLARE_BLOCKERS
[priority] Auto-passing for p_u47pxo6i - no available actions
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_anwtvwn9 (non-active): canAct=false, stack.length=0, step=DECLARE_BLOCKERS
[priority] Auto-passing for p_anwtvwn9 - no available actions
2026-02-11T04:01:45.542Z [nextStep] All players auto-passed after granting priority - caller should advance step
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_u47pxo6i: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-02-11T04:01:45.552Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782505552_pyzoq) ==========
2026-02-11T04:01:45.552Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: combat, Step: DECLARE_BLOCKERS
[canAct] p_u47pxo6i: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:01:45.552Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=true canAct=false (ID: autopass_1770782505552_pyzoq)
2026-02-11T04:01:45.552Z [checkAndTriggerAutoPass] p_u47pxo6i CANNOT ACT - proceeding with auto-pass (ID: autopass_1770782505552_pyzoq)
2026-02-11T04:01:45.552Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_u47pxo6i with 150ms delay (ID: autopass_1770782505552_pyzoq)
2026-02-11T04:01:45.574Z [executeAutoPass] ========== EXECUTING for p_u47pxo6i (ID: autopass_1770782505418_9hpef) ==========
2026-02-11T04:01:45.574Z [executeAutoPass] Phase: combat, Step: DECLARE_BLOCKERS
[canAct] p_u47pxo6i: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:01:45.575Z [executeAutoPass] Re-check: p_u47pxo6i canAct=false (ID: autopass_1770782505418_9hpef)
2026-02-11T04:01:45.575Z [executeAutoPass] Proceeding with auto-pass for p_u47pxo6i (ID: autopass_1770782505418_9hpef)
2026-02-11T04:01:45.575Z [executeAutoPass] Set _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782505418_9hpef)
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_u47pxo6i
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_anwtvwn9 (non-active): canAct=false, stack.length=0, step=DECLARE_BLOCKERS
[priority] Auto-passing for p_anwtvwn9 - no available actions
2026-02-11T04:01:45.575Z [executeAutoPass] passPriority result: changed=true, advanceStep=true, resolvedNow=false (ID: autopass_1770782505418_9hpef)
2026-02-11T04:01:45.575Z [executeAutoPass] Advancing step after auto-pass for p_u47pxo6i (ID: autopass_1770782505418_9hpef)
2026-02-11T04:01:45.575Z [nextStep] ========== CALLED ==========
2026-02-11T04:01:45.575Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:01:45.575Z [nextStep] Current: combat/DECLARE_BLOCKERS
2026-02-11T04:01:45.575Z [nextStep] Priority: p_anwtvwn9, Turn: p_u47pxo6i
2026-02-11T04:01:45.575Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at Timeout.executeAutoPass (D:\Git\MTGEDH\server\src\socket\util.ts:2058:31)
        at listOnTimeout (node:internal/timers:588:17)
        at process.processTimers (node:internal/timers:523:7)
2026-02-11T04:01:45.575Z [COMBAT_STEP] ========== TRANSITIONING FROM DECLARE_BLOCKERS TO DAMAGE (no first strike) ==========
2026-02-11T04:01:45.575Z [COMBAT_STEP] Calling dealCombatDamage...
2026-02-11T04:01:45.575Z [COMBAT_DAMAGE] ========== ENTERING dealCombatDamage (firstStrike=undefined) ==========
2026-02-11T04:01:45.575Z [COMBAT_DAMAGE] Found 0 attackers
2026-02-11T04:01:45.575Z [COMBAT_DAMAGE] No attackers, skipping combat damage
2026-02-11T04:01:45.575Z [COMBAT_STEP] dealCombatDamage completed successfully
2026-02-11T04:01:45.575Z [COMBAT_STEP] Result: damageToPlayers={}, creaturesDestroyed=0
2026-02-11T04:01:45.575Z [COMBAT_STEP] ========== END DAMAGE STEP PROCESSING ==========
2026-02-11T04:01:45.575Z [nextStep] Advanced to phase=combat, step=DAMAGE
2026-02-11T04:01:45.575Z [nextStep] Granting priority to active player p_u47pxo6i (step: DAMAGE, stack size: 0)
[canAct] p_u47pxo6i: step=DAMAGE, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
2026-02-11T04:01:45.575Z [nextStep] DEBUG - Turn Player p_u47pxo6i:
2026-02-11T04:01:45.575Z [nextStep]   Hand (4): Helm of the Host, Horn of Gondor, Heidegger, Shinra Executive, Ghostly Prison
2026-02-11T04:01:45.575Z [nextStep]   canAct: false, canRespond: false
2026-02-11T04:01:45.576Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_u47pxo6i, turnPlayer: p_u47pxo6i
[canAct] p_u47pxo6i: step=DAMAGE, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[priority] autoPassLoop - checking p_u47pxo6i (ACTIVE): canAct=false, stack.length=0, step=DAMAGE
[priority] Auto-passing for p_u47pxo6i - no available actions
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_anwtvwn9 (non-active): canAct=false, stack.length=0, step=DAMAGE
[priority] Auto-passing for p_anwtvwn9 - no available actions
2026-02-11T04:01:45.576Z [nextStep] All players auto-passed after granting priority - caller should advance step
2026-02-11T04:01:45.576Z [executeAutoPass] Cleared _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782505418_9hpef)
2026-02-11T04:01:45.576Z [executeAutoPass] Broadcasting state after auto-pass (ID: autopass_1770782505418_9hpef)
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=DAMAGE, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_u47pxo6i: step=DAMAGE, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-02-11T04:01:45.585Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782505585_k18k1) ==========
2026-02-11T04:01:45.585Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: combat, Step: DAMAGE
[canAct] p_u47pxo6i: step=DAMAGE, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:01:45.585Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=true canAct=false (ID: autopass_1770782505585_k18k1)
2026-02-11T04:01:45.585Z [checkAndTriggerAutoPass] p_u47pxo6i CANNOT ACT - proceeding with auto-pass (ID: autopass_1770782505585_k18k1)
2026-02-11T04:01:45.585Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_u47pxo6i with 150ms delay (ID: autopass_1770782505585_k18k1)
2026-02-11T04:01:45.586Z [executeAutoPass] Broadcast complete (ID: autopass_1770782505418_9hpef)
2026-02-11T04:01:45.715Z [executeAutoPass] ========== EXECUTING for p_u47pxo6i (ID: autopass_1770782505552_pyzoq) ==========
2026-02-11T04:01:45.715Z [executeAutoPass] Phase: combat, Step: DAMAGE
[canAct] p_u47pxo6i: step=DAMAGE, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:01:45.715Z [executeAutoPass] Re-check: p_u47pxo6i canAct=false (ID: autopass_1770782505552_pyzoq)
2026-02-11T04:01:45.715Z [executeAutoPass] Proceeding with auto-pass for p_u47pxo6i (ID: autopass_1770782505552_pyzoq)
2026-02-11T04:01:45.715Z [executeAutoPass] Set _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782505552_pyzoq)
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_u47pxo6i
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_anwtvwn9 (non-active): canAct=false, stack.length=0, step=DAMAGE
[priority] Auto-passing for p_anwtvwn9 - no available actions
2026-02-11T04:01:45.715Z [executeAutoPass] passPriority result: changed=true, advanceStep=true, resolvedNow=false (ID: autopass_1770782505552_pyzoq)
2026-02-11T04:01:45.716Z [executeAutoPass] Advancing step after auto-pass for p_u47pxo6i (ID: autopass_1770782505552_pyzoq)
2026-02-11T04:01:45.716Z [nextStep] ========== CALLED ==========
2026-02-11T04:01:45.716Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:01:45.716Z [nextStep] Current: combat/DAMAGE
2026-02-11T04:01:45.716Z [nextStep] Priority: p_anwtvwn9, Turn: p_u47pxo6i
2026-02-11T04:01:45.716Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at Timeout.executeAutoPass (D:\Git\MTGEDH\server\src\socket\util.ts:2058:31)
        at listOnTimeout (node:internal/timers:588:17)
        at process.processTimers (node:internal/timers:523:7)
2026-02-11T04:01:45.716Z [nextStep] Advanced to phase=combat, step=END_COMBAT
2026-02-11T04:01:45.716Z [nextStep] Granting priority to active player p_u47pxo6i (step: END_COMBAT, stack size: 0)
[canAct] p_u47pxo6i: step=END_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
2026-02-11T04:01:45.716Z [nextStep] DEBUG - Turn Player p_u47pxo6i:
2026-02-11T04:01:45.716Z [nextStep]   Hand (4): Helm of the Host, Horn of Gondor, Heidegger, Shinra Executive, Ghostly Prison
2026-02-11T04:01:45.716Z [nextStep]   canAct: false, canRespond: false
2026-02-11T04:01:45.716Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_u47pxo6i, turnPlayer: p_u47pxo6i
[canAct] p_u47pxo6i: step=END_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[priority] autoPassLoop - checking p_u47pxo6i (ACTIVE): canAct=false, stack.length=0, step=END_COMBAT
[priority] Auto-passing for p_u47pxo6i - no available actions
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_anwtvwn9 (non-active): canAct=false, stack.length=0, step=END_COMBAT
[priority] Auto-passing for p_anwtvwn9 - no available actions
2026-02-11T04:01:45.717Z [nextStep] All players auto-passed after granting priority - caller should advance step
2026-02-11T04:01:45.717Z [executeAutoPass] Cleared _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782505552_pyzoq)
2026-02-11T04:01:45.717Z [executeAutoPass] Broadcasting state after auto-pass (ID: autopass_1770782505552_pyzoq)
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=END_COMBAT, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_u47pxo6i: step=END_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-02-11T04:01:45.727Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782505727_6b0iu) ==========
2026-02-11T04:01:45.727Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: combat, Step: END_COMBAT
[canAct] p_u47pxo6i: step=END_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:01:45.727Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=true canAct=false (ID: autopass_1770782505727_6b0iu)
2026-02-11T04:01:45.727Z [checkAndTriggerAutoPass] p_u47pxo6i CANNOT ACT - proceeding with auto-pass (ID: autopass_1770782505727_6b0iu)
2026-02-11T04:01:45.727Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_u47pxo6i with 150ms delay (ID: autopass_1770782505727_6b0iu)
2026-02-11T04:01:45.727Z [executeAutoPass] Broadcast complete (ID: autopass_1770782505552_pyzoq)
2026-02-11T04:01:45.746Z [executeAutoPass] ========== EXECUTING for p_u47pxo6i (ID: autopass_1770782505585_k18k1) ==========
2026-02-11T04:01:45.746Z [executeAutoPass] Phase: combat, Step: END_COMBAT
[canAct] p_u47pxo6i: step=END_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:01:45.746Z [executeAutoPass] Re-check: p_u47pxo6i canAct=false (ID: autopass_1770782505585_k18k1)
2026-02-11T04:01:45.746Z [executeAutoPass] Proceeding with auto-pass for p_u47pxo6i (ID: autopass_1770782505585_k18k1)
2026-02-11T04:01:45.746Z [executeAutoPass] Set _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782505585_k18k1)
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_u47pxo6i
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_anwtvwn9 (non-active): canAct=false, stack.length=0, step=END_COMBAT
[priority] Auto-passing for p_anwtvwn9 - no available actions
2026-02-11T04:01:45.746Z [executeAutoPass] passPriority result: changed=true, advanceStep=true, resolvedNow=false (ID: autopass_1770782505585_k18k1)
2026-02-11T04:01:45.746Z [executeAutoPass] Advancing step after auto-pass for p_u47pxo6i (ID: autopass_1770782505585_k18k1)
2026-02-11T04:01:45.747Z [nextStep] ========== CALLED ==========
2026-02-11T04:01:45.747Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:01:45.747Z [nextStep] Current: combat/END_COMBAT
2026-02-11T04:01:45.747Z [nextStep] Priority: p_anwtvwn9, Turn: p_u47pxo6i
2026-02-11T04:01:45.747Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at Timeout.executeAutoPass (D:\Git\MTGEDH\server\src\socket\util.ts:2058:31)
        at listOnTimeout (node:internal/timers:588:17)
        at process.processTimers (node:internal/timers:523:7)
2026-02-11T04:01:45.747Z [clearManaPool] Processed mana pools for all players
2026-02-11T04:01:45.747Z [nextStep] Advanced to phase=postcombatMain, step=MAIN2
2026-02-11T04:01:45.747Z [nextStep] Granting priority to active player p_u47pxo6i (step: MAIN2, stack size: 0)
[canAct] p_u47pxo6i: step=MAIN2, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 7 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Already played max lands this turn (1/1)
[canAct] p_u47pxo6i: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 7 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Already played max lands this turn (1/1)
[canAct] p_u47pxo6i: No sorcery-speed actions available in main phase - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
2026-02-11T04:01:45.747Z [nextStep] DEBUG - Turn Player p_u47pxo6i:
2026-02-11T04:01:45.747Z [nextStep]   Hand (4): Helm of the Host, Horn of Gondor, Heidegger, Shinra Executive, Ghostly Prison
2026-02-11T04:01:45.747Z [nextStep]   canAct: false, canRespond: false
2026-02-11T04:01:45.747Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_u47pxo6i, turnPlayer: p_u47pxo6i
[canAct] p_u47pxo6i: step=MAIN2, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 7 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Already played max lands this turn (1/1)
[canAct] p_u47pxo6i: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 7 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Already played max lands this turn (1/1)
[canAct] p_u47pxo6i: No sorcery-speed actions available in main phase - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[priority] autoPassLoop - checking p_u47pxo6i (ACTIVE): canAct=false, stack.length=0, step=MAIN2
[priority] Auto-passing for p_u47pxo6i - no available actions
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_anwtvwn9 (non-active): canAct=false, stack.length=0, step=MAIN2
[priority] Auto-passing for p_anwtvwn9 - no available actions
2026-02-11T04:01:45.748Z [nextStep] All players auto-passed after granting priority - caller should advance step
2026-02-11T04:01:45.748Z [executeAutoPass] Cleared _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782505585_k18k1)
2026-02-11T04:01:45.748Z [executeAutoPass] Broadcasting state after auto-pass (ID: autopass_1770782505585_k18k1)
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=MAIN2, isMainPhase=true, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Card Helm of the Host not playable - cannot pay cost {4} (after reduction: {"generic":4,"colors":{"W":0,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Horn of Gondor not playable - cannot pay cost {3} (after reduction: {"generic":3,"colors":{"W":0,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Heidegger, Shinra Executive not playable - cannot pay cost {3}{W} (after reduction: {"generic":3,"colors":{"W":1,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Ghostly Prison not playable - cannot pay cost {2}{W} (after reduction: {"generic":2,"colors":{"W":1,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 7 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[getPlayableCardIds] Checking lands: landsPlayed=1, max=1
[getPlayableCardIds] Already played max lands this turn (1/1)
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=true, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_u47pxo6i: step=MAIN2, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 7 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Already played max lands this turn (1/1)
[canAct] p_u47pxo6i: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 7 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Already played max lands this turn (1/1)
[canAct] p_u47pxo6i: No sorcery-speed actions available in main phase - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-02-11T04:01:45.758Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782505758_qju7e) ==========
2026-02-11T04:01:45.758Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: postcombatMain, Step: MAIN2
[canAct] p_u47pxo6i: step=MAIN2, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 7 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Already played max lands this turn (1/1)
[canAct] p_u47pxo6i: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 7 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Already played max lands this turn (1/1)
[canAct] p_u47pxo6i: No sorcery-speed actions available in main phase - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:01:45.759Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=true canAct=false (ID: autopass_1770782505758_qju7e)
2026-02-11T04:01:45.759Z [checkAndTriggerAutoPass] p_u47pxo6i CANNOT ACT - proceeding with auto-pass (ID: autopass_1770782505758_qju7e)
2026-02-11T04:01:45.759Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_u47pxo6i with 150ms delay (ID: autopass_1770782505758_qju7e)
2026-02-11T04:01:45.759Z [executeAutoPass] Broadcast complete (ID: autopass_1770782505585_k18k1)
2026-02-11T04:01:45.887Z [executeAutoPass] ========== EXECUTING for p_u47pxo6i (ID: autopass_1770782505727_6b0iu) ==========
2026-02-11T04:01:45.887Z [executeAutoPass] Phase: postcombatMain, Step: MAIN2
[canAct] p_u47pxo6i: step=MAIN2, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 7 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Already played max lands this turn (1/1)
[canAct] p_u47pxo6i: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 7 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Already played max lands this turn (1/1)
[canAct] p_u47pxo6i: No sorcery-speed actions available in main phase - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:01:45.888Z [executeAutoPass] Re-check: p_u47pxo6i canAct=false (ID: autopass_1770782505727_6b0iu)
2026-02-11T04:01:45.888Z [executeAutoPass] Proceeding with auto-pass for p_u47pxo6i (ID: autopass_1770782505727_6b0iu)
2026-02-11T04:01:45.888Z [executeAutoPass] Set _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782505727_6b0iu)
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_u47pxo6i
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_anwtvwn9 (non-active): canAct=false, stack.length=0, step=MAIN2
[priority] Auto-passing for p_anwtvwn9 - no available actions
2026-02-11T04:01:45.888Z [executeAutoPass] passPriority result: changed=true, advanceStep=true, resolvedNow=false (ID: autopass_1770782505727_6b0iu)
2026-02-11T04:01:45.888Z [executeAutoPass] Advancing step after auto-pass for p_u47pxo6i (ID: autopass_1770782505727_6b0iu)
2026-02-11T04:01:45.888Z [nextStep] ========== CALLED ==========
2026-02-11T04:01:45.888Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:01:45.888Z [nextStep] Current: postcombatMain/MAIN2
2026-02-11T04:01:45.888Z [nextStep] Priority: p_anwtvwn9, Turn: p_u47pxo6i
2026-02-11T04:01:45.888Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at Timeout.executeAutoPass (D:\Git\MTGEDH\server\src\socket\util.ts:2058:31)
        at listOnTimeout (node:internal/timers:588:17)
        at process.processTimers (node:internal/timers:523:7)
2026-02-11T04:01:45.888Z [clearManaPool] Processed mana pools for all players
2026-02-11T04:01:45.888Z [nextStep] Advanced to phase=ending, step=END
2026-02-11T04:01:45.889Z [nextStep] Granting priority to active player p_u47pxo6i (step: END, stack size: 0)
[canAct] p_u47pxo6i: step=END, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
2026-02-11T04:01:45.889Z [nextStep] DEBUG - Turn Player p_u47pxo6i:
2026-02-11T04:01:45.889Z [nextStep]   Hand (4): Helm of the Host, Horn of Gondor, Heidegger, Shinra Executive, Ghostly Prison
2026-02-11T04:01:45.889Z [nextStep]   canAct: false, canRespond: false
2026-02-11T04:01:45.889Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_u47pxo6i, turnPlayer: p_u47pxo6i
[canAct] p_u47pxo6i: step=END, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[priority] autoPassLoop - checking p_u47pxo6i (ACTIVE): canAct=false, stack.length=0, step=END
[priority] Auto-passing for p_u47pxo6i - no available actions
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_anwtvwn9 (non-active): canAct=false, stack.length=0, step=END
[priority] Auto-passing for p_anwtvwn9 - no available actions
2026-02-11T04:01:45.889Z [nextStep] All players auto-passed after granting priority - caller should advance step
2026-02-11T04:01:45.889Z [executeAutoPass] Cleared _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782505727_6b0iu)
2026-02-11T04:01:45.889Z [executeAutoPass] Broadcasting state after auto-pass (ID: autopass_1770782505727_6b0iu)
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=END, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_u47pxo6i: step=END, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-02-11T04:01:45.899Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782505899_p5pnb) ==========
2026-02-11T04:01:45.900Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: ending, Step: END
[canAct] p_u47pxo6i: step=END, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:01:45.900Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=true canAct=false (ID: autopass_1770782505899_p5pnb)
2026-02-11T04:01:45.900Z [checkAndTriggerAutoPass] p_u47pxo6i CANNOT ACT - proceeding with auto-pass (ID: autopass_1770782505899_p5pnb)
2026-02-11T04:01:45.900Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_u47pxo6i with 150ms delay (ID: autopass_1770782505899_p5pnb)
2026-02-11T04:01:45.900Z [executeAutoPass] Broadcast complete (ID: autopass_1770782505727_6b0iu)
2026-02-11T04:01:45.918Z [executeAutoPass] ========== EXECUTING for p_u47pxo6i (ID: autopass_1770782505758_qju7e) ==========
2026-02-11T04:01:45.918Z [executeAutoPass] Phase: ending, Step: END
[canAct] p_u47pxo6i: step=END, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:01:45.918Z [executeAutoPass] Re-check: p_u47pxo6i canAct=false (ID: autopass_1770782505758_qju7e)
2026-02-11T04:01:45.918Z [executeAutoPass] Proceeding with auto-pass for p_u47pxo6i (ID: autopass_1770782505758_qju7e)
2026-02-11T04:01:45.918Z [executeAutoPass] Set _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782505758_qju7e)
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_u47pxo6i
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_anwtvwn9 (non-active): canAct=false, stack.length=0, step=END
[priority] Auto-passing for p_anwtvwn9 - no available actions
2026-02-11T04:01:45.918Z [executeAutoPass] passPriority result: changed=true, advanceStep=true, resolvedNow=false (ID: autopass_1770782505758_qju7e)
2026-02-11T04:01:45.919Z [executeAutoPass] Advancing step after auto-pass for p_u47pxo6i (ID: autopass_1770782505758_qju7e)
2026-02-11T04:01:45.919Z [nextStep] ========== CALLED ==========
2026-02-11T04:01:45.919Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:01:45.919Z [nextStep] Current: ending/END
2026-02-11T04:01:45.919Z [nextStep] Priority: p_anwtvwn9, Turn: p_u47pxo6i
2026-02-11T04:01:45.919Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at Timeout.executeAutoPass (D:\Git\MTGEDH\server\src\socket\util.ts:2058:31)
        at listOnTimeout (node:internal/timers:588:17)
        at process.processTimers (node:internal/timers:523:7)
2026-02-11T04:01:45.919Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-02-11T04:01:45.919Z [nextStep] Step CLEANUP does not grant priority (Rule 502.1/514.1)
2026-02-11T04:01:45.919Z [endTemporaryEffects] Cleared creaturesAttackedThisTurn tracking
2026-02-11T04:01:45.919Z [nextStep] Cleanup complete, advancing to next turn
2026-02-11T04:01:45.919Z [nextTurn] Reset planeswalker loyalty activation counters for player p_anwtvwn9
2026-02-11T04:01:45.919Z [nextTurn] Cleared autoPassForTurn flags for new turn
2026-02-11T04:01:45.919Z [nextTurn] Cleared noncreatureSpellsCastThisTurn for new turn
2026-02-11T04:01:45.919Z [nextTurn] Cleared spellsCastFromHandThisTurn for new turn
2026-02-11T04:01:45.919Z [nextTurn] Cleared spellsCastThisTurn for new turn
2026-02-11T04:01:45.919Z [nextTurn] Cleared playedCardFromExileThisTurn for new turn
2026-02-11T04:01:45.919Z [nextTurn] Advanced to player p_anwtvwn9, phase=beginning, step=UNTAP
[calculateMaxLandsPerTurn] Calculating for player p_anwtvwn9, battlefield has 7 permanents
[calculateMaxLandsPerTurn] Final result for p_anwtvwn9: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 7 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[recalculateHandVisibility] Players with hand reveal effects: none
2026-02-11T04:01:45.920Z [executeAutoPass] Cleared _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782505758_qju7e)
2026-02-11T04:01:45.920Z [executeAutoPass] Broadcasting state after auto-pass (ID: autopass_1770782505758_qju7e)
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_anwtvwn9, viewerId=p_anwtvwn9, match=true
[getPlayableCardIds] Player p_anwtvwn9: step=UNTAP, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Arcane Denial blocked - no valid targets
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Kynaios and Tiro of Meletis not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_anwtvwn9: step=UNTAP, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_anwtvwn9, viewerId=p_u47pxo6i, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
2026-02-11T04:01:45.929Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782505929_c2d8e) ==========
2026-02-11T04:01:45.929Z [checkAndTriggerAutoPass] Priority: p_anwtvwn9, Phase: beginning, Step: UNTAP
2026-02-11T04:01:45.929Z [checkAndTriggerAutoPass] p_anwtvwn9 is AI, handled separately (ID: autopass_1770782505929_c2d8e)
2026-02-11T04:01:45.929Z [executeAutoPass] Broadcast complete (ID: autopass_1770782505758_qju7e)
[Automation] Auto-pass for turn disabled for p_u47pxo6i in game game_mlhi50vs
[Automation] Auto-pass for turn state in game game_mlhi50vs: {}
2026-02-11T04:01:46.057Z [executeAutoPass] ========== EXECUTING for p_u47pxo6i (ID: autopass_1770782505899_p5pnb) ==========
2026-02-11T04:01:46.057Z [executeAutoPass] Phase: beginning, Step: UNTAP
2026-02-11T04:01:46.057Z [executeAutoPass] Priority changed from p_u47pxo6i to p_anwtvwn9, aborting (ID: autopass_1770782505899_p5pnb)
[AI] handleAIGameFlow: { gameId: 'game_mlhi50vs',
  playerId: 'p_anwtvwn9',
  phase: 'BEGINNING',
  step: 'UNTAP',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: true,
  hasPriority: true }
[AI] AI player checking priority: { gameId: 'game_mlhi50vs',
  playerId: 'p_anwtvwn9',
  phase: 'beginning',
  step: 'untap',
  isAITurn: true,
  stackEmpty: true,
  priority: 'p_anwtvwn9',
  hasPriority: true }
[AI] AI has priority, proceeding with action
[AI] Beginning phase, step: untap - passing priority
[AI] Passing priority: { gameId: 'game_mlhi50vs', playerId: 'p_anwtvwn9' }
[AI] All players passed priority with empty stack, advancing step
2026-02-11T04:01:46.553Z [nextStep] ========== CALLED ==========
2026-02-11T04:01:46.553Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:01:46.553Z [nextStep] Current: beginning/UNTAP
2026-02-11T04:01:46.553Z [nextStep] Priority: p_anwtvwn9, Turn: p_anwtvwn9
2026-02-11T04:01:46.553Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4470:25)
        at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
        at async handleAIPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:2663:7)
2026-02-11T04:01:46.554Z [nextStep] Advanced to phase=beginning, step=UPKEEP
2026-02-11T04:01:46.554Z [nextStep] Granting priority to active player p_anwtvwn9 (step: UPKEEP, stack size: 0)
[canAct] p_anwtvwn9: step=UPKEEP, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
2026-02-11T04:01:46.554Z [nextStep] DEBUG - Turn Player p_anwtvwn9:
2026-02-11T04:01:46.554Z [nextStep]   Hand (7): Commander's Sphere, Kraum, Ludevic's Opus, Hour of Promise, Minds Aglow, Arcane Denial, Boros Garrison, Edric, Spymaster of Trest
2026-02-11T04:01:46.554Z [nextStep]   canAct: false, canRespond: false
2026-02-11T04:01:46.554Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_anwtvwn9
[canAct] p_anwtvwn9: step=UPKEEP, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[priority] autoPassLoop - checking p_anwtvwn9 (ACTIVE): canAct=false, stack.length=0, step=UPKEEP
[priority] Auto-passing for p_anwtvwn9 - no available actions
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_u47pxo6i (non-active): canAct=false, stack.length=0, step=UPKEEP
[priority] Auto-passing for p_u47pxo6i - no available actions
2026-02-11T04:01:46.554Z [nextStep] All players auto-passed after granting priority - caller should advance step
2026-02-11T04:01:46.555Z [untapPermanentsForPlayer] Player p_anwtvwn9: untapped 1, stun counters removed 0, skipped (doesn't untap) 0
[AI] Advanced to next step for game game_mlhi50vs
[AI] Auto-pass detected after step advancement (iteration 1), advancing again
2026-02-11T04:01:46.555Z [nextStep] ========== CALLED ==========
2026-02-11T04:01:46.555Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:01:46.555Z [nextStep] Current: beginning/UPKEEP
2026-02-11T04:01:46.555Z [nextStep] Priority: p_anwtvwn9, Turn: p_anwtvwn9
2026-02-11T04:01:46.555Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4495:29)
        at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
        at async handleAIPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:2663:7)
2026-02-11T04:01:46.555Z [nextStep] Advanced to phase=beginning, step=DRAW
2026-02-11T04:01:46.555Z [nextStep] Drew 1 card(s) for p_anwtvwn9 at draw step (base: 1, additional: 0)
2026-02-11T04:01:46.555Z [nextStep] Granting priority to active player p_anwtvwn9 (step: DRAW, stack size: 0)
[canAct] p_anwtvwn9: step=DRAW, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
2026-02-11T04:01:46.556Z [nextStep] DEBUG - Turn Player p_anwtvwn9:
2026-02-11T04:01:46.556Z [nextStep]   Hand (8): Commander's Sphere, Kraum, Ludevic's Opus, Hour of Promise, Minds Aglow, Arcane Denial, Boros Garrison, Edric, Spymaster of Trest, Rogue's Passage
2026-02-11T04:01:46.556Z [nextStep]   canAct: false, canRespond: false
2026-02-11T04:01:46.556Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_anwtvwn9
[canAct] p_anwtvwn9: step=DRAW, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[priority] autoPassLoop - checking p_anwtvwn9 (ACTIVE): canAct=false, stack.length=0, step=DRAW
[priority] Auto-passing for p_anwtvwn9 - no available actions
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_u47pxo6i (non-active): canAct=false, stack.length=0, step=DRAW
[priority] Auto-passing for p_u47pxo6i - no available actions
2026-02-11T04:01:46.556Z [nextStep] All players auto-passed after granting priority - caller should advance step
[AI] Auto-advanced to DRAW
[AI] Auto-pass detected after step advancement (iteration 2), advancing again
2026-02-11T04:01:46.556Z [nextStep] ========== CALLED ==========
2026-02-11T04:01:46.556Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:01:46.556Z [nextStep] Current: beginning/DRAW
2026-02-11T04:01:46.556Z [nextStep] Priority: p_anwtvwn9, Turn: p_anwtvwn9
2026-02-11T04:01:46.556Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4495:29)
        at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
        at async handleAIPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:2663:7)
2026-02-11T04:01:46.556Z [clearManaPool] Processed mana pools for all players
2026-02-11T04:01:46.556Z [nextStep] Advanced to phase=precombatMain, step=MAIN1
2026-02-11T04:01:46.556Z [nextStep] Checking precombat main triggers for p_anwtvwn9, found 0 trigger(s)
2026-02-11T04:01:46.556Z [nextStep] Granting priority to active player p_anwtvwn9 (step: MAIN1, stack size: 0)
[canAct] p_anwtvwn9: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_anwtvwn9, battlefield has 7 permanents
[calculateMaxLandsPerTurn] Final result for p_anwtvwn9: 1 lands per turn
[canPlayLand] p_anwtvwn9: Checking hand with 8 cards
[canPlayLand] p_anwtvwn9: Sample cards in hand: [Commander's Sphere(Artifact), Kraum, Ludevic's Opus(Legendary CreatureΓÇö), Hour of Promise(Sorcery)]
[canPlayLand] p_anwtvwn9: Found land in hand: Boros Garrison (Land) - returning TRUE
[canAct] p_anwtvwn9: Turn player in main phase can play land - returning TRUE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
2026-02-11T04:01:46.556Z [nextStep] DEBUG - Turn Player p_anwtvwn9:
2026-02-11T04:01:46.556Z [nextStep]   Hand (8): Commander's Sphere, Kraum, Ludevic's Opus, Hour of Promise, Minds Aglow, Arcane Denial, Boros Garrison, Edric, Spymaster of Trest, Rogue's Passage
2026-02-11T04:01:46.556Z [nextStep]   canAct: true, canRespond: false
2026-02-11T04:01:46.557Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_anwtvwn9
[canAct] p_anwtvwn9: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_anwtvwn9, battlefield has 7 permanents
[calculateMaxLandsPerTurn] Final result for p_anwtvwn9: 1 lands per turn
[canPlayLand] p_anwtvwn9: Checking hand with 8 cards
[canPlayLand] p_anwtvwn9: Sample cards in hand: [Commander's Sphere(Artifact), Kraum, Ludevic's Opus(Legendary CreatureΓÇö), Hour of Promise(Sorcery)]
[canPlayLand] p_anwtvwn9: Found land in hand: Boros Garrison (Land) - returning TRUE
[canAct] p_anwtvwn9: Turn player in main phase can play land - returning TRUE
[priority] autoPassLoop - checking p_anwtvwn9 (ACTIVE): canAct=true, stack.length=0, step=MAIN1
[priority] autoPassLoop - stopping at p_anwtvwn9: active player can act
2026-02-11T04:01:46.557Z [nextStep] Auto-pass stopped, player p_anwtvwn9 has priority
[AI] Auto-advanced to MAIN1
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 8, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking frontier bivouac: { hasKarametra: false, hasAcolyte: false, fullCardName: 'frontier bivouac' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_anwtvwn9, viewerId=p_anwtvwn9, match=true
[getPlayableCardIds] Player p_anwtvwn9: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 1, colorless: 0 }
[getPlayableCardIds] Total available mana: 1
[getPlayableCardIds] Checking 8 cards in hand
[getPlayableCardIds] Card Commander's Sphere not playable - cannot pay cost {3} (after reduction: {"generic":3,"colors":{"W":0,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Kraum, Ludevic's Opus not playable - cannot pay cost {3}{U}{R} (after reduction: {"generic":3,"colors":{"W":0,"U":1,"B":0,"R":1,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Hour of Promise not playable - cannot pay cost {4}{G} (after reduction: {"generic":4,"colors":{"W":0,"U":0,"B":0,"R":0,"G":1,"C":0},"hasX":false})
[getPlayableCardIds] Card Minds Aglow not playable - cannot pay cost {U} (after reduction: {"generic":0,"colors":{"W":0,"U":1,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Arcane Denial blocked - no valid targets
[getPlayableCardIds] Card Edric, Spymaster of Trest not playable - cannot pay cost {1}{G}{U} (after reduction: {"generic":1,"colors":{"W":0,"U":1,"B":0,"R":0,"G":1,"C":0},"hasX":false})
[calculateMaxLandsPerTurn] Calculating for player p_anwtvwn9, battlefield has 7 permanents
[calculateMaxLandsPerTurn] Final result for p_anwtvwn9: 1 lands per turn
[getPlayableCardIds] Checking lands: landsPlayed=0, max=1
[getPlayableCardIds] Land Boros Garrison (card_76ec3366-98f3-4903-8f7b-cfcdd60e3be1_84c74e1c210f0f33) is playable
[getPlayableCardIds] Land Rogue's Passage (card_a2a424ea-ef32-4ac5-8f8c-3ea1839f01d4_ceaf41a0b1c58232) is playable
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Kynaios and Tiro of Meletis not playable - canCastNow=true, canPay=false
[getPlayableCardIds] Returning 2 playable card(s): [ 'card_76ec3366-98f3-4903-8f7b-cfcdd60e3be1_84c74e1c210f0f33', 'card_a2a424ea-ef32-4ac5-8f8c-3ea1839f01d4_ceaf41a0b1c58232' ]
[normalizeViewForEmit] getPlayableCardIds returned 2 cards
[normalizeViewForEmit] Set view.playableCards with 2 cards
[canAct] p_anwtvwn9: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_anwtvwn9, battlefield has 7 permanents
[calculateMaxLandsPerTurn] Final result for p_anwtvwn9: 1 lands per turn
[canPlayLand] p_anwtvwn9: Checking hand with 8 cards
[canPlayLand] p_anwtvwn9: Sample cards in hand: [Commander's Sphere(Artifact), Kraum, Ludevic's Opus(Legendary CreatureΓÇö), Hour of Promise(Sorcery)]
[canPlayLand] p_anwtvwn9: Found land in hand: Boros Garrison (Land) - returning TRUE
[canAct] p_anwtvwn9: Turn player in main phase can play land - returning TRUE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=true, canRespond=false
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 8, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking frontier bivouac: { hasKarametra: false, hasAcolyte: false, fullCardName: 'frontier bivouac' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_anwtvwn9, viewerId=p_u47pxo6i, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
2026-02-11T04:01:46.567Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782506567_84icx) ==========
2026-02-11T04:01:46.567Z [checkAndTriggerAutoPass] Priority: p_anwtvwn9, Phase: precombatMain, Step: MAIN1
2026-02-11T04:01:46.567Z [checkAndTriggerAutoPass] p_anwtvwn9 is AI, handled separately (ID: autopass_1770782506567_84icx)
[AI] AI player checking priority: { gameId: 'game_mlhi50vs',
  playerId: 'p_anwtvwn9',
  phase: 'precombatmain',
  step: 'main1',
  isAITurn: true,
  stackEmpty: true,
  priority: 'p_anwtvwn9',
  hasPriority: true }
[AI] AI has priority, proceeding with action
[AI] Hand size 8 exceeds max 7 - will prioritize casting spells to avoid discarding
[AI] Playing land: Boros Garrison
[AI] Playing land: { gameId: 'game_mlhi50vs', playerId: 'p_anwtvwn9', cardId: 'card_76ec3366-98f3-4903-8f7b-cfcdd60e3be1_84c74e1c210f0f33' }
[AI] Land enters tapped: boros garrison
[playLand] Boros Garrison enters tapped (ETB-tapped pattern detected)
[playLand] Found 1 ETB trigger(s) for Boros Garrison
[playLand] Pushed ETB trigger to stack: return a land you control to its owner's hand
[calculateMaxLandsPerTurn] Calculating for player p_anwtvwn9, battlefield has 8 permanents
[calculateMaxLandsPerTurn] Final result for p_anwtvwn9: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 8 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[recalculateHandVisibility] Players with hand reveal effects: none
[AI] Bounce land returned to hand: Frontier Bivouac
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 1,
  stackItems: [ 'trigger_r3zvxm1h' ],
  zones: { p_anwtvwn9: { handCount: 8, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_anwtvwn9, viewerId=p_anwtvwn9, match=true
[getPlayableCardIds] Player p_anwtvwn9: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 8 cards in hand
[getPlayableCardIds] Card Arcane Denial blocked - no valid targets
[getPlayableCardIds] Not checking lands: isMainPhase=true, stackIsEmpty=false, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Kynaios and Tiro of Meletis not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_anwtvwn9: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 1,
  stackItems: [ 'trigger_r3zvxm1h' ],
  zones: { p_anwtvwn9: { handCount: 8, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_anwtvwn9, viewerId=p_u47pxo6i, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
2026-02-11T04:01:46.889Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782506889_jaxgc) ==========
2026-02-11T04:01:46.889Z [checkAndTriggerAutoPass] Priority: p_anwtvwn9, Phase: precombatMain, Step: MAIN1
2026-02-11T04:01:46.889Z [checkAndTriggerAutoPass] p_anwtvwn9 is AI, handled separately (ID: autopass_1770782506889_jaxgc)
[AI] handleAIGameFlow: { gameId: 'game_mlhi50vs',
  playerId: 'p_anwtvwn9',
  phase: 'PRECOMBATMAIN',
  step: 'MAIN1',
  hasCommander: true,
  hasHand: true,
  handCount: 8,
  isAITurn: true,
  hasPriority: true }
[AI] AI player checking priority: { gameId: 'game_mlhi50vs',
  playerId: 'p_anwtvwn9',
  phase: 'precombatmain',
  step: 'main1',
  isAITurn: true,
  stackEmpty: false,
  priority: 'p_anwtvwn9',
  hasPriority: true }
[AI] AI has priority, proceeding with action
[AI] Stack not empty, passing priority to let it resolve
[AI] Passing priority: { gameId: 'game_mlhi50vs', playerId: 'p_anwtvwn9' }
2026-02-11T04:01:47.191Z [checkPendingInteractions] Pending: stack_not_empty
[priority] autoPassLoop - blocking due to pending interactions: stack_not_empty
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 1,
  stackItems: [ 'trigger_r3zvxm1h' ],
  zones: { p_anwtvwn9: { handCount: 8, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 1,
  stackItems: [ 'trigger_r3zvxm1h' ],
  zones: { p_anwtvwn9: { handCount: 8, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isMyTurn=false
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Not checking lands: isMainPhase=true, stackIsEmpty=false, isMyTurn=false
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isTurnPlayer=false
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-02-11T04:01:47.200Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782507200_lxl7b) ==========
2026-02-11T04:01:47.200Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: precombatMain, Step: MAIN1
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
2026-02-11T04:01:47.200Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=false canAct=false (ID: autopass_1770782507200_lxl7b)
2026-02-11T04:01:47.200Z [checkAndTriggerAutoPass] p_u47pxo6i CANNOT ACT - proceeding with auto-pass (ID: autopass_1770782507200_lxl7b)
2026-02-11T04:01:47.200Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_u47pxo6i with 150ms delay (ID: autopass_1770782507200_lxl7b)
[AI] handleAIGameFlow: { gameId: 'game_mlhi50vs',
  playerId: 'p_anwtvwn9',
  phase: 'PRECOMBATMAIN',
  step: 'MAIN1',
  hasCommander: true,
  hasHand: true,
  handCount: 8,
  isAITurn: true,
  hasPriority: false }
2026-02-11T04:01:47.361Z [executeAutoPass] ========== EXECUTING for p_u47pxo6i (ID: autopass_1770782507200_lxl7b) ==========
2026-02-11T04:01:47.361Z [executeAutoPass] Phase: precombatMain, Step: MAIN1
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
2026-02-11T04:01:47.361Z [executeAutoPass] Re-check: p_u47pxo6i canAct=false (ID: autopass_1770782507200_lxl7b)
2026-02-11T04:01:47.361Z [executeAutoPass] Proceeding with auto-pass for p_u47pxo6i (ID: autopass_1770782507200_lxl7b)
2026-02-11T04:01:47.361Z [executeAutoPass] Set _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782507200_lxl7b)
2026-02-11T04:01:47.361Z [checkPendingInteractions] Pending: stack_not_empty
[priority] autoPassLoop - blocking due to pending interactions: stack_not_empty
2026-02-11T04:01:47.361Z [executeAutoPass] passPriority result: changed=true, advanceStep=false, resolvedNow=true (ID: autopass_1770782507200_lxl7b)
[checkAndTriggerAutoPass] Stack resolved after auto-pass for p_u47pxo6i
[resolveTopOfStack] Triggered ability from Boros Garrison resolved: return a land you control to its owner's hand
[Resolution] AI player p_anwtvwn9 auto-resolving step: bounce_land_choice
[Resolution] AI chose to return land: Boros Garrison
[Resolution] Bounce land choice: player=p_anwtvwn9 returns land perm_jy9y3ne0
[resolveTopOfStack] Bounce land trigger: added resolution step for p_anwtvwn9 to return a land
2026-02-11T04:01:47.362Z [executeAutoPass] Cleared _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782507200_lxl7b)
2026-02-11T04:01:47.362Z [executeAutoPass] Broadcasting state after auto-pass (ID: autopass_1770782507200_lxl7b)
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 9, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_anwtvwn9, viewerId=p_anwtvwn9, match=true
[getPlayableCardIds] Player p_anwtvwn9: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 9 cards in hand
[getPlayableCardIds] Card Commander's Sphere not playable - cannot pay cost {3} (after reduction: {"generic":3,"colors":{"W":0,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Kraum, Ludevic's Opus not playable - cannot pay cost {3}{U}{R} (after reduction: {"generic":3,"colors":{"W":0,"U":1,"B":0,"R":1,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Hour of Promise not playable - cannot pay cost {4}{G} (after reduction: {"generic":4,"colors":{"W":0,"U":0,"B":0,"R":0,"G":1,"C":0},"hasX":false})
[getPlayableCardIds] Card Minds Aglow not playable - cannot pay cost {U} (after reduction: {"generic":0,"colors":{"W":0,"U":1,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Arcane Denial blocked - no valid targets
[getPlayableCardIds] Card Edric, Spymaster of Trest not playable - cannot pay cost {1}{G}{U} (after reduction: {"generic":1,"colors":{"W":0,"U":1,"B":0,"R":0,"G":1,"C":0},"hasX":false})
[calculateMaxLandsPerTurn] Calculating for player p_anwtvwn9, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_anwtvwn9: 1 lands per turn
[getPlayableCardIds] Checking lands: landsPlayed=1, max=1
[getPlayableCardIds] Already played max lands this turn (1/1)
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Kynaios and Tiro of Meletis not playable - canCastNow=true, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_anwtvwn9: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_anwtvwn9, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_anwtvwn9: 1 lands per turn
[canPlayLand] p_anwtvwn9: Already played max lands this turn (1/1)
[canAct] p_anwtvwn9: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_anwtvwn9, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_anwtvwn9: 1 lands per turn
[canPlayLand] p_anwtvwn9: Already played max lands this turn (1/1)
[canAct] p_anwtvwn9: No sorcery-speed actions available in main phase - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 9, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_anwtvwn9, viewerId=p_u47pxo6i, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
2026-02-11T04:01:47.370Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782507370_e4r8k) ==========
2026-02-11T04:01:47.370Z [checkAndTriggerAutoPass] Priority: p_anwtvwn9, Phase: precombatMain, Step: MAIN1
2026-02-11T04:01:47.370Z [checkAndTriggerAutoPass] p_anwtvwn9 is AI, handled separately (ID: autopass_1770782507370_e4r8k)
2026-02-11T04:01:47.370Z [executeAutoPass] Broadcast complete (ID: autopass_1770782507200_lxl7b)
[AI] AI player checking priority: { gameId: 'game_mlhi50vs',
  playerId: 'p_anwtvwn9',
  phase: 'precombatmain',
  step: 'main1',
  isAITurn: true,
  stackEmpty: true,
  priority: 'p_anwtvwn9',
  hasPriority: true }
[AI] AI has priority, proceeding with action
[AI] Hand size 9 exceeds max 7 - will prioritize casting spells to avoid discarding
[AI] Cannot play land: { isMainPhase: true, isAITurn: true, landsPlayed: 1, maxLands: 1, reason: 'already played max lands' }
[AI] Cannot cast commander: Kynaios and Tiro of Meletis Cost: {"colors":{"W":1,"U":1,"B":0,"R":1,"G":1,"C":0},"generic":0,"hasX":false,"hybrid":[]} Available: {"white":0,"blue":0,"black":0,"red":0,"green":0,"colorless":0}
[AI] findCastableSpells: Checking 9 cards in hand
[AI] Available mana pool: { total: 0, colors: { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 } }
[AI] findCastableSpells: No castable spells. Reasons: [ `Commander's Sphere: need 3 mana (have 0), colors: {"W":0,"U":0,"B":0,"R":0,"G":0,"C":0}`,
  `Kraum, Ludevic's Opus: need 5 mana (have 0), colors: {"W":0,"U":1,"B":0,"R":1,"G":0,"C":0}`,
  'Hour of Promise: need 5 mana (have 0), colors: {"W":0,"U":0,"B":0,"R":0,"G":1,"C":0}',
  'Minds Aglow: need 1 mana (have 0), colors: {"W":0,"U":1,"B":0,"R":0,"G":0,"C":0}',
  'Arcane Denial: no valid targets (needs 1, found 0)' ]
[AI] ... and 1 more cards not castable
[AI] handleAIGameFlow: { gameId: 'game_mlhi50vs',
  playerId: 'p_anwtvwn9',
  phase: 'PRECOMBATMAIN',
  step: 'MAIN1',
  hasCommander: true,
  hasHand: true,
  handCount: 9,
  isAITurn: true,
  hasPriority: true }
[AI] Main phase, no more actions, passing priority
[AI] Passing priority: { gameId: 'game_mlhi50vs', playerId: 'p_anwtvwn9' }
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_u47pxo6i, turnPlayer: p_anwtvwn9
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_u47pxo6i (non-active): canAct=false, stack.length=0, step=MAIN1
[priority] Auto-passing for p_u47pxo6i - no available actions
[AI] All players passed priority with empty stack, advancing step
2026-02-11T04:01:47.907Z [nextStep] ========== CALLED ==========
2026-02-11T04:01:47.907Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:01:47.907Z [nextStep] Current: precombatMain/MAIN1
2026-02-11T04:01:47.907Z [nextStep] Priority: p_anwtvwn9, Turn: p_anwtvwn9
2026-02-11T04:01:47.907Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4470:25)
        at async handleAIPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:2542:7)
2026-02-11T04:01:47.907Z [clearManaPool] Processed mana pools for all players
2026-02-11T04:01:47.907Z [nextStep] Advanced to phase=combat, step=BEGIN_COMBAT
[getBeginningOfCombatTriggers] SOLDIER Military Program: SKIPPED - not controller's turn (controller=p_u47pxo6i, active=p_anwtvwn9)
[getBeginningOfCombatTriggers] Total triggers for activePlayer=p_anwtvwn9: 0
2026-02-11T04:01:47.907Z [nextStep] Granting priority to active player p_anwtvwn9 (step: BEGIN_COMBAT, stack size: 0)
[canAct] p_anwtvwn9: step=BEGIN_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
2026-02-11T04:01:47.908Z [nextStep] DEBUG - Turn Player p_anwtvwn9:
2026-02-11T04:01:47.908Z [nextStep]   Hand (9): Commander's Sphere, Kraum, Ludevic's Opus, Hour of Promise, Minds Aglow, Arcane Denial, Edric, Spymaster of Trest, Rogue's Passage, Frontier Bivouac, Boros Garrison
2026-02-11T04:01:47.908Z [nextStep]   canAct: false, canRespond: false
2026-02-11T04:01:47.908Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_anwtvwn9
[canAct] p_anwtvwn9: step=BEGIN_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[priority] autoPassLoop - checking p_anwtvwn9 (ACTIVE): canAct=false, stack.length=0, step=BEGIN_COMBAT
[priority] Auto-passing for p_anwtvwn9 - no available actions
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_u47pxo6i (non-active): canAct=false, stack.length=0, step=BEGIN_COMBAT
[priority] Auto-passing for p_u47pxo6i - no available actions
2026-02-11T04:01:47.908Z [nextStep] All players auto-passed after granting priority - caller should advance step
[AI] Advanced to next step for game game_mlhi50vs
[AI] Auto-pass detected after step advancement (iteration 1), advancing again
2026-02-11T04:01:47.908Z [nextStep] ========== CALLED ==========
2026-02-11T04:01:47.908Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:01:47.908Z [nextStep] Current: combat/BEGIN_COMBAT
2026-02-11T04:01:47.908Z [nextStep] Priority: p_anwtvwn9, Turn: p_anwtvwn9
2026-02-11T04:01:47.908Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4495:29)
        at async handleAIPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:2542:7)
2026-02-11T04:01:47.908Z [nextStep] Advanced to phase=combat, step=DECLARE_ATTACKERS
2026-02-11T04:01:47.908Z [nextStep] Granting priority to active player p_anwtvwn9 (step: DECLARE_ATTACKERS, stack size:0)
[canAct] p_anwtvwn9: step=DECLARE_ATTACKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
2026-02-11T04:01:47.908Z [nextStep] DEBUG - Turn Player p_anwtvwn9:
2026-02-11T04:01:47.908Z [nextStep]   Hand (9): Commander's Sphere, Kraum, Ludevic's Opus, Hour of Promise, Minds Aglow, Arcane Denial, Edric, Spymaster of Trest, Rogue's Passage, Frontier Bivouac, Boros Garrison
2026-02-11T04:01:47.908Z [nextStep]   canAct: false, canRespond: false
2026-02-11T04:01:47.908Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_anwtvwn9
[canAct] p_anwtvwn9: step=DECLARE_ATTACKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[priority] autoPassLoop - checking p_anwtvwn9 (ACTIVE): canAct=false, stack.length=0, step=DECLARE_ATTACKERS
[priority] Auto-passing for p_anwtvwn9 - no available actions
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_u47pxo6i (non-active): canAct=false, stack.length=0, step=DECLARE_ATTACKERS
[priority] Auto-passing for p_u47pxo6i - no available actions
2026-02-11T04:01:47.908Z [nextStep] All players auto-passed after granting priority - caller should advance step
[AI] Auto-advanced to DECLARE_ATTACKERS
[AI] Auto-pass detected after step advancement (iteration 2), advancing again
2026-02-11T04:01:47.908Z [nextStep] ========== CALLED ==========
2026-02-11T04:01:47.908Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:01:47.908Z [nextStep] Current: combat/DECLARE_ATTACKERS
2026-02-11T04:01:47.908Z [nextStep] Priority: p_anwtvwn9, Turn: p_anwtvwn9
2026-02-11T04:01:47.908Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4495:29)
        at async handleAIPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:2542:7)
2026-02-11T04:01:47.908Z [nextStep] Entering DECLARE_BLOCKERS, initialized blockersDeclaredBy array
2026-02-11T04:01:47.908Z [nextStep] Advanced to phase=combat, step=DECLARE_BLOCKERS
2026-02-11T04:01:47.908Z [nextStep] Granting priority to active player p_anwtvwn9 (step: DECLARE_BLOCKERS, stack size: 0)
[canAct] p_anwtvwn9: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
2026-02-11T04:01:47.908Z [nextStep] DEBUG - Turn Player p_anwtvwn9:
2026-02-11T04:01:47.909Z [nextStep]   Hand (9): Commander's Sphere, Kraum, Ludevic's Opus, Hour of Promise, Minds Aglow, Arcane Denial, Edric, Spymaster of Trest, Rogue's Passage, Frontier Bivouac, Boros Garrison
2026-02-11T04:01:47.909Z [nextStep]   canAct: false, canRespond: false
2026-02-11T04:01:47.909Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_anwtvwn9
[canAct] p_anwtvwn9: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[priority] autoPassLoop - checking p_anwtvwn9 (ACTIVE): canAct=false, stack.length=0, step=DECLARE_BLOCKERS
[priority] Auto-passing for p_anwtvwn9 - no available actions
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_u47pxo6i (non-active): canAct=false, stack.length=0, step=DECLARE_BLOCKERS
[priority] Auto-passing for p_u47pxo6i - no available actions
2026-02-11T04:01:47.909Z [nextStep] All players auto-passed after granting priority - caller should advance step
[AI] Auto-advanced to DECLARE_BLOCKERS
[AI] Auto-pass detected after step advancement (iteration 3), advancing again
2026-02-11T04:01:47.909Z [nextStep] ========== CALLED ==========
2026-02-11T04:01:47.909Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:01:47.909Z [nextStep] Current: combat/DECLARE_BLOCKERS
2026-02-11T04:01:47.909Z [nextStep] Priority: p_anwtvwn9, Turn: p_anwtvwn9
2026-02-11T04:01:47.909Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4495:29)
        at async handleAIPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:2542:7)
2026-02-11T04:01:47.909Z [COMBAT_STEP] ========== TRANSITIONING FROM DECLARE_BLOCKERS TO DAMAGE (no first strike) ==========
2026-02-11T04:01:47.909Z [COMBAT_STEP] Calling dealCombatDamage...
2026-02-11T04:01:47.909Z [COMBAT_DAMAGE] ========== ENTERING dealCombatDamage (firstStrike=undefined) ==========
2026-02-11T04:01:47.909Z [COMBAT_DAMAGE] Found 0 attackers
2026-02-11T04:01:47.909Z [COMBAT_DAMAGE] No attackers, skipping combat damage
2026-02-11T04:01:47.909Z [COMBAT_STEP] dealCombatDamage completed successfully
2026-02-11T04:01:47.909Z [COMBAT_STEP] Result: damageToPlayers={}, creaturesDestroyed=0
2026-02-11T04:01:47.909Z [COMBAT_STEP] ========== END DAMAGE STEP PROCESSING ==========
2026-02-11T04:01:47.909Z [nextStep] Advanced to phase=combat, step=DAMAGE
2026-02-11T04:01:47.909Z [nextStep] Granting priority to active player p_anwtvwn9 (step: DAMAGE, stack size: 0)
[canAct] p_anwtvwn9: step=DAMAGE, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
2026-02-11T04:01:47.909Z [nextStep] DEBUG - Turn Player p_anwtvwn9:
2026-02-11T04:01:47.909Z [nextStep]   Hand (9): Commander's Sphere, Kraum, Ludevic's Opus, Hour of Promise, Minds Aglow, Arcane Denial, Edric, Spymaster of Trest, Rogue's Passage, Frontier Bivouac, Boros Garrison
2026-02-11T04:01:47.909Z [nextStep]   canAct: false, canRespond: false
2026-02-11T04:01:47.909Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_anwtvwn9
[canAct] p_anwtvwn9: step=DAMAGE, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[priority] autoPassLoop - checking p_anwtvwn9 (ACTIVE): canAct=false, stack.length=0, step=DAMAGE
[priority] Auto-passing for p_anwtvwn9 - no available actions
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_u47pxo6i (non-active): canAct=false, stack.length=0, step=DAMAGE
[priority] Auto-passing for p_u47pxo6i - no available actions
2026-02-11T04:01:47.909Z [nextStep] All players auto-passed after granting priority - caller should advance step
[AI] Auto-advanced to DAMAGE
[AI] Auto-pass detected after step advancement (iteration 4), advancing again
2026-02-11T04:01:47.909Z [nextStep] ========== CALLED ==========
2026-02-11T04:01:47.909Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:01:47.909Z [nextStep] Current: combat/DAMAGE
2026-02-11T04:01:47.909Z [nextStep] Priority: p_anwtvwn9, Turn: p_anwtvwn9
2026-02-11T04:01:47.909Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4495:29)
        at async handleAIPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:2542:7)
2026-02-11T04:01:47.909Z [nextStep] Advanced to phase=combat, step=END_COMBAT
2026-02-11T04:01:47.909Z [nextStep] Granting priority to active player p_anwtvwn9 (step: END_COMBAT, stack size: 0)
[canAct] p_anwtvwn9: step=END_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
2026-02-11T04:01:47.910Z [nextStep] DEBUG - Turn Player p_anwtvwn9:
2026-02-11T04:01:47.910Z [nextStep]   Hand (9): Commander's Sphere, Kraum, Ludevic's Opus, Hour of Promise, Minds Aglow, Arcane Denial, Edric, Spymaster of Trest, Rogue's Passage, Frontier Bivouac, Boros Garrison
2026-02-11T04:01:47.910Z [nextStep]   canAct: false, canRespond: false
2026-02-11T04:01:47.910Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_anwtvwn9
[canAct] p_anwtvwn9: step=END_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[priority] autoPassLoop - checking p_anwtvwn9 (ACTIVE): canAct=false, stack.length=0, step=END_COMBAT
[priority] Auto-passing for p_anwtvwn9 - no available actions
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_u47pxo6i (non-active): canAct=false, stack.length=0, step=END_COMBAT
[priority] Auto-passing for p_u47pxo6i - no available actions
2026-02-11T04:01:47.910Z [nextStep] All players auto-passed after granting priority - caller should advance step
[AI] Auto-advanced to END_COMBAT
[AI] Auto-pass detected after step advancement (iteration 5), advancing again
2026-02-11T04:01:47.910Z [nextStep] ========== CALLED ==========
2026-02-11T04:01:47.910Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:01:47.910Z [nextStep] Current: combat/END_COMBAT
2026-02-11T04:01:47.910Z [nextStep] Priority: p_anwtvwn9, Turn: p_anwtvwn9
2026-02-11T04:01:47.910Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4495:29)
        at async handleAIPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:2542:7)
2026-02-11T04:01:47.910Z [clearManaPool] Processed mana pools for all players
2026-02-11T04:01:47.910Z [nextStep] Advanced to phase=postcombatMain, step=MAIN2
2026-02-11T04:01:47.910Z [nextStep] Granting priority to active player p_anwtvwn9 (step: MAIN2, stack size: 0)
[canAct] p_anwtvwn9: step=MAIN2, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_anwtvwn9, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_anwtvwn9: 1 lands per turn
[canPlayLand] p_anwtvwn9: Already played max lands this turn (1/1)
[canAct] p_anwtvwn9: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_anwtvwn9, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_anwtvwn9: 1 lands per turn
[canPlayLand] p_anwtvwn9: Already played max lands this turn (1/1)
[canAct] p_anwtvwn9: No sorcery-speed actions available in main phase - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
2026-02-11T04:01:47.910Z [nextStep] DEBUG - Turn Player p_anwtvwn9:
2026-02-11T04:01:47.910Z [nextStep]   Hand (9): Commander's Sphere, Kraum, Ludevic's Opus, Hour of Promise, Minds Aglow, Arcane Denial, Edric, Spymaster of Trest, Rogue's Passage, Frontier Bivouac, Boros Garrison
2026-02-11T04:01:47.910Z [nextStep]   canAct: false, canRespond: false
2026-02-11T04:01:47.910Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_anwtvwn9
[canAct] p_anwtvwn9: step=MAIN2, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_anwtvwn9, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_anwtvwn9: 1 lands per turn
[canPlayLand] p_anwtvwn9: Already played max lands this turn (1/1)
[canAct] p_anwtvwn9: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_anwtvwn9, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_anwtvwn9: 1 lands per turn
[canPlayLand] p_anwtvwn9: Already played max lands this turn (1/1)
[canAct] p_anwtvwn9: No sorcery-speed actions available in main phase - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[priority] autoPassLoop - checking p_anwtvwn9 (ACTIVE): canAct=false, stack.length=0, step=MAIN2
[priority] Auto-passing for p_anwtvwn9 - no available actions
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_u47pxo6i (non-active): canAct=false, stack.length=0, step=MAIN2
[priority] Auto-passing for p_u47pxo6i - no available actions
2026-02-11T04:01:47.911Z [nextStep] All players auto-passed after granting priority - caller should advance step
[AI] Auto-advanced to MAIN2
[AI] Auto-pass detected after step advancement (iteration 6), advancing again
2026-02-11T04:01:47.911Z [nextStep] ========== CALLED ==========
2026-02-11T04:01:47.911Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:01:47.911Z [nextStep] Current: postcombatMain/MAIN2
2026-02-11T04:01:47.911Z [nextStep] Priority: p_anwtvwn9, Turn: p_anwtvwn9
2026-02-11T04:01:47.911Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4495:29)
        at async handleAIPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:2542:7)
2026-02-11T04:01:47.911Z [clearManaPool] Processed mana pools for all players
2026-02-11T04:01:47.911Z [nextStep] Advanced to phase=ending, step=END
2026-02-11T04:01:47.911Z [nextStep] Granting priority to active player p_anwtvwn9 (step: END, stack size: 0)
[canAct] p_anwtvwn9: step=END, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
2026-02-11T04:01:47.911Z [nextStep] DEBUG - Turn Player p_anwtvwn9:
2026-02-11T04:01:47.911Z [nextStep]   Hand (9): Commander's Sphere, Kraum, Ludevic's Opus, Hour of Promise, Minds Aglow, Arcane Denial, Edric, Spymaster of Trest, Rogue's Passage, Frontier Bivouac, Boros Garrison
2026-02-11T04:01:47.911Z [nextStep]   canAct: false, canRespond: false
2026-02-11T04:01:47.911Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_anwtvwn9
[canAct] p_anwtvwn9: step=END, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[priority] autoPassLoop - checking p_anwtvwn9 (ACTIVE): canAct=false, stack.length=0, step=END
[priority] Auto-passing for p_anwtvwn9 - no available actions
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_u47pxo6i (non-active): canAct=false, stack.length=0, step=END
[priority] Auto-passing for p_u47pxo6i - no available actions
2026-02-11T04:01:47.911Z [nextStep] All players auto-passed after granting priority - caller should advance step
[AI] Auto-advanced to END
[AI] Auto-pass detected after step advancement (iteration 7), advancing again
2026-02-11T04:01:47.911Z [nextStep] ========== CALLED ==========
2026-02-11T04:01:47.911Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:01:47.911Z [nextStep] Current: ending/END
2026-02-11T04:01:47.911Z [nextStep] Priority: p_anwtvwn9, Turn: p_anwtvwn9
2026-02-11T04:01:47.911Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4495:29)
        at async handleAIPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:2542:7)
2026-02-11T04:01:47.911Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-02-11T04:01:47.911Z [nextStep] Step CLEANUP does not grant priority (Rule 502.1/514.1)
[Resolution] AI player p_anwtvwn9 auto-resolving step: discard_selection
[Resolution] AI discard: discarding 2 card(s)
[priority] Exiting resolution mode - priority restored to p_anwtvwn9
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 9, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_anwtvwn9, viewerId=p_anwtvwn9, match=true
[getPlayableCardIds] Player p_anwtvwn9: step=CLEANUP, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 9 cards in hand
[getPlayableCardIds] Card Arcane Denial blocked - no valid targets
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Kynaios and Tiro of Meletis not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_anwtvwn9: step=CLEANUP, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 9, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_anwtvwn9, viewerId=p_u47pxo6i, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
2026-02-11T04:01:47.919Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782507919_xahua) ==========
2026-02-11T04:01:47.919Z [checkAndTriggerAutoPass] Priority: p_anwtvwn9, Phase: ending, Step: CLEANUP
2026-02-11T04:01:47.919Z [checkAndTriggerAutoPass] p_anwtvwn9 is AI, handled separately (ID: autopass_1770782507919_xahua)
2026-02-11T04:01:47.920Z [nextStep] ========== CALLED ==========
2026-02-11T04:01:47.920Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:01:47.920Z [nextStep] Current: ending/CLEANUP
2026-02-11T04:01:47.920Z [nextStep] Priority: p_anwtvwn9, Turn: p_anwtvwn9
2026-02-11T04:01:47.920Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at handleDiscardResponse (D:\Git\MTGEDH\server\src\socket\resolution.ts:6088:23)
        at handleStepResponse (D:\Git\MTGEDH\server\src\socket\resolution.ts:5752:7)
        at handleAIResolutionStep (D:\Git\MTGEDH\server\src\socket\resolution.ts:1496:15)
2026-02-11T04:01:47.920Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-02-11T04:01:47.920Z [nextStep] Step CLEANUP does not grant priority (Rule 502.1/514.1)
2026-02-11T04:01:47.920Z [endTemporaryEffects] Cleared creaturesAttackedThisTurn tracking
2026-02-11T04:01:47.920Z [nextStep] Cleanup complete, advancing to next turn
2026-02-11T04:01:47.920Z [clearSummoningSicknessForPlayer] Cleared summoning sickness from 1 permanent(s) for p_u47pxo6i
2026-02-11T04:01:47.920Z [nextTurn] Reset planeswalker loyalty activation counters for player p_u47pxo6i
2026-02-11T04:01:47.920Z [nextTurn] Cleared autoPassForTurn flags for new turn
2026-02-11T04:01:47.920Z [nextTurn] Cleared noncreatureSpellsCastThisTurn for new turn
2026-02-11T04:01:47.920Z [nextTurn] Cleared spellsCastFromHandThisTurn for new turn
2026-02-11T04:01:47.920Z [nextTurn] Cleared spellsCastThisTurn for new turn
2026-02-11T04:01:47.920Z [nextTurn] Cleared playedCardFromExileThisTurn for new turn
2026-02-11T04:01:47.920Z [nextTurn] Advanced to player p_u47pxo6i, phase=beginning, step=UNTAP
[calculateMaxLandsPerTurn] Calculating for player p_anwtvwn9, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_anwtvwn9: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[recalculateHandVisibility] Players with hand reveal effects: none
2026-02-11T04:01:47.920Z [setupCleanupDiscard] Queued cleanup discard step for p_anwtvwn9: discard 2 (hand: 9, max: 7)
2026-02-11T04:01:47.920Z [nextStep] Waiting for player to select 2 cards to discard
[AI] Auto-advanced to UNTAP
[AI] Auto-pass loop stopping - human player p_u47pxo6i has priority
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=UNTAP, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_u47pxo6i: step=UNTAP, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-02-11T04:01:47.927Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782507927_vooqg) ==========
2026-02-11T04:01:47.927Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: beginning, Step: UNTAP
[canAct] p_u47pxo6i: step=UNTAP, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:01:47.927Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=true canAct=false (ID: autopass_1770782507927_vooqg)
2026-02-11T04:01:47.927Z [checkAndTriggerAutoPass] p_u47pxo6i CANNOT ACT - proceeding with auto-pass (ID: autopass_1770782507927_vooqg)
2026-02-11T04:01:47.927Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_u47pxo6i with 150ms delay (ID: autopass_1770782507927_vooqg)
[Automation] Auto-pass for turn disabled for p_u47pxo6i in game game_mlhi50vs
[Automation] Auto-pass for turn state in game game_mlhi50vs: {}
[AI] AI player checking priority: { gameId: 'game_mlhi50vs',
  playerId: 'p_anwtvwn9',
  phase: 'beginning',
  step: 'untap',
  isAITurn: false,
  stackEmpty: true,
  priority: 'p_u47pxo6i',
  hasPriority: false }
[AI] AI does not have priority, skipping action
2026-02-11T04:01:48.078Z [executeAutoPass] ========== EXECUTING for p_u47pxo6i (ID: autopass_1770782507927_vooqg) ==========
2026-02-11T04:01:48.078Z [executeAutoPass] Phase: beginning, Step: UNTAP
[canAct] p_u47pxo6i: step=UNTAP, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:01:48.078Z [executeAutoPass] Re-check: p_u47pxo6i canAct=false (ID: autopass_1770782507927_vooqg)
2026-02-11T04:01:48.078Z [executeAutoPass] Proceeding with auto-pass for p_u47pxo6i (ID: autopass_1770782507927_vooqg)
2026-02-11T04:01:48.078Z [executeAutoPass] Set _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782507927_vooqg)
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_u47pxo6i
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_anwtvwn9 (non-active): canAct=false, stack.length=0, step=UNTAP
[priority] Auto-passing for p_anwtvwn9 - no available actions
2026-02-11T04:01:48.078Z [executeAutoPass] passPriority result: changed=true, advanceStep=true, resolvedNow=false (ID: autopass_1770782507927_vooqg)
2026-02-11T04:01:48.079Z [executeAutoPass] Advancing step after auto-pass for p_u47pxo6i (ID: autopass_1770782507927_vooqg)
2026-02-11T04:01:48.079Z [nextStep] ========== CALLED ==========
2026-02-11T04:01:48.079Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:01:48.079Z [nextStep] Current: beginning/UNTAP
2026-02-11T04:01:48.079Z [nextStep] Priority: p_anwtvwn9, Turn: p_u47pxo6i
2026-02-11T04:01:48.079Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at Timeout.executeAutoPass (D:\Git\MTGEDH\server\src\socket\util.ts:2058:31)
        at listOnTimeout (node:internal/timers:588:17)
        at process.processTimers (node:internal/timers:523:7)
2026-02-11T04:01:48.079Z [nextStep] Advanced to phase=beginning, step=UPKEEP
2026-02-11T04:01:48.079Z [nextStep] Granting priority to active player p_u47pxo6i (step: UPKEEP, stack size: 0)
[canAct] p_u47pxo6i: step=UPKEEP, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
2026-02-11T04:01:48.079Z [nextStep] DEBUG - Turn Player p_u47pxo6i:
2026-02-11T04:01:48.079Z [nextStep]   Hand (4): Helm of the Host, Horn of Gondor, Heidegger, Shinra Executive, Ghostly Prison
2026-02-11T04:01:48.079Z [nextStep]   canAct: false, canRespond: false
2026-02-11T04:01:48.079Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_u47pxo6i, turnPlayer: p_u47pxo6i
[canAct] p_u47pxo6i: step=UPKEEP, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[priority] autoPassLoop - checking p_u47pxo6i (ACTIVE): canAct=false, stack.length=0, step=UPKEEP
[priority] Auto-passing for p_u47pxo6i - no available actions
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_anwtvwn9 (non-active): canAct=false, stack.length=0, step=UPKEEP
[priority] Auto-passing for p_anwtvwn9 - no available actions
2026-02-11T04:01:48.079Z [nextStep] All players auto-passed after granting priority - caller should advance step
2026-02-11T04:01:48.079Z [untapPermanentsForPlayer] Player p_u47pxo6i: untapped 3, stun counters removed 0, skipped (doesn't untap) 0
2026-02-11T04:01:48.079Z [executeAutoPass] Cleared _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782507927_vooqg)
2026-02-11T04:01:48.079Z [executeAutoPass] Broadcasting state after auto-pass (ID: autopass_1770782507927_vooqg)
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=UPKEEP, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 3, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 3
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_u47pxo6i: step=UPKEEP, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-02-11T04:01:48.088Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782508088_bmm5z) ==========
2026-02-11T04:01:48.088Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: beginning, Step: UPKEEP
[canAct] p_u47pxo6i: step=UPKEEP, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:01:48.088Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=true canAct=false (ID: autopass_1770782508088_bmm5z)
2026-02-11T04:01:48.088Z [checkAndTriggerAutoPass] p_u47pxo6i CANNOT ACT - proceeding with auto-pass (ID: autopass_1770782508088_bmm5z)
2026-02-11T04:01:48.088Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_u47pxo6i with 150ms delay (ID: autopass_1770782508088_bmm5z)
2026-02-11T04:01:48.088Z [executeAutoPass] Broadcast complete (ID: autopass_1770782507927_vooqg)
[AI] handleAIGameFlow: { gameId: 'game_mlhi50vs',
  playerId: 'p_anwtvwn9',
  phase: 'BEGINNING',
  step: 'UPKEEP',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: false,
  hasPriority: false }
2026-02-11T04:01:48.249Z [executeAutoPass] ========== EXECUTING for p_u47pxo6i (ID: autopass_1770782508088_bmm5z) ==========
2026-02-11T04:01:48.249Z [executeAutoPass] Phase: beginning, Step: UPKEEP
[canAct] p_u47pxo6i: step=UPKEEP, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:01:48.249Z [executeAutoPass] Re-check: p_u47pxo6i canAct=false (ID: autopass_1770782508088_bmm5z)
2026-02-11T04:01:48.249Z [executeAutoPass] Proceeding with auto-pass for p_u47pxo6i (ID: autopass_1770782508088_bmm5z)
2026-02-11T04:01:48.249Z [executeAutoPass] Set _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782508088_bmm5z)
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_u47pxo6i
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_anwtvwn9 (non-active): canAct=false, stack.length=0, step=UPKEEP
[priority] Auto-passing for p_anwtvwn9 - no available actions
2026-02-11T04:01:48.249Z [executeAutoPass] passPriority result: changed=true, advanceStep=true, resolvedNow=false (ID: autopass_1770782508088_bmm5z)
2026-02-11T04:01:48.249Z [executeAutoPass] Advancing step after auto-pass for p_u47pxo6i (ID: autopass_1770782508088_bmm5z)
2026-02-11T04:01:48.250Z [nextStep] ========== CALLED ==========
2026-02-11T04:01:48.250Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:01:48.250Z [nextStep] Current: beginning/UPKEEP
2026-02-11T04:01:48.250Z [nextStep] Priority: p_anwtvwn9, Turn: p_u47pxo6i
2026-02-11T04:01:48.250Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at Timeout.executeAutoPass (D:\Git\MTGEDH\server\src\socket\util.ts:2058:31)
        at listOnTimeout (node:internal/timers:588:17)
        at process.processTimers (node:internal/timers:523:7)
2026-02-11T04:01:48.250Z [nextStep] Advanced to phase=beginning, step=DRAW
2026-02-11T04:01:48.250Z [nextStep] Drew 1 card(s) for p_u47pxo6i at draw step (base: 1, additional: 0)
2026-02-11T04:01:48.250Z [nextStep] Granting priority to active player p_u47pxo6i (step: DRAW, stack size: 0)
[canAct] p_u47pxo6i: step=DRAW, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Can cast instant/flash spell - returning TRUE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: Can cast instant/flash spell
2026-02-11T04:01:48.250Z [nextStep] DEBUG - Turn Player p_u47pxo6i:
2026-02-11T04:01:48.250Z [nextStep]   Hand (5): Helm of the Host, Horn of Gondor, Heidegger, Shinra Executive, Ghostly Prison, Brave the Elements
2026-02-11T04:01:48.250Z [nextStep]   canAct: true, canRespond: true
2026-02-11T04:01:48.250Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_u47pxo6i, turnPlayer: p_u47pxo6i
[canAct] p_u47pxo6i: step=DRAW, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Can cast instant/flash spell - returning TRUE
[priority] autoPassLoop - checking p_u47pxo6i (ACTIVE): canAct=true, stack.length=0, step=DRAW
[priority] autoPassLoop - stopping at p_u47pxo6i: active player can act
2026-02-11T04:01:48.250Z [nextStep] Auto-pass stopped, player p_u47pxo6i has priority
2026-02-11T04:01:48.250Z [executeAutoPass] Cleared _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782508088_bmm5z)
2026-02-11T04:01:48.250Z [executeAutoPass] Broadcasting state after auto-pass (ID: autopass_1770782508088_bmm5z)
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 5, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 5, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=DRAW, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 3, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 3
[getPlayableCardIds] Checking 5 cards in hand
[getPlayableCardIds] Card Brave the Elements (4c8ff6cd-e3ac-4024-aacb-86f7e1f43ba0_mlhi5a9m_1u_cce591fc) is playable
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 1 playable card(s): [ '4c8ff6cd-e3ac-4024-aacb-86f7e1f43ba0_mlhi5a9m_1u_cce591fc' ]
[normalizeViewForEmit] getPlayableCardIds returned 1 cards
[normalizeViewForEmit] Set view.playableCards with 1 cards
[canAct] p_u47pxo6i: step=DRAW, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Can cast instant/flash spell - returning TRUE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: Can cast instant/flash spell
[normalizeViewForEmit] Set canAct=true, canRespond=true
2026-02-11T04:01:48.259Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782508259_c6c5i) ==========
2026-02-11T04:01:48.259Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: beginning, Step: DRAW
[canAct] p_u47pxo6i: step=DRAW, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Can cast instant/flash spell - returning TRUE
2026-02-11T04:01:48.259Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=true canAct=true (ID: autopass_1770782508259_c6c5i)
2026-02-11T04:01:48.259Z [checkAndTriggerAutoPass] p_u47pxo6i CAN ACT - returning early, NO auto-pass (ID: autopass_1770782508259_c6c5i)
2026-02-11T04:01:48.259Z [executeAutoPass] Broadcast complete (ID: autopass_1770782508088_bmm5z)
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 5, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_anwtvwn9, viewerId=p_anwtvwn9, match=true
[getPlayableCardIds] Player p_anwtvwn9: step=DRAW, isMainPhase=false, stackIsEmpty=true, isMyTurn=false
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Arcane Denial blocked - no valid targets
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=false
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Kynaios and Tiro of Meletis not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_anwtvwn9: step=DRAW, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=false
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 5, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_anwtvwn9, viewerId=p_u47pxo6i, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
2026-02-11T04:01:54.317Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782514317_a6uyb) ==========
2026-02-11T04:01:54.317Z [checkAndTriggerAutoPass] Priority: p_anwtvwn9, Phase: beginning, Step: DRAW
2026-02-11T04:01:54.317Z [checkAndTriggerAutoPass] p_anwtvwn9 is AI, handled separately (ID: autopass_1770782514317_a6uyb)
[AI] handleAIGameFlow: { gameId: 'game_mlhi50vs',
  playerId: 'p_anwtvwn9',
  phase: 'BEGINNING',
  step: 'DRAW',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: false,
  hasPriority: true }
[AI] AI player checking priority: { gameId: 'game_mlhi50vs',
  playerId: 'p_anwtvwn9',
  phase: 'beginning',
  step: 'draw',
  isAITurn: false,
  stackEmpty: true,
  priority: 'p_anwtvwn9',
  hasPriority: true }
[AI] AI has priority, proceeding with action
[AI] Not AI turn, passing priority
[AI] Passing priority: { gameId: 'game_mlhi50vs', playerId: 'p_anwtvwn9' }
[AI] All players passed priority with empty stack, advancing step
2026-02-11T04:01:54.934Z [nextStep] ========== CALLED ==========
2026-02-11T04:01:54.934Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:01:54.934Z [nextStep] Current: beginning/DRAW
2026-02-11T04:01:54.934Z [nextStep] Priority: p_u47pxo6i, Turn: p_u47pxo6i
2026-02-11T04:01:54.934Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4470:25)
        at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
        at async handleAIPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:2391:7)
2026-02-11T04:01:54.934Z [clearManaPool] Processed mana pools for all players
2026-02-11T04:01:54.934Z [nextStep] Advanced to phase=precombatMain, step=MAIN1
2026-02-11T04:01:54.934Z [nextStep] Checking precombat main triggers for p_u47pxo6i, found 0 trigger(s)
2026-02-11T04:01:54.934Z [nextStep] Granting priority to active player p_u47pxo6i (step: MAIN1, stack size: 0)
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Checking hand with 5 cards
[canPlayLand] p_u47pxo6i: Sample cards in hand: [Helm of the Host(Legendary Artifact ΓÇö), Horn of Gondor(Legendary Artifact), Heidegger, Shinra Executive(Legendary Creature ΓÇö)]
[canPlayLand] p_u47pxo6i: No lands found in hand of 5 cards - returning FALSE
[canAct] p_u47pxo6i: Can cast instant/flash spell - returning TRUE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: Can cast instant/flash spell
2026-02-11T04:01:54.935Z [nextStep] DEBUG - Turn Player p_u47pxo6i:
2026-02-11T04:01:54.935Z [nextStep]   Hand (5): Helm of the Host, Horn of Gondor, Heidegger, Shinra Executive, Ghostly Prison, Brave the Elements
2026-02-11T04:01:54.935Z [nextStep]   canAct: true, canRespond: true
2026-02-11T04:01:54.935Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_u47pxo6i, turnPlayer: p_u47pxo6i
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Checking hand with 5 cards
[canPlayLand] p_u47pxo6i: Sample cards in hand: [Helm of the Host(Legendary Artifact ΓÇö), Horn of Gondor(Legendary Artifact), Heidegger, Shinra Executive(Legendary Creature ΓÇö)]
[canPlayLand] p_u47pxo6i: No lands found in hand of 5 cards - returning FALSE
[canAct] p_u47pxo6i: Can cast instant/flash spell - returning TRUE
[priority] autoPassLoop - checking p_u47pxo6i (ACTIVE): canAct=true, stack.length=0, step=MAIN1
[priority] autoPassLoop - stopping at p_u47pxo6i: active player can act
2026-02-11T04:01:54.935Z [nextStep] Auto-pass stopped, player p_u47pxo6i has priority
[AI] Advanced to next step for game game_mlhi50vs
[AI] Auto-pass loop stopping - human player p_u47pxo6i has priority
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 5, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 5, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 3, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 3
[getPlayableCardIds] Checking 5 cards in hand
[getPlayableCardIds] Card Helm of the Host not playable - cannot pay cost {4} (after reduction: {"generic":4,"colors":{"W":0,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Horn of Gondor (b14eaeec-d7ce-462a-90d3-2ae5ff605fdb_mlhi5a9m_17_25ae84d4) is playable
[getPlayableCardIds] Card Heidegger, Shinra Executive not playable - cannot pay cost {3}{W} (after reduction: {"generic":3,"colors":{"W":1,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Ghostly Prison (da3b83cb-f778-4096-9022-b1d6637354ff_mlhi5a9m_13_c314e8dc) is playable
[getPlayableCardIds] Card Brave the Elements (4c8ff6cd-e3ac-4024-aacb-86f7e1f43ba0_mlhi5a9m_1u_cce591fc) is playable
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[getPlayableCardIds] Checking lands: landsPlayed=0, max=1
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=true, canPay=false
[getPlayableCardIds] Returning 3 playable card(s): [ 'b14eaeec-d7ce-462a-90d3-2ae5ff605fdb_mlhi5a9m_17_25ae84d4',
  'da3b83cb-f778-4096-9022-b1d6637354ff_mlhi5a9m_13_c314e8dc',
  '4c8ff6cd-e3ac-4024-aacb-86f7e1f43ba0_mlhi5a9m_1u_cce591fc' ]
[normalizeViewForEmit] getPlayableCardIds returned 3 cards
[normalizeViewForEmit] Set view.playableCards with 3 cards
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Checking hand with 5 cards
[canPlayLand] p_u47pxo6i: Sample cards in hand: [Helm of the Host(Legendary Artifact ΓÇö), Horn of Gondor(Legendary Artifact), Heidegger, Shinra Executive(Legendary Creature ΓÇö)]
[canPlayLand] p_u47pxo6i: No lands found in hand of 5 cards - returning FALSE
[canAct] p_u47pxo6i: Can cast instant/flash spell - returning TRUE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: Can cast instant/flash spell
[normalizeViewForEmit] Set canAct=true, canRespond=true
2026-02-11T04:01:54.944Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782514944_q0iwh) ==========
2026-02-11T04:01:54.944Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: precombatMain, Step: MAIN1
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Checking hand with 5 cards
[canPlayLand] p_u47pxo6i: Sample cards in hand: [Helm of the Host(Legendary Artifact ΓÇö), Horn of Gondor(Legendary Artifact), Heidegger, Shinra Executive(Legendary Creature ΓÇö)]
[canPlayLand] p_u47pxo6i: No lands found in hand of 5 cards - returning FALSE
[canAct] p_u47pxo6i: Can cast instant/flash spell - returning TRUE
2026-02-11T04:01:54.945Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=true canAct=true (ID: autopass_1770782514944_q0iwh)
2026-02-11T04:01:54.945Z [checkAndTriggerAutoPass] p_u47pxo6i CAN ACT - returning early, NO auto-pass (ID: autopass_1770782514944_q0iwh)
[requestCastSpell] ======== REQUEST START ========
[requestCastSpell] gameId: game_mlhi50vs, cardId: b14eaeec-d7ce-462a-90d3-2ae5ff605fdb_mlhi5a9m_17_25ae84d4, faceIndex:undefined
[requestCastSpell] playerId: p_u47pxo6i, priority: p_u47pxo6i
[priority] Entering resolution mode - priority will return to p_u47pxo6i after resolution completes
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 5, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=null, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 5, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=null, viewerId=p_u47pxo6i, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
2026-02-11T04:01:58.764Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782518764_38sew) ==========
2026-02-11T04:01:58.764Z [checkAndTriggerAutoPass] Priority: null, Phase: precombatMain, Step: MAIN1
2026-02-11T04:01:58.764Z [checkAndTriggerAutoPass] Priority is null due to active resolution (1 pending steps), returning (ID: autopass_1770782518764_38sew)
[requestCastSpell] No targets needed, queued spell payment step for Horn of Gondor
[requestCastSpell] ======== REQUEST END (waiting for payment) ========
[priority] Exiting resolution mode - priority restored to p_u47pxo6i
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 5, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 5, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 3, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 3
[getPlayableCardIds] Checking 5 cards in hand
[getPlayableCardIds] Card Helm of the Host not playable - cannot pay cost {4} (after reduction: {"generic":4,"colors":{"W":0,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Horn of Gondor (b14eaeec-d7ce-462a-90d3-2ae5ff605fdb_mlhi5a9m_17_25ae84d4) is playable
[getPlayableCardIds] Card Heidegger, Shinra Executive not playable - cannot pay cost {3}{W} (after reduction: {"generic":3,"colors":{"W":1,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Ghostly Prison (da3b83cb-f778-4096-9022-b1d6637354ff_mlhi5a9m_13_c314e8dc) is playable
[getPlayableCardIds] Card Brave the Elements (4c8ff6cd-e3ac-4024-aacb-86f7e1f43ba0_mlhi5a9m_1u_cce591fc) is playable
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[getPlayableCardIds] Checking lands: landsPlayed=0, max=1
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=true, canPay=false
[getPlayableCardIds] Returning 3 playable card(s): [ 'b14eaeec-d7ce-462a-90d3-2ae5ff605fdb_mlhi5a9m_17_25ae84d4',
  'da3b83cb-f778-4096-9022-b1d6637354ff_mlhi5a9m_13_c314e8dc',
  '4c8ff6cd-e3ac-4024-aacb-86f7e1f43ba0_mlhi5a9m_1u_cce591fc' ]
[normalizeViewForEmit] getPlayableCardIds returned 3 cards
[normalizeViewForEmit] Set view.playableCards with 3 cards
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Checking hand with 5 cards
[canPlayLand] p_u47pxo6i: Sample cards in hand: [Helm of the Host(Legendary Artifact ΓÇö), Horn of Gondor(Legendary Artifact), Heidegger, Shinra Executive(Legendary Creature ΓÇö)]
[canPlayLand] p_u47pxo6i: No lands found in hand of 5 cards - returning FALSE
[canAct] p_u47pxo6i: Can cast instant/flash spell - returning TRUE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: Can cast instant/flash spell
[normalizeViewForEmit] Set canAct=true, canRespond=true
2026-02-11T04:01:59.799Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782519799_686ns) ==========
2026-02-11T04:01:59.799Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: precombatMain, Step: MAIN1
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Checking hand with 5 cards
[canPlayLand] p_u47pxo6i: Sample cards in hand: [Helm of the Host(Legendary Artifact ΓÇö), Horn of Gondor(Legendary Artifact), Heidegger, Shinra Executive(Legendary Creature ΓÇö)]
[canPlayLand] p_u47pxo6i: No lands found in hand of 5 cards - returning FALSE
[canAct] p_u47pxo6i: Can cast instant/flash spell - returning TRUE
2026-02-11T04:01:59.799Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=true canAct=true (ID: autopass_1770782519799_686ns)
2026-02-11T04:01:59.799Z [checkAndTriggerAutoPass] p_u47pxo6i CAN ACT - returning early, NO auto-pass (ID: autopass_1770782519799_686ns)
[Resolution] Step step-1770782518756-8 completed by p_u47pxo6i: mana_payment_choice
[Resolution] Spell payment complete for Horn of Gondor; resuming cast completion (effectId='cast_b14eaeec-d7ce-462a-90d3-2ae5ff605fdb_mlhi5a9m_17_25ae84d4_1770782518756')
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 5, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 5, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 3, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 3
[getPlayableCardIds] Checking 5 cards in hand
[getPlayableCardIds] Card Helm of the Host not playable - cannot pay cost {4} (after reduction: {"generic":4,"colors":{"W":0,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Horn of Gondor (b14eaeec-d7ce-462a-90d3-2ae5ff605fdb_mlhi5a9m_17_25ae84d4) is playable
[getPlayableCardIds] Card Heidegger, Shinra Executive not playable - cannot pay cost {3}{W} (after reduction: {"generic":3,"colors":{"W":1,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Ghostly Prison (da3b83cb-f778-4096-9022-b1d6637354ff_mlhi5a9m_13_c314e8dc) is playable
[getPlayableCardIds] Card Brave the Elements (4c8ff6cd-e3ac-4024-aacb-86f7e1f43ba0_mlhi5a9m_1u_cce591fc) is playable
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[getPlayableCardIds] Checking lands: landsPlayed=0, max=1
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=true, canPay=false
[getPlayableCardIds] Returning 3 playable card(s): [ 'b14eaeec-d7ce-462a-90d3-2ae5ff605fdb_mlhi5a9m_17_25ae84d4',
  'da3b83cb-f778-4096-9022-b1d6637354ff_mlhi5a9m_13_c314e8dc',
  '4c8ff6cd-e3ac-4024-aacb-86f7e1f43ba0_mlhi5a9m_1u_cce591fc' ]
[normalizeViewForEmit] getPlayableCardIds returned 3 cards
[normalizeViewForEmit] Set view.playableCards with 3 cards
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Checking hand with 5 cards
[canPlayLand] p_u47pxo6i: Sample cards in hand: [Helm of the Host(Legendary Artifact ΓÇö), Horn of Gondor(Legendary Artifact), Heidegger, Shinra Executive(Legendary Creature ΓÇö)]
[canPlayLand] p_u47pxo6i: No lands found in hand of 5 cards - returning FALSE
[canAct] p_u47pxo6i: Can cast instant/flash spell - returning TRUE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: Can cast instant/flash spell
[normalizeViewForEmit] Set canAct=true, canRespond=true
2026-02-11T04:01:59.808Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782519808_ef1cy) ==========
2026-02-11T04:01:59.808Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: precombatMain, Step: MAIN1
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Checking hand with 5 cards
[canPlayLand] p_u47pxo6i: Sample cards in hand: [Helm of the Host(Legendary Artifact ΓÇö), Horn of Gondor(Legendary Artifact), Heidegger, Shinra Executive(Legendary Creature ΓÇö)]
[canPlayLand] p_u47pxo6i: No lands found in hand of 5 cards - returning FALSE
[canAct] p_u47pxo6i: Can cast instant/flash spell - returning TRUE
2026-02-11T04:01:59.808Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=true canAct=true (ID: autopass_1770782519808_ef1cy)
2026-02-11T04:01:59.808Z [checkAndTriggerAutoPass] p_u47pxo6i CAN ACT - returning early, NO auto-pass (ID: autopass_1770782519808_ef1cy)
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 5, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 5, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 3, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 3
[getPlayableCardIds] Checking 5 cards in hand
[getPlayableCardIds] Card Helm of the Host not playable - cannot pay cost {4} (after reduction: {"generic":4,"colors":{"W":0,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Horn of Gondor (b14eaeec-d7ce-462a-90d3-2ae5ff605fdb_mlhi5a9m_17_25ae84d4) is playable
[getPlayableCardIds] Card Heidegger, Shinra Executive not playable - cannot pay cost {3}{W} (after reduction: {"generic":3,"colors":{"W":1,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Ghostly Prison (da3b83cb-f778-4096-9022-b1d6637354ff_mlhi5a9m_13_c314e8dc) is playable
[getPlayableCardIds] Card Brave the Elements (4c8ff6cd-e3ac-4024-aacb-86f7e1f43ba0_mlhi5a9m_1u_cce591fc) is playable
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[getPlayableCardIds] Checking lands: landsPlayed=0, max=1
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=true, canPay=false
[getPlayableCardIds] Returning 3 playable card(s): [ 'b14eaeec-d7ce-462a-90d3-2ae5ff605fdb_mlhi5a9m_17_25ae84d4',
  'da3b83cb-f778-4096-9022-b1d6637354ff_mlhi5a9m_13_c314e8dc',
  '4c8ff6cd-e3ac-4024-aacb-86f7e1f43ba0_mlhi5a9m_1u_cce591fc' ]
[normalizeViewForEmit] getPlayableCardIds returned 3 cards
[normalizeViewForEmit] Set view.playableCards with 3 cards
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Checking hand with 5 cards
[canPlayLand] p_u47pxo6i: Sample cards in hand: [Helm of the Host(Legendary Artifact ΓÇö), Horn of Gondor(Legendary Artifact), Heidegger, Shinra Executive(Legendary Creature ΓÇö)]
[canPlayLand] p_u47pxo6i: No lands found in hand of 5 cards - returning FALSE
[canAct] p_u47pxo6i: Can cast instant/flash spell - returning TRUE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: Can cast instant/flash spell
[normalizeViewForEmit] Set canAct=true, canRespond=true
2026-02-11T04:01:59.820Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782519820_upmxu) ==========
2026-02-11T04:01:59.820Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: precombatMain, Step: MAIN1
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 6 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Checking hand with 5 cards
[canPlayLand] p_u47pxo6i: Sample cards in hand: [Helm of the Host(Legendary Artifact ΓÇö), Horn of Gondor(Legendary Artifact), Heidegger, Shinra Executive(Legendary Creature ΓÇö)]
[canPlayLand] p_u47pxo6i: No lands found in hand of 5 cards - returning FALSE
[canAct] p_u47pxo6i: Can cast instant/flash spell - returning TRUE
2026-02-11T04:01:59.820Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=true canAct=true (ID: autopass_1770782519820_upmxu)
2026-02-11T04:01:59.820Z [checkAndTriggerAutoPass] p_u47pxo6i CAN ACT - returning early, NO auto-pass (ID: autopass_1770782519820_upmxu)
[completeCastSpell] DEBUG START ========================================
[completeCastSpell] cardId: b14eaeec-d7ce-462a-90d3-2ae5ff605fdb_mlhi5a9m_17_25ae84d4, effectId: cast_b14eaeec-d7ce-462a-90d3-2ae5ff605fdb_mlhi5a9m_17_25ae84d4_1770782518756
[completeCastSpell] targets from client: undefined
[completeCastSpell] payment from client: [{"permanentId":"perm_74b6t82s","mana":"W","count":1},{"permanentId":"perm_0a48ge2r","mana":"W","count":1},{"permanentId":"perm_3d3wz0ga","mana":"W","count":1}]
[completeCastSpell] Found pendingCast: {
  "cardId": "b14eaeec-d7ce-462a-90d3-2ae5ff605fdb_mlhi5a9m_17_25ae84d4",
  "cardName": "Horn of Gondor",
  "manaCost": "{3}",
  "fromZone": "hand",
  "playerId": "p_u47pxo6i",
  "validTargetIds": [],
  "targets": [],
  "card": {
    "id": "b14eaeec-d7ce-462a-90d3-2ae5ff605fdb_mlhi5a9m_17_25ae84d4",
    "name": "Horn of Gondor",
    "type_line": "Legendary Artifact",
    "oracle_text": "When Horn of Gondor enters, create a 1/1 white Human Soldier creature token.\n{3}, {T}: Create X 1/1 white Human Soldier creature tokens, where X is the number of Humans you control.",
    "image_uris": {
      "small": "https://cards.scryfall.io/small/front/b/1/b14eaeec-d7ce-462a-90d3-2ae5ff605fdb.jpg?1686970170",
      "normal": "https://cards.scryfall.io/normal/front/b/1/b14eaeec-d7ce-462a-90d3-2ae5ff605fdb.jpg?1686970170",
      "art_crop": "https://cards.scryfall.io/art_crop/front/b/1/b14eaeec-d7ce-462a-90d3-2ae5ff605fdb.jpg?1686970170"
    },
    "mana_cost": "{3}",
    "cmc": 3,
    "layout": "normal",
    "zone": "library"
  },
  "noTargets": true,
  "pendingPaymentAfterAdditionalCost": false
}
[completeCastSpell] Using client-sent targets: none
[completeCastSpell] Final targets to use: none
[completeCastSpell] Calling handleCastSpellFromHand with skipInteractivePrompts=true
[completeCastSpell] DEBUG END ==========================================
[handleCastSpellFromHand] ======== DEBUG START ========
[handleCastSpellFromHand] cardId: b14eaeec-d7ce-462a-90d3-2ae5ff605fdb_mlhi5a9m_17_25ae84d4
[handleCastSpellFromHand] targets: []
[handleCastSpellFromHand] payment: [{"permanentId":"perm_74b6t82s","mana":"W","count":1},{"permanentId":"perm_0a48ge2r","mana":"W","count":1},{"permanentId":"perm_3d3wz0ga","mana":"W","count":1}]
[handleCastSpellFromHand] skipInteractivePrompts: true
[handleCastSpellFromHand] playerId: p_u47pxo6i
[handleCastSpellFromHand] fromZone: hand
[handleCastSpellFromHand] priority: p_u47pxo6i
[handleCastSpellFromHand] Horn of Gondor: spellSpec=false, targetReqs=false, needsTargetSelection=null, hasTargets=false
[handleCastSpellFromHand] ======== DEBUG END ========
[castSpellFromHand] Processing payment for Horn of Gondor: [ { permanentId: 'perm_74b6t82s', mana: 'W', count: 1 },
  { permanentId: 'perm_0a48ge2r', mana: 'W', count: 1 },
  { permanentId: 'perm_3d3wz0ga', mana: 'W', count: 1 } ]
[castSpellFromHand] Added 1 W mana to p_u47pxo6i's pool from Plains
[castSpellFromHand] Added 1 W mana to p_u47pxo6i's pool from Plains
[castSpellFromHand] Added 1 W mana to p_u47pxo6i's pool from Plains
[castSpellFromHand] Consumed 3 W mana for generic cost
[castSpellFromHand] Converge: 1 different color(s) spent for Horn of Gondor
[castSpellFromHand] Added converge data to stack item: 1 colors (white)
[castSpell] Player p_u47pxo6i cast Horn of Gondor (b14eaeec-d7ce-462a-90d3-2ae5ff605fdb_mlhi5a9m_17_25ae84d4) from handvia applyEvent
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 1,
  stackItems: [ 'Horn of Gondor' ],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 1,
  stackItems: [ 'Horn of Gondor' ],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Card Brave the Elements not playable - cannot pay cost {W} (after reduction: {"generic":0,"colors":{"W":1,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Not checking lands: isMainPhase=true, stackIsEmpty=false, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-02-11T04:01:59.833Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782519833_5h7zp) ==========
2026-02-11T04:01:59.833Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: precombatMain, Step: MAIN1
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:01:59.833Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=true canAct=false (ID: autopass_1770782519833_5h7zp)
2026-02-11T04:01:59.833Z [checkAndTriggerAutoPass] p_u47pxo6i CANNOT ACT - proceeding with auto-pass (ID: autopass_1770782519833_5h7zp)
2026-02-11T04:01:59.833Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_u47pxo6i with 150ms delay (ID: autopass_1770782519833_5h7zp)
2026-02-11T04:01:59.985Z [executeAutoPass] ========== EXECUTING for p_u47pxo6i (ID: autopass_1770782519833_5h7zp) ==========
2026-02-11T04:01:59.986Z [executeAutoPass] Phase: precombatMain, Step: MAIN1
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:01:59.986Z [executeAutoPass] Re-check: p_u47pxo6i canAct=false (ID: autopass_1770782519833_5h7zp)
2026-02-11T04:01:59.986Z [executeAutoPass] Proceeding with auto-pass for p_u47pxo6i (ID: autopass_1770782519833_5h7zp)
2026-02-11T04:01:59.986Z [executeAutoPass] Set _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782519833_5h7zp)
2026-02-11T04:01:59.986Z [checkPendingInteractions] Pending: stack_not_empty
[priority] autoPassLoop - blocking due to pending interactions: stack_not_empty
2026-02-11T04:01:59.986Z [executeAutoPass] passPriority result: changed=true, advanceStep=false, resolvedNow=false (ID:autopass_1770782519833_5h7zp)
2026-02-11T04:01:59.986Z [executeAutoPass] Cleared _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782519833_5h7zp)
2026-02-11T04:01:59.986Z [executeAutoPass] Broadcasting state after auto-pass (ID: autopass_1770782519833_5h7zp)
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 1,
  stackItems: [ 'Horn of Gondor' ],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_anwtvwn9, viewerId=p_anwtvwn9, match=true
[getPlayableCardIds] Player p_anwtvwn9: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isMyTurn=false
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Arcane Denial not playable - cannot pay cost {1}{U} (after reduction: {"generic":1,"colors":{"W":0,"U":1,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Not checking lands: isMainPhase=true, stackIsEmpty=false, isMyTurn=false
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Kynaios and Tiro of Meletis not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_anwtvwn9: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isTurnPlayer=false
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 1,
  stackItems: [ 'Horn of Gondor' ],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_anwtvwn9, viewerId=p_u47pxo6i, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
2026-02-11T04:01:59.994Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782519994_0isl0) ==========
2026-02-11T04:01:59.994Z [checkAndTriggerAutoPass] Priority: p_anwtvwn9, Phase: precombatMain, Step: MAIN1
2026-02-11T04:01:59.994Z [checkAndTriggerAutoPass] p_anwtvwn9 is AI, handled separately (ID: autopass_1770782519994_0isl0)
2026-02-11T04:01:59.994Z [executeAutoPass] Broadcast complete (ID: autopass_1770782519833_5h7zp)
[AI] handleAIGameFlow: { gameId: 'game_mlhi50vs',
  playerId: 'p_anwtvwn9',
  phase: 'PRECOMBATMAIN',
  step: 'MAIN1',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: false,
  hasPriority: true }
[AI] AI player checking priority: { gameId: 'game_mlhi50vs',
  playerId: 'p_anwtvwn9',
  phase: 'precombatmain',
  step: 'main1',
  isAITurn: false,
  stackEmpty: false,
  priority: 'p_anwtvwn9',
  hasPriority: true }
[AI] AI has priority, proceeding with action
[AI] Not AI turn, passing priority
[AI] Passing priority: { gameId: 'game_mlhi50vs', playerId: 'p_anwtvwn9' }
2026-02-11T04:02:00.607Z [checkPendingInteractions] Pending: stack_not_empty
[priority] autoPassLoop - blocking due to pending interactions: stack_not_empty
[AI] All players passed priority, resolving top of stack
[resolveTopOfStack] Permanent Horn of Gondor entered battlefield under p_u47pxo6i
[resolveTopOfStack] Found 1 ETB trigger(s) for Horn of Gondor
[resolveTopOfStack] ΓÜí Horn of Gondor's triggered ability (controlled by p_u47pxo6i): create a 1/1 white Human Soldiercreature token
[calculateMaxLandsPerTurn] Calculating for player p_anwtvwn9, battlefield has 7 permanents
[calculateMaxLandsPerTurn] Final result for p_anwtvwn9: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 7 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[recalculateHandVisibility] Players with hand reveal effects: none
[resolveTopOfStack] Reset priorityPassedBy after spell resolution
[AI] Stack resolved for game game_mlhi50vs
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 1,
  stackItems: [ 'trigger_tedf70se' ],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 1,
  stackItems: [ 'trigger_tedf70se' ],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Card Brave the Elements not playable - cannot pay cost {W} (after reduction: {"generic":0,"colors":{"W":1,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Not checking lands: isMainPhase=true, stackIsEmpty=false, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 1 playable card(s): [ 'perm_el826qea' ]
[normalizeViewForEmit] getPlayableCardIds returned 1 cards
[normalizeViewForEmit] Set view.playableCards with 1 cards
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-02-11T04:02:00.621Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782520621_fp35z) ==========
2026-02-11T04:02:00.621Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: precombatMain, Step: MAIN1
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:02:00.622Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=true canAct=false (ID: autopass_1770782520621_fp35z)
2026-02-11T04:02:00.622Z [checkAndTriggerAutoPass] p_u47pxo6i CANNOT ACT - proceeding with auto-pass (ID: autopass_1770782520621_fp35z)
2026-02-11T04:02:00.622Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_u47pxo6i with 150ms delay (ID: autopass_1770782520621_fp35z)
2026-02-11T04:02:00.777Z [executeAutoPass] ========== EXECUTING for p_u47pxo6i (ID: autopass_1770782520621_fp35z) ==========
2026-02-11T04:02:00.777Z [executeAutoPass] Phase: precombatMain, Step: MAIN1
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:02:00.777Z [executeAutoPass] Re-check: p_u47pxo6i canAct=false (ID: autopass_1770782520621_fp35z)
2026-02-11T04:02:00.777Z [executeAutoPass] Proceeding with auto-pass for p_u47pxo6i (ID: autopass_1770782520621_fp35z)
2026-02-11T04:02:00.777Z [executeAutoPass] Set _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782520621_fp35z)
2026-02-11T04:02:00.777Z [checkPendingInteractions] Pending: stack_not_empty
[priority] autoPassLoop - blocking due to pending interactions: stack_not_empty
2026-02-11T04:02:00.778Z [executeAutoPass] passPriority result: changed=true, advanceStep=false, resolvedNow=false (ID:autopass_1770782520621_fp35z)
2026-02-11T04:02:00.778Z [executeAutoPass] Cleared _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782520621_fp35z)
2026-02-11T04:02:00.778Z [executeAutoPass] Broadcasting state after auto-pass (ID: autopass_1770782520621_fp35z)
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 1,
  stackItems: [ 'trigger_tedf70se' ],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_anwtvwn9, viewerId=p_anwtvwn9, match=true
[getPlayableCardIds] Player p_anwtvwn9: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isMyTurn=false
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Arcane Denial blocked - no valid targets
[getPlayableCardIds] Not checking lands: isMainPhase=true, stackIsEmpty=false, isMyTurn=false
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Kynaios and Tiro of Meletis not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_anwtvwn9: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isTurnPlayer=false
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 1,
  stackItems: [ 'trigger_tedf70se' ],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_anwtvwn9, viewerId=p_u47pxo6i, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
2026-02-11T04:02:00.787Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782520787_d8iii) ==========
2026-02-11T04:02:00.787Z [checkAndTriggerAutoPass] Priority: p_anwtvwn9, Phase: precombatMain, Step: MAIN1
2026-02-11T04:02:00.787Z [checkAndTriggerAutoPass] p_anwtvwn9 is AI, handled separately (ID: autopass_1770782520787_d8iii)
2026-02-11T04:02:00.787Z [executeAutoPass] Broadcast complete (ID: autopass_1770782520621_fp35z)
[AI] handleAIGameFlow: { gameId: 'game_mlhi50vs',
  playerId: 'p_anwtvwn9',
  phase: 'PRECOMBATMAIN',
  step: 'MAIN1',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: false,
  hasPriority: true }
[AI] AI player checking priority: { gameId: 'game_mlhi50vs',
  playerId: 'p_anwtvwn9',
  phase: 'precombatmain',
  step: 'main1',
  isAITurn: false,
  stackEmpty: false,
  priority: 'p_anwtvwn9',
  hasPriority: true }
[AI] AI has priority, proceeding with action
[AI] Not AI turn, passing priority
[AI] Passing priority: { gameId: 'game_mlhi50vs', playerId: 'p_anwtvwn9' }
2026-02-11T04:02:01.409Z [checkPendingInteractions] Pending: stack_not_empty
[priority] autoPassLoop - blocking due to pending interactions: stack_not_empty
[AI] All players passed priority, resolving top of stack
[resolveTopOfStack] Triggered ability from Horn of Gondor resolved: create a 1/1 white Human Soldier creature token
[resolveTopOfStack] Executing trigger effect: controller=p_u47pxo6i, sourceName=Horn of Gondor, triggerType=etb
[executeTriggerEffect] triggerType=etb, sourceName=Horn of Gondor
[executeTriggerEffect] Generic trigger creating 1 tokens (base: 1, multiplier: 1)
[executeTriggerEffect] Creating tokens: tokenName=Human Soldier, power=1, toughness=1, colors=["W"]
[tokens] getTokenImageUrls: name=Human Soldier, power=1, toughness=1, colors=["W"], abilities=undefined
[tokens] Best dynamic match for human soldier: Human Soldier (score: 12)
[executeTriggerEffect] Token 1/1: imageUrls=found, normal=https://cards.scryfall.io/normal/front/6/3/631c2c1...
[executeTriggerEffect] Created 1/1 Human Soldier token for p_u47pxo6i
[AI] Stack resolved for game game_mlhi50vs
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Card Helm of the Host not playable - cannot pay cost {4} (after reduction: {"generic":4,"colors":{"W":0,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Heidegger, Shinra Executive not playable - cannot pay cost {3}{W} (after reduction: {"generic":3,"colors":{"W":1,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Ghostly Prison not playable - cannot pay cost {2}{W} (after reduction: {"generic":2,"colors":{"W":1,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Brave the Elements not playable - cannot pay cost {W} (after reduction: {"generic":0,"colors":{"W":1,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 8 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[getPlayableCardIds] Checking lands: landsPlayed=0, max=1
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=true, canPay=false
[getPlayableCardIds] Returning 1 playable card(s): [ 'perm_el826qea' ]
[normalizeViewForEmit] getPlayableCardIds returned 1 cards
[normalizeViewForEmit] Set view.playableCards with 1 cards
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 8 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Checking hand with 4 cards
[canPlayLand] p_u47pxo6i: Sample cards in hand: [Helm of the Host(Legendary Artifact ΓÇö), Heidegger, Shinra Executive(Legendary Creature ΓÇö), Ghostly Prison(Enchantment)]
[canPlayLand] p_u47pxo6i: No lands found in hand of 4 cards - returning FALSE
[canAct] p_u47pxo6i: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 8 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Checking hand with 4 cards
[canPlayLand] p_u47pxo6i: Sample cards in hand: [Helm of the Host(Legendary Artifact ΓÇö), Heidegger, Shinra Executive(Legendary Creature ΓÇö), Ghostly Prison(Enchantment)]
[canPlayLand] p_u47pxo6i: No lands found in hand of 4 cards - returning FALSE
[canAct] p_u47pxo6i: No sorcery-speed actions available in main phase - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-02-11T04:02:01.428Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782521428_0yhpz) ==========
2026-02-11T04:02:01.428Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: precombatMain, Step: MAIN1
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 8 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Checking hand with 4 cards
[canPlayLand] p_u47pxo6i: Sample cards in hand: [Helm of the Host(Legendary Artifact ΓÇö), Heidegger, Shinra Executive(Legendary Creature ΓÇö), Ghostly Prison(Enchantment)]
[canPlayLand] p_u47pxo6i: No lands found in hand of 4 cards - returning FALSE
[canAct] p_u47pxo6i: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 8 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Checking hand with 4 cards
[canPlayLand] p_u47pxo6i: Sample cards in hand: [Helm of the Host(Legendary Artifact ΓÇö), Heidegger, Shinra Executive(Legendary Creature ΓÇö), Ghostly Prison(Enchantment)]
[canPlayLand] p_u47pxo6i: No lands found in hand of 4 cards - returning FALSE
[canAct] p_u47pxo6i: No sorcery-speed actions available in main phase - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:02:01.428Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=true canAct=false (ID: autopass_1770782521428_0yhpz)
2026-02-11T04:02:01.428Z [checkAndTriggerAutoPass] p_u47pxo6i CANNOT ACT - proceeding with auto-pass (ID: autopass_1770782521428_0yhpz)
2026-02-11T04:02:01.428Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_u47pxo6i with 150ms delay (ID: autopass_1770782521428_0yhpz)
2026-02-11T04:02:01.580Z [executeAutoPass] ========== EXECUTING for p_u47pxo6i (ID: autopass_1770782521428_0yhpz) ==========
2026-02-11T04:02:01.580Z [executeAutoPass] Phase: precombatMain, Step: MAIN1
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 8 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Checking hand with 4 cards
[canPlayLand] p_u47pxo6i: Sample cards in hand: [Helm of the Host(Legendary Artifact ΓÇö), Heidegger, Shinra Executive(Legendary Creature ΓÇö), Ghostly Prison(Enchantment)]
[canPlayLand] p_u47pxo6i: No lands found in hand of 4 cards - returning FALSE
[canAct] p_u47pxo6i: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 8 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Checking hand with 4 cards
[canPlayLand] p_u47pxo6i: Sample cards in hand: [Helm of the Host(Legendary Artifact ΓÇö), Heidegger, Shinra Executive(Legendary Creature ΓÇö), Ghostly Prison(Enchantment)]
[canPlayLand] p_u47pxo6i: No lands found in hand of 4 cards - returning FALSE
[canAct] p_u47pxo6i: No sorcery-speed actions available in main phase - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:02:01.581Z [executeAutoPass] Re-check: p_u47pxo6i canAct=false (ID: autopass_1770782521428_0yhpz)
2026-02-11T04:02:01.581Z [executeAutoPass] Proceeding with auto-pass for p_u47pxo6i (ID: autopass_1770782521428_0yhpz)
2026-02-11T04:02:01.581Z [executeAutoPass] Set _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782521428_0yhpz)
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_u47pxo6i
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_anwtvwn9 (non-active): canAct=false, stack.length=0, step=MAIN1
[priority] Auto-passing for p_anwtvwn9 - no available actions
2026-02-11T04:02:01.582Z [executeAutoPass] passPriority result: changed=true, advanceStep=true, resolvedNow=false (ID: autopass_1770782521428_0yhpz)
2026-02-11T04:02:01.582Z [executeAutoPass] Advancing step after auto-pass for p_u47pxo6i (ID: autopass_1770782521428_0yhpz)
2026-02-11T04:02:01.582Z [nextStep] ========== CALLED ==========
2026-02-11T04:02:01.582Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:02:01.582Z [nextStep] Current: precombatMain/MAIN1
2026-02-11T04:02:01.582Z [nextStep] Priority: p_anwtvwn9, Turn: p_u47pxo6i
2026-02-11T04:02:01.582Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at Timeout.executeAutoPass (D:\Git\MTGEDH\server\src\socket\util.ts:2058:31)
        at listOnTimeout (node:internal/timers:588:17)
        at process.processTimers (node:internal/timers:523:7)
2026-02-11T04:02:01.582Z [clearManaPool] Processed mana pools for all players
2026-02-11T04:02:01.582Z [nextStep] Advanced to phase=combat, step=BEGIN_COMBAT
[getBeginningOfCombatTriggers] SOLDIER Military Program: triggers on YOUR turn (controller=p_u47pxo6i, active=p_u47pxo6i)
[getBeginningOfCombatTriggers] Total triggers for activePlayer=p_u47pxo6i: 1
2026-02-11T04:02:01.582Z [nextStep] Found 1 begin_combat trigger(s)
2026-02-11T04:02:01.582Z [nextStep] ΓÜí Pushed begin_combat trigger: SOLDIER Military Program - Choose one. If you control a commander, you may choose both instead: Create a 1/1 white Soldier creature token; or Put a +1/+1 counter on each of up to two Soldiers you control. (modal)
2026-02-11T04:02:01.582Z [nextStep] Granting priority to active player p_u47pxo6i (step: BEGIN_COMBAT, stack size: 1)
[canAct] p_u47pxo6i: step=BEGIN_COMBAT, isMainPhase=false, stackIsEmpty=false, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
2026-02-11T04:02:01.583Z [nextStep] DEBUG - Turn Player p_u47pxo6i:
2026-02-11T04:02:01.583Z [nextStep]   Hand (4): Helm of the Host, Heidegger, Shinra Executive, Ghostly Prison, Brave the Elements
2026-02-11T04:02:01.583Z [nextStep]   canAct: false, canRespond: false
2026-02-11T04:02:01.583Z [nextStep] Checking if auto-pass should apply after granting priority
2026-02-11T04:02:01.583Z [checkPendingInteractions] Pending: stack_not_empty
[priority] autoPassLoop - blocking due to pending interactions: stack_not_empty
2026-02-11T04:02:01.583Z [nextStep] Auto-pass stopped, player p_u47pxo6i has priority
2026-02-11T04:02:01.583Z [executeAutoPass] Cleared _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782521428_0yhpz)
2026-02-11T04:02:01.583Z [executeAutoPass] Broadcasting state after auto-pass (ID: autopass_1770782521428_0yhpz)
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 1,
  stackItems: [ 'combat_1770782521582_46gmpw' ],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 1,
  stackItems: [ 'combat_1770782521582_46gmpw' ],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=BEGIN_COMBAT, isMainPhase=false, stackIsEmpty=false, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Card Brave the Elements not playable - cannot pay cost {W} (after reduction: {"generic":0,"colors":{"W":1,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=false, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 1 playable card(s): [ 'perm_el826qea' ]
[normalizeViewForEmit] getPlayableCardIds returned 1 cards
[normalizeViewForEmit] Set view.playableCards with 1 cards
[canAct] p_u47pxo6i: step=BEGIN_COMBAT, isMainPhase=false, stackIsEmpty=false, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-02-11T04:02:01.593Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782521593_4cx1r) ==========
2026-02-11T04:02:01.593Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: combat, Step: BEGIN_COMBAT
[canAct] p_u47pxo6i: step=BEGIN_COMBAT, isMainPhase=false, stackIsEmpty=false, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:02:01.593Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=true canAct=false (ID: autopass_1770782521593_4cx1r)
2026-02-11T04:02:01.593Z [checkAndTriggerAutoPass] p_u47pxo6i CANNOT ACT - proceeding with auto-pass (ID: autopass_1770782521593_4cx1r)
2026-02-11T04:02:01.593Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_u47pxo6i with 150ms delay (ID: autopass_1770782521593_4cx1r)
2026-02-11T04:02:01.593Z [executeAutoPass] Broadcast complete (ID: autopass_1770782521428_0yhpz)
2026-02-11T04:02:01.751Z [executeAutoPass] ========== EXECUTING for p_u47pxo6i (ID: autopass_1770782521593_4cx1r) ==========
2026-02-11T04:02:01.751Z [executeAutoPass] Phase: combat, Step: BEGIN_COMBAT
[canAct] p_u47pxo6i: step=BEGIN_COMBAT, isMainPhase=false, stackIsEmpty=false, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:02:01.752Z [executeAutoPass] Re-check: p_u47pxo6i canAct=false (ID: autopass_1770782521593_4cx1r)
2026-02-11T04:02:01.752Z [executeAutoPass] Proceeding with auto-pass for p_u47pxo6i (ID: autopass_1770782521593_4cx1r)
2026-02-11T04:02:01.752Z [executeAutoPass] Set _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782521593_4cx1r)
2026-02-11T04:02:01.752Z [checkPendingInteractions] Pending: stack_not_empty
[priority] autoPassLoop - blocking due to pending interactions: stack_not_empty
2026-02-11T04:02:01.752Z [executeAutoPass] passPriority result: changed=true, advanceStep=false, resolvedNow=false (ID:autopass_1770782521593_4cx1r)
2026-02-11T04:02:01.752Z [executeAutoPass] Cleared _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782521593_4cx1r)
2026-02-11T04:02:01.752Z [executeAutoPass] Broadcasting state after auto-pass (ID: autopass_1770782521593_4cx1r)
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 1,
  stackItems: [ 'combat_1770782521582_46gmpw' ],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_anwtvwn9, viewerId=p_anwtvwn9, match=true
[getPlayableCardIds] Player p_anwtvwn9: step=BEGIN_COMBAT, isMainPhase=false, stackIsEmpty=false, isMyTurn=false
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Arcane Denial blocked - no valid targets
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=false, isMyTurn=false
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Kynaios and Tiro of Meletis not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_anwtvwn9: step=BEGIN_COMBAT, isMainPhase=false, stackIsEmpty=false, isTurnPlayer=false
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 1,
  stackItems: [ 'combat_1770782521582_46gmpw' ],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_anwtvwn9, viewerId=p_u47pxo6i, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
2026-02-11T04:02:01.762Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782521762_e1r65) ==========
2026-02-11T04:02:01.763Z [checkAndTriggerAutoPass] Priority: p_anwtvwn9, Phase: combat, Step: BEGIN_COMBAT
2026-02-11T04:02:01.763Z [checkAndTriggerAutoPass] p_anwtvwn9 is AI, handled separately (ID: autopass_1770782521762_e1r65)
2026-02-11T04:02:01.763Z [executeAutoPass] Broadcast complete (ID: autopass_1770782521593_4cx1r)
[AI] handleAIGameFlow: { gameId: 'game_mlhi50vs',
  playerId: 'p_anwtvwn9',
  phase: 'COMBAT',
  step: 'BEGIN_COMBAT',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: false,
  hasPriority: true }
[AI] AI player checking priority: { gameId: 'game_mlhi50vs',
  playerId: 'p_anwtvwn9',
  phase: 'combat',
  step: 'begin_combat',
  isAITurn: false,
  stackEmpty: false,
  priority: 'p_anwtvwn9',
  hasPriority: true }
[AI] AI has priority, proceeding with action
[AI] Not AI turn, passing priority
[AI] Passing priority: { gameId: 'game_mlhi50vs', playerId: 'p_anwtvwn9' }
2026-02-11T04:02:02.377Z [checkPendingInteractions] Pending: stack_not_empty
[priority] autoPassLoop - blocking due to pending interactions: stack_not_empty
[AI] All players passed priority, resolving top of stack
[resolveTopOfStack] Triggered ability from SOLDIER Military Program resolved: Choose one. If you control a commander, you may choose both instead: Create a 1/1 white Soldier creature token; or Put a +1/+1 counter on each of up to two Soldiers you control.
[resolveTopOfStack] SOLDIER Military Program: player does not control a commander
[priority] Entering resolution mode - priority will return to p_u47pxo6i after resolution completes
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=null, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=null, viewerId=p_u47pxo6i, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
2026-02-11T04:02:02.388Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782522388_bl1wg) ==========
2026-02-11T04:02:02.388Z [checkAndTriggerAutoPass] Priority: null, Phase: combat, Step: BEGIN_COMBAT
2026-02-11T04:02:02.388Z [checkAndTriggerAutoPass] Priority is null due to active resolution (1 pending steps), returning (ID: autopass_1770782522388_bl1wg)
[resolveTopOfStack] Modal trigger SOLDIER Military Program: added resolution step for p_u47pxo6i to choose from 2 options
[AI] Stack resolved for game game_mlhi50vs
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=null, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=null, viewerId=p_u47pxo6i, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
2026-02-11T04:02:02.397Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782522397_l9py7) ==========
2026-02-11T04:02:02.398Z [checkAndTriggerAutoPass] Priority: null, Phase: combat, Step: BEGIN_COMBAT
2026-02-11T04:02:02.398Z [checkAndTriggerAutoPass] Priority is null due to active resolution (1 pending steps), returning (ID: autopass_1770782522397_l9py7)
[priority] Exiting resolution mode - priority restored to p_u47pxo6i
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=BEGIN_COMBAT, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Card Brave the Elements not playable - cannot pay cost {W} (after reduction: {"generic":0,"colors":{"W":1,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 1 playable card(s): [ 'perm_el826qea' ]
[normalizeViewForEmit] getPlayableCardIds returned 1 cards
[normalizeViewForEmit] Set view.playableCards with 1 cards
[canAct] p_u47pxo6i: step=BEGIN_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-02-11T04:02:07.568Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782527568_23heh) ==========
2026-02-11T04:02:07.568Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: combat, Step: BEGIN_COMBAT
[canAct] p_u47pxo6i: step=BEGIN_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:02:07.568Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=true canAct=false (ID: autopass_1770782527568_23heh)
2026-02-11T04:02:07.568Z [checkAndTriggerAutoPass] p_u47pxo6i CANNOT ACT - proceeding with auto-pass (ID: autopass_1770782527568_23heh)
2026-02-11T04:02:07.568Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_u47pxo6i with 150ms delay (ID: autopass_1770782527568_23heh)
[Resolution] Step step-1770782522378-9 completed by p_u47pxo6i: modal_choice
[Resolution] Generic modal choice: SOLDIER Military Program: Choose one, selected: create_token
[tokens] getTokenImageUrls: name=Soldier, power=1, toughness=1, colors=["W"], abilities=undefined
[tokens] Best dynamic match for soldier: Soldier (score: 12)
[Resolution] SOLDIER Military Program: Created white Soldier token for p_u47pxo6i
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=BEGIN_COMBAT, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Card Brave the Elements not playable - cannot pay cost {W} (after reduction: {"generic":0,"colors":{"W":1,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 1 playable card(s): [ 'perm_el826qea' ]
[normalizeViewForEmit] getPlayableCardIds returned 1 cards
[normalizeViewForEmit] Set view.playableCards with 1 cards
[canAct] p_u47pxo6i: step=BEGIN_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-02-11T04:02:07.582Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782527582_kcft4) ==========
2026-02-11T04:02:07.582Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: combat, Step: BEGIN_COMBAT
[canAct] p_u47pxo6i: step=BEGIN_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:02:07.582Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=true canAct=false (ID: autopass_1770782527582_kcft4)
2026-02-11T04:02:07.582Z [checkAndTriggerAutoPass] p_u47pxo6i CANNOT ACT - proceeding with auto-pass (ID: autopass_1770782527582_kcft4)
2026-02-11T04:02:07.582Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_u47pxo6i with 150ms delay (ID: autopass_1770782527582_kcft4)
2026-02-11T04:02:07.729Z [executeAutoPass] ========== EXECUTING for p_u47pxo6i (ID: autopass_1770782527568_23heh) ==========
2026-02-11T04:02:07.729Z [executeAutoPass] Phase: combat, Step: BEGIN_COMBAT
[canAct] p_u47pxo6i: step=BEGIN_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:02:07.729Z [executeAutoPass] Re-check: p_u47pxo6i canAct=false (ID: autopass_1770782527568_23heh)
2026-02-11T04:02:07.729Z [executeAutoPass] Proceeding with auto-pass for p_u47pxo6i (ID: autopass_1770782527568_23heh)
2026-02-11T04:02:07.729Z [executeAutoPass] Set _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782527568_23heh)
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_u47pxo6i
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_anwtvwn9 (non-active): canAct=false, stack.length=0, step=BEGIN_COMBAT
[priority] Auto-passing for p_anwtvwn9 - no available actions
2026-02-11T04:02:07.729Z [executeAutoPass] passPriority result: changed=true, advanceStep=true, resolvedNow=false (ID: autopass_1770782527568_23heh)
2026-02-11T04:02:07.729Z [executeAutoPass] Advancing step after auto-pass for p_u47pxo6i (ID: autopass_1770782527568_23heh)
2026-02-11T04:02:07.730Z [nextStep] ========== CALLED ==========
2026-02-11T04:02:07.730Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:02:07.730Z [nextStep] Current: combat/BEGIN_COMBAT
2026-02-11T04:02:07.730Z [nextStep] Priority: p_anwtvwn9, Turn: p_u47pxo6i
2026-02-11T04:02:07.730Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at Timeout.executeAutoPass (D:\Git\MTGEDH\server\src\socket\util.ts:2058:31)
        at listOnTimeout (node:internal/timers:588:17)
        at process.processTimers (node:internal/timers:523:7)
2026-02-11T04:02:07.730Z [nextStep] Advanced to phase=combat, step=DECLARE_ATTACKERS
2026-02-11T04:02:07.730Z [nextStep] Granting priority to active player p_u47pxo6i (step: DECLARE_ATTACKERS, stack size:0)
[canAct] p_u47pxo6i: step=DECLARE_ATTACKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: Has valid attackers - returning TRUE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
2026-02-11T04:02:07.730Z [nextStep] DEBUG - Turn Player p_u47pxo6i:
2026-02-11T04:02:07.730Z [nextStep]   Hand (4): Helm of the Host, Heidegger, Shinra Executive, Ghostly Prison, Brave the Elements
2026-02-11T04:02:07.730Z [nextStep]   canAct: true, canRespond: false
2026-02-11T04:02:07.730Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_u47pxo6i, turnPlayer: p_u47pxo6i
[canAct] p_u47pxo6i: step=DECLARE_ATTACKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: Has valid attackers - returning TRUE
[priority] autoPassLoop - checking p_u47pxo6i (ACTIVE): canAct=true, stack.length=0, step=DECLARE_ATTACKERS
[priority] autoPassLoop - stopping at p_u47pxo6i: active player can act
2026-02-11T04:02:07.730Z [nextStep] Auto-pass stopped, player p_u47pxo6i has priority
2026-02-11T04:02:07.730Z [executeAutoPass] Cleared _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782527568_23heh)
2026-02-11T04:02:07.730Z [executeAutoPass] Broadcasting state after auto-pass (ID: autopass_1770782527568_23heh)
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=DECLARE_ATTACKERS, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Card Brave the Elements not playable - cannot pay cost {W} (after reduction: {"generic":0,"colors":{"W":1,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 1 playable card(s): [ 'perm_el826qea' ]
[normalizeViewForEmit] getPlayableCardIds returned 1 cards
[normalizeViewForEmit] Set view.playableCards with 1 cards
[canAct] p_u47pxo6i: step=DECLARE_ATTACKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: Has valid attackers - returning TRUE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=true, canRespond=false
2026-02-11T04:02:07.742Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782527742_vn2eq) ==========
2026-02-11T04:02:07.743Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: combat, Step: DECLARE_ATTACKERS
[canAct] p_u47pxo6i: step=DECLARE_ATTACKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: Has valid attackers - returning TRUE
2026-02-11T04:02:07.743Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=true canAct=true (ID: autopass_1770782527742_vn2eq)
2026-02-11T04:02:07.743Z [checkAndTriggerAutoPass] p_u47pxo6i CAN ACT - returning early, NO auto-pass (ID: autopass_1770782527742_vn2eq)
2026-02-11T04:02:07.743Z [executeAutoPass] Broadcast complete (ID: autopass_1770782527568_23heh)
2026-02-11T04:02:07.743Z [executeAutoPass] ========== EXECUTING for p_u47pxo6i (ID: autopass_1770782527582_kcft4) ==========
2026-02-11T04:02:07.743Z [executeAutoPass] Phase: combat, Step: DECLARE_ATTACKERS
[canAct] p_u47pxo6i: step=DECLARE_ATTACKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: Has valid attackers - returning TRUE
2026-02-11T04:02:07.743Z [executeAutoPass] Re-check: p_u47pxo6i canAct=true (ID: autopass_1770782527582_kcft4)
2026-02-11T04:02:07.743Z [executeAutoPass] Player p_u47pxo6i CAN NOW ACT - canceling auto-pass (ID: autopass_1770782527582_kcft4)
[combat] Player p_u47pxo6i has now attacked with 1 creature(s) this turn
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=DECLARE_ATTACKERS, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Card Brave the Elements not playable - cannot pay cost {W} (after reduction: {"generic":0,"colors":{"W":1,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 1 playable card(s): [ 'perm_el826qea' ]
[normalizeViewForEmit] getPlayableCardIds returned 1 cards
[normalizeViewForEmit] Set view.playableCards with 1 cards
[canAct] p_u47pxo6i: step=DECLARE_ATTACKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: Has valid attackers - returning TRUE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=true, canRespond=false
2026-02-11T04:02:12.012Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782532012_y8joy) ==========
2026-02-11T04:02:12.012Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: combat, Step: DECLARE_ATTACKERS
[canAct] p_u47pxo6i: step=DECLARE_ATTACKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: Has valid attackers - returning TRUE
2026-02-11T04:02:12.012Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=true canAct=true (ID: autopass_1770782532012_y8joy)
2026-02-11T04:02:12.012Z [checkAndTriggerAutoPass] p_u47pxo6i CAN ACT - returning early, NO auto-pass (ID: autopass_1770782532012_y8joy)
[combat] Player p_u47pxo6i declared 1 attackers in game game_mlhi50vs
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_anwtvwn9, viewerId=p_anwtvwn9, match=true
[getPlayableCardIds] Player p_anwtvwn9: step=DECLARE_ATTACKERS, isMainPhase=false, stackIsEmpty=true, isMyTurn=false
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Arcane Denial blocked - no valid targets
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=false
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Kynaios and Tiro of Meletis not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_anwtvwn9: step=DECLARE_ATTACKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=false
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_anwtvwn9, viewerId=p_u47pxo6i, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
2026-02-11T04:02:17.403Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782537403_p1c9u) ==========
2026-02-11T04:02:17.404Z [checkAndTriggerAutoPass] Priority: p_anwtvwn9, Phase: combat, Step: DECLARE_ATTACKERS
2026-02-11T04:02:17.404Z [checkAndTriggerAutoPass] p_anwtvwn9 is AI, handled separately (ID: autopass_1770782537403_p1c9u)
[AI] handleAIGameFlow: { gameId: 'game_mlhi50vs',
  playerId: 'p_anwtvwn9',
  phase: 'COMBAT',
  step: 'DECLARE_ATTACKERS',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: false,
  hasPriority: true }
[AI] AI player checking priority: { gameId: 'game_mlhi50vs',
  playerId: 'p_anwtvwn9',
  phase: 'combat',
  step: 'declare_attackers',
  isAITurn: false,
  stackEmpty: true,
  priority: 'p_anwtvwn9',
  hasPriority: true }
[AI] AI has priority, proceeding with action
[AI] Not AI turn, passing priority
[AI] Passing priority: { gameId: 'game_mlhi50vs', playerId: 'p_anwtvwn9' }
[AI] All players passed priority with empty stack, advancing step
2026-02-11T04:02:18.019Z [nextStep] ========== CALLED ==========
2026-02-11T04:02:18.019Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:02:18.019Z [nextStep] Current: combat/DECLARE_ATTACKERS
2026-02-11T04:02:18.019Z [nextStep] Priority: p_u47pxo6i, Turn: p_u47pxo6i
2026-02-11T04:02:18.019Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4470:25)
        at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
        at async handleAIPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:2391:7)
2026-02-11T04:02:18.019Z [nextStep] Entering DECLARE_BLOCKERS, initialized blockersDeclaredBy array
2026-02-11T04:02:18.019Z [nextStep] Advanced to phase=combat, step=DECLARE_BLOCKERS
2026-02-11T04:02:18.019Z [nextStep] Granting priority to active player p_u47pxo6i (step: DECLARE_BLOCKERS, stack size: 0)
[canAct] p_u47pxo6i: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
2026-02-11T04:02:18.019Z [nextStep] DEBUG - Turn Player p_u47pxo6i:
2026-02-11T04:02:18.019Z [nextStep]   Hand (4): Helm of the Host, Heidegger, Shinra Executive, Ghostly Prison, Brave the Elements
2026-02-11T04:02:18.019Z [nextStep]   canAct: false, canRespond: false
2026-02-11T04:02:18.019Z [nextStep] Checking if auto-pass should apply after granting priority
2026-02-11T04:02:18.020Z [checkPendingInteractions] Auto-declaring empty blockers for p_anwtvwn9 (no valid blockers)
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_u47pxo6i, turnPlayer: p_u47pxo6i
[canAct] p_u47pxo6i: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[priority] autoPassLoop - checking p_u47pxo6i (ACTIVE): canAct=false, stack.length=0, step=DECLARE_BLOCKERS
[priority] Auto-passing for p_u47pxo6i - no available actions
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_anwtvwn9 (non-active): canAct=false, stack.length=0, step=DECLARE_BLOCKERS
[priority] Auto-passing for p_anwtvwn9 - no available actions
2026-02-11T04:02:18.020Z [nextStep] All players auto-passed after granting priority - caller should advance step
[AI] Advanced to next step for game game_mlhi50vs
[AI] Auto-pass loop stopping - human player p_u47pxo6i has priority
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Card Brave the Elements not playable - cannot pay cost {W} (after reduction: {"generic":0,"colors":{"W":1,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 1 playable card(s): [ 'perm_el826qea' ]
[normalizeViewForEmit] getPlayableCardIds returned 1 cards
[normalizeViewForEmit] Set view.playableCards with 1 cards
[canAct] p_u47pxo6i: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-02-11T04:02:18.031Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782538031_bz4m7) ==========
2026-02-11T04:02:18.031Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: combat, Step: DECLARE_BLOCKERS
[canAct] p_u47pxo6i: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:02:18.032Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=true canAct=false (ID: autopass_1770782538031_bz4m7)
2026-02-11T04:02:18.032Z [checkAndTriggerAutoPass] p_u47pxo6i CANNOT ACT - proceeding with auto-pass (ID: autopass_1770782538031_bz4m7)
2026-02-11T04:02:18.032Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_u47pxo6i with 150ms delay (ID: autopass_1770782538031_bz4m7)
2026-02-11T04:02:18.189Z [executeAutoPass] ========== EXECUTING for p_u47pxo6i (ID: autopass_1770782538031_bz4m7) ==========
2026-02-11T04:02:18.189Z [executeAutoPass] Phase: combat, Step: DECLARE_BLOCKERS
[canAct] p_u47pxo6i: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:02:18.189Z [executeAutoPass] Re-check: p_u47pxo6i canAct=false (ID: autopass_1770782538031_bz4m7)
2026-02-11T04:02:18.189Z [executeAutoPass] Proceeding with auto-pass for p_u47pxo6i (ID: autopass_1770782538031_bz4m7)
2026-02-11T04:02:18.189Z [executeAutoPass] Set _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782538031_bz4m7)
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_u47pxo6i
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_anwtvwn9 (non-active): canAct=false, stack.length=0, step=DECLARE_BLOCKERS
[priority] Auto-passing for p_anwtvwn9 - no available actions
2026-02-11T04:02:18.190Z [executeAutoPass] passPriority result: changed=true, advanceStep=true, resolvedNow=false (ID: autopass_1770782538031_bz4m7)
2026-02-11T04:02:18.190Z [executeAutoPass] Advancing step after auto-pass for p_u47pxo6i (ID: autopass_1770782538031_bz4m7)
2026-02-11T04:02:18.190Z [nextStep] ========== CALLED ==========
2026-02-11T04:02:18.190Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:02:18.190Z [nextStep] Current: combat/DECLARE_BLOCKERS
2026-02-11T04:02:18.190Z [nextStep] Priority: p_anwtvwn9, Turn: p_u47pxo6i
2026-02-11T04:02:18.190Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at Timeout.executeAutoPass (D:\Git\MTGEDH\server\src\socket\util.ts:2058:31)
        at listOnTimeout (node:internal/timers:588:17)
        at process.processTimers (node:internal/timers:523:7)
2026-02-11T04:02:18.190Z [COMBAT_STEP] ========== TRANSITIONING FROM DECLARE_BLOCKERS TO DAMAGE (no first strike) ==========
2026-02-11T04:02:18.190Z [COMBAT_STEP] Calling dealCombatDamage...
2026-02-11T04:02:18.190Z [COMBAT_DAMAGE] ========== ENTERING dealCombatDamage (firstStrike=undefined) ==========
2026-02-11T04:02:18.190Z [COMBAT_DAMAGE] Found 1 attackers
2026-02-11T04:02:18.190Z [COMBAT_DAMAGE] Attacker: Soldier, blocked by 0 creatures: []
2026-02-11T04:02:18.190Z [COMBAT_DAMAGE] Processing attacker: Soldier
[KEYWORDS] ========== Parsing keywords for: Soldier ==========
[KEYWORDS] Raw keywords: type=object, isArray=true
[KEYWORDS] Raw value: []
[KEYWORDS] Normalized keywords array: []
[KEYWORDS] Soldier granted ward by Flowering of the White Tree (anthem effect)
[KEYWORDS] Soldier ACTIVE ABILITIES: [none]
[KEYWORDS] First Strike: false, Double Strike: false
[KEYWORDS] ========== End parsing for: Soldier ==========
2026-02-11T04:02:18.192Z [dealCombatDamage] Soldier dealt 3 combat damage to p_anwtvwn9 (40 -> 37)
2026-02-11T04:02:18.192Z [trackCreatureDamageToPlayer] Soldier (tok_m612ku29) dealt 3 damage to p_anwtvwn9
2026-02-11T04:02:18.192Z [dealCombatDamage] Combat damage complete. Damage to players: {"p_anwtvwn9":3}, Life gained: {}, Creatures destroyed: 0
2026-02-11T04:02:18.194Z [COMBAT_STEP] dealCombatDamage completed successfully
2026-02-11T04:02:18.194Z [COMBAT_STEP] Result: damageToPlayers={"p_anwtvwn9":3}, creaturesDestroyed=0
2026-02-11T04:02:18.194Z [COMBAT_STEP] ========== END DAMAGE STEP PROCESSING ==========
2026-02-11T04:02:18.194Z [nextStep] Advanced to phase=combat, step=DAMAGE
2026-02-11T04:02:18.194Z [nextStep] Granting priority to active player p_u47pxo6i (step: DAMAGE, stack size: 0)
[canAct] p_u47pxo6i: step=DAMAGE, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
2026-02-11T04:02:18.194Z [nextStep] DEBUG - Turn Player p_u47pxo6i:
2026-02-11T04:02:18.194Z [nextStep]   Hand (4): Helm of the Host, Heidegger, Shinra Executive, Ghostly Prison, Brave the Elements
2026-02-11T04:02:18.194Z [nextStep]   canAct: false, canRespond: false
2026-02-11T04:02:18.194Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_u47pxo6i, turnPlayer: p_u47pxo6i
[canAct] p_u47pxo6i: step=DAMAGE, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[priority] autoPassLoop - checking p_u47pxo6i (ACTIVE): canAct=false, stack.length=0, step=DAMAGE
[priority] Auto-passing for p_u47pxo6i - no available actions
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_anwtvwn9 (non-active): canAct=false, stack.length=0, step=DAMAGE
[priority] Auto-passing for p_anwtvwn9 - no available actions
2026-02-11T04:02:18.194Z [nextStep] All players auto-passed after granting priority - caller should advance step
2026-02-11T04:02:18.194Z [executeAutoPass] Cleared _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782538031_bz4m7)
2026-02-11T04:02:18.194Z [executeAutoPass] Broadcasting state after auto-pass (ID: autopass_1770782538031_bz4m7)
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=DAMAGE, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Card Brave the Elements not playable - cannot pay cost {W} (after reduction: {"generic":0,"colors":{"W":1,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 1 playable card(s): [ 'perm_el826qea' ]
[normalizeViewForEmit] getPlayableCardIds returned 1 cards
[normalizeViewForEmit] Set view.playableCards with 1 cards
[canAct] p_u47pxo6i: step=DAMAGE, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-02-11T04:02:18.205Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782538205_hx4bb) ==========
2026-02-11T04:02:18.205Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: combat, Step: DAMAGE
[canAct] p_u47pxo6i: step=DAMAGE, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:02:18.205Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=true canAct=false (ID: autopass_1770782538205_hx4bb)
2026-02-11T04:02:18.205Z [checkAndTriggerAutoPass] p_u47pxo6i CANNOT ACT - proceeding with auto-pass (ID: autopass_1770782538205_hx4bb)
2026-02-11T04:02:18.205Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_u47pxo6i with 150ms delay (ID: autopass_1770782538205_hx4bb)
2026-02-11T04:02:18.205Z [executeAutoPass] Broadcast complete (ID: autopass_1770782538031_bz4m7)
2026-02-11T04:02:18.358Z [executeAutoPass] ========== EXECUTING for p_u47pxo6i (ID: autopass_1770782538205_hx4bb) ==========
2026-02-11T04:02:18.358Z [executeAutoPass] Phase: combat, Step: DAMAGE
[canAct] p_u47pxo6i: step=DAMAGE, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:02:18.359Z [executeAutoPass] Re-check: p_u47pxo6i canAct=false (ID: autopass_1770782538205_hx4bb)
2026-02-11T04:02:18.359Z [executeAutoPass] Proceeding with auto-pass for p_u47pxo6i (ID: autopass_1770782538205_hx4bb)
2026-02-11T04:02:18.359Z [executeAutoPass] Set _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782538205_hx4bb)
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_u47pxo6i
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_anwtvwn9 (non-active): canAct=false, stack.length=0, step=DAMAGE
[priority] Auto-passing for p_anwtvwn9 - no available actions
2026-02-11T04:02:18.359Z [executeAutoPass] passPriority result: changed=true, advanceStep=true, resolvedNow=false (ID: autopass_1770782538205_hx4bb)
2026-02-11T04:02:18.359Z [executeAutoPass] Advancing step after auto-pass for p_u47pxo6i (ID: autopass_1770782538205_hx4bb)
2026-02-11T04:02:18.359Z [nextStep] ========== CALLED ==========
2026-02-11T04:02:18.359Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:02:18.359Z [nextStep] Current: combat/DAMAGE
2026-02-11T04:02:18.359Z [nextStep] Priority: p_anwtvwn9, Turn: p_u47pxo6i
2026-02-11T04:02:18.359Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at Timeout.executeAutoPass (D:\Git\MTGEDH\server\src\socket\util.ts:2058:31)
        at listOnTimeout (node:internal/timers:588:17)
        at process.processTimers (node:internal/timers:523:7)
2026-02-11T04:02:18.359Z [nextStep] Advanced to phase=combat, step=END_COMBAT
2026-02-11T04:02:18.359Z [nextStep] Granting priority to active player p_u47pxo6i (step: END_COMBAT, stack size: 0)
[canAct] p_u47pxo6i: step=END_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
2026-02-11T04:02:18.360Z [nextStep] DEBUG - Turn Player p_u47pxo6i:
2026-02-11T04:02:18.360Z [nextStep]   Hand (4): Helm of the Host, Heidegger, Shinra Executive, Ghostly Prison, Brave the Elements
2026-02-11T04:02:18.360Z [nextStep]   canAct: false, canRespond: false
2026-02-11T04:02:18.360Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_u47pxo6i, turnPlayer: p_u47pxo6i
[canAct] p_u47pxo6i: step=END_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[priority] autoPassLoop - checking p_u47pxo6i (ACTIVE): canAct=false, stack.length=0, step=END_COMBAT
[priority] Auto-passing for p_u47pxo6i - no available actions
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_anwtvwn9 (non-active): canAct=false, stack.length=0, step=END_COMBAT
[priority] Auto-passing for p_anwtvwn9 - no available actions
2026-02-11T04:02:18.361Z [nextStep] All players auto-passed after granting priority - caller should advance step
2026-02-11T04:02:18.361Z [executeAutoPass] Cleared _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782538205_hx4bb)
2026-02-11T04:02:18.361Z [executeAutoPass] Broadcasting state after auto-pass (ID: autopass_1770782538205_hx4bb)
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=END_COMBAT, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Card Brave the Elements not playable - cannot pay cost {W} (after reduction: {"generic":0,"colors":{"W":1,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 1 playable card(s): [ 'perm_el826qea' ]
[normalizeViewForEmit] getPlayableCardIds returned 1 cards
[normalizeViewForEmit] Set view.playableCards with 1 cards
[canAct] p_u47pxo6i: step=END_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-02-11T04:02:18.373Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782538373_la9nt) ==========
2026-02-11T04:02:18.373Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: combat, Step: END_COMBAT
[canAct] p_u47pxo6i: step=END_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:02:18.373Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=true canAct=false (ID: autopass_1770782538373_la9nt)
2026-02-11T04:02:18.373Z [checkAndTriggerAutoPass] p_u47pxo6i CANNOT ACT - proceeding with auto-pass (ID: autopass_1770782538373_la9nt)
2026-02-11T04:02:18.373Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_u47pxo6i with 150ms delay (ID: autopass_1770782538373_la9nt)
2026-02-11T04:02:18.373Z [executeAutoPass] Broadcast complete (ID: autopass_1770782538205_hx4bb)
2026-02-11T04:02:18.528Z [executeAutoPass] ========== EXECUTING for p_u47pxo6i (ID: autopass_1770782538373_la9nt) ==========
2026-02-11T04:02:18.528Z [executeAutoPass] Phase: combat, Step: END_COMBAT
[canAct] p_u47pxo6i: step=END_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:02:18.529Z [executeAutoPass] Re-check: p_u47pxo6i canAct=false (ID: autopass_1770782538373_la9nt)
2026-02-11T04:02:18.529Z [executeAutoPass] Proceeding with auto-pass for p_u47pxo6i (ID: autopass_1770782538373_la9nt)
2026-02-11T04:02:18.529Z [executeAutoPass] Set _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782538373_la9nt)
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_u47pxo6i
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_anwtvwn9 (non-active): canAct=false, stack.length=0, step=END_COMBAT
[priority] Auto-passing for p_anwtvwn9 - no available actions
2026-02-11T04:02:18.529Z [executeAutoPass] passPriority result: changed=true, advanceStep=true, resolvedNow=false (ID: autopass_1770782538373_la9nt)
2026-02-11T04:02:18.529Z [executeAutoPass] Advancing step after auto-pass for p_u47pxo6i (ID: autopass_1770782538373_la9nt)
2026-02-11T04:02:18.529Z [nextStep] ========== CALLED ==========
2026-02-11T04:02:18.529Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:02:18.529Z [nextStep] Current: combat/END_COMBAT
2026-02-11T04:02:18.529Z [nextStep] Priority: p_anwtvwn9, Turn: p_u47pxo6i
2026-02-11T04:02:18.529Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at Timeout.executeAutoPass (D:\Git\MTGEDH\server\src\socket\util.ts:2058:31)
        at listOnTimeout (node:internal/timers:588:17)
        at process.processTimers (node:internal/timers:523:7)
2026-02-11T04:02:18.529Z [clearCombatState] Cleared combat state from 1 permanents
2026-02-11T04:02:18.529Z [clearManaPool] Processed mana pools for all players
2026-02-11T04:02:18.529Z [nextStep] Advanced to phase=postcombatMain, step=MAIN2
2026-02-11T04:02:18.529Z [nextStep] Granting priority to active player p_u47pxo6i (step: MAIN2, stack size: 0)
[canAct] p_u47pxo6i: step=MAIN2, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 9 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Checking hand with 4 cards
[canPlayLand] p_u47pxo6i: Sample cards in hand: [Helm of the Host(Legendary Artifact ΓÇö), Heidegger, Shinra Executive(Legendary Creature ΓÇö), Ghostly Prison(Enchantment)]
[canPlayLand] p_u47pxo6i: No lands found in hand of 4 cards - returning FALSE
[canAct] p_u47pxo6i: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 9 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Checking hand with 4 cards
[canPlayLand] p_u47pxo6i: Sample cards in hand: [Helm of the Host(Legendary Artifact ΓÇö), Heidegger, Shinra Executive(Legendary Creature ΓÇö), Ghostly Prison(Enchantment)]
[canPlayLand] p_u47pxo6i: No lands found in hand of 4 cards - returning FALSE
[canAct] p_u47pxo6i: No sorcery-speed actions available in main phase - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
2026-02-11T04:02:18.530Z [nextStep] DEBUG - Turn Player p_u47pxo6i:
2026-02-11T04:02:18.530Z [nextStep]   Hand (4): Helm of the Host, Heidegger, Shinra Executive, Ghostly Prison, Brave the Elements
2026-02-11T04:02:18.530Z [nextStep]   canAct: false, canRespond: false
2026-02-11T04:02:18.530Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_u47pxo6i, turnPlayer: p_u47pxo6i
[canAct] p_u47pxo6i: step=MAIN2, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 9 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Checking hand with 4 cards
[canPlayLand] p_u47pxo6i: Sample cards in hand: [Helm of the Host(Legendary Artifact ΓÇö), Heidegger, Shinra Executive(Legendary Creature ΓÇö), Ghostly Prison(Enchantment)]
[canPlayLand] p_u47pxo6i: No lands found in hand of 4 cards - returning FALSE
[canAct] p_u47pxo6i: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 9 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Checking hand with 4 cards
[canPlayLand] p_u47pxo6i: Sample cards in hand: [Helm of the Host(Legendary Artifact ΓÇö), Heidegger, Shinra Executive(Legendary Creature ΓÇö), Ghostly Prison(Enchantment)]
[canPlayLand] p_u47pxo6i: No lands found in hand of 4 cards - returning FALSE
[canAct] p_u47pxo6i: No sorcery-speed actions available in main phase - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[priority] autoPassLoop - checking p_u47pxo6i (ACTIVE): canAct=false, stack.length=0, step=MAIN2
[priority] Auto-passing for p_u47pxo6i - no available actions
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_anwtvwn9 (non-active): canAct=false, stack.length=0, step=MAIN2
[priority] Auto-passing for p_anwtvwn9 - no available actions
2026-02-11T04:02:18.531Z [nextStep] All players auto-passed after granting priority - caller should advance step
2026-02-11T04:02:18.531Z [executeAutoPass] Cleared _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782538373_la9nt)
2026-02-11T04:02:18.531Z [executeAutoPass] Broadcasting state after auto-pass (ID: autopass_1770782538373_la9nt)
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=MAIN2, isMainPhase=true, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Card Helm of the Host not playable - cannot pay cost {4} (after reduction: {"generic":4,"colors":{"W":0,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Heidegger, Shinra Executive not playable - cannot pay cost {3}{W} (after reduction: {"generic":3,"colors":{"W":1,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Ghostly Prison not playable - cannot pay cost {2}{W} (after reduction: {"generic":2,"colors":{"W":1,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Brave the Elements not playable - cannot pay cost {W} (after reduction: {"generic":0,"colors":{"W":1,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 9 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[getPlayableCardIds] Checking lands: landsPlayed=0, max=1
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=true, canPay=false
[getPlayableCardIds] Returning 1 playable card(s): [ 'perm_el826qea' ]
[normalizeViewForEmit] getPlayableCardIds returned 1 cards
[normalizeViewForEmit] Set view.playableCards with 1 cards
[canAct] p_u47pxo6i: step=MAIN2, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 9 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Checking hand with 4 cards
[canPlayLand] p_u47pxo6i: Sample cards in hand: [Helm of the Host(Legendary Artifact ΓÇö), Heidegger, Shinra Executive(Legendary Creature ΓÇö), Ghostly Prison(Enchantment)]
[canPlayLand] p_u47pxo6i: No lands found in hand of 4 cards - returning FALSE
[canAct] p_u47pxo6i: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 9 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Checking hand with 4 cards
[canPlayLand] p_u47pxo6i: Sample cards in hand: [Helm of the Host(Legendary Artifact ΓÇö), Heidegger, Shinra Executive(Legendary Creature ΓÇö), Ghostly Prison(Enchantment)]
[canPlayLand] p_u47pxo6i: No lands found in hand of 4 cards - returning FALSE
[canAct] p_u47pxo6i: No sorcery-speed actions available in main phase - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-02-11T04:02:18.543Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782538543_06w1u) ==========
2026-02-11T04:02:18.543Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: postcombatMain, Step: MAIN2
[canAct] p_u47pxo6i: step=MAIN2, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 9 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Checking hand with 4 cards
[canPlayLand] p_u47pxo6i: Sample cards in hand: [Helm of the Host(Legendary Artifact ΓÇö), Heidegger, Shinra Executive(Legendary Creature ΓÇö), Ghostly Prison(Enchantment)]
[canPlayLand] p_u47pxo6i: No lands found in hand of 4 cards - returning FALSE
[canAct] p_u47pxo6i: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 9 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Checking hand with 4 cards
[canPlayLand] p_u47pxo6i: Sample cards in hand: [Helm of the Host(Legendary Artifact ΓÇö), Heidegger, Shinra Executive(Legendary Creature ΓÇö), Ghostly Prison(Enchantment)]
[canPlayLand] p_u47pxo6i: No lands found in hand of 4 cards - returning FALSE
[canAct] p_u47pxo6i: No sorcery-speed actions available in main phase - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:02:18.543Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=true canAct=false (ID: autopass_1770782538543_06w1u)
2026-02-11T04:02:18.543Z [checkAndTriggerAutoPass] p_u47pxo6i CANNOT ACT - proceeding with auto-pass (ID: autopass_1770782538543_06w1u)
2026-02-11T04:02:18.543Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_u47pxo6i with 150ms delay (ID: autopass_1770782538543_06w1u)
2026-02-11T04:02:18.544Z [executeAutoPass] Broadcast complete (ID: autopass_1770782538373_la9nt)
2026-02-11T04:02:18.698Z [executeAutoPass] ========== EXECUTING for p_u47pxo6i (ID: autopass_1770782538543_06w1u) ==========
2026-02-11T04:02:18.698Z [executeAutoPass] Phase: postcombatMain, Step: MAIN2
[canAct] p_u47pxo6i: step=MAIN2, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 9 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Checking hand with 4 cards
[canPlayLand] p_u47pxo6i: Sample cards in hand: [Helm of the Host(Legendary Artifact ΓÇö), Heidegger, Shinra Executive(Legendary Creature ΓÇö), Ghostly Prison(Enchantment)]
[canPlayLand] p_u47pxo6i: No lands found in hand of 4 cards - returning FALSE
[canAct] p_u47pxo6i: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 9 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Checking hand with 4 cards
[canPlayLand] p_u47pxo6i: Sample cards in hand: [Helm of the Host(Legendary Artifact ΓÇö), Heidegger, Shinra Executive(Legendary Creature ΓÇö), Ghostly Prison(Enchantment)]
[canPlayLand] p_u47pxo6i: No lands found in hand of 4 cards - returning FALSE
[canAct] p_u47pxo6i: No sorcery-speed actions available in main phase - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:02:18.699Z [executeAutoPass] Re-check: p_u47pxo6i canAct=false (ID: autopass_1770782538543_06w1u)
2026-02-11T04:02:18.699Z [executeAutoPass] Proceeding with auto-pass for p_u47pxo6i (ID: autopass_1770782538543_06w1u)
2026-02-11T04:02:18.699Z [executeAutoPass] Set _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782538543_06w1u)
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_u47pxo6i
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_anwtvwn9 (non-active): canAct=false, stack.length=0, step=MAIN2
[priority] Auto-passing for p_anwtvwn9 - no available actions
2026-02-11T04:02:18.699Z [executeAutoPass] passPriority result: changed=true, advanceStep=true, resolvedNow=false (ID: autopass_1770782538543_06w1u)
2026-02-11T04:02:18.699Z [executeAutoPass] Advancing step after auto-pass for p_u47pxo6i (ID: autopass_1770782538543_06w1u)
2026-02-11T04:02:18.700Z [nextStep] ========== CALLED ==========
2026-02-11T04:02:18.700Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:02:18.700Z [nextStep] Current: postcombatMain/MAIN2
2026-02-11T04:02:18.700Z [nextStep] Priority: p_anwtvwn9, Turn: p_u47pxo6i
2026-02-11T04:02:18.700Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at Timeout.executeAutoPass (D:\Git\MTGEDH\server\src\socket\util.ts:2058:31)
        at listOnTimeout (node:internal/timers:588:17)
        at process.processTimers (node:internal/timers:523:7)
2026-02-11T04:02:18.700Z [clearManaPool] Processed mana pools for all players
2026-02-11T04:02:18.700Z [nextStep] Advanced to phase=ending, step=END
2026-02-11T04:02:18.700Z [nextStep] Granting priority to active player p_u47pxo6i (step: END, stack size: 0)
[canAct] p_u47pxo6i: step=END, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
2026-02-11T04:02:18.700Z [nextStep] DEBUG - Turn Player p_u47pxo6i:
2026-02-11T04:02:18.700Z [nextStep]   Hand (4): Helm of the Host, Heidegger, Shinra Executive, Ghostly Prison, Brave the Elements
2026-02-11T04:02:18.700Z [nextStep]   canAct: false, canRespond: false
2026-02-11T04:02:18.700Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_u47pxo6i, turnPlayer: p_u47pxo6i
[canAct] p_u47pxo6i: step=END, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[priority] autoPassLoop - checking p_u47pxo6i (ACTIVE): canAct=false, stack.length=0, step=END
[priority] Auto-passing for p_u47pxo6i - no available actions
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_anwtvwn9 (non-active): canAct=false, stack.length=0, step=END
[priority] Auto-passing for p_anwtvwn9 - no available actions
2026-02-11T04:02:18.700Z [nextStep] All players auto-passed after granting priority - caller should advance step
2026-02-11T04:02:18.700Z [executeAutoPass] Cleared _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782538543_06w1u)
2026-02-11T04:02:18.700Z [executeAutoPass] Broadcasting state after auto-pass (ID: autopass_1770782538543_06w1u)
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=END, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Card Brave the Elements not playable - cannot pay cost {W} (after reduction: {"generic":0,"colors":{"W":1,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 1 playable card(s): [ 'perm_el826qea' ]
[normalizeViewForEmit] getPlayableCardIds returned 1 cards
[normalizeViewForEmit] Set view.playableCards with 1 cards
[canAct] p_u47pxo6i: step=END, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-02-11T04:02:18.711Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782538711_zsi2p) ==========
2026-02-11T04:02:18.711Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: ending, Step: END
[canAct] p_u47pxo6i: step=END, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:02:18.711Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=true canAct=false (ID: autopass_1770782538711_zsi2p)
2026-02-11T04:02:18.711Z [checkAndTriggerAutoPass] p_u47pxo6i CANNOT ACT - proceeding with auto-pass (ID: autopass_1770782538711_zsi2p)
2026-02-11T04:02:18.711Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_u47pxo6i with 150ms delay (ID: autopass_1770782538711_zsi2p)
2026-02-11T04:02:18.711Z [executeAutoPass] Broadcast complete (ID: autopass_1770782538543_06w1u)
2026-02-11T04:02:18.869Z [executeAutoPass] ========== EXECUTING for p_u47pxo6i (ID: autopass_1770782538711_zsi2p) ==========
2026-02-11T04:02:18.869Z [executeAutoPass] Phase: ending, Step: END
[canAct] p_u47pxo6i: step=END, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:02:18.869Z [executeAutoPass] Re-check: p_u47pxo6i canAct=false (ID: autopass_1770782538711_zsi2p)
2026-02-11T04:02:18.869Z [executeAutoPass] Proceeding with auto-pass for p_u47pxo6i (ID: autopass_1770782538711_zsi2p)
2026-02-11T04:02:18.869Z [executeAutoPass] Set _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782538711_zsi2p)
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_u47pxo6i
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_anwtvwn9 (non-active): canAct=false, stack.length=0, step=END
[priority] Auto-passing for p_anwtvwn9 - no available actions
2026-02-11T04:02:18.870Z [executeAutoPass] passPriority result: changed=true, advanceStep=true, resolvedNow=false (ID: autopass_1770782538711_zsi2p)
2026-02-11T04:02:18.870Z [executeAutoPass] Advancing step after auto-pass for p_u47pxo6i (ID: autopass_1770782538711_zsi2p)
2026-02-11T04:02:18.870Z [nextStep] ========== CALLED ==========
2026-02-11T04:02:18.870Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:02:18.870Z [nextStep] Current: ending/END
2026-02-11T04:02:18.870Z [nextStep] Priority: p_anwtvwn9, Turn: p_u47pxo6i
2026-02-11T04:02:18.870Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at Timeout.executeAutoPass (D:\Git\MTGEDH\server\src\socket\util.ts:2058:31)
        at listOnTimeout (node:internal/timers:588:17)
        at process.processTimers (node:internal/timers:523:7)
2026-02-11T04:02:18.870Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-02-11T04:02:18.870Z [nextStep] Step CLEANUP does not grant priority (Rule 502.1/514.1)
2026-02-11T04:02:18.870Z [endTemporaryEffects] Cleared creaturesAttackedThisTurn tracking
2026-02-11T04:02:18.870Z [nextStep] Cleanup complete, advancing to next turn
2026-02-11T04:02:18.870Z [nextTurn] Reset planeswalker loyalty activation counters for player p_anwtvwn9
2026-02-11T04:02:18.870Z [nextTurn] Cleared autoPassForTurn flags for new turn
2026-02-11T04:02:18.870Z [nextTurn] Cleared noncreatureSpellsCastThisTurn for new turn
2026-02-11T04:02:18.870Z [nextTurn] Cleared spellsCastFromHandThisTurn for new turn
2026-02-11T04:02:18.870Z [nextTurn] Cleared spellsCastThisTurn for new turn
2026-02-11T04:02:18.870Z [nextTurn] Cleared playedCardFromExileThisTurn for new turn
2026-02-11T04:02:18.870Z [nextTurn] Advanced to player p_anwtvwn9, phase=beginning, step=UNTAP
[calculateMaxLandsPerTurn] Calculating for player p_anwtvwn9, battlefield has 9 permanents
[calculateMaxLandsPerTurn] Final result for p_anwtvwn9: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 9 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[recalculateHandVisibility] Players with hand reveal effects: none
2026-02-11T04:02:18.871Z [executeAutoPass] Cleared _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782538711_zsi2p)
2026-02-11T04:02:18.871Z [executeAutoPass] Broadcasting state after auto-pass (ID: autopass_1770782538711_zsi2p)
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_anwtvwn9, viewerId=p_anwtvwn9, match=true
[getPlayableCardIds] Player p_anwtvwn9: step=UNTAP, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Arcane Denial blocked - no valid targets
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Kynaios and Tiro of Meletis not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_anwtvwn9: step=UNTAP, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_anwtvwn9, viewerId=p_u47pxo6i, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
2026-02-11T04:02:18.882Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782538882_gnky4) ==========
2026-02-11T04:02:18.882Z [checkAndTriggerAutoPass] Priority: p_anwtvwn9, Phase: beginning, Step: UNTAP
2026-02-11T04:02:18.882Z [checkAndTriggerAutoPass] p_anwtvwn9 is AI, handled separately (ID: autopass_1770782538882_gnky4)
2026-02-11T04:02:18.882Z [executeAutoPass] Broadcast complete (ID: autopass_1770782538711_zsi2p)
[Automation] Auto-pass for turn disabled for p_u47pxo6i in game game_mlhi50vs
[Automation] Auto-pass for turn state in game game_mlhi50vs: {}
[AI] handleAIGameFlow: { gameId: 'game_mlhi50vs',
  playerId: 'p_anwtvwn9',
  phase: 'BEGINNING',
  step: 'UNTAP',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: true,
  hasPriority: true }
[AI] AI player checking priority: { gameId: 'game_mlhi50vs',
  playerId: 'p_anwtvwn9',
  phase: 'beginning',
  step: 'untap',
  isAITurn: true,
  stackEmpty: true,
  priority: 'p_anwtvwn9',
  hasPriority: true }
[AI] AI has priority, proceeding with action
[AI] Beginning phase, step: untap - passing priority
[AI] Passing priority: { gameId: 'game_mlhi50vs', playerId: 'p_anwtvwn9' }
[AI] All players passed priority with empty stack, advancing step
2026-02-11T04:02:19.509Z [nextStep] ========== CALLED ==========
2026-02-11T04:02:19.509Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:02:19.509Z [nextStep] Current: beginning/UNTAP
2026-02-11T04:02:19.509Z [nextStep] Priority: p_anwtvwn9, Turn: p_anwtvwn9
2026-02-11T04:02:19.509Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4470:25)
        at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
        at async handleAIPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:2663:7)
2026-02-11T04:02:19.509Z [nextStep] Advanced to phase=beginning, step=UPKEEP
2026-02-11T04:02:19.509Z [nextStep] Granting priority to active player p_anwtvwn9 (step: UPKEEP, stack size: 0)
[canAct] p_anwtvwn9: step=UPKEEP, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
2026-02-11T04:02:19.509Z [nextStep] DEBUG - Turn Player p_anwtvwn9:
2026-02-11T04:02:19.509Z [nextStep]   Hand (7): Hour of Promise, Minds Aglow, Arcane Denial, Edric, Spymaster of Trest,Rogue's Passage, Frontier Bivouac, Boros Garrison
2026-02-11T04:02:19.509Z [nextStep]   canAct: false, canRespond: false
2026-02-11T04:02:19.509Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_anwtvwn9
[canAct] p_anwtvwn9: step=UPKEEP, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[priority] autoPassLoop - checking p_anwtvwn9 (ACTIVE): canAct=false, stack.length=0, step=UPKEEP
[priority] Auto-passing for p_anwtvwn9 - no available actions
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_u47pxo6i (non-active): canAct=false, stack.length=0, step=UPKEEP
[priority] Auto-passing for p_u47pxo6i - no available actions
2026-02-11T04:02:19.509Z [nextStep] All players auto-passed after granting priority - caller should advance step
[AI] Advanced to next step for game game_mlhi50vs
[AI] Auto-pass detected after step advancement (iteration 1), advancing again
2026-02-11T04:02:19.509Z [nextStep] ========== CALLED ==========
2026-02-11T04:02:19.509Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:02:19.509Z [nextStep] Current: beginning/UPKEEP
2026-02-11T04:02:19.509Z [nextStep] Priority: p_anwtvwn9, Turn: p_anwtvwn9
2026-02-11T04:02:19.509Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4495:29)
        at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
        at async handleAIPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:2663:7)
2026-02-11T04:02:19.509Z [nextStep] Advanced to phase=beginning, step=DRAW
2026-02-11T04:02:19.509Z [nextStep] Drew 1 card(s) for p_anwtvwn9 at draw step (base: 1, additional: 0)
2026-02-11T04:02:19.509Z [nextStep] Granting priority to active player p_anwtvwn9 (step: DRAW, stack size: 0)
[canAct] p_anwtvwn9: step=DRAW, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
2026-02-11T04:02:19.510Z [nextStep] DEBUG - Turn Player p_anwtvwn9:
2026-02-11T04:02:19.510Z [nextStep]   Hand (8): Hour of Promise, Minds Aglow, Arcane Denial, Edric, Spymaster of Trest,Rogue's Passage, Frontier Bivouac, Boros Garrison, Bring to Light
2026-02-11T04:02:19.510Z [nextStep]   canAct: false, canRespond: false
2026-02-11T04:02:19.510Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_anwtvwn9
[canAct] p_anwtvwn9: step=DRAW, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[priority] autoPassLoop - checking p_anwtvwn9 (ACTIVE): canAct=false, stack.length=0, step=DRAW
[priority] Auto-passing for p_anwtvwn9 - no available actions
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_u47pxo6i (non-active): canAct=false, stack.length=0, step=DRAW
[priority] Auto-passing for p_u47pxo6i - no available actions
2026-02-11T04:02:19.510Z [nextStep] All players auto-passed after granting priority - caller should advance step
[AI] Auto-advanced to DRAW
[AI] Auto-pass detected after step advancement (iteration 2), advancing again
2026-02-11T04:02:19.510Z [nextStep] ========== CALLED ==========
2026-02-11T04:02:19.510Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:02:19.510Z [nextStep] Current: beginning/DRAW
2026-02-11T04:02:19.510Z [nextStep] Priority: p_anwtvwn9, Turn: p_anwtvwn9
2026-02-11T04:02:19.510Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4495:29)
        at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
        at async handleAIPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:2663:7)
2026-02-11T04:02:19.510Z [clearManaPool] Processed mana pools for all players
2026-02-11T04:02:19.510Z [nextStep] Advanced to phase=precombatMain, step=MAIN1
2026-02-11T04:02:19.510Z [nextStep] Checking precombat main triggers for p_anwtvwn9, found 0 trigger(s)
2026-02-11T04:02:19.510Z [nextStep] Granting priority to active player p_anwtvwn9 (step: MAIN1, stack size: 0)
[canAct] p_anwtvwn9: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_anwtvwn9, battlefield has 9 permanents
[calculateMaxLandsPerTurn] Final result for p_anwtvwn9: 1 lands per turn
[canPlayLand] p_anwtvwn9: Checking hand with 8 cards
[canPlayLand] p_anwtvwn9: Sample cards in hand: [Hour of Promise(Sorcery), Minds Aglow(Sorcery), Arcane Denial(Instant)]
[canPlayLand] p_anwtvwn9: Found land in hand: Rogue's Passage (Land) - returning TRUE
[canAct] p_anwtvwn9: Turn player in main phase can play land - returning TRUE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
2026-02-11T04:02:19.511Z [nextStep] DEBUG - Turn Player p_anwtvwn9:
2026-02-11T04:02:19.511Z [nextStep]   Hand (8): Hour of Promise, Minds Aglow, Arcane Denial, Edric, Spymaster of Trest,Rogue's Passage, Frontier Bivouac, Boros Garrison, Bring to Light
2026-02-11T04:02:19.511Z [nextStep]   canAct: true, canRespond: false
2026-02-11T04:02:19.511Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_anwtvwn9
[canAct] p_anwtvwn9: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_anwtvwn9, battlefield has 9 permanents
[calculateMaxLandsPerTurn] Final result for p_anwtvwn9: 1 lands per turn
[canPlayLand] p_anwtvwn9: Checking hand with 8 cards
[canPlayLand] p_anwtvwn9: Sample cards in hand: [Hour of Promise(Sorcery), Minds Aglow(Sorcery), Arcane Denial(Instant)]
[canPlayLand] p_anwtvwn9: Found land in hand: Rogue's Passage (Land) - returning TRUE
[canAct] p_anwtvwn9: Turn player in main phase can play land - returning TRUE
[priority] autoPassLoop - checking p_anwtvwn9 (ACTIVE): canAct=true, stack.length=0, step=MAIN1
[priority] autoPassLoop - stopping at p_anwtvwn9: active player can act
2026-02-11T04:02:19.511Z [nextStep] Auto-pass stopped, player p_anwtvwn9 has priority
[AI] Auto-advanced to MAIN1
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 8, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_anwtvwn9, viewerId=p_anwtvwn9, match=true
[getPlayableCardIds] Player p_anwtvwn9: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 8 cards in hand
[getPlayableCardIds] Card Hour of Promise not playable - cannot pay cost {4}{G} (after reduction: {"generic":4,"colors":{"W":0,"U":0,"B":0,"R":0,"G":1,"C":0},"hasX":false})
[getPlayableCardIds] Card Minds Aglow not playable - cannot pay cost {U} (after reduction: {"generic":0,"colors":{"W":0,"U":1,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Arcane Denial blocked - no valid targets
[getPlayableCardIds] Card Edric, Spymaster of Trest not playable - cannot pay cost {1}{G}{U} (after reduction: {"generic":1,"colors":{"W":0,"U":1,"B":0,"R":0,"G":1,"C":0},"hasX":false})
[getPlayableCardIds] Card Bring to Light not playable - cannot pay cost {3}{G}{U} (after reduction: {"generic":3,"colors":{"W":0,"U":1,"B":0,"R":0,"G":1,"C":0},"hasX":false})
[calculateMaxLandsPerTurn] Calculating for player p_anwtvwn9, battlefield has 9 permanents
[calculateMaxLandsPerTurn] Final result for p_anwtvwn9: 1 lands per turn
[getPlayableCardIds] Checking lands: landsPlayed=0, max=1
[getPlayableCardIds] Land Rogue's Passage (card_a2a424ea-ef32-4ac5-8f8c-3ea1839f01d4_ceaf41a0b1c58232) is playable
[getPlayableCardIds] Land Frontier Bivouac (card_48810b27-0646-4ff9-9d4d-c6d09b2e0267_92e044d452c6c9ff) is playable
[getPlayableCardIds] Land Boros Garrison (card_76ec3366-98f3-4903-8f7b-cfcdd60e3be1_84c74e1c210f0f33) is playable
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Kynaios and Tiro of Meletis not playable - canCastNow=true, canPay=false
[getPlayableCardIds] Returning 3 playable card(s): [ 'card_a2a424ea-ef32-4ac5-8f8c-3ea1839f01d4_ceaf41a0b1c58232',
  'card_48810b27-0646-4ff9-9d4d-c6d09b2e0267_92e044d452c6c9ff',
  'card_76ec3366-98f3-4903-8f7b-cfcdd60e3be1_84c74e1c210f0f33' ]
[normalizeViewForEmit] getPlayableCardIds returned 3 cards
[normalizeViewForEmit] Set view.playableCards with 3 cards
[canAct] p_anwtvwn9: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_anwtvwn9, battlefield has 9 permanents
[calculateMaxLandsPerTurn] Final result for p_anwtvwn9: 1 lands per turn
[canPlayLand] p_anwtvwn9: Checking hand with 8 cards
[canPlayLand] p_anwtvwn9: Sample cards in hand: [Hour of Promise(Sorcery), Minds Aglow(Sorcery), Arcane Denial(Instant)]
[canPlayLand] p_anwtvwn9: Found land in hand: Rogue's Passage (Land) - returning TRUE
[canAct] p_anwtvwn9: Turn player in main phase can play land - returning TRUE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=true, canRespond=false
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 8, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_anwtvwn9, viewerId=p_u47pxo6i, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
2026-02-11T04:02:19.522Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782539522_v97nm) ==========
2026-02-11T04:02:19.522Z [checkAndTriggerAutoPass] Priority: p_anwtvwn9, Phase: precombatMain, Step: MAIN1
2026-02-11T04:02:19.522Z [checkAndTriggerAutoPass] p_anwtvwn9 is AI, handled separately (ID: autopass_1770782539522_v97nm)
[AI] AI player checking priority: { gameId: 'game_mlhi50vs',
  playerId: 'p_anwtvwn9',
  phase: 'precombatmain',
  step: 'main1',
  isAITurn: true,
  stackEmpty: true,
  priority: 'p_anwtvwn9',
  hasPriority: true }
[AI] AI has priority, proceeding with action
[AI] Hand size 8 exceeds max 7 - will prioritize casting spells to avoid discarding
[AI] Playing land: Rogue's Passage
[AI] Playing land: { gameId: 'game_mlhi50vs', playerId: 'p_anwtvwn9', cardId: 'card_a2a424ea-ef32-4ac5-8f8c-3ea1839f01d4_ceaf41a0b1c58232' }
[calculateMaxLandsPerTurn] Calculating for player p_anwtvwn9, battlefield has 10 permanents
[calculateMaxLandsPerTurn] Final result for p_anwtvwn9: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 10 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[recalculateHandVisibility] Players with hand reveal effects: none
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking rogue's passage: { hasKarametra: false, hasAcolyte: false, fullCardName: "rogue's passage" }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_anwtvwn9, viewerId=p_anwtvwn9, match=true
[getPlayableCardIds] Player p_anwtvwn9: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 1 }
[getPlayableCardIds] Total available mana: 1
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Hour of Promise not playable - cannot pay cost {4}{G} (after reduction: {"generic":4,"colors":{"W":0,"U":0,"B":0,"R":0,"G":1,"C":0},"hasX":false})
[getPlayableCardIds] Card Minds Aglow not playable - cannot pay cost {U} (after reduction: {"generic":0,"colors":{"W":0,"U":1,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Arcane Denial blocked - no valid targets
[getPlayableCardIds] Card Edric, Spymaster of Trest not playable - cannot pay cost {1}{G}{U} (after reduction: {"generic":1,"colors":{"W":0,"U":1,"B":0,"R":0,"G":1,"C":0},"hasX":false})
[getPlayableCardIds] Card Bring to Light not playable - cannot pay cost {3}{G}{U} (after reduction: {"generic":3,"colors":{"W":0,"U":1,"B":0,"R":0,"G":1,"C":0},"hasX":false})
[calculateMaxLandsPerTurn] Calculating for player p_anwtvwn9, battlefield has 10 permanents
[calculateMaxLandsPerTurn] Final result for p_anwtvwn9: 1 lands per turn
[getPlayableCardIds] Checking lands: landsPlayed=1, max=1
[getPlayableCardIds] Already played max lands this turn (1/1)
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Kynaios and Tiro of Meletis not playable - canCastNow=true, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_anwtvwn9: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_anwtvwn9, battlefield has 10 permanents
[calculateMaxLandsPerTurn] Final result for p_anwtvwn9: 1 lands per turn
[canPlayLand] p_anwtvwn9: Already played max lands this turn (1/1)
[canAct] p_anwtvwn9: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_anwtvwn9, battlefield has 10 permanents
[calculateMaxLandsPerTurn] Final result for p_anwtvwn9: 1 lands per turn
[canPlayLand] p_anwtvwn9: Already played max lands this turn (1/1)
[canAct] p_anwtvwn9: No sorcery-speed actions available in main phase - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking rogue's passage: { hasKarametra: false, hasAcolyte: false, fullCardName: "rogue's passage" }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_anwtvwn9, viewerId=p_u47pxo6i, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
2026-02-11T04:02:19.847Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782539847_9zdkq) ==========
2026-02-11T04:02:19.847Z [checkAndTriggerAutoPass] Priority: p_anwtvwn9, Phase: precombatMain, Step: MAIN1
2026-02-11T04:02:19.847Z [checkAndTriggerAutoPass] p_anwtvwn9 is AI, handled separately (ID: autopass_1770782539847_9zdkq)
[AI] handleAIGameFlow: { gameId: 'game_mlhi50vs',
  playerId: 'p_anwtvwn9',
  phase: 'PRECOMBATMAIN',
  step: 'MAIN1',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: true,
  hasPriority: true }
[AI] handleAIGameFlow: { gameId: 'game_mlhi50vs',
  playerId: 'p_anwtvwn9',
  phase: 'PRECOMBATMAIN',
  step: 'MAIN1',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: true,
  hasPriority: true }
[AI] AI player checking priority: { gameId: 'game_mlhi50vs',
  playerId: 'p_anwtvwn9',
  phase: 'precombatmain',
  step: 'main1',
  isAITurn: true,
  stackEmpty: true,
  priority: 'p_anwtvwn9',
  hasPriority: true }
[AI] AI has priority, proceeding with action
[AI] Cannot play land: { isMainPhase: true, isAITurn: true, landsPlayed: 1, maxLands: 1, reason: 'already played max lands' }
[AI] AI player checking priority: { gameId: 'game_mlhi50vs',
  playerId: 'p_anwtvwn9',
  phase: 'precombatmain',
  step: 'main1',
  isAITurn: true,
  stackEmpty: true,
  priority: 'p_anwtvwn9',
  hasPriority: true }
[AI] AI has priority, proceeding with action
[AI] Cannot play land: { isMainPhase: true, isAITurn: true, landsPlayed: 1, maxLands: 1, reason: 'already played max lands' }
[AI] AI player checking priority: { gameId: 'game_mlhi50vs',
  playerId: 'p_anwtvwn9',
  phase: 'precombatmain',
  step: 'main1',
  isAITurn: true,
  stackEmpty: true,
  priority: 'p_anwtvwn9',
  hasPriority: true }
[AI] AI has priority, proceeding with action
[AI] Cannot play land: { isMainPhase: true, isAITurn: true, landsPlayed: 1, maxLands: 1, reason: 'already played max lands' }
[AI] Activating ability: Rogue's Passage - Activating Rogue's Passage (value: 6.5)
[AI] Activating ability: { gameId: 'game_mlhi50vs', playerId: 'p_anwtvwn9', cardName: "Rogue's Passage", permanentId: 'perm_qhq7pgs3' }
[AI] Tapped permanent for ability: Rogue's Passage
[AI] Added activated ability to stack: Rogue's Passage
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 1,
  stackItems: [ "Rogue's Passage (ability)" ],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_anwtvwn9, viewerId=p_anwtvwn9, match=true
[getPlayableCardIds] Player p_anwtvwn9: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Arcane Denial blocked - no valid targets
[getPlayableCardIds] Not checking lands: isMainPhase=true, stackIsEmpty=false, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Kynaios and Tiro of Meletis not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_anwtvwn9: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 1,
  stackItems: [ "Rogue's Passage (ability)" ],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_anwtvwn9, viewerId=p_u47pxo6i, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
2026-02-11T04:02:20.671Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782540671_z06fn) ==========
2026-02-11T04:02:20.671Z [checkAndTriggerAutoPass] Priority: p_anwtvwn9, Phase: precombatMain, Step: MAIN1
2026-02-11T04:02:20.671Z [checkAndTriggerAutoPass] p_anwtvwn9 is AI, handled separately (ID: autopass_1770782540671_z06fn)
[AI] Cannot cast commander: Kynaios and Tiro of Meletis Cost: {"colors":{"W":1,"U":1,"B":0,"R":1,"G":1,"C":0},"generic":0,"hasX":false,"hybrid":[]} Available: {"white":0,"blue":0,"black":0,"red":0,"green":0,"colorless":0}
[AI] findCastableSpells: Checking 7 cards in hand
[AI] Available mana pool: { total: 0, colors: { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 } }
[AI] findCastableSpells: No castable spells. Reasons: [ 'Hour of Promise: need 5 mana (have 0), colors: {"W":0,"U":0,"B":0,"R":0,"G":1,"C":0}',
  'Minds Aglow: need 1 mana (have 0), colors: {"W":0,"U":1,"B":0,"R":0,"G":0,"C":0}',
  'Arcane Denial: no valid targets (needs 1, found 0)',
  'Edric, Spymaster of Trest: need 3 mana (have 0), colors: {"W":0,"U":1,"B":0,"R":0,"G":1,"C":0}',
  'Bring to Light: need 5 mana (have 0), colors: {"W":0,"U":1,"B":0,"R":0,"G":1,"C":0}' ]
[AI] Main phase, no more actions, passing priority
[AI] Passing priority: { gameId: 'game_mlhi50vs', playerId: 'p_anwtvwn9' }
2026-02-11T04:02:20.862Z [checkPendingInteractions] Pending: stack_not_empty
[priority] autoPassLoop - blocking due to pending interactions: stack_not_empty
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 1,
  stackItems: [ "Rogue's Passage (ability)" ],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 1,
  stackItems: [ "Rogue's Passage (ability)" ],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isMyTurn=false
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Card Brave the Elements not playable - cannot pay cost {W} (after reduction: {"generic":0,"colors":{"W":1,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Not checking lands: isMainPhase=true, stackIsEmpty=false, isMyTurn=false
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 1 playable card(s): [ 'perm_el826qea' ]
[normalizeViewForEmit] getPlayableCardIds returned 1 cards
[normalizeViewForEmit] Set view.playableCards with 1 cards
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isTurnPlayer=false
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-02-11T04:02:20.873Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782540873_j5wqw) ==========
2026-02-11T04:02:20.873Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: precombatMain, Step: MAIN1
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
2026-02-11T04:02:20.873Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=false canAct=false (ID: autopass_1770782540873_j5wqw)
2026-02-11T04:02:20.873Z [checkAndTriggerAutoPass] p_u47pxo6i CANNOT ACT - proceeding with auto-pass (ID: autopass_1770782540873_j5wqw)
2026-02-11T04:02:20.873Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_u47pxo6i with 150ms delay (ID: autopass_1770782540873_j5wqw)
[AI] Cannot cast commander: Kynaios and Tiro of Meletis Cost: {"colors":{"W":1,"U":1,"B":0,"R":1,"G":1,"C":0},"generic":0,"hasX":false,"hybrid":[]} Available: {"white":0,"blue":0,"black":0,"red":0,"green":0,"colorless":0}
[AI] findCastableSpells: Checking 7 cards in hand
[AI] Available mana pool: { total: 0, colors: { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 } }
[AI] findCastableSpells: No castable spells. Reasons: [ 'Hour of Promise: need 5 mana (have 0), colors: {"W":0,"U":0,"B":0,"R":0,"G":1,"C":0}',
  'Minds Aglow: need 1 mana (have 0), colors: {"W":0,"U":1,"B":0,"R":0,"G":0,"C":0}',
  'Arcane Denial: no valid targets (needs 1, found 0)',
  'Edric, Spymaster of Trest: need 3 mana (have 0), colors: {"W":0,"U":1,"B":0,"R":0,"G":1,"C":0}',
  'Bring to Light: need 5 mana (have 0), colors: {"W":0,"U":1,"B":0,"R":0,"G":1,"C":0}' ]
[AI] Main phase, no more actions, passing priority
[AI] Passing priority: { gameId: 'game_mlhi50vs', playerId: 'p_anwtvwn9' }
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 1,
  stackItems: [ "Rogue's Passage (ability)" ],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 1,
  stackItems: [ "Rogue's Passage (ability)" ],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isMyTurn=false
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Card Brave the Elements not playable - cannot pay cost {W} (after reduction: {"generic":0,"colors":{"W":1,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Not checking lands: isMainPhase=true, stackIsEmpty=false, isMyTurn=false
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 1 playable card(s): [ 'perm_el826qea' ]
[normalizeViewForEmit] getPlayableCardIds returned 1 cards
[normalizeViewForEmit] Set view.playableCards with 1 cards
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isTurnPlayer=false
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-02-11T04:02:20.981Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782540981_3oat2) ==========
2026-02-11T04:02:20.981Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: precombatMain, Step: MAIN1
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
2026-02-11T04:02:20.981Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=false canAct=false (ID: autopass_1770782540981_3oat2)
2026-02-11T04:02:20.981Z [checkAndTriggerAutoPass] p_u47pxo6i CANNOT ACT - proceeding with auto-pass (ID: autopass_1770782540981_3oat2)
2026-02-11T04:02:20.981Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_u47pxo6i with 150ms delay (ID: autopass_1770782540981_3oat2)
[AI] Passing priority: { gameId: 'game_mlhi50vs', playerId: 'p_anwtvwn9' }
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 1,
  stackItems: [ "Rogue's Passage (ability)" ],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 1,
  stackItems: [ "Rogue's Passage (ability)" ],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isMyTurn=false
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Card Brave the Elements not playable - cannot pay cost {W} (after reduction: {"generic":0,"colors":{"W":1,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Not checking lands: isMainPhase=true, stackIsEmpty=false, isMyTurn=false
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 1 playable card(s): [ 'perm_el826qea' ]
[normalizeViewForEmit] getPlayableCardIds returned 1 cards
[normalizeViewForEmit] Set view.playableCards with 1 cards
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=false, isTurnPlayer=false
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-02-11T04:02:20.991Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782540991_9ipyx) ==========
2026-02-11T04:02:20.991Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: precombatMain, Step: MAIN1
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
2026-02-11T04:02:20.992Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=false canAct=false (ID: autopass_1770782540991_9ipyx)
2026-02-11T04:02:20.992Z [checkAndTriggerAutoPass] p_u47pxo6i CANNOT ACT - proceeding with auto-pass (ID: autopass_1770782540991_9ipyx)
2026-02-11T04:02:20.992Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_u47pxo6i with 150ms delay (ID: autopass_1770782540991_9ipyx)
[AI] handleAIGameFlow: { gameId: 'game_mlhi50vs',
  playerId: 'p_anwtvwn9',
  phase: 'PRECOMBATMAIN',
  step: 'MAIN1',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: true,
  hasPriority: false }
2026-02-11T04:02:21.032Z [executeAutoPass] ========== EXECUTING for p_u47pxo6i (ID: autopass_1770782540873_j5wqw) ==========
2026-02-11T04:02:21.032Z [executeAutoPass] Phase: precombatMain, Step: MAIN1
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
2026-02-11T04:02:21.032Z [executeAutoPass] Re-check: p_u47pxo6i canAct=false (ID: autopass_1770782540873_j5wqw)
2026-02-11T04:02:21.032Z [executeAutoPass] Proceeding with auto-pass for p_u47pxo6i (ID: autopass_1770782540873_j5wqw)
2026-02-11T04:02:21.032Z [executeAutoPass] Set _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782540873_j5wqw)
2026-02-11T04:02:21.032Z [checkPendingInteractions] Pending: stack_not_empty
[priority] autoPassLoop - blocking due to pending interactions: stack_not_empty
2026-02-11T04:02:21.032Z [executeAutoPass] passPriority result: changed=true, advanceStep=false, resolvedNow=true (ID: autopass_1770782540873_j5wqw)
[checkAndTriggerAutoPass] Stack resolved after auto-pass for p_u47pxo6i
[resolveTopOfStack] Executing activated ability from Rogue's Passage for p_anwtvwn9:
[executeTriggerEffect] triggerType=undefined, sourceName=Rogue's Passage
[executeTriggerEffect] Unhandled trigger effect: "" from Rogue's Passage
2026-02-11T04:02:21.035Z [executeAutoPass] Cleared _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782540873_j5wqw)
2026-02-11T04:02:21.035Z [executeAutoPass] Broadcasting state after auto-pass (ID: autopass_1770782540873_j5wqw)
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_anwtvwn9, viewerId=p_anwtvwn9, match=true
[getPlayableCardIds] Player p_anwtvwn9: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Hour of Promise not playable - cannot pay cost {4}{G} (after reduction: {"generic":4,"colors":{"W":0,"U":0,"B":0,"R":0,"G":1,"C":0},"hasX":false})
[getPlayableCardIds] Card Minds Aglow not playable - cannot pay cost {U} (after reduction: {"generic":0,"colors":{"W":0,"U":1,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Arcane Denial blocked - no valid targets
[getPlayableCardIds] Card Edric, Spymaster of Trest not playable - cannot pay cost {1}{G}{U} (after reduction: {"generic":1,"colors":{"W":0,"U":1,"B":0,"R":0,"G":1,"C":0},"hasX":false})
[getPlayableCardIds] Card Bring to Light not playable - cannot pay cost {3}{G}{U} (after reduction: {"generic":3,"colors":{"W":0,"U":1,"B":0,"R":0,"G":1,"C":0},"hasX":false})
[calculateMaxLandsPerTurn] Calculating for player p_anwtvwn9, battlefield has 10 permanents
[calculateMaxLandsPerTurn] Final result for p_anwtvwn9: 1 lands per turn
[getPlayableCardIds] Checking lands: landsPlayed=1, max=1
[getPlayableCardIds] Already played max lands this turn (1/1)
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Kynaios and Tiro of Meletis not playable - canCastNow=true, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_anwtvwn9: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_anwtvwn9, battlefield has 10 permanents
[calculateMaxLandsPerTurn] Final result for p_anwtvwn9: 1 lands per turn
[canPlayLand] p_anwtvwn9: Already played max lands this turn (1/1)
[canAct] p_anwtvwn9: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_anwtvwn9, battlefield has 10 permanents
[calculateMaxLandsPerTurn] Final result for p_anwtvwn9: 1 lands per turn
[canPlayLand] p_anwtvwn9: Already played max lands this turn (1/1)
[canAct] p_anwtvwn9: No sorcery-speed actions available in main phase - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_anwtvwn9, viewerId=p_u47pxo6i, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
2026-02-11T04:02:21.046Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782541046_10vss) ==========
2026-02-11T04:02:21.046Z [checkAndTriggerAutoPass] Priority: p_anwtvwn9, Phase: precombatMain, Step: MAIN1
2026-02-11T04:02:21.046Z [checkAndTriggerAutoPass] p_anwtvwn9 is AI, handled separately (ID: autopass_1770782541046_10vss)
2026-02-11T04:02:21.046Z [executeAutoPass] Broadcast complete (ID: autopass_1770782540873_j5wqw)
2026-02-11T04:02:21.140Z [executeAutoPass] ========== EXECUTING for p_u47pxo6i (ID: autopass_1770782540981_3oat2) ==========
2026-02-11T04:02:21.140Z [executeAutoPass] Phase: precombatMain, Step: MAIN1
2026-02-11T04:02:21.140Z [executeAutoPass] Priority changed from p_u47pxo6i to p_anwtvwn9, aborting (ID: autopass_1770782540981_3oat2)
2026-02-11T04:02:21.155Z [executeAutoPass] ========== EXECUTING for p_u47pxo6i (ID: autopass_1770782540991_9ipyx) ==========
2026-02-11T04:02:21.155Z [executeAutoPass] Phase: precombatMain, Step: MAIN1
2026-02-11T04:02:21.155Z [executeAutoPass] Priority changed from p_u47pxo6i to p_anwtvwn9, aborting (ID: autopass_1770782540991_9ipyx)
[AI] AI player checking priority: { gameId: 'game_mlhi50vs',
  playerId: 'p_anwtvwn9',
  phase: 'precombatmain',
  step: 'main1',
  isAITurn: true,
  stackEmpty: true,
  priority: 'p_anwtvwn9',
  hasPriority: true }
[AI] AI has priority, proceeding with action
[AI] Cannot play land: { isMainPhase: true, isAITurn: true, landsPlayed: 1, maxLands: 1, reason: 'already played max lands' }
[AI] handleAIGameFlow: { gameId: 'game_mlhi50vs',
  playerId: 'p_anwtvwn9',
  phase: 'PRECOMBATMAIN',
  step: 'MAIN1',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: true,
  hasPriority: true }
[AI] AI player checking priority: { gameId: 'game_mlhi50vs',
  playerId: 'p_anwtvwn9',
  phase: 'precombatmain',
  step: 'main1',
  isAITurn: true,
  stackEmpty: true,
  priority: 'p_anwtvwn9',
  hasPriority: true }
[AI] AI has priority, proceeding with action
[AI] Cannot play land: { isMainPhase: true, isAITurn: true, landsPlayed: 1, maxLands: 1, reason: 'already played max lands' }
[AI] Cannot cast commander: Kynaios and Tiro of Meletis Cost: {"colors":{"W":1,"U":1,"B":0,"R":1,"G":1,"C":0},"generic":0,"hasX":false,"hybrid":[]} Available: {"white":0,"blue":0,"black":0,"red":0,"green":0,"colorless":0}
[AI] findCastableSpells: Checking 7 cards in hand
[AI] Available mana pool: { total: 0, colors: { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 } }
[AI] findCastableSpells: No castable spells. Reasons: [ 'Hour of Promise: need 5 mana (have 0), colors: {"W":0,"U":0,"B":0,"R":0,"G":1,"C":0}',
  'Minds Aglow: need 1 mana (have 0), colors: {"W":0,"U":1,"B":0,"R":0,"G":0,"C":0}',
  'Arcane Denial: no valid targets (needs 1, found 0)',
  'Edric, Spymaster of Trest: need 3 mana (have 0), colors: {"W":0,"U":1,"B":0,"R":0,"G":1,"C":0}',
  'Bring to Light: need 5 mana (have 0), colors: {"W":0,"U":1,"B":0,"R":0,"G":1,"C":0}' ]
[AI] Main phase, no more actions, passing priority
[AI] Passing priority: { gameId: 'game_mlhi50vs', playerId: 'p_anwtvwn9' }
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_u47pxo6i, turnPlayer: p_anwtvwn9
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_u47pxo6i (non-active): canAct=false, stack.length=0, step=MAIN1
[priority] Auto-passing for p_u47pxo6i - no available actions
[AI] All players passed priority with empty stack, advancing step
2026-02-11T04:02:21.686Z [nextStep] ========== CALLED ==========
2026-02-11T04:02:21.686Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:02:21.686Z [nextStep] Current: precombatMain/MAIN1
2026-02-11T04:02:21.686Z [nextStep] Priority: p_anwtvwn9, Turn: p_anwtvwn9
2026-02-11T04:02:21.686Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4470:25)
        at async handleAIPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:2542:7)
2026-02-11T04:02:21.686Z [clearManaPool] Processed mana pools for all players
2026-02-11T04:02:21.686Z [nextStep] Advanced to phase=combat, step=BEGIN_COMBAT
[getBeginningOfCombatTriggers] SOLDIER Military Program: SKIPPED - not controller's turn (controller=p_u47pxo6i, active=p_anwtvwn9)
[getBeginningOfCombatTriggers] Total triggers for activePlayer=p_anwtvwn9: 0
2026-02-11T04:02:21.686Z [nextStep] Granting priority to active player p_anwtvwn9 (step: BEGIN_COMBAT, stack size: 0)
[canAct] p_anwtvwn9: step=BEGIN_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
2026-02-11T04:02:21.686Z [nextStep] DEBUG - Turn Player p_anwtvwn9:
2026-02-11T04:02:21.686Z [nextStep]   Hand (7): Hour of Promise, Minds Aglow, Arcane Denial, Edric, Spymaster of Trest,Frontier Bivouac, Boros Garrison, Bring to Light
2026-02-11T04:02:21.686Z [nextStep]   canAct: false, canRespond: false
2026-02-11T04:02:21.686Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_anwtvwn9
[canAct] p_anwtvwn9: step=BEGIN_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[priority] autoPassLoop - checking p_anwtvwn9 (ACTIVE): canAct=false, stack.length=0, step=BEGIN_COMBAT
[priority] Auto-passing for p_anwtvwn9 - no available actions
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_u47pxo6i (non-active): canAct=false, stack.length=0, step=BEGIN_COMBAT
[priority] Auto-passing for p_u47pxo6i - no available actions
2026-02-11T04:02:21.686Z [nextStep] All players auto-passed after granting priority - caller should advance step
[AI] Advanced to next step for game game_mlhi50vs
[AI] Auto-pass detected after step advancement (iteration 1), advancing again
2026-02-11T04:02:21.686Z [nextStep] ========== CALLED ==========
2026-02-11T04:02:21.686Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:02:21.686Z [nextStep] Current: combat/BEGIN_COMBAT
2026-02-11T04:02:21.686Z [nextStep] Priority: p_anwtvwn9, Turn: p_anwtvwn9
2026-02-11T04:02:21.686Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4495:29)
        at async handleAIPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:2542:7)
2026-02-11T04:02:21.686Z [nextStep] Advanced to phase=combat, step=DECLARE_ATTACKERS
2026-02-11T04:02:21.686Z [nextStep] Granting priority to active player p_anwtvwn9 (step: DECLARE_ATTACKERS, stack size:0)
[canAct] p_anwtvwn9: step=DECLARE_ATTACKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
2026-02-11T04:02:21.686Z [nextStep] DEBUG - Turn Player p_anwtvwn9:
2026-02-11T04:02:21.687Z [nextStep]   Hand (7): Hour of Promise, Minds Aglow, Arcane Denial, Edric, Spymaster of Trest,Frontier Bivouac, Boros Garrison, Bring to Light
2026-02-11T04:02:21.687Z [nextStep]   canAct: false, canRespond: false
2026-02-11T04:02:21.687Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_anwtvwn9
[canAct] p_anwtvwn9: step=DECLARE_ATTACKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[priority] autoPassLoop - checking p_anwtvwn9 (ACTIVE): canAct=false, stack.length=0, step=DECLARE_ATTACKERS
[priority] Auto-passing for p_anwtvwn9 - no available actions
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_u47pxo6i (non-active): canAct=false, stack.length=0, step=DECLARE_ATTACKERS
[priority] Auto-passing for p_u47pxo6i - no available actions
2026-02-11T04:02:21.687Z [nextStep] All players auto-passed after granting priority - caller should advance step
[AI] Auto-advanced to DECLARE_ATTACKERS
[AI] Auto-pass detected after step advancement (iteration 2), advancing again
2026-02-11T04:02:21.687Z [nextStep] ========== CALLED ==========
2026-02-11T04:02:21.687Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:02:21.687Z [nextStep] Current: combat/DECLARE_ATTACKERS
2026-02-11T04:02:21.687Z [nextStep] Priority: p_anwtvwn9, Turn: p_anwtvwn9
2026-02-11T04:02:21.687Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4495:29)
        at async handleAIPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:2542:7)
2026-02-11T04:02:21.687Z [nextStep] Entering DECLARE_BLOCKERS, initialized blockersDeclaredBy array
2026-02-11T04:02:21.687Z [nextStep] Advanced to phase=combat, step=DECLARE_BLOCKERS
2026-02-11T04:02:21.687Z [nextStep] Granting priority to active player p_anwtvwn9 (step: DECLARE_BLOCKERS, stack size: 0)
[canAct] p_anwtvwn9: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
2026-02-11T04:02:21.687Z [nextStep] DEBUG - Turn Player p_anwtvwn9:
2026-02-11T04:02:21.687Z [nextStep]   Hand (7): Hour of Promise, Minds Aglow, Arcane Denial, Edric, Spymaster of Trest,Frontier Bivouac, Boros Garrison, Bring to Light
2026-02-11T04:02:21.687Z [nextStep]   canAct: false, canRespond: false
2026-02-11T04:02:21.687Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_anwtvwn9
[canAct] p_anwtvwn9: step=DECLARE_BLOCKERS, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[priority] autoPassLoop - checking p_anwtvwn9 (ACTIVE): canAct=false, stack.length=0, step=DECLARE_BLOCKERS
[priority] Auto-passing for p_anwtvwn9 - no available actions
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_u47pxo6i (non-active): canAct=false, stack.length=0, step=DECLARE_BLOCKERS
[priority] Auto-passing for p_u47pxo6i - no available actions
2026-02-11T04:02:21.687Z [nextStep] All players auto-passed after granting priority - caller should advance step
[AI] Auto-advanced to DECLARE_BLOCKERS
[AI] Auto-pass detected after step advancement (iteration 3), advancing again
2026-02-11T04:02:21.687Z [nextStep] ========== CALLED ==========
2026-02-11T04:02:21.687Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:02:21.687Z [nextStep] Current: combat/DECLARE_BLOCKERS
2026-02-11T04:02:21.687Z [nextStep] Priority: p_anwtvwn9, Turn: p_anwtvwn9
2026-02-11T04:02:21.687Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4495:29)
        at async handleAIPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:2542:7)
2026-02-11T04:02:21.687Z [COMBAT_STEP] ========== TRANSITIONING FROM DECLARE_BLOCKERS TO DAMAGE (no first strike) ==========
2026-02-11T04:02:21.687Z [COMBAT_STEP] Calling dealCombatDamage...
2026-02-11T04:02:21.687Z [COMBAT_DAMAGE] ========== ENTERING dealCombatDamage (firstStrike=undefined) ==========
2026-02-11T04:02:21.687Z [COMBAT_DAMAGE] Found 0 attackers
2026-02-11T04:02:21.687Z [COMBAT_DAMAGE] No attackers, skipping combat damage
2026-02-11T04:02:21.687Z [COMBAT_STEP] dealCombatDamage completed successfully
2026-02-11T04:02:21.687Z [COMBAT_STEP] Result: damageToPlayers={}, creaturesDestroyed=0
2026-02-11T04:02:21.688Z [COMBAT_STEP] ========== END DAMAGE STEP PROCESSING ==========
2026-02-11T04:02:21.688Z [nextStep] Advanced to phase=combat, step=DAMAGE
2026-02-11T04:02:21.688Z [nextStep] Granting priority to active player p_anwtvwn9 (step: DAMAGE, stack size: 0)
[canAct] p_anwtvwn9: step=DAMAGE, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
2026-02-11T04:02:21.688Z [nextStep] DEBUG - Turn Player p_anwtvwn9:
2026-02-11T04:02:21.688Z [nextStep]   Hand (7): Hour of Promise, Minds Aglow, Arcane Denial, Edric, Spymaster of Trest,Frontier Bivouac, Boros Garrison, Bring to Light
2026-02-11T04:02:21.688Z [nextStep]   canAct: false, canRespond: false
2026-02-11T04:02:21.688Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_anwtvwn9
[canAct] p_anwtvwn9: step=DAMAGE, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[priority] autoPassLoop - checking p_anwtvwn9 (ACTIVE): canAct=false, stack.length=0, step=DAMAGE
[priority] Auto-passing for p_anwtvwn9 - no available actions
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_u47pxo6i (non-active): canAct=false, stack.length=0, step=DAMAGE
[priority] Auto-passing for p_u47pxo6i - no available actions
2026-02-11T04:02:21.688Z [nextStep] All players auto-passed after granting priority - caller should advance step
[AI] Auto-advanced to DAMAGE
[AI] Auto-pass detected after step advancement (iteration 4), advancing again
2026-02-11T04:02:21.688Z [nextStep] ========== CALLED ==========
2026-02-11T04:02:21.688Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:02:21.688Z [nextStep] Current: combat/DAMAGE
2026-02-11T04:02:21.688Z [nextStep] Priority: p_anwtvwn9, Turn: p_anwtvwn9
2026-02-11T04:02:21.688Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4495:29)
        at async handleAIPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:2542:7)
2026-02-11T04:02:21.688Z [nextStep] Advanced to phase=combat, step=END_COMBAT
2026-02-11T04:02:21.688Z [nextStep] Granting priority to active player p_anwtvwn9 (step: END_COMBAT, stack size: 0)
[canAct] p_anwtvwn9: step=END_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
2026-02-11T04:02:21.688Z [nextStep] DEBUG - Turn Player p_anwtvwn9:
2026-02-11T04:02:21.688Z [nextStep]   Hand (7): Hour of Promise, Minds Aglow, Arcane Denial, Edric, Spymaster of Trest,Frontier Bivouac, Boros Garrison, Bring to Light
2026-02-11T04:02:21.688Z [nextStep]   canAct: false, canRespond: false
2026-02-11T04:02:21.688Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_anwtvwn9
[canAct] p_anwtvwn9: step=END_COMBAT, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[priority] autoPassLoop - checking p_anwtvwn9 (ACTIVE): canAct=false, stack.length=0, step=END_COMBAT
[priority] Auto-passing for p_anwtvwn9 - no available actions
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_u47pxo6i (non-active): canAct=false, stack.length=0, step=END_COMBAT
[priority] Auto-passing for p_u47pxo6i - no available actions
2026-02-11T04:02:21.689Z [nextStep] All players auto-passed after granting priority - caller should advance step
[AI] Auto-advanced to END_COMBAT
[AI] Auto-pass detected after step advancement (iteration 5), advancing again
2026-02-11T04:02:21.689Z [nextStep] ========== CALLED ==========
2026-02-11T04:02:21.689Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:02:21.689Z [nextStep] Current: combat/END_COMBAT
2026-02-11T04:02:21.689Z [nextStep] Priority: p_anwtvwn9, Turn: p_anwtvwn9
2026-02-11T04:02:21.689Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4495:29)
        at async handleAIPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:2542:7)
2026-02-11T04:02:21.689Z [clearManaPool] Processed mana pools for all players
2026-02-11T04:02:21.689Z [nextStep] Advanced to phase=postcombatMain, step=MAIN2
2026-02-11T04:02:21.689Z [nextStep] Granting priority to active player p_anwtvwn9 (step: MAIN2, stack size: 0)
[canAct] p_anwtvwn9: step=MAIN2, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_anwtvwn9, battlefield has 10 permanents
[calculateMaxLandsPerTurn] Final result for p_anwtvwn9: 1 lands per turn
[canPlayLand] p_anwtvwn9: Already played max lands this turn (1/1)
[canAct] p_anwtvwn9: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_anwtvwn9, battlefield has 10 permanents
[calculateMaxLandsPerTurn] Final result for p_anwtvwn9: 1 lands per turn
[canPlayLand] p_anwtvwn9: Already played max lands this turn (1/1)
[canAct] p_anwtvwn9: No sorcery-speed actions available in main phase - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
2026-02-11T04:02:21.689Z [nextStep] DEBUG - Turn Player p_anwtvwn9:
2026-02-11T04:02:21.689Z [nextStep]   Hand (7): Hour of Promise, Minds Aglow, Arcane Denial, Edric, Spymaster of Trest,Frontier Bivouac, Boros Garrison, Bring to Light
2026-02-11T04:02:21.689Z [nextStep]   canAct: false, canRespond: false
2026-02-11T04:02:21.689Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_anwtvwn9
[canAct] p_anwtvwn9: step=MAIN2, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_anwtvwn9, battlefield has 10 permanents
[calculateMaxLandsPerTurn] Final result for p_anwtvwn9: 1 lands per turn
[canPlayLand] p_anwtvwn9: Already played max lands this turn (1/1)
[canAct] p_anwtvwn9: In main phase with empty stack, checking sorcery-speed actions
[calculateMaxLandsPerTurn] Calculating for player p_anwtvwn9, battlefield has 10 permanents
[calculateMaxLandsPerTurn] Final result for p_anwtvwn9: 1 lands per turn
[canPlayLand] p_anwtvwn9: Already played max lands this turn (1/1)
[canAct] p_anwtvwn9: No sorcery-speed actions available in main phase - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[priority] autoPassLoop - checking p_anwtvwn9 (ACTIVE): canAct=false, stack.length=0, step=MAIN2
[priority] Auto-passing for p_anwtvwn9 - no available actions
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_u47pxo6i (non-active): canAct=false, stack.length=0, step=MAIN2
[priority] Auto-passing for p_u47pxo6i - no available actions
2026-02-11T04:02:21.689Z [nextStep] All players auto-passed after granting priority - caller should advance step
[AI] Auto-advanced to MAIN2
[AI] Auto-pass detected after step advancement (iteration 6), advancing again
2026-02-11T04:02:21.690Z [nextStep] ========== CALLED ==========
2026-02-11T04:02:21.690Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:02:21.690Z [nextStep] Current: postcombatMain/MAIN2
2026-02-11T04:02:21.690Z [nextStep] Priority: p_anwtvwn9, Turn: p_anwtvwn9
2026-02-11T04:02:21.690Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4495:29)
        at async handleAIPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:2542:7)
2026-02-11T04:02:21.690Z [clearManaPool] Processed mana pools for all players
2026-02-11T04:02:21.690Z [nextStep] Advanced to phase=ending, step=END
2026-02-11T04:02:21.690Z [nextStep] Granting priority to active player p_anwtvwn9 (step: END, stack size: 0)
[canAct] p_anwtvwn9: step=END, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
2026-02-11T04:02:21.690Z [nextStep] DEBUG - Turn Player p_anwtvwn9:
2026-02-11T04:02:21.690Z [nextStep]   Hand (7): Hour of Promise, Minds Aglow, Arcane Denial, Edric, Spymaster of Trest,Frontier Bivouac, Boros Garrison, Bring to Light
2026-02-11T04:02:21.690Z [nextStep]   canAct: false, canRespond: false
2026-02-11T04:02:21.690Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_anwtvwn9
[canAct] p_anwtvwn9: step=END, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[priority] autoPassLoop - checking p_anwtvwn9 (ACTIVE): canAct=false, stack.length=0, step=END
[priority] Auto-passing for p_anwtvwn9 - no available actions
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_u47pxo6i (non-active): canAct=false, stack.length=0, step=END
[priority] Auto-passing for p_u47pxo6i - no available actions
2026-02-11T04:02:21.690Z [nextStep] All players auto-passed after granting priority - caller should advance step
[AI] Auto-advanced to END
[AI] Auto-pass detected after step advancement (iteration 7), advancing again
2026-02-11T04:02:21.690Z [nextStep] ========== CALLED ==========
2026-02-11T04:02:21.690Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:02:21.690Z [nextStep] Current: ending/END
2026-02-11T04:02:21.690Z [nextStep] Priority: p_anwtvwn9, Turn: p_anwtvwn9
2026-02-11T04:02:21.690Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4495:29)
        at async handleAIPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:2542:7)
2026-02-11T04:02:21.690Z [nextStep] Advanced to phase=ending, step=CLEANUP
2026-02-11T04:02:21.690Z [nextStep] Step CLEANUP does not grant priority (Rule 502.1/514.1)
2026-02-11T04:02:21.690Z [endTemporaryEffects] Cleared creaturesAttackedThisTurn tracking
2026-02-11T04:02:21.690Z [nextStep] Cleanup complete, advancing to next turn
2026-02-11T04:02:21.691Z [clearSummoningSicknessForPlayer] Cleared summoning sickness from 2 permanent(s) for p_u47pxo6i
2026-02-11T04:02:21.691Z [nextTurn] Reset planeswalker loyalty activation counters for player p_u47pxo6i
2026-02-11T04:02:21.691Z [nextTurn] Cleared autoPassForTurn flags for new turn
2026-02-11T04:02:21.691Z [nextTurn] Cleared noncreatureSpellsCastThisTurn for new turn
2026-02-11T04:02:21.691Z [nextTurn] Cleared spellsCastFromHandThisTurn for new turn
2026-02-11T04:02:21.691Z [nextTurn] Cleared spellsCastThisTurn for new turn
2026-02-11T04:02:21.691Z [nextTurn] Cleared playedCardFromExileThisTurn for new turn
2026-02-11T04:02:21.691Z [nextTurn] Advanced to player p_u47pxo6i, phase=beginning, step=UNTAP
[calculateMaxLandsPerTurn] Calculating for player p_anwtvwn9, battlefield has 10 permanents
[calculateMaxLandsPerTurn] Final result for p_anwtvwn9: 1 lands per turn
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 10 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[recalculateHandVisibility] Players with hand reveal effects: none
[AI] Auto-advanced to UNTAP
[AI] Auto-pass loop stopping - human player p_u47pxo6i has priority
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=UNTAP, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Card Brave the Elements not playable - cannot pay cost {W} (after reduction: {"generic":0,"colors":{"W":1,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 1 playable card(s): [ 'perm_el826qea' ]
[normalizeViewForEmit] getPlayableCardIds returned 1 cards
[normalizeViewForEmit] Set view.playableCards with 1 cards
[canAct] p_u47pxo6i: step=UNTAP, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
2026-02-11T04:02:21.703Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782541703_vrqzs) ==========
2026-02-11T04:02:21.703Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: beginning, Step: UNTAP
[canAct] p_u47pxo6i: step=UNTAP, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:02:21.703Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=true canAct=false (ID: autopass_1770782541703_vrqzs)
2026-02-11T04:02:21.703Z [checkAndTriggerAutoPass] p_u47pxo6i CANNOT ACT - proceeding with auto-pass (ID: autopass_1770782541703_vrqzs)
2026-02-11T04:02:21.703Z [checkAndTriggerAutoPass] Scheduling auto-pass for p_u47pxo6i with 150ms delay (ID: autopass_1770782541703_vrqzs)
[Automation] Auto-pass for turn disabled for p_u47pxo6i in game game_mlhi50vs
[Automation] Auto-pass for turn state in game game_mlhi50vs: {}
2026-02-11T04:02:21.855Z [executeAutoPass] ========== EXECUTING for p_u47pxo6i (ID: autopass_1770782541703_vrqzs) ==========
2026-02-11T04:02:21.855Z [executeAutoPass] Phase: beginning, Step: UNTAP
[canAct] p_u47pxo6i: step=UNTAP, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
2026-02-11T04:02:21.856Z [executeAutoPass] Re-check: p_u47pxo6i canAct=false (ID: autopass_1770782541703_vrqzs)
2026-02-11T04:02:21.856Z [executeAutoPass] Proceeding with auto-pass for p_u47pxo6i (ID: autopass_1770782541703_vrqzs)
2026-02-11T04:02:21.856Z [executeAutoPass] Set _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782541703_vrqzs)
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_anwtvwn9, turnPlayer: p_u47pxo6i
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_anwtvwn9 (non-active): canAct=false, stack.length=0, step=UNTAP
[priority] Auto-passing for p_anwtvwn9 - no available actions
2026-02-11T04:02:21.856Z [executeAutoPass] passPriority result: changed=true, advanceStep=true, resolvedNow=false (ID: autopass_1770782541703_vrqzs)
2026-02-11T04:02:21.856Z [executeAutoPass] Advancing step after auto-pass for p_u47pxo6i (ID: autopass_1770782541703_vrqzs)
2026-02-11T04:02:21.856Z [nextStep] ========== CALLED ==========
2026-02-11T04:02:21.856Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:02:21.856Z [nextStep] Current: beginning/UNTAP
2026-02-11T04:02:21.856Z [nextStep] Priority: p_anwtvwn9, Turn: p_u47pxo6i
2026-02-11T04:02:21.856Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at Timeout.executeAutoPass (D:\Git\MTGEDH\server\src\socket\util.ts:2058:31)
        at listOnTimeout (node:internal/timers:588:17)
        at process.processTimers (node:internal/timers:523:7)
2026-02-11T04:02:21.856Z [nextStep] Advanced to phase=beginning, step=UPKEEP
2026-02-11T04:02:21.856Z [nextStep] Granting priority to active player p_u47pxo6i (step: UPKEEP, stack size: 0)
[canAct] p_u47pxo6i: step=UPKEEP, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: No instant-speed responses available (returning false)
2026-02-11T04:02:21.857Z [nextStep] DEBUG - Turn Player p_u47pxo6i:
2026-02-11T04:02:21.857Z [nextStep]   Hand (4): Helm of the Host, Heidegger, Shinra Executive, Ghostly Prison, Brave the Elements
2026-02-11T04:02:21.857Z [nextStep]   canAct: false, canRespond: false
2026-02-11T04:02:21.857Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_u47pxo6i, turnPlayer: p_u47pxo6i
[canAct] p_u47pxo6i: step=UPKEEP, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_u47pxo6i: No actions available - returning FALSE
[priority] autoPassLoop - checking p_u47pxo6i (ACTIVE): canAct=false, stack.length=0, step=UPKEEP
[priority] Auto-passing for p_u47pxo6i - no available actions
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[priority] autoPassLoop - checking p_anwtvwn9 (non-active): canAct=false, stack.length=0, step=UPKEEP
[priority] Auto-passing for p_anwtvwn9 - no available actions
2026-02-11T04:02:21.857Z [nextStep] All players auto-passed after granting priority - caller should advance step
2026-02-11T04:02:21.857Z [untapPermanentsForPlayer] Player p_u47pxo6i: untapped 4, stun counters removed 0, skipped (doesn't untap) 0
2026-02-11T04:02:21.857Z [executeAutoPass] Cleared _autoPassInProgress flag for p_u47pxo6i (ID: autopass_1770782541703_vrqzs)
2026-02-11T04:02:21.857Z [executeAutoPass] Broadcasting state after auto-pass (ID: autopass_1770782541703_vrqzs)
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[TokenOptimization] Applied grouping: 10 ΓåÆ 9 entries, has grouped tokens with counts
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[TokenOptimization] Applied grouping: 10 ΓåÆ 9 entries, has grouped tokens with counts
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=UPKEEP, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 3, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 3
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Card Brave the Elements (4c8ff6cd-e3ac-4024-aacb-86f7e1f43ba0_mlhi5a9m_1u_cce591fc) is playable
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 2 playable card(s): [ '4c8ff6cd-e3ac-4024-aacb-86f7e1f43ba0_mlhi5a9m_1u_cce591fc', 'perm_el826qea' ]
[normalizeViewForEmit] getPlayableCardIds returned 2 cards
[normalizeViewForEmit] Set view.playableCards with 2 cards
[canAct] p_u47pxo6i: step=UPKEEP, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Can cast instant/flash spell - returning TRUE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: Can cast instant/flash spell
[normalizeViewForEmit] Set canAct=true, canRespond=true
2026-02-11T04:02:21.869Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782541869_zav5v) ==========
2026-02-11T04:02:21.870Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: beginning, Step: UPKEEP
[canAct] p_u47pxo6i: step=UPKEEP, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Can cast instant/flash spell - returning TRUE
2026-02-11T04:02:21.870Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=true canAct=true (ID: autopass_1770782541869_zav5v)
2026-02-11T04:02:21.870Z [checkAndTriggerAutoPass] p_u47pxo6i CAN ACT - returning early, NO auto-pass (ID: autopass_1770782541869_zav5v)
2026-02-11T04:02:21.870Z [executeAutoPass] Broadcast complete (ID: autopass_1770782541703_vrqzs)
[AI] Cannot cast commander: Kynaios and Tiro of Meletis Cost: {"colors":{"W":1,"U":1,"B":0,"R":1,"G":1,"C":0},"generic":0,"hasX":false,"hybrid":[]} Available: {"white":0,"blue":0,"black":0,"red":0,"green":0,"colorless":0}
[AI] findCastableSpells: Checking 7 cards in hand
[AI] Available mana pool: { total: 0, colors: { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 } }
[AI] findCastableSpells: No castable spells. Reasons: [ 'Hour of Promise: need 5 mana (have 0), colors: {"W":0,"U":0,"B":0,"R":0,"G":1,"C":0}',
  'Minds Aglow: need 1 mana (have 0), colors: {"W":0,"U":1,"B":0,"R":0,"G":0,"C":0}',
  'Arcane Denial: no valid targets (needs 1, found 0)',
  'Edric, Spymaster of Trest: need 3 mana (have 0), colors: {"W":0,"U":1,"B":0,"R":0,"G":1,"C":0}',
  'Bring to Light: need 5 mana (have 0), colors: {"W":0,"U":1,"B":0,"R":0,"G":1,"C":0}' ]
[AI] Main phase, no more actions, passing priority
[AI] Passing priority: { gameId: 'game_mlhi50vs', playerId: 'p_anwtvwn9' }
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[TokenOptimization] Applied grouping: 10 ΓåÆ 9 entries, has grouped tokens with counts
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[TokenOptimization] Applied grouping: 10 ΓåÆ 9 entries, has grouped tokens with counts
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=UPKEEP, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 3, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 3
[getPlayableCardIds] Checking 4 cards in hand
[getPlayableCardIds] Card Brave the Elements (4c8ff6cd-e3ac-4024-aacb-86f7e1f43ba0_mlhi5a9m_1u_cce591fc) is playable
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 2 playable card(s): [ '4c8ff6cd-e3ac-4024-aacb-86f7e1f43ba0_mlhi5a9m_1u_cce591fc', 'perm_el826qea' ]
[normalizeViewForEmit] getPlayableCardIds returned 2 cards
[normalizeViewForEmit] Set view.playableCards with 2 cards
[canAct] p_u47pxo6i: step=UPKEEP, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Can cast instant/flash spell - returning TRUE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: Can cast instant/flash spell
[normalizeViewForEmit] Set canAct=true, canRespond=true
2026-02-11T04:02:22.196Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782542196_u82lm) ==========
2026-02-11T04:02:22.196Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: beginning, Step: UPKEEP
[canAct] p_u47pxo6i: step=UPKEEP, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Can cast instant/flash spell - returning TRUE
2026-02-11T04:02:22.196Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=true canAct=true (ID: autopass_1770782542196_u82lm)
2026-02-11T04:02:22.196Z [checkAndTriggerAutoPass] p_u47pxo6i CAN ACT - returning early, NO auto-pass (ID: autopass_1770782542196_u82lm)
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 4, firstKnown: [ false, false, false ] } } }
[TokenOptimization] Applied grouping: 10 ΓåÆ 9 entries, has grouped tokens with counts
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_anwtvwn9, viewerId=p_anwtvwn9, match=true
[getPlayableCardIds] Player p_anwtvwn9: step=UPKEEP, isMainPhase=false, stackIsEmpty=true, isMyTurn=false
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Arcane Denial blocked - no valid targets
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=false
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Kynaios and Tiro of Meletis not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_anwtvwn9: step=UPKEEP, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=false
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 4, firstKnown: [true, true, true ] } } }
[TokenOptimization] Applied grouping: 10 ΓåÆ 9 entries, has grouped tokens with counts
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_anwtvwn9, viewerId=p_u47pxo6i, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
2026-02-11T04:02:24.775Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782544775_xv3t6) ==========
2026-02-11T04:02:24.775Z [checkAndTriggerAutoPass] Priority: p_anwtvwn9, Phase: beginning, Step: UPKEEP
2026-02-11T04:02:24.775Z [checkAndTriggerAutoPass] p_anwtvwn9 is AI, handled separately (ID: autopass_1770782544775_xv3t6)
[AI] handleAIGameFlow: { gameId: 'game_mlhi50vs',
  playerId: 'p_anwtvwn9',
  phase: 'BEGINNING',
  step: 'UPKEEP',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: false,
  hasPriority: true }
[AI] AI player checking priority: { gameId: 'game_mlhi50vs',
  playerId: 'p_anwtvwn9',
  phase: 'beginning',
  step: 'upkeep',
  isAITurn: false,
  stackEmpty: true,
  priority: 'p_anwtvwn9',
  hasPriority: true }
[AI] AI has priority, proceeding with action
[AI] Not AI turn, passing priority
[AI] Passing priority: { gameId: 'game_mlhi50vs', playerId: 'p_anwtvwn9' }
[AI] All players passed priority with empty stack, advancing step
2026-02-11T04:02:25.392Z [nextStep] ========== CALLED ==========
2026-02-11T04:02:25.392Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:02:25.392Z [nextStep] Current: beginning/UPKEEP
2026-02-11T04:02:25.392Z [nextStep] Priority: p_u47pxo6i, Turn: p_u47pxo6i
2026-02-11T04:02:25.392Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4470:25)
        at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
        at async handleAIPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:2391:7)
2026-02-11T04:02:25.392Z [nextStep] Advanced to phase=beginning, step=DRAW
2026-02-11T04:02:25.393Z [nextStep] Drew 1 card(s) for p_u47pxo6i at draw step (base: 1, additional: 0)
2026-02-11T04:02:25.393Z [nextStep] Granting priority to active player p_u47pxo6i (step: DRAW, stack size: 0)
[canAct] p_u47pxo6i: step=DRAW, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Can cast instant/flash spell - returning TRUE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: Can cast instant/flash spell
2026-02-11T04:02:25.393Z [nextStep] DEBUG - Turn Player p_u47pxo6i:
2026-02-11T04:02:25.393Z [nextStep]   Hand (5): Helm of the Host, Heidegger, Shinra Executive, Ghostly Prison, Brave the Elements, Thousand Moons Smithy // Barracks of the Thousand
2026-02-11T04:02:25.393Z [nextStep]   canAct: true, canRespond: true
2026-02-11T04:02:25.393Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_u47pxo6i, turnPlayer: p_u47pxo6i
[canAct] p_u47pxo6i: step=DRAW, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Can cast instant/flash spell - returning TRUE
[priority] autoPassLoop - checking p_u47pxo6i (ACTIVE): canAct=true, stack.length=0, step=DRAW
[priority] autoPassLoop - stopping at p_u47pxo6i: active player can act
2026-02-11T04:02:25.393Z [nextStep] Auto-pass stopped, player p_u47pxo6i has priority
[AI] Advanced to next step for game game_mlhi50vs
[AI] Auto-pass loop stopping - human player p_u47pxo6i has priority
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 5, firstKnown: [ false, false, false ] } } }
[TokenOptimization] Applied grouping: 10 ΓåÆ 9 entries, has grouped tokens with counts
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 5, firstKnown: [true, true, true ] } } }
[TokenOptimization] Applied grouping: 10 ΓåÆ 9 entries, has grouped tokens with counts
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=DRAW, isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 3, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 3
[getPlayableCardIds] Checking 5 cards in hand
[getPlayableCardIds] Card Brave the Elements (4c8ff6cd-e3ac-4024-aacb-86f7e1f43ba0_mlhi5a9m_1u_cce591fc) is playable
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 2 playable card(s): [ '4c8ff6cd-e3ac-4024-aacb-86f7e1f43ba0_mlhi5a9m_1u_cce591fc', 'perm_el826qea' ]
[normalizeViewForEmit] getPlayableCardIds returned 2 cards
[normalizeViewForEmit] Set view.playableCards with 2 cards
[canAct] p_u47pxo6i: step=DRAW, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Can cast instant/flash spell - returning TRUE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: Can cast instant/flash spell
[normalizeViewForEmit] Set canAct=true, canRespond=true
2026-02-11T04:02:25.404Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782545404_1efcy) ==========
2026-02-11T04:02:25.404Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: beginning, Step: DRAW
[canAct] p_u47pxo6i: step=DRAW, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=true
[canAct] p_u47pxo6i: Can cast instant/flash spell - returning TRUE
2026-02-11T04:02:25.404Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=true canAct=true (ID: autopass_1770782545404_1efcy)
2026-02-11T04:02:25.404Z [checkAndTriggerAutoPass] p_u47pxo6i CAN ACT - returning early, NO auto-pass (ID: autopass_1770782545404_1efcy)
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 5, firstKnown: [ false, false, false ] } } }
[TokenOptimization] Applied grouping: 10 ΓåÆ 9 entries, has grouped tokens with counts
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_anwtvwn9, viewerId=p_anwtvwn9, match=true
[getPlayableCardIds] Player p_anwtvwn9: step=DRAW, isMainPhase=false, stackIsEmpty=true, isMyTurn=false
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 0
[getPlayableCardIds] Checking 7 cards in hand
[getPlayableCardIds] Card Arcane Denial blocked - no valid targets
[getPlayableCardIds] Not checking lands: isMainPhase=false, stackIsEmpty=true, isMyTurn=false
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Kynaios and Tiro of Meletis not playable - canCastNow=false, canPay=false
[getPlayableCardIds] Returning 0 playable card(s): []
[normalizeViewForEmit] getPlayableCardIds returned 0 cards
[normalizeViewForEmit] Not setting view.playableCards - no playable cards found
[canAct] p_anwtvwn9: step=DRAW, isMainPhase=false, stackIsEmpty=true, isTurnPlayer=false
[canAct] p_anwtvwn9: Not in main phase with empty stack (phase check failed or stack not empty) - returning FALSE
[canAct] p_anwtvwn9: No actions available - returning FALSE
[canRespond] p_anwtvwn9: checking instant-speed responses only
[canRespond] p_anwtvwn9: No instant-speed responses available (returning false)
[normalizeViewForEmit] Set canAct=false, canRespond=false
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 5, firstKnown: [true, true, true ] } } }
[TokenOptimization] Applied grouping: 10 ΓåÆ 9 entries, has grouped tokens with counts
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_anwtvwn9, viewerId=p_u47pxo6i, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
2026-02-11T04:02:27.181Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782547181_cc4w5) ==========
2026-02-11T04:02:27.181Z [checkAndTriggerAutoPass] Priority: p_anwtvwn9, Phase: beginning, Step: DRAW
2026-02-11T04:02:27.181Z [checkAndTriggerAutoPass] p_anwtvwn9 is AI, handled separately (ID: autopass_1770782547181_cc4w5)
[AI] handleAIGameFlow: { gameId: 'game_mlhi50vs',
  playerId: 'p_anwtvwn9',
  phase: 'BEGINNING',
  step: 'DRAW',
  hasCommander: true,
  hasHand: true,
  handCount: 7,
  isAITurn: false,
  hasPriority: true }
[AI] AI player checking priority: { gameId: 'game_mlhi50vs',
  playerId: 'p_anwtvwn9',
  phase: 'beginning',
  step: 'draw',
  isAITurn: false,
  stackEmpty: true,
  priority: 'p_anwtvwn9',
  hasPriority: true }
[AI] AI has priority, proceeding with action
[AI] Not AI turn, passing priority
[AI] Passing priority: { gameId: 'game_mlhi50vs', playerId: 'p_anwtvwn9' }
[AI] All players passed priority with empty stack, advancing step
2026-02-11T04:02:27.791Z [nextStep] ========== CALLED ==========
2026-02-11T04:02:27.791Z [nextStep] Game: game_mlhi50vs
2026-02-11T04:02:27.791Z [nextStep] Current: beginning/DRAW
2026-02-11T04:02:27.791Z [nextStep] Priority: p_u47pxo6i, Turn: p_u47pxo6i
2026-02-11T04:02:27.791Z [nextStep] Call stack:
        at Object.nextStep (D:\Git\MTGEDH\server\src\state\index.ts:90:21)
        at executePassPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:4470:25)
        at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
        at async handleAIPriority (D:\Git\MTGEDH\server\src\socket\ai.ts:2391:7)
2026-02-11T04:02:27.791Z [clearManaPool] Processed mana pools for all players
2026-02-11T04:02:27.791Z [nextStep] Advanced to phase=precombatMain, step=MAIN1
2026-02-11T04:02:27.791Z [nextStep] Checking precombat main triggers for p_u47pxo6i, found 0 trigger(s)
2026-02-11T04:02:27.791Z [nextStep] Granting priority to active player p_u47pxo6i (step: MAIN1, stack size: 0)
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 10 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Checking hand with 5 cards
[canPlayLand] p_u47pxo6i: Sample cards in hand: [Helm of the Host(Legendary Artifact ΓÇö), Heidegger, Shinra Executive(Legendary Creature ΓÇö), Ghostly Prison(Enchantment)]
[canPlayLand] p_u47pxo6i: Found land in hand: Thousand Moons Smithy // Barracks of the Thousand (Legendary Artifact // Legendary Artifact Land) - returning TRUE
[canAct] p_u47pxo6i: Turn player in main phase can play land - returning TRUE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: Can cast instant/flash spell
2026-02-11T04:02:27.791Z [nextStep] DEBUG - Turn Player p_u47pxo6i:
2026-02-11T04:02:27.791Z [nextStep]   Hand (5): Helm of the Host, Heidegger, Shinra Executive, Ghostly Prison, Brave the Elements, Thousand Moons Smithy // Barracks of the Thousand
2026-02-11T04:02:27.791Z [nextStep]   canAct: true, canRespond: true
2026-02-11T04:02:27.791Z [nextStep] Checking if auto-pass should apply after granting priority
[priority] autoPassLoop starting - active players: p_anwtvwn9, p_u47pxo6i, autoPassEnabled: p_u47pxo6i, p_anwtvwn9, currentPriority: p_u47pxo6i, turnPlayer: p_u47pxo6i
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 10 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Checking hand with 5 cards
[canPlayLand] p_u47pxo6i: Sample cards in hand: [Helm of the Host(Legendary Artifact ΓÇö), Heidegger, Shinra Executive(Legendary Creature ΓÇö), Ghostly Prison(Enchantment)]
[canPlayLand] p_u47pxo6i: Found land in hand: Thousand Moons Smithy // Barracks of the Thousand (Legendary Artifact // Legendary Artifact Land) - returning TRUE
[canAct] p_u47pxo6i: Turn player in main phase can play land - returning TRUE
[priority] autoPassLoop - checking p_u47pxo6i (ACTIVE): canAct=true, stack.length=0, step=MAIN1
[priority] autoPassLoop - stopping at p_u47pxo6i: active player can act
2026-02-11T04:02:27.792Z [nextStep] Auto-pass stopped, player p_u47pxo6i has priority
[AI] Advanced to next step for game game_mlhi50vs
[AI] Auto-pass loop stopping - human player p_u47pxo6i has priority
[VIEW_FOR_DEBUG] { viewer: 'p_anwtvwn9',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ true, true, true ] }, p_u47pxo6i: { handCount: 5, firstKnown: [ false, false, false ] } } }
[TokenOptimization] Applied grouping: 10 ΓåÆ 9 entries, has grouped tokens with counts
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_anwtvwn9, match=false
[normalizeViewForEmit] Skipping playable cards - viewer doesn't have priority
[VIEW_FOR_DEBUG] { viewer: 'p_u47pxo6i',
  stackLength: 0,
  stackItems: [],
  zones: { p_anwtvwn9: { handCount: 7, firstKnown: [ false, false, false ] }, p_u47pxo6i: { handCount: 5, firstKnown: [true, true, true ] } } }
[TokenOptimization] Applied grouping: 10 ΓåÆ 9 entries, has grouped tokens with counts
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking flowering of the white tree: { hasKarametra: false, hasAcolyte: false, fullCardName: 'flowering of the white tree' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking plains: { hasKarametra: false, hasAcolyte: false, fullCardName: 'plains' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier military program: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier military program' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking horn of gondor: { hasKarametra: false, hasAcolyte: false, fullCardName: 'horn of gondor' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'soldier' }
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[getDevotionManaAmount] Checking human soldier: { hasKarametra: false, hasAcolyte: false, fullCardName: 'human soldier'}
[getDevotionManaAmount] No match in KNOWN_DEVOTION_MANA_CARDS, trying dynamic detection
[normalizeViewForEmit] Checking playable cards: priority=p_u47pxo6i, viewerId=p_u47pxo6i, match=true
[getPlayableCardIds] Player p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isMyTurn=true
[getPlayableCardIds] manaPool= { white: 0, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] availableMana= { white: 3, blue: 0, black: 0, red: 0, green: 0, colorless: 0 }
[getPlayableCardIds] Total available mana: 3
[getPlayableCardIds] Checking 5 cards in hand
[getPlayableCardIds] Card Helm of the Host not playable - cannot pay cost {4} (after reduction: {"generic":4,"colors":{"W":0,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Heidegger, Shinra Executive not playable - cannot pay cost {3}{W} (after reduction: {"generic":3,"colors":{"W":1,"U":0,"B":0,"R":0,"G":0,"C":0},"hasX":false})
[getPlayableCardIds] Card Ghostly Prison (da3b83cb-f778-4096-9022-b1d6637354ff_mlhi5a9m_13_c314e8dc) is playable
[getPlayableCardIds] Card Brave the Elements (4c8ff6cd-e3ac-4024-aacb-86f7e1f43ba0_mlhi5a9m_1u_cce591fc) is playable
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 10 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[getPlayableCardIds] Checking lands: landsPlayed=0, max=1
[getPlayableCardIds] Land Thousand Moons Smithy // Barracks of the Thousand (4a6bec46-1acd-4726-b8d9-3045ac6a2ea2_mlhi5a9m_16_a53a83b3) is playable
[getPlayableCardIds] Checking 1 commanders in command zone
[getPlayableCardIds] Commander Myrel, Shield of Argive not playable - canCastNow=true, canPay=false
[getPlayableCardIds] Returning 4 playable card(s): [ 'da3b83cb-f778-4096-9022-b1d6637354ff_mlhi5a9m_13_c314e8dc',
  '4c8ff6cd-e3ac-4024-aacb-86f7e1f43ba0_mlhi5a9m_1u_cce591fc',
  '4a6bec46-1acd-4726-b8d9-3045ac6a2ea2_mlhi5a9m_16_a53a83b3',
  'perm_el826qea' ]
[normalizeViewForEmit] getPlayableCardIds returned 4 cards
[normalizeViewForEmit] Set view.playableCards with 4 cards
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 10 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Checking hand with 5 cards
[canPlayLand] p_u47pxo6i: Sample cards in hand: [Helm of the Host(Legendary Artifact ΓÇö), Heidegger, Shinra Executive(Legendary Creature ΓÇö), Ghostly Prison(Enchantment)]
[canPlayLand] p_u47pxo6i: Found land in hand: Thousand Moons Smithy // Barracks of the Thousand (Legendary Artifact // Legendary Artifact Land) - returning TRUE
[canAct] p_u47pxo6i: Turn player in main phase can play land - returning TRUE
[canRespond] p_u47pxo6i: checking instant-speed responses only
[canRespond] p_u47pxo6i: Can cast instant/flash spell
[normalizeViewForEmit] Set canAct=true, canRespond=true
2026-02-11T04:02:27.803Z [checkAndTriggerAutoPass] ========== CALLED (ID: autopass_1770782547803_odptr) ==========
2026-02-11T04:02:27.803Z [checkAndTriggerAutoPass] Priority: p_u47pxo6i, Phase: precombatMain, Step: MAIN1
[canAct] p_u47pxo6i: step=MAIN1, isMainPhase=true, stackIsEmpty=true, isTurnPlayer=true
[calculateMaxLandsPerTurn] Calculating for player p_u47pxo6i, battlefield has 10 permanents
[calculateMaxLandsPerTurn] Final result for p_u47pxo6i: 1 lands per turn
[canPlayLand] p_u47pxo6i: Checking hand with 5 cards
[canPlayLand] p_u47pxo6i: Sample cards in hand: [Helm of the Host(Legendary Artifact ΓÇö), Heidegger, Shinra Executive(Legendary Creature ΓÇö), Ghostly Prison(Enchantment)]
[canPlayLand] p_u47pxo6i: Found land in hand: Thousand Moons Smithy // Barracks of the Thousand (Legendary Artifact // Legendary Artifact Land) - returning TRUE
[canAct] p_u47pxo6i: Turn player in main phase can play land - returning TRUE
2026-02-11T04:02:27.803Z [checkAndTriggerAutoPass] canAct check: p_u47pxo6i isActive=true canAct=true (ID: autopass_1770782547803_odptr)
2026-02-11T04:02:27.803Z [checkAndTriggerAutoPass] p_u47pxo6i CAN ACT - returning early, NO auto-pass (ID: autopass_1770782547803_odptr)
[activateBattlefieldAbility] Processing ability b14eaeec-d7ce-462a-90d3-2ae5ff605fdb_mlhi5a9m_17_25ae84d4-ability-0 on Horn of Gondor
[activateBattlefieldAbility] Processing ability b14eaeec-d7ce-462a-90d3-2ae5ff605fdb_mlhi5a9m_17_25ae84d4-ability-0 on Horn of Gondor
